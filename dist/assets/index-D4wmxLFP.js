var B6=Object.defineProperty;var m_=e=>{throw TypeError(e)};var U6=(e,t,r)=>t in e?B6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var we=(e,t,r)=>U6(e,typeof t!="symbol"?t+"":t,r),g_=(e,t,r)=>t.has(e)||m_("Cannot "+r);var Dr=(e,t,r)=>(g_(e,t,"read from private field"),r?r.call(e):t.get(e)),Zs=(e,t,r)=>t.has(e)?m_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),qn=(e,t,r,n)=>(g_(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);function V6(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Wb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wE={exports:{}},Cg={},xE={exports:{}},Kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch=Symbol.for("react.element"),$6=Symbol.for("react.portal"),W6=Symbol.for("react.fragment"),z6=Symbol.for("react.strict_mode"),H6=Symbol.for("react.profiler"),q6=Symbol.for("react.provider"),K6=Symbol.for("react.context"),G6=Symbol.for("react.forward_ref"),Y6=Symbol.for("react.suspense"),J6=Symbol.for("react.memo"),Q6=Symbol.for("react.lazy"),v_=Symbol.iterator;function X6(e){return e===null||typeof e!="object"?null:(e=v_&&e[v_]||e["@@iterator"],typeof e=="function"?e:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SE=Object.assign,EE={};function Ru(e,t,r){this.props=e,this.context=t,this.refs=EE,this.updater=r||_E}Ru.prototype.isReactComponent={};Ru.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ru.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RE(){}RE.prototype=Ru.prototype;function zb(e,t,r){this.props=e,this.context=t,this.refs=EE,this.updater=r||_E}var Hb=zb.prototype=new RE;Hb.constructor=zb;SE(Hb,Ru.prototype);Hb.isPureReactComponent=!0;var y_=Array.isArray,kE=Object.prototype.hasOwnProperty,qb={current:null},CE={key:!0,ref:!0,__self:!0,__source:!0};function TE(e,t,r){var n,s={},i=null,c=null;if(t!=null)for(n in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(i=""+t.key),t)kE.call(t,n)&&!CE.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var d=Array(l),o=0;o<l;o++)d[o]=arguments[o+2];s.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ch,type:e,key:i,ref:c,props:s,_owner:qb.current}}function Z6(e,t){return{$$typeof:Ch,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ch}function ej(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var b_=/\/+/g;function Rv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ej(""+e.key):t.toString(36)}function rm(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(i){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Ch:case $6:c=!0}}if(c)return c=e,s=s(c),e=n===""?"."+Rv(c,0):n,y_(s)?(r="",e!=null&&(r=e.replace(b_,"$&/")+"/"),rm(s,t,r,"",function(o){return o})):s!=null&&(Kb(s)&&(s=Z6(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(b_,"$&/")+"/")+e)),t.push(s)),1;if(c=0,n=n===""?".":n+":",y_(e))for(var l=0;l<e.length;l++){i=e[l];var d=n+Rv(i,l);c+=rm(i,t,r,d,s)}else if(d=X6(e),typeof d=="function")for(e=d.call(e),l=0;!(i=e.next()).done;)i=i.value,d=n+Rv(i,l++),c+=rm(i,t,r,d,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function Ef(e,t,r){if(e==null)return e;var n=[],s=0;return rm(e,n,"","",function(i){return t.call(r,i,s++)}),n}function tj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Si={current:null},nm={transition:null},rj={ReactCurrentDispatcher:Si,ReactCurrentBatchConfig:nm,ReactCurrentOwner:qb};function PE(){throw Error("act(...) is not supported in production builds of React.")}Kr.Children={map:Ef,forEach:function(e,t,r){Ef(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ef(e,function(){t++}),t},toArray:function(e){return Ef(e,function(t){return t})||[]},only:function(e){if(!Kb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kr.Component=Ru;Kr.Fragment=W6;Kr.Profiler=H6;Kr.PureComponent=zb;Kr.StrictMode=z6;Kr.Suspense=Y6;Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rj;Kr.act=PE;Kr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=SE({},e.props),s=e.key,i=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,c=qb.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)kE.call(t,d)&&!CE.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){l=Array(d);for(var o=0;o<d;o++)l[o]=arguments[o+2];n.children=l}return{$$typeof:Ch,type:e.type,key:s,ref:i,props:n,_owner:c}};Kr.createContext=function(e){return e={$$typeof:K6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:q6,_context:e},e.Consumer=e};Kr.createElement=TE;Kr.createFactory=function(e){var t=TE.bind(null,e);return t.type=e,t};Kr.createRef=function(){return{current:null}};Kr.forwardRef=function(e){return{$$typeof:G6,render:e}};Kr.isValidElement=Kb;Kr.lazy=function(e){return{$$typeof:Q6,_payload:{_status:-1,_result:e},_init:tj}};Kr.memo=function(e,t){return{$$typeof:J6,type:e,compare:t===void 0?null:t}};Kr.startTransition=function(e){var t=nm.transition;nm.transition={};try{e()}finally{nm.transition=t}};Kr.unstable_act=PE;Kr.useCallback=function(e,t){return Si.current.useCallback(e,t)};Kr.useContext=function(e){return Si.current.useContext(e)};Kr.useDebugValue=function(){};Kr.useDeferredValue=function(e){return Si.current.useDeferredValue(e)};Kr.useEffect=function(e,t){return Si.current.useEffect(e,t)};Kr.useId=function(){return Si.current.useId()};Kr.useImperativeHandle=function(e,t,r){return Si.current.useImperativeHandle(e,t,r)};Kr.useInsertionEffect=function(e,t){return Si.current.useInsertionEffect(e,t)};Kr.useLayoutEffect=function(e,t){return Si.current.useLayoutEffect(e,t)};Kr.useMemo=function(e,t){return Si.current.useMemo(e,t)};Kr.useReducer=function(e,t,r){return Si.current.useReducer(e,t,r)};Kr.useRef=function(e){return Si.current.useRef(e)};Kr.useState=function(e){return Si.current.useState(e)};Kr.useSyncExternalStore=function(e,t,r){return Si.current.useSyncExternalStore(e,t,r)};Kr.useTransition=function(){return Si.current.useTransition()};Kr.version="18.3.1";xE.exports=Kr;var A=xE.exports;const pt=Wb(A),qc=V6({__proto__:null,default:pt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nj=A,sj=Symbol.for("react.element"),ij=Symbol.for("react.fragment"),aj=Object.prototype.hasOwnProperty,oj=nj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cj={key:!0,ref:!0,__self:!0,__source:!0};function NE(e,t,r){var n,s={},i=null,c=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(c=t.ref);for(n in t)aj.call(t,n)&&!cj.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:sj,type:e,key:i,ref:c,props:s,_owner:oj.current}}Cg.Fragment=ij;Cg.jsx=NE;Cg.jsxs=NE;wE.exports=Cg;var a=wE.exports,B0={},AE={exports:{}},Zi={},jE={exports:{}},OE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,I){var G=M.length;M.push(I);e:for(;0<G;){var de=G-1>>>1,ee=M[de];if(0<s(ee,I))M[de]=I,M[G]=ee,G=de;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var I=M[0],G=M.pop();if(G!==I){M[0]=G;e:for(var de=0,ee=M.length,Q=ee>>>1;de<Q;){var ae=2*(de+1)-1,xe=M[ae],Se=ae+1,ie=M[Se];if(0>s(xe,G))Se<ee&&0>s(ie,xe)?(M[de]=ie,M[Se]=G,de=Se):(M[de]=xe,M[ae]=G,de=ae);else if(Se<ee&&0>s(ie,G))M[de]=ie,M[Se]=G,de=Se;else break e}}return I}function s(M,I){var G=M.sortIndex-I.sortIndex;return G!==0?G:M.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var c=Date,l=c.now();e.unstable_now=function(){return c.now()-l}}var d=[],o=[],p=1,v=null,m=3,u=!1,b=!1,f=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var I=r(o);I!==null;){if(I.callback===null)n(o);else if(I.startTime<=M)n(o),I.sortIndex=I.expirationTime,t(d,I);else break;I=r(o)}}function x(M){if(f=!1,_(M),!b)if(r(d)!==null)b=!0,D(E);else{var I=r(o);I!==null&&L(x,I.startTime-M)}}function E(M,I){b=!1,f&&(f=!1,g(C),C=-1),u=!0;var G=m;try{for(_(I),v=r(d);v!==null&&(!(v.expirationTime>I)||M&&!S());){var de=v.callback;if(typeof de=="function"){v.callback=null,m=v.priorityLevel;var ee=de(v.expirationTime<=I);I=e.unstable_now(),typeof ee=="function"?v.callback=ee:v===r(d)&&n(d),_(I)}else n(d);v=r(d)}if(v!==null)var Q=!0;else{var ae=r(o);ae!==null&&L(x,ae.startTime-I),Q=!1}return Q}finally{v=null,m=G,u=!1}}var j=!1,R=null,C=-1,T=5,h=-1;function S(){return!(e.unstable_now()-h<T)}function k(){if(R!==null){var M=e.unstable_now();h=M;var I=!0;try{I=R(!0,M)}finally{I?P():(j=!1,R=null)}}else j=!1}var P;if(typeof y=="function")P=function(){y(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,O=N.port2;N.port1.onmessage=k,P=function(){O.postMessage(null)}}else P=function(){w(k,0)};function D(M){R=M,j||(j=!0,P())}function L(M,I){C=w(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||u||(b=!0,D(E))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var G=m;m=I;try{return M()}finally{m=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=m;m=M;try{return I()}finally{m=G}},e.unstable_scheduleCallback=function(M,I,G){var de=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?de+G:de):G=de,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,M={id:p++,callback:I,priorityLevel:M,startTime:G,expirationTime:ee,sortIndex:-1},G>de?(M.sortIndex=G,t(o,M),r(d)===null&&M===r(o)&&(f?(g(C),C=-1):f=!0,L(x,G-de))):(M.sortIndex=ee,t(d,M),b||u||(b=!0,D(E))),M},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(M){var I=m;return function(){var G=m;m=I;try{return M.apply(this,arguments)}finally{m=G}}}})(OE);jE.exports=OE;var lj=jE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dj=A,Xi=lj;function _t(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DE=new Set,qp={};function id(e,t){pu(e,t),pu(e+"Capture",t)}function pu(e,t){for(qp[e]=t,e=0;e<t.length;e++)DE.add(t[e])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U0=Object.prototype.hasOwnProperty,uj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w_={},x_={};function pj(e){return U0.call(x_,e)?!0:U0.call(w_,e)?!1:uj.test(e)?x_[e]=!0:(w_[e]=!0,!1)}function hj(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fj(e,t,r,n){if(t===null||typeof t>"u"||hj(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ei(e,t,r,n,s,i,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=c}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ni[e]=new Ei(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ni[t]=new Ei(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ni[e]=new Ei(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ni[e]=new Ei(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ni[e]=new Ei(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ni[e]=new Ei(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ni[e]=new Ei(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ni[e]=new Ei(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ni[e]=new Ei(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gb=/[\-:]([a-z])/g;function Yb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gb,Yb);ni[t]=new Ei(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gb,Yb);ni[t]=new Ei(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gb,Yb);ni[t]=new Ei(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ni[e]=new Ei(e,1,!1,e.toLowerCase(),null,!1,!1)});ni.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ni[e]=new Ei(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jb(e,t,r,n){var s=ni.hasOwnProperty(t)?ni[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fj(t,r,s,n)&&(r=null),n||s===null?pj(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Io=dj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rf=Symbol.for("react.element"),Ld=Symbol.for("react.portal"),Fd=Symbol.for("react.fragment"),Qb=Symbol.for("react.strict_mode"),V0=Symbol.for("react.profiler"),IE=Symbol.for("react.provider"),ME=Symbol.for("react.context"),Xb=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),W0=Symbol.for("react.suspense_list"),Zb=Symbol.for("react.memo"),bc=Symbol.for("react.lazy"),LE=Symbol.for("react.offscreen"),__=Symbol.iterator;function up(e){return e===null||typeof e!="object"?null:(e=__&&e[__]||e["@@iterator"],typeof e=="function"?e:null)}var ms=Object.assign,kv;function Ep(e){if(kv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kv=t&&t[1]||""}return`
`+kv+e}var Cv=!1;function Tv(e,t){if(!e||Cv)return"";Cv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(o){var n=o}Reflect.construct(e,[],t)}else{try{t.call()}catch(o){n=o}e.call(t.prototype)}else{try{throw Error()}catch(o){n=o}e()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var s=o.stack.split(`
`),i=n.stack.split(`
`),c=s.length-1,l=i.length-1;1<=c&&0<=l&&s[c]!==i[l];)l--;for(;1<=c&&0<=l;c--,l--)if(s[c]!==i[l]){if(c!==1||l!==1)do if(c--,l--,0>l||s[c]!==i[l]){var d=`
`+s[c].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=c&&0<=l);break}}}finally{Cv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ep(e):""}function mj(e){switch(e.tag){case 5:return Ep(e.type);case 16:return Ep("Lazy");case 13:return Ep("Suspense");case 19:return Ep("SuspenseList");case 0:case 2:case 15:return e=Tv(e.type,!1),e;case 11:return e=Tv(e.type.render,!1),e;case 1:return e=Tv(e.type,!0),e;default:return""}}function z0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fd:return"Fragment";case Ld:return"Portal";case V0:return"Profiler";case Qb:return"StrictMode";case $0:return"Suspense";case W0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ME:return(e.displayName||"Context")+".Consumer";case IE:return(e._context.displayName||"Context")+".Provider";case Xb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zb:return t=e.displayName||null,t!==null?t:z0(e.type)||"Memo";case bc:t=e._payload,e=e._init;try{return z0(e(t))}catch{}}return null}function gj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z0(t);case 8:return t===Qb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function FE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vj(e){var t=FE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){n=""+c,i.call(this,c)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kf(e){e._valueTracker||(e._valueTracker=vj(e))}function BE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=FE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function jm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function H0(e,t){var r=t.checked;return ms({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function S_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function UE(e,t){t=t.checked,t!=null&&Jb(e,"checked",t,!1)}function q0(e,t){UE(e,t);var r=Fc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?K0(e,t.type,r):t.hasOwnProperty("defaultValue")&&K0(e,t.type,Fc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function E_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function K0(e,t,r){(t!=="number"||jm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Rp=Array.isArray;function eu(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fc(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function G0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_t(91));return ms({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function R_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(_t(92));if(Rp(r)){if(1<r.length)throw Error(_t(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fc(r)}}function VE(e,t){var r=Fc(t.value),n=Fc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function k_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $E(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$E(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cf,WE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cf=Cf||document.createElement("div"),Cf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yj=["Webkit","ms","Moz","O"];Object.keys(jp).forEach(function(e){yj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jp[t]=jp[e]})});function zE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jp.hasOwnProperty(e)&&jp[e]?(""+t).trim():t+"px"}function HE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=zE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var bj=ms({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J0(e,t){if(t){if(bj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_t(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_t(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_t(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_t(62))}}function Q0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X0=null;function ew(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Z0=null,tu=null,ru=null;function C_(e){if(e=Nh(e)){if(typeof Z0!="function")throw Error(_t(280));var t=e.stateNode;t&&(t=jg(t),Z0(e.stateNode,e.type,t))}}function qE(e){tu?ru?ru.push(e):ru=[e]:tu=e}function KE(){if(tu){var e=tu,t=ru;if(ru=tu=null,C_(e),t)for(e=0;e<t.length;e++)C_(t[e])}}function GE(e,t){return e(t)}function YE(){}var Pv=!1;function JE(e,t,r){if(Pv)return e(t,r);Pv=!0;try{return GE(e,t,r)}finally{Pv=!1,(tu!==null||ru!==null)&&(YE(),KE())}}function Gp(e,t){var r=e.stateNode;if(r===null)return null;var n=jg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(_t(231,t,typeof r));return r}var ey=!1;if(ko)try{var pp={};Object.defineProperty(pp,"passive",{get:function(){ey=!0}}),window.addEventListener("test",pp,pp),window.removeEventListener("test",pp,pp)}catch{ey=!1}function wj(e,t,r,n,s,i,c,l,d){var o=Array.prototype.slice.call(arguments,3);try{t.apply(r,o)}catch(p){this.onError(p)}}var Op=!1,Om=null,Dm=!1,ty=null,xj={onError:function(e){Op=!0,Om=e}};function _j(e,t,r,n,s,i,c,l,d){Op=!1,Om=null,wj.apply(xj,arguments)}function Sj(e,t,r,n,s,i,c,l,d){if(_j.apply(this,arguments),Op){if(Op){var o=Om;Op=!1,Om=null}else throw Error(_t(198));Dm||(Dm=!0,ty=o)}}function ad(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function QE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T_(e){if(ad(e)!==e)throw Error(_t(188))}function Ej(e){var t=e.alternate;if(!t){if(t=ad(e),t===null)throw Error(_t(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return T_(s),e;if(i===n)return T_(s),t;i=i.sibling}throw Error(_t(188))}if(r.return!==n.return)r=s,n=i;else{for(var c=!1,l=s.child;l;){if(l===r){c=!0,r=s,n=i;break}if(l===n){c=!0,n=s,r=i;break}l=l.sibling}if(!c){for(l=i.child;l;){if(l===r){c=!0,r=i,n=s;break}if(l===n){c=!0,n=i,r=s;break}l=l.sibling}if(!c)throw Error(_t(189))}}if(r.alternate!==n)throw Error(_t(190))}if(r.tag!==3)throw Error(_t(188));return r.stateNode.current===r?e:t}function XE(e){return e=Ej(e),e!==null?ZE(e):null}function ZE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ZE(e);if(t!==null)return t;e=e.sibling}return null}var eR=Xi.unstable_scheduleCallback,P_=Xi.unstable_cancelCallback,Rj=Xi.unstable_shouldYield,kj=Xi.unstable_requestPaint,Rs=Xi.unstable_now,Cj=Xi.unstable_getCurrentPriorityLevel,tw=Xi.unstable_ImmediatePriority,tR=Xi.unstable_UserBlockingPriority,Im=Xi.unstable_NormalPriority,Tj=Xi.unstable_LowPriority,rR=Xi.unstable_IdlePriority,Tg=null,Xa=null;function Pj(e){if(Xa&&typeof Xa.onCommitFiberRoot=="function")try{Xa.onCommitFiberRoot(Tg,e,void 0,(e.current.flags&128)===128)}catch{}}var ja=Math.clz32?Math.clz32:jj,Nj=Math.log,Aj=Math.LN2;function jj(e){return e>>>=0,e===0?32:31-(Nj(e)/Aj|0)|0}var Tf=64,Pf=4194304;function kp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mm(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,c=r&268435455;if(c!==0){var l=c&~s;l!==0?n=kp(l):(i&=c,i!==0&&(n=kp(i)))}else c=r&~s,c!==0?n=kp(c):i!==0&&(n=kp(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ja(t),s=1<<r,n|=e[r],t&=~s;return n}function Oj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dj(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var c=31-ja(i),l=1<<c,d=s[c];d===-1?(!(l&r)||l&n)&&(s[c]=Oj(l,t)):d<=t&&(e.expiredLanes|=l),i&=~l}}function ry(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nR(){var e=Tf;return Tf<<=1,!(Tf&4194240)&&(Tf=64),e}function Nv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Th(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ja(t),e[t]=r}function Ij(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ja(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function rw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ja(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Tn=0;function sR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var iR,nw,aR,oR,cR,ny=!1,Nf=[],kc=null,Cc=null,Tc=null,Yp=new Map,Jp=new Map,xc=[],Mj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N_(e,t){switch(e){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Tc=null;break;case"pointerover":case"pointerout":Yp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jp.delete(t.pointerId)}}function hp(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Nh(t),t!==null&&nw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Lj(e,t,r,n,s){switch(t){case"focusin":return kc=hp(kc,e,t,r,n,s),!0;case"dragenter":return Cc=hp(Cc,e,t,r,n,s),!0;case"mouseover":return Tc=hp(Tc,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Yp.set(i,hp(Yp.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Jp.set(i,hp(Jp.get(i)||null,e,t,r,n,s)),!0}return!1}function lR(e){var t=Ml(e.target);if(t!==null){var r=ad(t);if(r!==null){if(t=r.tag,t===13){if(t=QE(r),t!==null){e.blockedOn=t,cR(e.priority,function(){aR(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=sy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);X0=n,r.target.dispatchEvent(n),X0=null}else return t=Nh(r),t!==null&&nw(t),e.blockedOn=r,!1;t.shift()}return!0}function A_(e,t,r){sm(e)&&r.delete(t)}function Fj(){ny=!1,kc!==null&&sm(kc)&&(kc=null),Cc!==null&&sm(Cc)&&(Cc=null),Tc!==null&&sm(Tc)&&(Tc=null),Yp.forEach(A_),Jp.forEach(A_)}function fp(e,t){e.blockedOn===t&&(e.blockedOn=null,ny||(ny=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,Fj)))}function Qp(e){function t(s){return fp(s,e)}if(0<Nf.length){fp(Nf[0],e);for(var r=1;r<Nf.length;r++){var n=Nf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(kc!==null&&fp(kc,e),Cc!==null&&fp(Cc,e),Tc!==null&&fp(Tc,e),Yp.forEach(t),Jp.forEach(t),r=0;r<xc.length;r++)n=xc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<xc.length&&(r=xc[0],r.blockedOn===null);)lR(r),r.blockedOn===null&&xc.shift()}var nu=Io.ReactCurrentBatchConfig,Lm=!0;function Bj(e,t,r,n){var s=Tn,i=nu.transition;nu.transition=null;try{Tn=1,sw(e,t,r,n)}finally{Tn=s,nu.transition=i}}function Uj(e,t,r,n){var s=Tn,i=nu.transition;nu.transition=null;try{Tn=4,sw(e,t,r,n)}finally{Tn=s,nu.transition=i}}function sw(e,t,r,n){if(Lm){var s=sy(e,t,r,n);if(s===null)Uv(e,t,n,Fm,r),N_(e,n);else if(Lj(s,e,t,r,n))n.stopPropagation();else if(N_(e,n),t&4&&-1<Mj.indexOf(e)){for(;s!==null;){var i=Nh(s);if(i!==null&&iR(i),i=sy(e,t,r,n),i===null&&Uv(e,t,n,Fm,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Uv(e,t,n,null,r)}}var Fm=null;function sy(e,t,r,n){if(Fm=null,e=ew(n),e=Ml(e),e!==null)if(t=ad(e),t===null)e=null;else if(r=t.tag,r===13){if(e=QE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fm=e,null}function dR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cj()){case tw:return 1;case tR:return 4;case Im:case Tj:return 16;case rR:return 536870912;default:return 16}default:return 16}}var Sc=null,iw=null,im=null;function uR(){if(im)return im;var e,t=iw,r=t.length,n,s="value"in Sc?Sc.value:Sc.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var c=r-e;for(n=1;n<=c&&t[r-n]===s[i-n];n++);return im=s.slice(e,1<n?1-n:void 0)}function am(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Af(){return!0}function j_(){return!1}function ea(e){function t(r,n,s,i,c){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=c,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Af:j_,this.isPropagationStopped=j_,this}return ms(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Af)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Af)},persist:function(){},isPersistent:Af}),t}var ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aw=ea(ku),Ph=ms({},ku,{view:0,detail:0}),Vj=ea(Ph),Av,jv,mp,Pg=ms({},Ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ow,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mp&&(mp&&e.type==="mousemove"?(Av=e.screenX-mp.screenX,jv=e.screenY-mp.screenY):jv=Av=0,mp=e),Av)},movementY:function(e){return"movementY"in e?e.movementY:jv}}),O_=ea(Pg),$j=ms({},Pg,{dataTransfer:0}),Wj=ea($j),zj=ms({},Ph,{relatedTarget:0}),Ov=ea(zj),Hj=ms({},ku,{animationName:0,elapsedTime:0,pseudoElement:0}),qj=ea(Hj),Kj=ms({},ku,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gj=ea(Kj),Yj=ms({},ku,{data:0}),D_=ea(Yj),Jj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xj[e])?!!t[e]:!1}function ow(){return Zj}var eO=ms({},Ph,{key:function(e){if(e.key){var t=Jj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=am(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ow,charCode:function(e){return e.type==="keypress"?am(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?am(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tO=ea(eO),rO=ms({},Pg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I_=ea(rO),nO=ms({},Ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ow}),sO=ea(nO),iO=ms({},ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),aO=ea(iO),oO=ms({},Pg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cO=ea(oO),lO=[9,13,27,32],cw=ko&&"CompositionEvent"in window,Dp=null;ko&&"documentMode"in document&&(Dp=document.documentMode);var dO=ko&&"TextEvent"in window&&!Dp,pR=ko&&(!cw||Dp&&8<Dp&&11>=Dp),M_=" ",L_=!1;function hR(e,t){switch(e){case"keyup":return lO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bd=!1;function uO(e,t){switch(e){case"compositionend":return fR(t);case"keypress":return t.which!==32?null:(L_=!0,M_);case"textInput":return e=t.data,e===M_&&L_?null:e;default:return null}}function pO(e,t){if(Bd)return e==="compositionend"||!cw&&hR(e,t)?(e=uR(),im=iw=Sc=null,Bd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pR&&t.locale!=="ko"?null:t.data;default:return null}}var hO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hO[e.type]:t==="textarea"}function mR(e,t,r,n){qE(n),t=Bm(t,"onChange"),0<t.length&&(r=new aw("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ip=null,Xp=null;function fO(e){kR(e,0)}function Ng(e){var t=$d(e);if(BE(t))return e}function mO(e,t){if(e==="change")return t}var gR=!1;if(ko){var Dv;if(ko){var Iv="oninput"in document;if(!Iv){var B_=document.createElement("div");B_.setAttribute("oninput","return;"),Iv=typeof B_.oninput=="function"}Dv=Iv}else Dv=!1;gR=Dv&&(!document.documentMode||9<document.documentMode)}function U_(){Ip&&(Ip.detachEvent("onpropertychange",vR),Xp=Ip=null)}function vR(e){if(e.propertyName==="value"&&Ng(Xp)){var t=[];mR(t,Xp,e,ew(e)),JE(fO,t)}}function gO(e,t,r){e==="focusin"?(U_(),Ip=t,Xp=r,Ip.attachEvent("onpropertychange",vR)):e==="focusout"&&U_()}function vO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ng(Xp)}function yO(e,t){if(e==="click")return Ng(t)}function bO(e,t){if(e==="input"||e==="change")return Ng(t)}function wO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Da=typeof Object.is=="function"?Object.is:wO;function Zp(e,t){if(Da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!U0.call(t,s)||!Da(e[s],t[s]))return!1}return!0}function V_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $_(e,t){var r=V_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=V_(r)}}function yR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bR(){for(var e=window,t=jm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=jm(e.document)}return t}function lw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xO(e){var t=bR(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&yR(r.ownerDocument.documentElement,r)){if(n!==null&&lw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=$_(r,i);var c=$_(r,n);s&&c&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _O=ko&&"documentMode"in document&&11>=document.documentMode,Ud=null,iy=null,Mp=null,ay=!1;function W_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ay||Ud==null||Ud!==jm(n)||(n=Ud,"selectionStart"in n&&lw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mp&&Zp(Mp,n)||(Mp=n,n=Bm(iy,"onSelect"),0<n.length&&(t=new aw("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ud)))}function jf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vd={animationend:jf("Animation","AnimationEnd"),animationiteration:jf("Animation","AnimationIteration"),animationstart:jf("Animation","AnimationStart"),transitionend:jf("Transition","TransitionEnd")},Mv={},wR={};ko&&(wR=document.createElement("div").style,"AnimationEvent"in window||(delete Vd.animationend.animation,delete Vd.animationiteration.animation,delete Vd.animationstart.animation),"TransitionEvent"in window||delete Vd.transitionend.transition);function Ag(e){if(Mv[e])return Mv[e];if(!Vd[e])return e;var t=Vd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in wR)return Mv[e]=t[r];return e}var xR=Ag("animationend"),_R=Ag("animationiteration"),SR=Ag("animationstart"),ER=Ag("transitionend"),RR=new Map,z_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kc(e,t){RR.set(e,t),id(t,[e])}for(var Lv=0;Lv<z_.length;Lv++){var Fv=z_[Lv],SO=Fv.toLowerCase(),EO=Fv[0].toUpperCase()+Fv.slice(1);Kc(SO,"on"+EO)}Kc(xR,"onAnimationEnd");Kc(_R,"onAnimationIteration");Kc(SR,"onAnimationStart");Kc("dblclick","onDoubleClick");Kc("focusin","onFocus");Kc("focusout","onBlur");Kc(ER,"onTransitionEnd");pu("onMouseEnter",["mouseout","mouseover"]);pu("onMouseLeave",["mouseout","mouseover"]);pu("onPointerEnter",["pointerout","pointerover"]);pu("onPointerLeave",["pointerout","pointerover"]);id("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));id("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));id("onBeforeInput",["compositionend","keypress","textInput","paste"]);id("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));id("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));id("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cp));function H_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Sj(n,t,void 0,e),e.currentTarget=null}function kR(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var c=n.length-1;0<=c;c--){var l=n[c],d=l.instance,o=l.currentTarget;if(l=l.listener,d!==i&&s.isPropagationStopped())break e;H_(s,l,o),i=d}else for(c=0;c<n.length;c++){if(l=n[c],d=l.instance,o=l.currentTarget,l=l.listener,d!==i&&s.isPropagationStopped())break e;H_(s,l,o),i=d}}}if(Dm)throw e=ty,Dm=!1,ty=null,e}function Gn(e,t){var r=t[uy];r===void 0&&(r=t[uy]=new Set);var n=e+"__bubble";r.has(n)||(CR(t,e,2,!1),r.add(n))}function Bv(e,t,r){var n=0;t&&(n|=4),CR(r,e,n,t)}var Of="_reactListening"+Math.random().toString(36).slice(2);function eh(e){if(!e[Of]){e[Of]=!0,DE.forEach(function(r){r!=="selectionchange"&&(RO.has(r)||Bv(r,!1,e),Bv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Of]||(t[Of]=!0,Bv("selectionchange",!1,t))}}function CR(e,t,r,n){switch(dR(t)){case 1:var s=Bj;break;case 4:s=Uj;break;default:s=sw}r=s.bind(null,t,r,e),s=void 0,!ey||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Uv(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(c===4)for(c=n.return;c!==null;){var d=c.tag;if((d===3||d===4)&&(d=c.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;c=c.return}for(;l!==null;){if(c=Ml(l),c===null)return;if(d=c.tag,d===5||d===6){n=i=c;continue e}l=l.parentNode}}n=n.return}JE(function(){var o=i,p=ew(r),v=[];e:{var m=RR.get(e);if(m!==void 0){var u=aw,b=e;switch(e){case"keypress":if(am(r)===0)break e;case"keydown":case"keyup":u=tO;break;case"focusin":b="focus",u=Ov;break;case"focusout":b="blur",u=Ov;break;case"beforeblur":case"afterblur":u=Ov;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=O_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=Wj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=sO;break;case xR:case _R:case SR:u=qj;break;case ER:u=aO;break;case"scroll":u=Vj;break;case"wheel":u=cO;break;case"copy":case"cut":case"paste":u=Gj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=I_}var f=(t&4)!==0,w=!f&&e==="scroll",g=f?m!==null?m+"Capture":null:m;f=[];for(var y=o,_;y!==null;){_=y;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,g!==null&&(x=Gp(y,g),x!=null&&f.push(th(y,x,_)))),w)break;y=y.return}0<f.length&&(m=new u(m,b,null,r,p),v.push({event:m,listeners:f}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",u=e==="mouseout"||e==="pointerout",m&&r!==X0&&(b=r.relatedTarget||r.fromElement)&&(Ml(b)||b[Co]))break e;if((u||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,u?(b=r.relatedTarget||r.toElement,u=o,b=b?Ml(b):null,b!==null&&(w=ad(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(u=null,b=o),u!==b)){if(f=O_,x="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(f=I_,x="onPointerLeave",g="onPointerEnter",y="pointer"),w=u==null?m:$d(u),_=b==null?m:$d(b),m=new f(x,y+"leave",u,r,p),m.target=w,m.relatedTarget=_,x=null,Ml(p)===o&&(f=new f(g,y+"enter",b,r,p),f.target=_,f.relatedTarget=w,x=f),w=x,u&&b)t:{for(f=u,g=b,y=0,_=f;_;_=Od(_))y++;for(_=0,x=g;x;x=Od(x))_++;for(;0<y-_;)f=Od(f),y--;for(;0<_-y;)g=Od(g),_--;for(;y--;){if(f===g||g!==null&&f===g.alternate)break t;f=Od(f),g=Od(g)}f=null}else f=null;u!==null&&q_(v,m,u,f,!1),b!==null&&w!==null&&q_(v,w,b,f,!0)}}e:{if(m=o?$d(o):window,u=m.nodeName&&m.nodeName.toLowerCase(),u==="select"||u==="input"&&m.type==="file")var E=mO;else if(F_(m))if(gR)E=bO;else{E=vO;var j=gO}else(u=m.nodeName)&&u.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=yO);if(E&&(E=E(e,o))){mR(v,E,r,p);break e}j&&j(e,m,o),e==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&K0(m,"number",m.value)}switch(j=o?$d(o):window,e){case"focusin":(F_(j)||j.contentEditable==="true")&&(Ud=j,iy=o,Mp=null);break;case"focusout":Mp=iy=Ud=null;break;case"mousedown":ay=!0;break;case"contextmenu":case"mouseup":case"dragend":ay=!1,W_(v,r,p);break;case"selectionchange":if(_O)break;case"keydown":case"keyup":W_(v,r,p)}var R;if(cw)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Bd?hR(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(pR&&r.locale!=="ko"&&(Bd||C!=="onCompositionStart"?C==="onCompositionEnd"&&Bd&&(R=uR()):(Sc=p,iw="value"in Sc?Sc.value:Sc.textContent,Bd=!0)),j=Bm(o,C),0<j.length&&(C=new D_(C,e,null,r,p),v.push({event:C,listeners:j}),R?C.data=R:(R=fR(r),R!==null&&(C.data=R)))),(R=dO?uO(e,r):pO(e,r))&&(o=Bm(o,"onBeforeInput"),0<o.length&&(p=new D_("onBeforeInput","beforeinput",null,r,p),v.push({event:p,listeners:o}),p.data=R))}kR(v,t)})}function th(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Bm(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gp(e,r),i!=null&&n.unshift(th(e,i,s)),i=Gp(e,t),i!=null&&n.push(th(e,i,s))),e=e.return}return n}function Od(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function q_(e,t,r,n,s){for(var i=t._reactName,c=[];r!==null&&r!==n;){var l=r,d=l.alternate,o=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&o!==null&&(l=o,s?(d=Gp(r,i),d!=null&&c.unshift(th(r,d,l))):s||(d=Gp(r,i),d!=null&&c.push(th(r,d,l)))),r=r.return}c.length!==0&&e.push({event:t,listeners:c})}var kO=/\r\n?/g,CO=/\u0000|\uFFFD/g;function K_(e){return(typeof e=="string"?e:""+e).replace(kO,`
`).replace(CO,"")}function Df(e,t,r){if(t=K_(t),K_(e)!==t&&r)throw Error(_t(425))}function Um(){}var oy=null,cy=null;function ly(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dy=typeof setTimeout=="function"?setTimeout:void 0,TO=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,PO=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(e){return G_.resolve(null).then(e).catch(NO)}:dy;function NO(e){setTimeout(function(){throw e})}function Vv(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Qp(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Qp(t)}function Pc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Y_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Cu=Math.random().toString(36).slice(2),Ka="__reactFiber$"+Cu,rh="__reactProps$"+Cu,Co="__reactContainer$"+Cu,uy="__reactEvents$"+Cu,AO="__reactListeners$"+Cu,jO="__reactHandles$"+Cu;function Ml(e){var t=e[Ka];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Co]||r[Ka]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Y_(e);e!==null;){if(r=e[Ka])return r;e=Y_(e)}return t}e=r,r=e.parentNode}return null}function Nh(e){return e=e[Ka]||e[Co],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $d(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_t(33))}function jg(e){return e[rh]||null}var py=[],Wd=-1;function Gc(e){return{current:e}}function Yn(e){0>Wd||(e.current=py[Wd],py[Wd]=null,Wd--)}function $n(e,t){Wd++,py[Wd]=e.current,e.current=t}var Bc={},fi=Gc(Bc),Li=Gc(!1),Gl=Bc;function hu(e,t){var r=e.type.contextTypes;if(!r)return Bc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fi(e){return e=e.childContextTypes,e!=null}function Vm(){Yn(Li),Yn(fi)}function J_(e,t,r){if(fi.current!==Bc)throw Error(_t(168));$n(fi,t),$n(Li,r)}function TR(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(_t(108,gj(e)||"Unknown",s));return ms({},r,n)}function $m(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bc,Gl=fi.current,$n(fi,e),$n(Li,Li.current),!0}function Q_(e,t,r){var n=e.stateNode;if(!n)throw Error(_t(169));r?(e=TR(e,t,Gl),n.__reactInternalMemoizedMergedChildContext=e,Yn(Li),Yn(fi),$n(fi,e)):Yn(Li),$n(Li,r)}var xo=null,Og=!1,$v=!1;function PR(e){xo===null?xo=[e]:xo.push(e)}function OO(e){Og=!0,PR(e)}function Yc(){if(!$v&&xo!==null){$v=!0;var e=0,t=Tn;try{var r=xo;for(Tn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}xo=null,Og=!1}catch(s){throw xo!==null&&(xo=xo.slice(e+1)),eR(tw,Yc),s}finally{Tn=t,$v=!1}}return null}var zd=[],Hd=0,Wm=null,zm=0,da=[],ua=0,Yl=null,_o=1,So="";function jl(e,t){zd[Hd++]=zm,zd[Hd++]=Wm,Wm=e,zm=t}function NR(e,t,r){da[ua++]=_o,da[ua++]=So,da[ua++]=Yl,Yl=e;var n=_o;e=So;var s=32-ja(n)-1;n&=~(1<<s),r+=1;var i=32-ja(t)+s;if(30<i){var c=s-s%5;i=(n&(1<<c)-1).toString(32),n>>=c,s-=c,_o=1<<32-ja(t)+s|r<<s|n,So=i+e}else _o=1<<i|r<<s|n,So=e}function dw(e){e.return!==null&&(jl(e,1),NR(e,1,0))}function uw(e){for(;e===Wm;)Wm=zd[--Hd],zd[Hd]=null,zm=zd[--Hd],zd[Hd]=null;for(;e===Yl;)Yl=da[--ua],da[ua]=null,So=da[--ua],da[ua]=null,_o=da[--ua],da[ua]=null}var Ji=null,Yi=null,ts=!1,Ta=null;function AR(e,t){var r=ha(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function X_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ji=e,Yi=Pc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ji=e,Yi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yl!==null?{id:_o,overflow:So}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ha(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ji=e,Yi=null,!0):!1;default:return!1}}function hy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fy(e){if(ts){var t=Yi;if(t){var r=t;if(!X_(e,t)){if(hy(e))throw Error(_t(418));t=Pc(r.nextSibling);var n=Ji;t&&X_(e,t)?AR(n,r):(e.flags=e.flags&-4097|2,ts=!1,Ji=e)}}else{if(hy(e))throw Error(_t(418));e.flags=e.flags&-4097|2,ts=!1,Ji=e}}}function Z_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ji=e}function If(e){if(e!==Ji)return!1;if(!ts)return Z_(e),ts=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ly(e.type,e.memoizedProps)),t&&(t=Yi)){if(hy(e))throw jR(),Error(_t(418));for(;t;)AR(e,t),t=Pc(t.nextSibling)}if(Z_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_t(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yi=Pc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yi=null}}else Yi=Ji?Pc(e.stateNode.nextSibling):null;return!0}function jR(){for(var e=Yi;e;)e=Pc(e.nextSibling)}function fu(){Yi=Ji=null,ts=!1}function pw(e){Ta===null?Ta=[e]:Ta.push(e)}var DO=Io.ReactCurrentBatchConfig;function gp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(_t(309));var n=r.stateNode}if(!n)throw Error(_t(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(c){var l=s.refs;c===null?delete l[i]:l[i]=c},t._stringRef=i,t)}if(typeof e!="string")throw Error(_t(284));if(!r._owner)throw Error(_t(290,e))}return e}function Mf(e,t){throw e=Object.prototype.toString.call(t),Error(_t(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function e1(e){var t=e._init;return t(e._payload)}function OR(e){function t(g,y){if(e){var _=g.deletions;_===null?(g.deletions=[y],g.flags|=16):_.push(y)}}function r(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=Oc(g,y),g.index=0,g.sibling=null,g}function i(g,y,_){return g.index=_,e?(_=g.alternate,_!==null?(_=_.index,_<y?(g.flags|=2,y):_):(g.flags|=2,y)):(g.flags|=1048576,y)}function c(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,y,_,x){return y===null||y.tag!==6?(y=Yv(_,g.mode,x),y.return=g,y):(y=s(y,_),y.return=g,y)}function d(g,y,_,x){var E=_.type;return E===Fd?p(g,y,_.props.children,x,_.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===bc&&e1(E)===y.type)?(x=s(y,_.props),x.ref=gp(g,y,_),x.return=g,x):(x=hm(_.type,_.key,_.props,null,g.mode,x),x.ref=gp(g,y,_),x.return=g,x)}function o(g,y,_,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Jv(_,g.mode,x),y.return=g,y):(y=s(y,_.children||[]),y.return=g,y)}function p(g,y,_,x,E){return y===null||y.tag!==7?(y=Wl(_,g.mode,x,E),y.return=g,y):(y=s(y,_),y.return=g,y)}function v(g,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yv(""+y,g.mode,_),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rf:return _=hm(y.type,y.key,y.props,null,g.mode,_),_.ref=gp(g,null,y),_.return=g,_;case Ld:return y=Jv(y,g.mode,_),y.return=g,y;case bc:var x=y._init;return v(g,x(y._payload),_)}if(Rp(y)||up(y))return y=Wl(y,g.mode,_,null),y.return=g,y;Mf(g,y)}return null}function m(g,y,_,x){var E=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:l(g,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Rf:return _.key===E?d(g,y,_,x):null;case Ld:return _.key===E?o(g,y,_,x):null;case bc:return E=_._init,m(g,y,E(_._payload),x)}if(Rp(_)||up(_))return E!==null?null:p(g,y,_,x,null);Mf(g,_)}return null}function u(g,y,_,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(_)||null,l(y,g,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rf:return g=g.get(x.key===null?_:x.key)||null,d(y,g,x,E);case Ld:return g=g.get(x.key===null?_:x.key)||null,o(y,g,x,E);case bc:var j=x._init;return u(g,y,_,j(x._payload),E)}if(Rp(x)||up(x))return g=g.get(_)||null,p(y,g,x,E,null);Mf(y,x)}return null}function b(g,y,_,x){for(var E=null,j=null,R=y,C=y=0,T=null;R!==null&&C<_.length;C++){R.index>C?(T=R,R=null):T=R.sibling;var h=m(g,R,_[C],x);if(h===null){R===null&&(R=T);break}e&&R&&h.alternate===null&&t(g,R),y=i(h,y,C),j===null?E=h:j.sibling=h,j=h,R=T}if(C===_.length)return r(g,R),ts&&jl(g,C),E;if(R===null){for(;C<_.length;C++)R=v(g,_[C],x),R!==null&&(y=i(R,y,C),j===null?E=R:j.sibling=R,j=R);return ts&&jl(g,C),E}for(R=n(g,R);C<_.length;C++)T=u(R,g,C,_[C],x),T!==null&&(e&&T.alternate!==null&&R.delete(T.key===null?C:T.key),y=i(T,y,C),j===null?E=T:j.sibling=T,j=T);return e&&R.forEach(function(S){return t(g,S)}),ts&&jl(g,C),E}function f(g,y,_,x){var E=up(_);if(typeof E!="function")throw Error(_t(150));if(_=E.call(_),_==null)throw Error(_t(151));for(var j=E=null,R=y,C=y=0,T=null,h=_.next();R!==null&&!h.done;C++,h=_.next()){R.index>C?(T=R,R=null):T=R.sibling;var S=m(g,R,h.value,x);if(S===null){R===null&&(R=T);break}e&&R&&S.alternate===null&&t(g,R),y=i(S,y,C),j===null?E=S:j.sibling=S,j=S,R=T}if(h.done)return r(g,R),ts&&jl(g,C),E;if(R===null){for(;!h.done;C++,h=_.next())h=v(g,h.value,x),h!==null&&(y=i(h,y,C),j===null?E=h:j.sibling=h,j=h);return ts&&jl(g,C),E}for(R=n(g,R);!h.done;C++,h=_.next())h=u(R,g,C,h.value,x),h!==null&&(e&&h.alternate!==null&&R.delete(h.key===null?C:h.key),y=i(h,y,C),j===null?E=h:j.sibling=h,j=h);return e&&R.forEach(function(k){return t(g,k)}),ts&&jl(g,C),E}function w(g,y,_,x){if(typeof _=="object"&&_!==null&&_.type===Fd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Rf:e:{for(var E=_.key,j=y;j!==null;){if(j.key===E){if(E=_.type,E===Fd){if(j.tag===7){r(g,j.sibling),y=s(j,_.props.children),y.return=g,g=y;break e}}else if(j.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===bc&&e1(E)===j.type){r(g,j.sibling),y=s(j,_.props),y.ref=gp(g,j,_),y.return=g,g=y;break e}r(g,j);break}else t(g,j);j=j.sibling}_.type===Fd?(y=Wl(_.props.children,g.mode,x,_.key),y.return=g,g=y):(x=hm(_.type,_.key,_.props,null,g.mode,x),x.ref=gp(g,y,_),x.return=g,g=x)}return c(g);case Ld:e:{for(j=_.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){r(g,y.sibling),y=s(y,_.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else t(g,y);y=y.sibling}y=Jv(_,g.mode,x),y.return=g,g=y}return c(g);case bc:return j=_._init,w(g,y,j(_._payload),x)}if(Rp(_))return b(g,y,_,x);if(up(_))return f(g,y,_,x);Mf(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(r(g,y.sibling),y=s(y,_),y.return=g,g=y):(r(g,y),y=Yv(_,g.mode,x),y.return=g,g=y),c(g)):r(g,y)}return w}var mu=OR(!0),DR=OR(!1),Hm=Gc(null),qm=null,qd=null,hw=null;function fw(){hw=qd=qm=null}function mw(e){var t=Hm.current;Yn(Hm),e._currentValue=t}function my(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function su(e,t){qm=e,hw=qd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ii=!0),e.firstContext=null)}function va(e){var t=e._currentValue;if(hw!==e)if(e={context:e,memoizedValue:t,next:null},qd===null){if(qm===null)throw Error(_t(308));qd=e,qm.dependencies={lanes:0,firstContext:e}}else qd=qd.next=e;return t}var Ll=null;function gw(e){Ll===null?Ll=[e]:Ll.push(e)}function IR(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,gw(t)):(r.next=s.next,s.next=r),t.interleaved=r,To(e,n)}function To(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wc=!1;function vw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Eo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,vn&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,To(e,r)}return s=n.interleaved,s===null?(t.next=t,gw(n)):(t.next=s.next,s.next=t),n.interleaved=t,To(e,r)}function om(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rw(e,r)}}function t1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=c:i=i.next=c,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Km(e,t,r,n){var s=e.updateQueue;wc=!1;var i=s.firstBaseUpdate,c=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,o=d.next;d.next=null,c===null?i=o:c.next=o,c=d;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==c&&(l===null?p.firstBaseUpdate=o:l.next=o,p.lastBaseUpdate=d))}if(i!==null){var v=s.baseState;c=0,p=o=d=null,l=i;do{var m=l.lane,u=l.eventTime;if((n&m)===m){p!==null&&(p=p.next={eventTime:u,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,f=l;switch(m=t,u=r,f.tag){case 1:if(b=f.payload,typeof b=="function"){v=b.call(u,v,m);break e}v=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=f.payload,m=typeof b=="function"?b.call(u,v,m):b,m==null)break e;v=ms({},v,m);break e;case 2:wc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else u={eventTime:u,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(o=p=u,d=v):p=p.next=u,c|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(d=v),s.baseState=d,s.firstBaseUpdate=o,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do c|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ql|=c,e.lanes=c,e.memoizedState=v}}function r1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(_t(191,s));s.call(n)}}}var Ah={},Za=Gc(Ah),nh=Gc(Ah),sh=Gc(Ah);function Fl(e){if(e===Ah)throw Error(_t(174));return e}function yw(e,t){switch($n(sh,t),$n(nh,e),$n(Za,Ah),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Y0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Y0(t,e)}Yn(Za),$n(Za,t)}function gu(){Yn(Za),Yn(nh),Yn(sh)}function LR(e){Fl(sh.current);var t=Fl(Za.current),r=Y0(t,e.type);t!==r&&($n(nh,e),$n(Za,r))}function bw(e){nh.current===e&&(Yn(Za),Yn(nh))}var ls=Gc(0);function Gm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wv=[];function ww(){for(var e=0;e<Wv.length;e++)Wv[e]._workInProgressVersionPrimary=null;Wv.length=0}var cm=Io.ReactCurrentDispatcher,zv=Io.ReactCurrentBatchConfig,Jl=0,fs=null,Ms=null,qs=null,Ym=!1,Lp=!1,ih=0,IO=0;function li(){throw Error(_t(321))}function xw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Da(e[r],t[r]))return!1;return!0}function _w(e,t,r,n,s,i){if(Jl=i,fs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cm.current=e===null||e.memoizedState===null?BO:UO,e=r(n,s),Lp){i=0;do{if(Lp=!1,ih=0,25<=i)throw Error(_t(301));i+=1,qs=Ms=null,t.updateQueue=null,cm.current=VO,e=r(n,s)}while(Lp)}if(cm.current=Jm,t=Ms!==null&&Ms.next!==null,Jl=0,qs=Ms=fs=null,Ym=!1,t)throw Error(_t(300));return e}function Sw(){var e=ih!==0;return ih=0,e}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qs===null?fs.memoizedState=qs=e:qs=qs.next=e,qs}function ya(){if(Ms===null){var e=fs.alternate;e=e!==null?e.memoizedState:null}else e=Ms.next;var t=qs===null?fs.memoizedState:qs.next;if(t!==null)qs=t,Ms=e;else{if(e===null)throw Error(_t(310));Ms=e,e={memoizedState:Ms.memoizedState,baseState:Ms.baseState,baseQueue:Ms.baseQueue,queue:Ms.queue,next:null},qs===null?fs.memoizedState=qs=e:qs=qs.next=e}return qs}function ah(e,t){return typeof t=="function"?t(e):t}function Hv(e){var t=ya(),r=t.queue;if(r===null)throw Error(_t(311));r.lastRenderedReducer=e;var n=Ms,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var c=s.next;s.next=i.next,i.next=c}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=c=null,d=null,o=i;do{var p=o.lane;if((Jl&p)===p)d!==null&&(d=d.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:e(n,o.action);else{var v={lane:p,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};d===null?(l=d=v,c=n):d=d.next=v,fs.lanes|=p,Ql|=p}o=o.next}while(o!==null&&o!==i);d===null?c=n:d.next=l,Da(n,t.memoizedState)||(Ii=!0),t.memoizedState=n,t.baseState=c,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,fs.lanes|=i,Ql|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function qv(e){var t=ya(),r=t.queue;if(r===null)throw Error(_t(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var c=s=s.next;do i=e(i,c.action),c=c.next;while(c!==s);Da(i,t.memoizedState)||(Ii=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function FR(){}function BR(e,t){var r=fs,n=ya(),s=t(),i=!Da(n.memoizedState,s);if(i&&(n.memoizedState=s,Ii=!0),n=n.queue,Ew($R.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||qs!==null&&qs.memoizedState.tag&1){if(r.flags|=2048,oh(9,VR.bind(null,r,n,s,t),void 0,null),Ks===null)throw Error(_t(349));Jl&30||UR(r,t,s)}return s}function UR(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fs.updateQueue,t===null?(t={lastEffect:null,stores:null},fs.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function VR(e,t,r,n){t.value=r,t.getSnapshot=n,WR(t)&&zR(e)}function $R(e,t,r){return r(function(){WR(t)&&zR(e)})}function WR(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Da(e,r)}catch{return!0}}function zR(e){var t=To(e,1);t!==null&&Oa(t,e,1,-1)}function n1(e){var t=qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ah,lastRenderedState:e},t.queue=e,e=e.dispatch=FO.bind(null,fs,e),[t.memoizedState,e]}function oh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=fs.updateQueue,t===null?(t={lastEffect:null,stores:null},fs.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function HR(){return ya().memoizedState}function lm(e,t,r,n){var s=qa();fs.flags|=e,s.memoizedState=oh(1|t,r,void 0,n===void 0?null:n)}function Dg(e,t,r,n){var s=ya();n=n===void 0?null:n;var i=void 0;if(Ms!==null){var c=Ms.memoizedState;if(i=c.destroy,n!==null&&xw(n,c.deps)){s.memoizedState=oh(t,r,i,n);return}}fs.flags|=e,s.memoizedState=oh(1|t,r,i,n)}function s1(e,t){return lm(8390656,8,e,t)}function Ew(e,t){return Dg(2048,8,e,t)}function qR(e,t){return Dg(4,2,e,t)}function KR(e,t){return Dg(4,4,e,t)}function GR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function YR(e,t,r){return r=r!=null?r.concat([e]):null,Dg(4,4,GR.bind(null,t,e),r)}function Rw(){}function JR(e,t){var r=ya();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function QR(e,t){var r=ya();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function XR(e,t,r){return Jl&21?(Da(r,t)||(r=nR(),fs.lanes|=r,Ql|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ii=!0),e.memoizedState=r)}function MO(e,t){var r=Tn;Tn=r!==0&&4>r?r:4,e(!0);var n=zv.transition;zv.transition={};try{e(!1),t()}finally{Tn=r,zv.transition=n}}function ZR(){return ya().memoizedState}function LO(e,t,r){var n=jc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ek(e))tk(t,r);else if(r=IR(e,t,r,n),r!==null){var s=_i();Oa(r,e,n,s),rk(r,t,n)}}function FO(e,t,r){var n=jc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ek(e))tk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var c=t.lastRenderedState,l=i(c,r);if(s.hasEagerState=!0,s.eagerState=l,Da(l,c)){var d=t.interleaved;d===null?(s.next=s,gw(t)):(s.next=d.next,d.next=s),t.interleaved=s;return}}catch{}finally{}r=IR(e,t,s,n),r!==null&&(s=_i(),Oa(r,e,n,s),rk(r,t,n))}}function ek(e){var t=e.alternate;return e===fs||t!==null&&t===fs}function tk(e,t){Lp=Ym=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function rk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,rw(e,r)}}var Jm={readContext:va,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useInsertionEffect:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useSyncExternalStore:li,useId:li,unstable_isNewReconciler:!1},BO={readContext:va,useCallback:function(e,t){return qa().memoizedState=[e,t===void 0?null:t],e},useContext:va,useEffect:s1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,lm(4194308,4,GR.bind(null,t,e),r)},useLayoutEffect:function(e,t){return lm(4194308,4,e,t)},useInsertionEffect:function(e,t){return lm(4,2,e,t)},useMemo:function(e,t){var r=qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=qa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=LO.bind(null,fs,e),[n.memoizedState,e]},useRef:function(e){var t=qa();return e={current:e},t.memoizedState=e},useState:n1,useDebugValue:Rw,useDeferredValue:function(e){return qa().memoizedState=e},useTransition:function(){var e=n1(!1),t=e[0];return e=MO.bind(null,e[1]),qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=fs,s=qa();if(ts){if(r===void 0)throw Error(_t(407));r=r()}else{if(r=t(),Ks===null)throw Error(_t(349));Jl&30||UR(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,s1($R.bind(null,n,i,e),[e]),n.flags|=2048,oh(9,VR.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=qa(),t=Ks.identifierPrefix;if(ts){var r=So,n=_o;r=(n&~(1<<32-ja(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ih++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=IO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},UO={readContext:va,useCallback:JR,useContext:va,useEffect:Ew,useImperativeHandle:YR,useInsertionEffect:qR,useLayoutEffect:KR,useMemo:QR,useReducer:Hv,useRef:HR,useState:function(){return Hv(ah)},useDebugValue:Rw,useDeferredValue:function(e){var t=ya();return XR(t,Ms.memoizedState,e)},useTransition:function(){var e=Hv(ah)[0],t=ya().memoizedState;return[e,t]},useMutableSource:FR,useSyncExternalStore:BR,useId:ZR,unstable_isNewReconciler:!1},VO={readContext:va,useCallback:JR,useContext:va,useEffect:Ew,useImperativeHandle:YR,useInsertionEffect:qR,useLayoutEffect:KR,useMemo:QR,useReducer:qv,useRef:HR,useState:function(){return qv(ah)},useDebugValue:Rw,useDeferredValue:function(e){var t=ya();return Ms===null?t.memoizedState=e:XR(t,Ms.memoizedState,e)},useTransition:function(){var e=qv(ah)[0],t=ya().memoizedState;return[e,t]},useMutableSource:FR,useSyncExternalStore:BR,useId:ZR,unstable_isNewReconciler:!1};function Ra(e,t){if(e&&e.defaultProps){t=ms({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ms({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ig={isMounted:function(e){return(e=e._reactInternals)?ad(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_i(),s=jc(e),i=Eo(n,s);i.payload=t,r!=null&&(i.callback=r),t=Nc(e,i,s),t!==null&&(Oa(t,e,s,n),om(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_i(),s=jc(e),i=Eo(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Nc(e,i,s),t!==null&&(Oa(t,e,s,n),om(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_i(),n=jc(e),s=Eo(r,n);s.tag=2,t!=null&&(s.callback=t),t=Nc(e,s,n),t!==null&&(Oa(t,e,n,r),om(t,e,n))}};function i1(e,t,r,n,s,i,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,c):t.prototype&&t.prototype.isPureReactComponent?!Zp(r,n)||!Zp(s,i):!0}function nk(e,t,r){var n=!1,s=Bc,i=t.contextType;return typeof i=="object"&&i!==null?i=va(i):(s=Fi(t)?Gl:fi.current,n=t.contextTypes,i=(n=n!=null)?hu(e,s):Bc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ig,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function a1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ig.enqueueReplaceState(t,t.state,null)}function vy(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},vw(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=va(i):(i=Fi(t)?Gl:fi.current,s.context=hu(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(gy(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ig.enqueueReplaceState(s,s.state,null),Km(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function vu(e,t){try{var r="",n=t;do r+=mj(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Kv(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function yy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $O=typeof WeakMap=="function"?WeakMap:Map;function sk(e,t,r){r=Eo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xm||(Xm=!0,Ty=n),yy(e,t)},r}function ik(e,t,r){r=Eo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){yy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){yy(e,t),typeof n!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),r}function o1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new $O;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=rD.bind(null,e,t,r),t.then(e,e))}function c1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function l1(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Eo(-1,1),t.tag=2,Nc(r,t,1))),r.lanes|=1),e)}var WO=Io.ReactCurrentOwner,Ii=!1;function yi(e,t,r,n){t.child=e===null?DR(t,null,r,n):mu(t,e.child,r,n)}function d1(e,t,r,n,s){r=r.render;var i=t.ref;return su(t,s),n=_w(e,t,r,n,i,s),r=Sw(),e!==null&&!Ii?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Po(e,t,s)):(ts&&r&&dw(t),t.flags|=1,yi(e,t,n,s),t.child)}function u1(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Ow(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ak(e,t,i,n,s)):(e=hm(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var c=i.memoizedProps;if(r=r.compare,r=r!==null?r:Zp,r(c,n)&&e.ref===t.ref)return Po(e,t,s)}return t.flags|=1,e=Oc(i,n),e.ref=t.ref,e.return=t,t.child=e}function ak(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Zp(i,n)&&e.ref===t.ref)if(Ii=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ii=!0);else return t.lanes=e.lanes,Po(e,t,s)}return by(e,t,r,n,s)}function ok(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Gd,Ki),Ki|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$n(Gd,Ki),Ki|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$n(Gd,Ki),Ki|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,$n(Gd,Ki),Ki|=n;return yi(e,t,s,r),t.child}function ck(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function by(e,t,r,n,s){var i=Fi(r)?Gl:fi.current;return i=hu(t,i),su(t,s),r=_w(e,t,r,n,i,s),n=Sw(),e!==null&&!Ii?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Po(e,t,s)):(ts&&n&&dw(t),t.flags|=1,yi(e,t,r,s),t.child)}function p1(e,t,r,n,s){if(Fi(r)){var i=!0;$m(t)}else i=!1;if(su(t,s),t.stateNode===null)dm(e,t),nk(t,r,n),vy(t,r,n,s),n=!0;else if(e===null){var c=t.stateNode,l=t.memoizedProps;c.props=l;var d=c.context,o=r.contextType;typeof o=="object"&&o!==null?o=va(o):(o=Fi(r)?Gl:fi.current,o=hu(t,o));var p=r.getDerivedStateFromProps,v=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function";v||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(l!==n||d!==o)&&a1(t,c,n,o),wc=!1;var m=t.memoizedState;c.state=m,Km(t,n,c,s),d=t.memoizedState,l!==n||m!==d||Li.current||wc?(typeof p=="function"&&(gy(t,r,p,n),d=t.memoizedState),(l=wc||i1(t,r,l,n,m,d,o))?(v||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),c.props=n,c.state=d,c.context=o,n=l):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{c=t.stateNode,MR(e,t),l=t.memoizedProps,o=t.type===t.elementType?l:Ra(t.type,l),c.props=o,v=t.pendingProps,m=c.context,d=r.contextType,typeof d=="object"&&d!==null?d=va(d):(d=Fi(r)?Gl:fi.current,d=hu(t,d));var u=r.getDerivedStateFromProps;(p=typeof u=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(l!==v||m!==d)&&a1(t,c,n,d),wc=!1,m=t.memoizedState,c.state=m,Km(t,n,c,s);var b=t.memoizedState;l!==v||m!==b||Li.current||wc?(typeof u=="function"&&(gy(t,r,u,n),b=t.memoizedState),(o=wc||i1(t,r,o,n,m,b,d)||!1)?(p||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,b,d),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,b,d)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),c.props=n,c.state=b,c.context=d,n=o):(typeof c.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return wy(e,t,r,n,i,s)}function wy(e,t,r,n,s,i){ck(e,t);var c=(t.flags&128)!==0;if(!n&&!c)return s&&Q_(t,r,!1),Po(e,t,i);n=t.stateNode,WO.current=t;var l=c&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&c?(t.child=mu(t,e.child,null,i),t.child=mu(t,null,l,i)):yi(e,t,l,i),t.memoizedState=n.state,s&&Q_(t,r,!0),t.child}function lk(e){var t=e.stateNode;t.pendingContext?J_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&J_(e,t.context,!1),yw(e,t.containerInfo)}function h1(e,t,r,n,s){return fu(),pw(s),t.flags|=256,yi(e,t,r,n),t.child}var xy={dehydrated:null,treeContext:null,retryLane:0};function _y(e){return{baseLanes:e,cachePool:null,transitions:null}}function dk(e,t,r){var n=t.pendingProps,s=ls.current,i=!1,c=(t.flags&128)!==0,l;if((l=c)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$n(ls,s&1),e===null)return fy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=n.children,e=n.fallback,i?(n=t.mode,i=t.child,c={mode:"hidden",children:c},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=c):i=Fg(c,n,0,null),e=Wl(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_y(r),t.memoizedState=xy,e):kw(t,c));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zO(e,t,c,n,l,s,r);if(i){i=n.fallback,c=t.mode,s=e.child,l=s.sibling;var d={mode:"hidden",children:n.children};return!(c&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Oc(s,d),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Oc(l,i):(i=Wl(i,c,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,c=e.child.memoizedState,c=c===null?_y(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},i.memoizedState=c,i.childLanes=e.childLanes&~r,t.memoizedState=xy,n}return i=e.child,e=i.sibling,n=Oc(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function kw(e,t){return t=Fg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lf(e,t,r,n){return n!==null&&pw(n),mu(t,e.child,null,r),e=kw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zO(e,t,r,n,s,i,c){if(r)return t.flags&256?(t.flags&=-257,n=Kv(Error(_t(422))),Lf(e,t,c,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Fg({mode:"visible",children:n.children},s,0,null),i=Wl(i,s,c,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&mu(t,e.child,null,c),t.child.memoizedState=_y(c),t.memoizedState=xy,i);if(!(t.mode&1))return Lf(e,t,c,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(_t(419)),n=Kv(i,n,void 0),Lf(e,t,c,n)}if(l=(c&e.childLanes)!==0,Ii||l){if(n=Ks,n!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|c)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,To(e,s),Oa(n,e,s,-1))}return jw(),n=Kv(Error(_t(421))),Lf(e,t,c,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=nD.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Yi=Pc(s.nextSibling),Ji=t,ts=!0,Ta=null,e!==null&&(da[ua++]=_o,da[ua++]=So,da[ua++]=Yl,_o=e.id,So=e.overflow,Yl=t),t=kw(t,n.children),t.flags|=4096,t)}function f1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),my(e.return,t,r)}function Gv(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function uk(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(yi(e,t,n.children,r),n=ls.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&f1(e,r,t);else if(e.tag===19)f1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($n(ls,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Gm(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Gv(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gm(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Gv(t,!0,r,null,i);break;case"together":Gv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Po(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ql|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_t(153));if(t.child!==null){for(e=t.child,r=Oc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Oc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function HO(e,t,r){switch(t.tag){case 3:lk(t),fu();break;case 5:LR(t);break;case 1:Fi(t.type)&&$m(t);break;case 4:yw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;$n(Hm,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($n(ls,ls.current&1),t.flags|=128,null):r&t.child.childLanes?dk(e,t,r):($n(ls,ls.current&1),e=Po(e,t,r),e!==null?e.sibling:null);$n(ls,ls.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return uk(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$n(ls,ls.current),n)break;return null;case 22:case 23:return t.lanes=0,ok(e,t,r)}return Po(e,t,r)}var pk,Sy,hk,fk;pk=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sy=function(){};hk=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Fl(Za.current);var i=null;switch(r){case"input":s=H0(e,s),n=H0(e,n),i=[];break;case"select":s=ms({},s,{value:void 0}),n=ms({},n,{value:void 0}),i=[];break;case"textarea":s=G0(e,s),n=G0(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Um)}J0(r,n);var c;r=null;for(o in s)if(!n.hasOwnProperty(o)&&s.hasOwnProperty(o)&&s[o]!=null)if(o==="style"){var l=s[o];for(c in l)l.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qp.hasOwnProperty(o)?i||(i=[]):(i=i||[]).push(o,null));for(o in n){var d=n[o];if(l=s!=null?s[o]:void 0,n.hasOwnProperty(o)&&d!==l&&(d!=null||l!=null))if(o==="style")if(l){for(c in l)!l.hasOwnProperty(c)||d&&d.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in d)d.hasOwnProperty(c)&&l[c]!==d[c]&&(r||(r={}),r[c]=d[c])}else r||(i||(i=[]),i.push(o,r)),r=d;else o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(o,d)):o==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(o,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(qp.hasOwnProperty(o)?(d!=null&&o==="onScroll"&&Gn("scroll",e),i||l===d||(i=[])):(i=i||[]).push(o,d))}r&&(i=i||[]).push("style",r);var o=i;(t.updateQueue=o)&&(t.flags|=4)}};fk=function(e,t,r,n){r!==n&&(t.flags|=4)};function vp(e,t){if(!ts)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function di(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function qO(e,t,r){var n=t.pendingProps;switch(uw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(t),null;case 1:return Fi(t.type)&&Vm(),di(t),null;case 3:return n=t.stateNode,gu(),Yn(Li),Yn(fi),ww(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(If(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ta!==null&&(Ay(Ta),Ta=null))),Sy(e,t),di(t),null;case 5:bw(t);var s=Fl(sh.current);if(r=t.type,e!==null&&t.stateNode!=null)hk(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(_t(166));return di(t),null}if(e=Fl(Za.current),If(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ka]=t,n[rh]=i,e=(t.mode&1)!==0,r){case"dialog":Gn("cancel",n),Gn("close",n);break;case"iframe":case"object":case"embed":Gn("load",n);break;case"video":case"audio":for(s=0;s<Cp.length;s++)Gn(Cp[s],n);break;case"source":Gn("error",n);break;case"img":case"image":case"link":Gn("error",n),Gn("load",n);break;case"details":Gn("toggle",n);break;case"input":S_(n,i),Gn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Gn("invalid",n);break;case"textarea":R_(n,i),Gn("invalid",n)}J0(r,i),s=null;for(var c in i)if(i.hasOwnProperty(c)){var l=i[c];c==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Df(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Df(n.textContent,l,e),s=["children",""+l]):qp.hasOwnProperty(c)&&l!=null&&c==="onScroll"&&Gn("scroll",n)}switch(r){case"input":kf(n),E_(n,i,!0);break;case"textarea":kf(n),k_(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Um)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$E(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),r==="select"&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[Ka]=t,e[rh]=n,pk(e,t,!1,!1),t.stateNode=e;e:{switch(c=Q0(r,n),r){case"dialog":Gn("cancel",e),Gn("close",e),s=n;break;case"iframe":case"object":case"embed":Gn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Cp.length;s++)Gn(Cp[s],e);s=n;break;case"source":Gn("error",e),s=n;break;case"img":case"image":case"link":Gn("error",e),Gn("load",e),s=n;break;case"details":Gn("toggle",e),s=n;break;case"input":S_(e,n),s=H0(e,n),Gn("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ms({},n,{value:void 0}),Gn("invalid",e);break;case"textarea":R_(e,n),s=G0(e,n),Gn("invalid",e);break;default:s=n}J0(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?HE(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&WE(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Kp(e,d):typeof d=="number"&&Kp(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qp.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Gn("scroll",e):d!=null&&Jb(e,i,d,c))}switch(r){case"input":kf(e),E_(e,n,!1);break;case"textarea":kf(e),k_(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fc(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?eu(e,!!n.multiple,i,!1):n.defaultValue!=null&&eu(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Um)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return di(t),null;case 6:if(e&&t.stateNode!=null)fk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_t(166));if(r=Fl(sh.current),Fl(Za.current),If(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ka]=t,(i=n.nodeValue!==r)&&(e=Ji,e!==null))switch(e.tag){case 3:Df(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Df(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ka]=t,t.stateNode=n}return di(t),null;case 13:if(Yn(ls),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ts&&Yi!==null&&t.mode&1&&!(t.flags&128))jR(),fu(),t.flags|=98560,i=!1;else if(i=If(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(_t(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_t(317));i[Ka]=t}else fu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;di(t),i=!1}else Ta!==null&&(Ay(Ta),Ta=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ls.current&1?Ls===0&&(Ls=3):jw())),t.updateQueue!==null&&(t.flags|=4),di(t),null);case 4:return gu(),Sy(e,t),e===null&&eh(t.stateNode.containerInfo),di(t),null;case 10:return mw(t.type._context),di(t),null;case 17:return Fi(t.type)&&Vm(),di(t),null;case 19:if(Yn(ls),i=t.memoizedState,i===null)return di(t),null;if(n=(t.flags&128)!==0,c=i.rendering,c===null)if(n)vp(i,!1);else{if(Ls!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Gm(e),c!==null){for(t.flags|=128,vp(i,!1),n=c.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,c=i.alternate,c===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,e=c.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $n(ls,ls.current&1|2),t.child}e=e.sibling}i.tail!==null&&Rs()>yu&&(t.flags|=128,n=!0,vp(i,!1),t.lanes=4194304)}else{if(!n)if(e=Gm(c),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!c.alternate&&!ts)return di(t),null}else 2*Rs()-i.renderingStartTime>yu&&r!==1073741824&&(t.flags|=128,n=!0,vp(i,!1),t.lanes=4194304);i.isBackwards?(c.sibling=t.child,t.child=c):(r=i.last,r!==null?r.sibling=c:t.child=c,i.last=c)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Rs(),t.sibling=null,r=ls.current,$n(ls,n?r&1|2:r&1),t):(di(t),null);case 22:case 23:return Aw(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ki&1073741824&&(di(t),t.subtreeFlags&6&&(t.flags|=8192)):di(t),null;case 24:return null;case 25:return null}throw Error(_t(156,t.tag))}function KO(e,t){switch(uw(t),t.tag){case 1:return Fi(t.type)&&Vm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gu(),Yn(Li),Yn(fi),ww(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bw(t),null;case 13:if(Yn(ls),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_t(340));fu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yn(ls),null;case 4:return gu(),null;case 10:return mw(t.type._context),null;case 22:case 23:return Aw(),null;case 24:return null;default:return null}}var Ff=!1,ui=!1,GO=typeof WeakSet=="function"?WeakSet:Set,nr=null;function Kd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ys(e,t,n)}else r.current=null}function Ey(e,t,r){try{r()}catch(n){ys(e,t,n)}}var m1=!1;function YO(e,t){if(oy=Lm,e=bR(),lw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var c=0,l=-1,d=-1,o=0,p=0,v=e,m=null;t:for(;;){for(var u;v!==r||s!==0&&v.nodeType!==3||(l=c+s),v!==i||n!==0&&v.nodeType!==3||(d=c+n),v.nodeType===3&&(c+=v.nodeValue.length),(u=v.firstChild)!==null;)m=v,v=u;for(;;){if(v===e)break t;if(m===r&&++o===s&&(l=c),m===i&&++p===n&&(d=c),(u=v.nextSibling)!==null)break;v=m,m=v.parentNode}v=u}r=l===-1||d===-1?null:{start:l,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(cy={focusedElem:e,selectionRange:r},Lm=!1,nr=t;nr!==null;)if(t=nr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nr=e;else for(;nr!==null;){t=nr;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var f=b.memoizedProps,w=b.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?f:Ra(t.type,f),w);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_t(163))}}catch(x){ys(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,nr=e;break}nr=t.return}return b=m1,m1=!1,b}function Fp(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ey(t,r,i)}s=s.next}while(s!==n)}}function Mg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ry(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mk(e){var t=e.alternate;t!==null&&(e.alternate=null,mk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ka],delete t[rh],delete t[uy],delete t[AO],delete t[jO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gk(e){return e.tag===5||e.tag===3||e.tag===4}function g1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ky(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Um));else if(n!==4&&(e=e.child,e!==null))for(ky(e,t,r),e=e.sibling;e!==null;)ky(e,t,r),e=e.sibling}function Cy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Cy(e,t,r),e=e.sibling;e!==null;)Cy(e,t,r),e=e.sibling}var ei=null,ka=!1;function pc(e,t,r){for(r=r.child;r!==null;)vk(e,t,r),r=r.sibling}function vk(e,t,r){if(Xa&&typeof Xa.onCommitFiberUnmount=="function")try{Xa.onCommitFiberUnmount(Tg,r)}catch{}switch(r.tag){case 5:ui||Kd(r,t);case 6:var n=ei,s=ka;ei=null,pc(e,t,r),ei=n,ka=s,ei!==null&&(ka?(e=ei,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ei.removeChild(r.stateNode));break;case 18:ei!==null&&(ka?(e=ei,r=r.stateNode,e.nodeType===8?Vv(e.parentNode,r):e.nodeType===1&&Vv(e,r),Qp(e)):Vv(ei,r.stateNode));break;case 4:n=ei,s=ka,ei=r.stateNode.containerInfo,ka=!0,pc(e,t,r),ei=n,ka=s;break;case 0:case 11:case 14:case 15:if(!ui&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,c=i.destroy;i=i.tag,c!==void 0&&(i&2||i&4)&&Ey(r,t,c),s=s.next}while(s!==n)}pc(e,t,r);break;case 1:if(!ui&&(Kd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ys(r,t,l)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:r.mode&1?(ui=(n=ui)||r.memoizedState!==null,pc(e,t,r),ui=n):pc(e,t,r);break;default:pc(e,t,r)}}function v1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new GO),t.forEach(function(n){var s=sD.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function xa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,c=t,l=c;e:for(;l!==null;){switch(l.tag){case 5:ei=l.stateNode,ka=!1;break e;case 3:ei=l.stateNode.containerInfo,ka=!0;break e;case 4:ei=l.stateNode.containerInfo,ka=!0;break e}l=l.return}if(ei===null)throw Error(_t(160));vk(i,c,s),ei=null,ka=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(o){ys(s,t,o)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yk(t,e),t=t.sibling}function yk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xa(t,e),za(e),n&4){try{Fp(3,e,e.return),Mg(3,e)}catch(f){ys(e,e.return,f)}try{Fp(5,e,e.return)}catch(f){ys(e,e.return,f)}}break;case 1:xa(t,e),za(e),n&512&&r!==null&&Kd(r,r.return);break;case 5:if(xa(t,e),za(e),n&512&&r!==null&&Kd(r,r.return),e.flags&32){var s=e.stateNode;try{Kp(s,"")}catch(f){ys(e,e.return,f)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,c=r!==null?r.memoizedProps:i,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&UE(s,i),Q0(l,c);var o=Q0(l,i);for(c=0;c<d.length;c+=2){var p=d[c],v=d[c+1];p==="style"?HE(s,v):p==="dangerouslySetInnerHTML"?WE(s,v):p==="children"?Kp(s,v):Jb(s,p,v,o)}switch(l){case"input":q0(s,i);break;case"textarea":VE(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var u=i.value;u!=null?eu(s,!!i.multiple,u,!1):m!==!!i.multiple&&(i.defaultValue!=null?eu(s,!!i.multiple,i.defaultValue,!0):eu(s,!!i.multiple,i.multiple?[]:"",!1))}s[rh]=i}catch(f){ys(e,e.return,f)}}break;case 6:if(xa(t,e),za(e),n&4){if(e.stateNode===null)throw Error(_t(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){ys(e,e.return,f)}}break;case 3:if(xa(t,e),za(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qp(t.containerInfo)}catch(f){ys(e,e.return,f)}break;case 4:xa(t,e),za(e);break;case 13:xa(t,e),za(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pw=Rs())),n&4&&v1(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(ui=(o=ui)||p,xa(t,e),ui=o):xa(t,e),za(e),n&8192){if(o=e.memoizedState!==null,(e.stateNode.isHidden=o)&&!p&&e.mode&1)for(nr=e,p=e.child;p!==null;){for(v=nr=p;nr!==null;){switch(m=nr,u=m.child,m.tag){case 0:case 11:case 14:case 15:Fp(4,m,m.return);break;case 1:Kd(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(f){ys(n,r,f)}}break;case 5:Kd(m,m.return);break;case 22:if(m.memoizedState!==null){b1(v);continue}}u!==null?(u.return=m,nr=u):b1(v)}p=p.sibling}e:for(p=null,v=e;;){if(v.tag===5){if(p===null){p=v;try{s=v.stateNode,o?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=v.stateNode,d=v.memoizedProps.style,c=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=zE("display",c))}catch(f){ys(e,e.return,f)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=o?"":v.memoizedProps}catch(f){ys(e,e.return,f)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:xa(t,e),za(e),n&4&&v1(e);break;case 21:break;default:xa(t,e),za(e)}}function za(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(gk(r)){var n=r;break e}r=r.return}throw Error(_t(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Kp(s,""),n.flags&=-33);var i=g1(e);Cy(e,i,s);break;case 3:case 4:var c=n.stateNode.containerInfo,l=g1(e);ky(e,l,c);break;default:throw Error(_t(161))}}catch(d){ys(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function JO(e,t,r){nr=e,bk(e)}function bk(e,t,r){for(var n=(e.mode&1)!==0;nr!==null;){var s=nr,i=s.child;if(s.tag===22&&n){var c=s.memoizedState!==null||Ff;if(!c){var l=s.alternate,d=l!==null&&l.memoizedState!==null||ui;l=Ff;var o=ui;if(Ff=c,(ui=d)&&!o)for(nr=s;nr!==null;)c=nr,d=c.child,c.tag===22&&c.memoizedState!==null?w1(s):d!==null?(d.return=c,nr=d):w1(s);for(;i!==null;)nr=i,bk(i),i=i.sibling;nr=s,Ff=l,ui=o}y1(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,nr=i):y1(e)}}function y1(e){for(;nr!==null;){var t=nr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ui||Mg(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ui)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ra(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&r1(t,i,n);break;case 3:var c=t.updateQueue;if(c!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}r1(t,c,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var o=t.alternate;if(o!==null){var p=o.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&Qp(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_t(163))}ui||t.flags&512&&Ry(t)}catch(m){ys(t,t.return,m)}}if(t===e){nr=null;break}if(r=t.sibling,r!==null){r.return=t.return,nr=r;break}nr=t.return}}function b1(e){for(;nr!==null;){var t=nr;if(t===e){nr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,nr=r;break}nr=t.return}}function w1(e){for(;nr!==null;){var t=nr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Mg(4,t)}catch(d){ys(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(d){ys(t,s,d)}}var i=t.return;try{Ry(t)}catch(d){ys(t,i,d)}break;case 5:var c=t.return;try{Ry(t)}catch(d){ys(t,c,d)}}}catch(d){ys(t,t.return,d)}if(t===e){nr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,nr=l;break}nr=t.return}}var QO=Math.ceil,Qm=Io.ReactCurrentDispatcher,Cw=Io.ReactCurrentOwner,fa=Io.ReactCurrentBatchConfig,vn=0,Ks=null,Os=null,ri=0,Ki=0,Gd=Gc(0),Ls=0,ch=null,Ql=0,Lg=0,Tw=0,Bp=null,Di=null,Pw=0,yu=1/0,wo=null,Xm=!1,Ty=null,Ac=null,Bf=!1,Ec=null,Zm=0,Up=0,Py=null,um=-1,pm=0;function _i(){return vn&6?Rs():um!==-1?um:um=Rs()}function jc(e){return e.mode&1?vn&2&&ri!==0?ri&-ri:DO.transition!==null?(pm===0&&(pm=nR()),pm):(e=Tn,e!==0||(e=window.event,e=e===void 0?16:dR(e.type)),e):1}function Oa(e,t,r,n){if(50<Up)throw Up=0,Py=null,Error(_t(185));Th(e,r,n),(!(vn&2)||e!==Ks)&&(e===Ks&&(!(vn&2)&&(Lg|=r),Ls===4&&_c(e,ri)),Bi(e,n),r===1&&vn===0&&!(t.mode&1)&&(yu=Rs()+500,Og&&Yc()))}function Bi(e,t){var r=e.callbackNode;Dj(e,t);var n=Mm(e,e===Ks?ri:0);if(n===0)r!==null&&P_(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&P_(r),t===1)e.tag===0?OO(x1.bind(null,e)):PR(x1.bind(null,e)),PO(function(){!(vn&6)&&Yc()}),r=null;else{switch(sR(n)){case 1:r=tw;break;case 4:r=tR;break;case 16:r=Im;break;case 536870912:r=rR;break;default:r=Im}r=Ck(r,wk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function wk(e,t){if(um=-1,pm=0,vn&6)throw Error(_t(327));var r=e.callbackNode;if(iu()&&e.callbackNode!==r)return null;var n=Mm(e,e===Ks?ri:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=eg(e,n);else{t=n;var s=vn;vn|=2;var i=_k();(Ks!==e||ri!==t)&&(wo=null,yu=Rs()+500,$l(e,t));do try{eD();break}catch(l){xk(e,l)}while(!0);fw(),Qm.current=i,vn=s,Os!==null?t=0:(Ks=null,ri=0,t=Ls)}if(t!==0){if(t===2&&(s=ry(e),s!==0&&(n=s,t=Ny(e,s))),t===1)throw r=ch,$l(e,0),_c(e,n),Bi(e,Rs()),r;if(t===6)_c(e,n);else{if(s=e.current.alternate,!(n&30)&&!XO(s)&&(t=eg(e,n),t===2&&(i=ry(e),i!==0&&(n=i,t=Ny(e,i))),t===1))throw r=ch,$l(e,0),_c(e,n),Bi(e,Rs()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(_t(345));case 2:Ol(e,Di,wo);break;case 3:if(_c(e,n),(n&130023424)===n&&(t=Pw+500-Rs(),10<t)){if(Mm(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){_i(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=dy(Ol.bind(null,e,Di,wo),t);break}Ol(e,Di,wo);break;case 4:if(_c(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var c=31-ja(n);i=1<<c,c=t[c],c>s&&(s=c),n&=~i}if(n=s,n=Rs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QO(n/1960))-n,10<n){e.timeoutHandle=dy(Ol.bind(null,e,Di,wo),n);break}Ol(e,Di,wo);break;case 5:Ol(e,Di,wo);break;default:throw Error(_t(329))}}}return Bi(e,Rs()),e.callbackNode===r?wk.bind(null,e):null}function Ny(e,t){var r=Bp;return e.current.memoizedState.isDehydrated&&($l(e,t).flags|=256),e=eg(e,t),e!==2&&(t=Di,Di=r,t!==null&&Ay(t)),e}function Ay(e){Di===null?Di=e:Di.push.apply(Di,e)}function XO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Da(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _c(e,t){for(t&=~Tw,t&=~Lg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ja(t),n=1<<r;e[r]=-1,t&=~n}}function x1(e){if(vn&6)throw Error(_t(327));iu();var t=Mm(e,0);if(!(t&1))return Bi(e,Rs()),null;var r=eg(e,t);if(e.tag!==0&&r===2){var n=ry(e);n!==0&&(t=n,r=Ny(e,n))}if(r===1)throw r=ch,$l(e,0),_c(e,t),Bi(e,Rs()),r;if(r===6)throw Error(_t(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e,Di,wo),Bi(e,Rs()),null}function Nw(e,t){var r=vn;vn|=1;try{return e(t)}finally{vn=r,vn===0&&(yu=Rs()+500,Og&&Yc())}}function Xl(e){Ec!==null&&Ec.tag===0&&!(vn&6)&&iu();var t=vn;vn|=1;var r=fa.transition,n=Tn;try{if(fa.transition=null,Tn=1,e)return e()}finally{Tn=n,fa.transition=r,vn=t,!(vn&6)&&Yc()}}function Aw(){Ki=Gd.current,Yn(Gd)}function $l(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,TO(r)),Os!==null)for(r=Os.return;r!==null;){var n=r;switch(uw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vm();break;case 3:gu(),Yn(Li),Yn(fi),ww();break;case 5:bw(n);break;case 4:gu();break;case 13:Yn(ls);break;case 19:Yn(ls);break;case 10:mw(n.type._context);break;case 22:case 23:Aw()}r=r.return}if(Ks=e,Os=e=Oc(e.current,null),ri=Ki=t,Ls=0,ch=null,Tw=Lg=Ql=0,Di=Bp=null,Ll!==null){for(t=0;t<Ll.length;t++)if(r=Ll[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var c=i.next;i.next=s,n.next=c}r.pending=n}Ll=null}return e}function xk(e,t){do{var r=Os;try{if(fw(),cm.current=Jm,Ym){for(var n=fs.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ym=!1}if(Jl=0,qs=Ms=fs=null,Lp=!1,ih=0,Cw.current=null,r===null||r.return===null){Ls=1,ch=t,Os=null;break}e:{var i=e,c=r.return,l=r,d=t;if(t=ri,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var o=d,p=l,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var u=c1(c);if(u!==null){u.flags&=-257,l1(u,c,l,i,t),u.mode&1&&o1(i,o,t),t=u,d=o;var b=t.updateQueue;if(b===null){var f=new Set;f.add(d),t.updateQueue=f}else b.add(d);break e}else{if(!(t&1)){o1(i,o,t),jw();break e}d=Error(_t(426))}}else if(ts&&l.mode&1){var w=c1(c);if(w!==null){!(w.flags&65536)&&(w.flags|=256),l1(w,c,l,i,t),pw(vu(d,l));break e}}i=d=vu(d,l),Ls!==4&&(Ls=2),Bp===null?Bp=[i]:Bp.push(i),i=c;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=sk(i,d,t);t1(i,g);break e;case 1:l=d;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ac===null||!Ac.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=ik(i,l,t);t1(i,x);break e}}i=i.return}while(i!==null)}Ek(r)}catch(E){t=E,Os===r&&r!==null&&(Os=r=r.return);continue}break}while(!0)}function _k(){var e=Qm.current;return Qm.current=Jm,e===null?Jm:e}function jw(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),Ks===null||!(Ql&268435455)&&!(Lg&268435455)||_c(Ks,ri)}function eg(e,t){var r=vn;vn|=2;var n=_k();(Ks!==e||ri!==t)&&(wo=null,$l(e,t));do try{ZO();break}catch(s){xk(e,s)}while(!0);if(fw(),vn=r,Qm.current=n,Os!==null)throw Error(_t(261));return Ks=null,ri=0,Ls}function ZO(){for(;Os!==null;)Sk(Os)}function eD(){for(;Os!==null&&!Rj();)Sk(Os)}function Sk(e){var t=kk(e.alternate,e,Ki);e.memoizedProps=e.pendingProps,t===null?Ek(e):Os=t,Cw.current=null}function Ek(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=KO(r,t),r!==null){r.flags&=32767,Os=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ls=6,Os=null;return}}else if(r=qO(r,t,Ki),r!==null){Os=r;return}if(t=t.sibling,t!==null){Os=t;return}Os=t=e}while(t!==null);Ls===0&&(Ls=5)}function Ol(e,t,r){var n=Tn,s=fa.transition;try{fa.transition=null,Tn=1,tD(e,t,r,n)}finally{fa.transition=s,Tn=n}return null}function tD(e,t,r,n){do iu();while(Ec!==null);if(vn&6)throw Error(_t(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(_t(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Ij(e,i),e===Ks&&(Os=Ks=null,ri=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bf||(Bf=!0,Ck(Im,function(){return iu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fa.transition,fa.transition=null;var c=Tn;Tn=1;var l=vn;vn|=4,Cw.current=null,YO(e,r),yk(r,e),xO(cy),Lm=!!oy,cy=oy=null,e.current=r,JO(r),kj(),vn=l,Tn=c,fa.transition=i}else e.current=r;if(Bf&&(Bf=!1,Ec=e,Zm=s),i=e.pendingLanes,i===0&&(Ac=null),Pj(r.stateNode),Bi(e,Rs()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Xm)throw Xm=!1,e=Ty,Ty=null,e;return Zm&1&&e.tag!==0&&iu(),i=e.pendingLanes,i&1?e===Py?Up++:(Up=0,Py=e):Up=0,Yc(),null}function iu(){if(Ec!==null){var e=sR(Zm),t=fa.transition,r=Tn;try{if(fa.transition=null,Tn=16>e?16:e,Ec===null)var n=!1;else{if(e=Ec,Ec=null,Zm=0,vn&6)throw Error(_t(331));var s=vn;for(vn|=4,nr=e.current;nr!==null;){var i=nr,c=i.child;if(nr.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var o=l[d];for(nr=o;nr!==null;){var p=nr;switch(p.tag){case 0:case 11:case 15:Fp(8,p,i)}var v=p.child;if(v!==null)v.return=p,nr=v;else for(;nr!==null;){p=nr;var m=p.sibling,u=p.return;if(mk(p),p===o){nr=null;break}if(m!==null){m.return=u,nr=m;break}nr=u}}}var b=i.alternate;if(b!==null){var f=b.child;if(f!==null){b.child=null;do{var w=f.sibling;f.sibling=null,f=w}while(f!==null)}}nr=i}}if(i.subtreeFlags&2064&&c!==null)c.return=i,nr=c;else e:for(;nr!==null;){if(i=nr,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fp(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,nr=g;break e}nr=i.return}}var y=e.current;for(nr=y;nr!==null;){c=nr;var _=c.child;if(c.subtreeFlags&2064&&_!==null)_.return=c,nr=_;else e:for(c=y;nr!==null;){if(l=nr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mg(9,l)}}catch(E){ys(l,l.return,E)}if(l===c){nr=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,nr=x;break e}nr=l.return}}if(vn=s,Yc(),Xa&&typeof Xa.onPostCommitFiberRoot=="function")try{Xa.onPostCommitFiberRoot(Tg,e)}catch{}n=!0}return n}finally{Tn=r,fa.transition=t}}return!1}function _1(e,t,r){t=vu(r,t),t=sk(e,t,1),e=Nc(e,t,1),t=_i(),e!==null&&(Th(e,1,t),Bi(e,t))}function ys(e,t,r){if(e.tag===3)_1(e,e,r);else for(;t!==null;){if(t.tag===3){_1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ac===null||!Ac.has(n))){e=vu(r,e),e=ik(t,e,1),t=Nc(t,e,1),e=_i(),t!==null&&(Th(t,1,e),Bi(t,e));break}}t=t.return}}function rD(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_i(),e.pingedLanes|=e.suspendedLanes&r,Ks===e&&(ri&r)===r&&(Ls===4||Ls===3&&(ri&130023424)===ri&&500>Rs()-Pw?$l(e,0):Tw|=r),Bi(e,t)}function Rk(e,t){t===0&&(e.mode&1?(t=Pf,Pf<<=1,!(Pf&130023424)&&(Pf=4194304)):t=1);var r=_i();e=To(e,t),e!==null&&(Th(e,t,r),Bi(e,r))}function nD(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Rk(e,r)}function sD(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(_t(314))}n!==null&&n.delete(t),Rk(e,r)}var kk;kk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Li.current)Ii=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ii=!1,HO(e,t,r);Ii=!!(e.flags&131072)}else Ii=!1,ts&&t.flags&1048576&&NR(t,zm,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;dm(e,t),e=t.pendingProps;var s=hu(t,fi.current);su(t,r),s=_w(null,t,n,e,s,r);var i=Sw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fi(n)?(i=!0,$m(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vw(t),s.updater=Ig,t.stateNode=s,s._reactInternals=t,vy(t,n,e,r),t=wy(null,t,n,!0,i,r)):(t.tag=0,ts&&i&&dw(t),yi(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(dm(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=aD(n),e=Ra(n,e),s){case 0:t=by(null,t,n,e,r);break e;case 1:t=p1(null,t,n,e,r);break e;case 11:t=d1(null,t,n,e,r);break e;case 14:t=u1(null,t,n,Ra(n.type,e),r);break e}throw Error(_t(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ra(n,s),by(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ra(n,s),p1(e,t,n,s,r);case 3:e:{if(lk(t),e===null)throw Error(_t(387));n=t.pendingProps,i=t.memoizedState,s=i.element,MR(e,t),Km(t,n,null,r);var c=t.memoizedState;if(n=c.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=vu(Error(_t(423)),t),t=h1(e,t,n,r,s);break e}else if(n!==s){s=vu(Error(_t(424)),t),t=h1(e,t,n,r,s);break e}else for(Yi=Pc(t.stateNode.containerInfo.firstChild),Ji=t,ts=!0,Ta=null,r=DR(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fu(),n===s){t=Po(e,t,r);break e}yi(e,t,n,r)}t=t.child}return t;case 5:return LR(t),e===null&&fy(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,c=s.children,ly(n,s)?c=null:i!==null&&ly(n,i)&&(t.flags|=32),ck(e,t),yi(e,t,c,r),t.child;case 6:return e===null&&fy(t),null;case 13:return dk(e,t,r);case 4:return yw(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=mu(t,null,n,r):yi(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ra(n,s),d1(e,t,n,s,r);case 7:return yi(e,t,t.pendingProps,r),t.child;case 8:return yi(e,t,t.pendingProps.children,r),t.child;case 12:return yi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,c=s.value,$n(Hm,n._currentValue),n._currentValue=c,i!==null)if(Da(i.value,c)){if(i.children===s.children&&!Li.current){t=Po(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){c=i.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=Eo(-1,r&-r),d.tag=2;var o=i.updateQueue;if(o!==null){o=o.shared;var p=o.pending;p===null?d.next=d:(d.next=p.next,p.next=d),o.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),my(i.return,r,t),l.lanes|=r;break}d=d.next}}else if(i.tag===10)c=i.type===t.type?null:i.child;else if(i.tag===18){if(c=i.return,c===null)throw Error(_t(341));c.lanes|=r,l=c.alternate,l!==null&&(l.lanes|=r),my(c,r,t),c=i.sibling}else c=i.child;if(c!==null)c.return=i;else for(c=i;c!==null;){if(c===t){c=null;break}if(i=c.sibling,i!==null){i.return=c.return,c=i;break}c=c.return}i=c}yi(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,su(t,r),s=va(s),n=n(s),t.flags|=1,yi(e,t,n,r),t.child;case 14:return n=t.type,s=Ra(n,t.pendingProps),s=Ra(n.type,s),u1(e,t,n,s,r);case 15:return ak(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ra(n,s),dm(e,t),t.tag=1,Fi(n)?(e=!0,$m(t)):e=!1,su(t,r),nk(t,n,s),vy(t,n,s,r),wy(null,t,n,!0,e,r);case 19:return uk(e,t,r);case 22:return ok(e,t,r)}throw Error(_t(156,t.tag))};function Ck(e,t){return eR(e,t)}function iD(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(e,t,r,n){return new iD(e,t,r,n)}function Ow(e){return e=e.prototype,!(!e||!e.isReactComponent)}function aD(e){if(typeof e=="function")return Ow(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xb)return 11;if(e===Zb)return 14}return 2}function Oc(e,t){var r=e.alternate;return r===null?(r=ha(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function hm(e,t,r,n,s,i){var c=2;if(n=e,typeof e=="function")Ow(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case Fd:return Wl(r.children,s,i,t);case Qb:c=8,s|=8;break;case V0:return e=ha(12,r,t,s|2),e.elementType=V0,e.lanes=i,e;case $0:return e=ha(13,r,t,s),e.elementType=$0,e.lanes=i,e;case W0:return e=ha(19,r,t,s),e.elementType=W0,e.lanes=i,e;case LE:return Fg(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case IE:c=10;break e;case ME:c=9;break e;case Xb:c=11;break e;case Zb:c=14;break e;case bc:c=16,n=null;break e}throw Error(_t(130,e==null?e:typeof e,""))}return t=ha(c,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Wl(e,t,r,n){return e=ha(7,e,n,t),e.lanes=r,e}function Fg(e,t,r,n){return e=ha(22,e,n,t),e.elementType=LE,e.lanes=r,e.stateNode={isHidden:!1},e}function Yv(e,t,r){return e=ha(6,e,null,t),e.lanes=r,e}function Jv(e,t,r){return t=ha(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oD(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nv(0),this.expirationTimes=Nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nv(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dw(e,t,r,n,s,i,c,l,d){return e=new oD(e,t,r,l,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ha(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vw(i),e}function cD(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ld,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Tk(e){if(!e)return Bc;e=e._reactInternals;e:{if(ad(e)!==e||e.tag!==1)throw Error(_t(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_t(171))}if(e.tag===1){var r=e.type;if(Fi(r))return TR(e,r,t)}return t}function Pk(e,t,r,n,s,i,c,l,d){return e=Dw(r,n,!0,e,s,i,c,l,d),e.context=Tk(null),r=e.current,n=_i(),s=jc(r),i=Eo(n,s),i.callback=t??null,Nc(r,i,s),e.current.lanes=s,Th(e,s,n),Bi(e,n),e}function Bg(e,t,r,n){var s=t.current,i=_i(),c=jc(s);return r=Tk(r),t.context===null?t.context=r:t.pendingContext=r,t=Eo(i,c),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Nc(s,t,c),e!==null&&(Oa(e,s,c,i),om(e,s,c)),c}function tg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function S1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Iw(e,t){S1(e,t),(e=e.alternate)&&S1(e,t)}function lD(){return null}var Nk=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mw(e){this._internalRoot=e}Ug.prototype.render=Mw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_t(409));Bg(e,t,null,null)};Ug.prototype.unmount=Mw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xl(function(){Bg(null,e,null,null)}),t[Co]=null}};function Ug(e){this._internalRoot=e}Ug.prototype.unstable_scheduleHydration=function(e){if(e){var t=oR();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xc.length&&t!==0&&t<xc[r].priority;r++);xc.splice(r,0,e),r===0&&lR(e)}};function Lw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function E1(){}function dD(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var o=tg(c);i.call(o)}}var c=Pk(t,n,e,0,null,!1,!1,"",E1);return e._reactRootContainer=c,e[Co]=c.current,eh(e.nodeType===8?e.parentNode:e),Xl(),c}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var o=tg(d);l.call(o)}}var d=Dw(e,0,!1,null,null,!1,!1,"",E1);return e._reactRootContainer=d,e[Co]=d.current,eh(e.nodeType===8?e.parentNode:e),Xl(function(){Bg(t,d,r,n)}),d}function $g(e,t,r,n,s){var i=r._reactRootContainer;if(i){var c=i;if(typeof s=="function"){var l=s;s=function(){var d=tg(c);l.call(d)}}Bg(t,c,e,s)}else c=dD(r,t,e,s,n);return tg(c)}iR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=kp(t.pendingLanes);r!==0&&(rw(t,r|1),Bi(t,Rs()),!(vn&6)&&(yu=Rs()+500,Yc()))}break;case 13:Xl(function(){var n=To(e,1);if(n!==null){var s=_i();Oa(n,e,1,s)}}),Iw(e,1)}};nw=function(e){if(e.tag===13){var t=To(e,134217728);if(t!==null){var r=_i();Oa(t,e,134217728,r)}Iw(e,134217728)}};aR=function(e){if(e.tag===13){var t=jc(e),r=To(e,t);if(r!==null){var n=_i();Oa(r,e,t,n)}Iw(e,t)}};oR=function(){return Tn};cR=function(e,t){var r=Tn;try{return Tn=e,t()}finally{Tn=r}};Z0=function(e,t,r){switch(t){case"input":if(q0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=jg(n);if(!s)throw Error(_t(90));BE(n),q0(n,s)}}}break;case"textarea":VE(e,r);break;case"select":t=r.value,t!=null&&eu(e,!!r.multiple,t,!1)}};GE=Nw;YE=Xl;var uD={usingClientEntryPoint:!1,Events:[Nh,$d,jg,qE,KE,Nw]},yp={findFiberByHostInstance:Ml,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pD={bundleType:yp.bundleType,version:yp.version,rendererPackageName:yp.rendererPackageName,rendererConfig:yp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Io.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=XE(e),e===null?null:e.stateNode},findFiberByHostInstance:yp.findFiberByHostInstance||lD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{Tg=Uf.inject(pD),Xa=Uf}catch{}}Zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uD;Zi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lw(t))throw Error(_t(200));return cD(e,t,null,r)};Zi.createRoot=function(e,t){if(!Lw(e))throw Error(_t(299));var r=!1,n="",s=Nk;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dw(e,1,!1,null,null,r,!1,n,s),e[Co]=t.current,eh(e.nodeType===8?e.parentNode:e),new Mw(t)};Zi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_t(188)):(e=Object.keys(e).join(","),Error(_t(268,e)));return e=XE(t),e=e===null?null:e.stateNode,e};Zi.flushSync=function(e){return Xl(e)};Zi.hydrate=function(e,t,r){if(!Vg(t))throw Error(_t(200));return $g(null,e,t,!0,r)};Zi.hydrateRoot=function(e,t,r){if(!Lw(e))throw Error(_t(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",c=Nk;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),t=Pk(t,null,e,1,r??null,s,!1,i,c),e[Co]=t.current,eh(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ug(t)};Zi.render=function(e,t,r){if(!Vg(t))throw Error(_t(200));return $g(null,e,t,!1,r)};Zi.unmountComponentAtNode=function(e){if(!Vg(e))throw Error(_t(40));return e._reactRootContainer?(Xl(function(){$g(null,null,e,!1,function(){e._reactRootContainer=null,e[Co]=null})}),!0):!1};Zi.unstable_batchedUpdates=Nw;Zi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Vg(r))throw Error(_t(200));if(e==null||e._reactInternals===void 0)throw Error(_t(38));return $g(e,t,r,!1,n)};Zi.version="18.3.1-next-f1338f8080-20240426";function Ak(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ak)}catch(e){console.error(e)}}Ak(),AE.exports=Zi;var Jc=AE.exports;const Wg=Wb(Jc);var R1=Jc;B0.createRoot=R1.createRoot,B0.hydrateRoot=R1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(this,arguments)}var Rc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rc||(Rc={}));const k1="popstate";function hD(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:c,hash:l}=n.location;return jy("",{pathname:i,search:c,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:rg(s)}return mD(t,r,null,e)}function ws(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fD(){return Math.random().toString(36).substr(2,8)}function C1(e,t){return{usr:e.state,key:e.key,idx:t}}function jy(e,t,r,n){return r===void 0&&(r=null),lh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tu(t):t,{state:r,key:t&&t.key||n||fD()})}function rg(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Tu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function mD(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,c=s.history,l=Rc.Pop,d=null,o=p();o==null&&(o=0,c.replaceState(lh({},c.state,{idx:o}),""));function p(){return(c.state||{idx:null}).idx}function v(){l=Rc.Pop;let w=p(),g=w==null?null:w-o;o=w,d&&d({action:l,location:f.location,delta:g})}function m(w,g){l=Rc.Push;let y=jy(f.location,w,g);o=p()+1;let _=C1(y,o),x=f.createHref(y);try{c.pushState(_,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(x)}i&&d&&d({action:l,location:f.location,delta:1})}function u(w,g){l=Rc.Replace;let y=jy(f.location,w,g);o=p();let _=C1(y,o),x=f.createHref(y);c.replaceState(_,"",x),i&&d&&d({action:l,location:f.location,delta:0})}function b(w){let g=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:rg(w);return y=y.replace(/ $/,"%20"),ws(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let f={get action(){return l},get location(){return e(s,c)},listen(w){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(k1,v),d=w,()=>{s.removeEventListener(k1,v),d=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let g=b(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:u,go(w){return c.go(w)}};return f}var T1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(T1||(T1={}));function gD(e,t,r){return r===void 0&&(r="/"),vD(e,t,r)}function vD(e,t,r,n){let s=typeof t=="string"?Tu(t):t,i=bu(s.pathname||"/",r);if(i==null)return null;let c=Ok(e);yD(c);let l=null;for(let d=0;l==null&&d<c.length;++d){let o=PD(i);l=CD(c[d],o)}return l}function Ok(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,c,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:c,route:i};d.relativePath.startsWith("/")&&(ws(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let o=Dc([n,d.relativePath]),p=r.concat(d);i.children&&i.children.length>0&&(ws(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),Ok(i.children,t,p,o)),!(i.path==null&&!i.index)&&t.push({path:o,score:RD(o,i.index),routesMeta:p})};return e.forEach((i,c)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,c);else for(let d of Dk(i.path))s(i,c,d)}),t}function Dk(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let c=Dk(n.join("/")),l=[];return l.push(...c.map(d=>d===""?i:[i,d].join("/"))),s&&l.push(...c),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function yD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:kD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const bD=/^:[\w-]+$/,wD=3,xD=2,_D=1,SD=10,ED=-2,P1=e=>e==="*";function RD(e,t){let r=e.split("/"),n=r.length;return r.some(P1)&&(n+=ED),t&&(n+=xD),r.filter(s=>!P1(s)).reduce((s,i)=>s+(bD.test(i)?wD:i===""?_D:SD),n)}function kD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function CD(e,t,r){let{routesMeta:n}=e,s={},i="/",c=[];for(let l=0;l<n.length;++l){let d=n[l],o=l===n.length-1,p=i==="/"?t:t.slice(i.length)||"/",v=Oy({path:d.relativePath,caseSensitive:d.caseSensitive,end:o},p),m=d.route;if(!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Dc([i,v.pathname]),pathnameBase:OD(Dc([i,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(i=Dc([i,v.pathnameBase]))}return c}function Oy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=TD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],c=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((o,p,v)=>{let{paramName:m,isOptional:u}=p;if(m==="*"){let f=l[v]||"";c=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const b=l[v];return u&&!b?o[m]=void 0:o[m]=(b||"").replace(/%2F/g,"/"),o},{}),pathname:i,pathnameBase:c,pattern:e}}function TD(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function PD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ND(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Tu(e):e;return{pathname:r?r.startsWith("/")?r:AD(r,t):t,search:DD(n),hash:ID(s)}}function AD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Qv(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ik(e,t){let r=jD(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Mk(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Tu(e):(s=lh({},e),ws(!s.pathname||!s.pathname.includes("?"),Qv("?","pathname","search",s)),ws(!s.pathname||!s.pathname.includes("#"),Qv("#","pathname","hash",s)),ws(!s.search||!s.search.includes("#"),Qv("#","search","hash",s)));let i=e===""||s.pathname==="",c=i?"/":s.pathname,l;if(c==null)l=r;else{let v=t.length-1;if(!n&&c.startsWith("..")){let m=c.split("/");for(;m[0]==="..";)m.shift(),v-=1;s.pathname=m.join("/")}l=v>=0?t[v]:"/"}let d=ND(s,l),o=c&&c!=="/"&&c.endsWith("/"),p=(i||c===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(o||p)&&(d.pathname+="/"),d}const Dc=e=>e.join("/").replace(/\/\/+/g,"/"),OD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),DD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ID=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function MD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Lk=["post","put","patch","delete"];new Set(Lk);const LD=["get",...Lk];new Set(LD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dh(){return dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dh.apply(this,arguments)}const zg=A.createContext(null),Fk=A.createContext(null),Qc=A.createContext(null),Hg=A.createContext(null),Mo=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Bk=A.createContext(null);function FD(e,t){let{relative:r}=t===void 0?{}:t;jh()||ws(!1);let{basename:n,navigator:s}=A.useContext(Qc),{hash:i,pathname:c,search:l}=qg(e,{relative:r}),d=c;return n!=="/"&&(d=c==="/"?n:Dc([n,c])),s.createHref({pathname:d,search:l,hash:i})}function jh(){return A.useContext(Hg)!=null}function Pu(){return jh()||ws(!1),A.useContext(Hg).location}function Uk(e){A.useContext(Qc).static||A.useLayoutEffect(e)}function ao(){let{isDataRoute:e}=A.useContext(Mo);return e?ZD():BD()}function BD(){jh()||ws(!1);let e=A.useContext(zg),{basename:t,future:r,navigator:n}=A.useContext(Qc),{matches:s}=A.useContext(Mo),{pathname:i}=Pu(),c=JSON.stringify(Ik(s,r.v7_relativeSplatPath)),l=A.useRef(!1);return Uk(()=>{l.current=!0}),A.useCallback(function(o,p){if(p===void 0&&(p={}),!l.current)return;if(typeof o=="number"){n.go(o);return}let v=Mk(o,JSON.parse(c),i,p.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Dc([t,v.pathname])),(p.replace?n.replace:n.push)(v,p.state,p)},[t,n,c,i,e])}const UD=A.createContext(null);function VD(e){let t=A.useContext(Mo).outlet;return t&&A.createElement(UD.Provider,{value:e},t)}function Vk(){let{matches:e}=A.useContext(Mo),t=e[e.length-1];return t?t.params:{}}function qg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=A.useContext(Qc),{matches:s}=A.useContext(Mo),{pathname:i}=Pu(),c=JSON.stringify(Ik(s,n.v7_relativeSplatPath));return A.useMemo(()=>Mk(e,JSON.parse(c),i,r==="path"),[e,c,i,r])}function $D(e,t){return WD(e,t)}function WD(e,t,r,n){jh()||ws(!1);let{navigator:s}=A.useContext(Qc),{matches:i}=A.useContext(Mo),c=i[i.length-1],l=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let o=Pu(),p;if(t){var v;let w=typeof t=="string"?Tu(t):t;d==="/"||(v=w.pathname)!=null&&v.startsWith(d)||ws(!1),p=w}else p=o;let m=p.pathname||"/",u=m;if(d!=="/"){let w=d.replace(/^\//,"").split("/");u="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=gD(e,{pathname:u}),f=GD(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Dc([d,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Dc([d,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&f?A.createElement(Hg.Provider,{value:{location:dh({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Rc.Pop}},f):f}function zD(){let e=XD(),t=MD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:s},r):null,null)}const HD=A.createElement(zD,null);class qD extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?A.createElement(Mo.Provider,{value:this.props.routeContext},A.createElement(Bk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KD(e){let{routeContext:t,match:r,children:n}=e,s=A.useContext(zg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(Mo.Provider,{value:t},n)}function GD(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let p=c.findIndex(v=>v.route.id&&(l==null?void 0:l[v.route.id])!==void 0);p>=0||ws(!1),c=c.slice(0,Math.min(c.length,p+1))}let d=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let v=c[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(o=p),v.route.id){let{loaderData:m,errors:u}=r,b=v.route.loader&&m[v.route.id]===void 0&&(!u||u[v.route.id]===void 0);if(v.route.lazy||b){d=!0,o>=0?c=c.slice(0,o+1):c=[c[0]];break}}}return c.reduceRight((p,v,m)=>{let u,b=!1,f=null,w=null;r&&(u=l&&v.route.id?l[v.route.id]:void 0,f=v.route.errorElement||HD,d&&(o<0&&m===0?(eI("route-fallback"),b=!0,w=null):o===m&&(b=!0,w=v.route.hydrateFallbackElement||null)));let g=t.concat(c.slice(0,m+1)),y=()=>{let _;return u?_=f:b?_=w:v.route.Component?_=A.createElement(v.route.Component,null):v.route.element?_=v.route.element:_=p,A.createElement(KD,{match:v,routeContext:{outlet:p,matches:g,isDataRoute:r!=null},children:_})};return r&&(v.route.ErrorBoundary||v.route.errorElement||m===0)?A.createElement(qD,{location:r.location,revalidation:r.revalidation,component:f,error:u,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var $k=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($k||{}),Wk=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wk||{});function YD(e){let t=A.useContext(zg);return t||ws(!1),t}function JD(e){let t=A.useContext(Fk);return t||ws(!1),t}function QD(e){let t=A.useContext(Mo);return t||ws(!1),t}function zk(e){let t=QD(),r=t.matches[t.matches.length-1];return r.route.id||ws(!1),r.route.id}function XD(){var e;let t=A.useContext(Bk),r=JD(),n=zk();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ZD(){let{router:e}=YD($k.UseNavigateStable),t=zk(Wk.UseNavigateStable),r=A.useRef(!1);return Uk(()=>{r.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,dh({fromRouteId:t},i)))},[e,t])}const N1={};function eI(e,t,r){N1[e]||(N1[e]=!0)}function tI(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function fm(e){return VD(e.context)}function Tr(e){ws(!1)}function rI(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Rc.Pop,navigator:i,static:c=!1,future:l}=e;jh()&&ws(!1);let d=t.replace(/^\/*/,"/"),o=A.useMemo(()=>({basename:d,navigator:i,static:c,future:dh({v7_relativeSplatPath:!1},l)}),[d,l,i,c]);typeof n=="string"&&(n=Tu(n));let{pathname:p="/",search:v="",hash:m="",state:u=null,key:b="default"}=n,f=A.useMemo(()=>{let w=bu(p,d);return w==null?null:{location:{pathname:w,search:v,hash:m,state:u,key:b},navigationType:s}},[d,p,v,m,u,b,s]);return f==null?null:A.createElement(Qc.Provider,{value:o},A.createElement(Hg.Provider,{children:r,value:f}))}function Hk(e){let{children:t,location:r}=e;return $D(Dy(t),r)}new Promise(()=>{});function Dy(e,t){t===void 0&&(t=[]);let r=[];return A.Children.forEach(e,(n,s)=>{if(!A.isValidElement(n))return;let i=[...t,s];if(n.type===A.Fragment){r.push.apply(r,Dy(n.props.children,i));return}n.type!==Tr&&ws(!1),!n.props.index||!n.props.children||ws(!1);let c={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Dy(n.props.children,i)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ng.apply(this,arguments)}function qk(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function nI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sI(e,t){return e.button===0&&(!t||t==="_self")&&!nI(e)}const iI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],aI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],oI="6";try{window.__reactRouterVersion=oI}catch{}const cI=A.createContext({isTransitioning:!1}),lI="startTransition",A1=qc[lI];function dI(e){let{basename:t,children:r,future:n,window:s}=e,i=A.useRef();i.current==null&&(i.current=hD({window:s,v5Compat:!0}));let c=i.current,[l,d]=A.useState({action:c.action,location:c.location}),{v7_startTransition:o}=n||{},p=A.useCallback(v=>{o&&A1?A1(()=>d(v)):d(v)},[d,o]);return A.useLayoutEffect(()=>c.listen(p),[c,p]),A.useEffect(()=>tI(n),[n]),A.createElement(rI,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:c,future:n})}const uI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Es=A.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:c,state:l,target:d,to:o,preventScrollReset:p,viewTransition:v}=t,m=qk(t,iI),{basename:u}=A.useContext(Qc),b,f=!1;if(typeof o=="string"&&pI.test(o)&&(b=o,uI))try{let _=new URL(window.location.href),x=o.startsWith("//")?new URL(_.protocol+o):new URL(o),E=bu(x.pathname,u);x.origin===_.origin&&E!=null?o=E+x.search+x.hash:f=!0}catch{}let w=FD(o,{relative:s}),g=fI(o,{replace:c,state:l,target:d,preventScrollReset:p,relative:s,viewTransition:v});function y(_){n&&n(_),_.defaultPrevented||g(_)}return A.createElement("a",ng({},m,{href:b||w,onClick:f||i?n:y,ref:r,target:d}))}),j1=A.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:c=!1,style:l,to:d,viewTransition:o,children:p}=t,v=qk(t,aI),m=qg(d,{relative:v.relative}),u=Pu(),b=A.useContext(Fk),{navigator:f,basename:w}=A.useContext(Qc),g=b!=null&&mI(m)&&o===!0,y=f.encodeLocation?f.encodeLocation(m).pathname:m.pathname,_=u.pathname,x=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(_=_.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&w&&(x=bu(x,w)||x);const E=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let j=_===y||!c&&_.startsWith(y)&&_.charAt(E)==="/",R=x!=null&&(x===y||!c&&x.startsWith(y)&&x.charAt(y.length)==="/"),C={isActive:j,isPending:R,isTransitioning:g},T=j?n:void 0,h;typeof i=="function"?h=i(C):h=[i,j?"active":null,R?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let S=typeof l=="function"?l(C):l;return A.createElement(Es,ng({},v,{"aria-current":T,className:h,ref:r,style:S,to:d,viewTransition:o}),typeof p=="function"?p(C):p)});var Iy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Iy||(Iy={}));var O1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(O1||(O1={}));function hI(e){let t=A.useContext(zg);return t||ws(!1),t}function fI(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:c,viewTransition:l}=t===void 0?{}:t,d=ao(),o=Pu(),p=qg(e,{relative:c});return A.useCallback(v=>{if(sI(v,r)){v.preventDefault();let m=n!==void 0?n:rg(o)===rg(p);d(e,{replace:m,state:s,preventScrollReset:i,relative:c,viewTransition:l})}},[o,d,p,n,s,r,e,i,c,l])}function mI(e,t){t===void 0&&(t={});let r=A.useContext(cI);r==null&&ws(!1);let{basename:n}=hI(Iy.useViewTransitionState),s=qg(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=bu(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=bu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Oy(s.pathname,c)!=null||Oy(s.pathname,i)!=null}const gI=A.createContext(void 0);function vI({children:e}){const[t,r]=A.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return A.useEffect(()=>{const n=window.document.documentElement;n.classList.remove("light","dark"),n.classList.add(t),localStorage.setItem("theme",t)},[t]),a.jsx(gI.Provider,{value:{theme:t,setTheme:r},children:e})}const Kk=A.createContext(void 0);function yI({children:e}){const[t,r]=A.useState(null),[n,s]=A.useState(!0);A.useEffect(()=>{const l=localStorage.getItem("user");l&&r(JSON.parse(l)),s(!1)},[]);const i=async(l,d)=>{try{const o={id:"1",name:"John Doe",email:l,role:"patient"};r(o),localStorage.setItem("user",JSON.stringify(o))}catch(o){throw console.error("Login failed:",o),o}},c=()=>{r(null),localStorage.removeItem("user")};return a.jsx(Kk.Provider,{value:{user:t,login:i,logout:c,isLoading:n},children:e})}function bI(){const e=A.useContext(Kk);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function D1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Kg(...e){return t=>{let r=!1;const n=e.map(s=>{const i=D1(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():D1(e[s],null)}}}}function $i(...e){return A.useCallback(Kg(...e),e)}var wu=A.forwardRef((e,t)=>{const{children:r,...n}=e,s=A.Children.toArray(r),i=s.find(xI);if(i){const c=i.props.children,l=s.map(d=>d===i?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:d);return a.jsx(My,{...n,ref:t,children:A.isValidElement(c)?A.cloneElement(c,void 0,l):null})}return a.jsx(My,{...n,ref:t,children:r})});wu.displayName="Slot";var My=A.forwardRef((e,t)=>{const{children:r,...n}=e;if(A.isValidElement(r)){const s=SI(r);return A.cloneElement(r,{..._I(n,r.props),ref:t?Kg(t,s):s})}return A.Children.count(r)>1?A.Children.only(null):null});My.displayName="SlotClone";var wI=({children:e})=>a.jsx(a.Fragment,{children:e});function xI(e){return A.isValidElement(e)&&e.type===wI}function _I(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function SI(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Gk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Gk(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Yk(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Gk(e))&&(n&&(n+=" "),n+=t);return n}const I1=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,M1=Yk,Gg=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return M1(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,c=Object.keys(s).map(o=>{const p=r==null?void 0:r[o],v=i==null?void 0:i[o];if(p===null)return null;const m=I1(p)||I1(v);return s[o][m]}),l=r&&Object.entries(r).reduce((o,p)=>{let[v,m]=p;return m===void 0||(o[v]=m),o},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((o,p)=>{let{class:v,className:m,...u}=p;return Object.entries(u).every(b=>{let[f,w]=b;return Array.isArray(w)?w.includes({...i,...l}[f]):{...i,...l}[f]===w})?[...o,v,m]:o},[]);return M1(e,c,d,r==null?void 0:r.class,r==null?void 0:r.className)},Fw="-",EI=e=>{const t=kI(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:c=>{const l=c.split(Fw);return l[0]===""&&l.length!==1&&l.shift(),Jk(l,t)||RI(c)},getConflictingClassGroupIds:(c,l)=>{const d=r[c]||[];return l&&n[c]?[...d,...n[c]]:d}}},Jk=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Jk(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Fw);return(c=t.validators.find(({validator:l})=>l(i)))==null?void 0:c.classGroupId},L1=/^\[(.+)\]$/,RI=e=>{if(L1.test(e)){const t=L1.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},kI=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return TI(Object.entries(e.classGroups),r).forEach(([i,c])=>{Ly(c,n,i,t)}),n},Ly=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:F1(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(CI(s)){Ly(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,c])=>{Ly(c,F1(t,i),r,n)})})},F1=(e,t)=>{let r=e;return t.split(Fw).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},CI=e=>e.isThemeGetter,TI=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([c,l])=>[t+c,l])):i);return[r,s]}):e,PI=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,c)=>{r.set(i,c),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let c=r.get(i);if(c!==void 0)return c;if((c=n.get(i))!==void 0)return s(i,c),c},set(i,c){r.has(i)?r.set(i,c):s(i,c)}}},Qk="!",NI=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,c=l=>{const d=[];let o=0,p=0,v;for(let w=0;w<l.length;w++){let g=l[w];if(o===0){if(g===s&&(n||l.slice(w,w+i)===t)){d.push(l.slice(p,w)),p=w+i;continue}if(g==="/"){v=w;continue}}g==="["?o++:g==="]"&&o--}const m=d.length===0?l:l.substring(p),u=m.startsWith(Qk),b=u?m.substring(1):m,f=v&&v>p?v-p:void 0;return{modifiers:d,hasImportantModifier:u,baseClassName:b,maybePostfixModifierPosition:f}};return r?l=>r({className:l,parseClassName:c}):c},AI=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},jI=e=>({cache:PI(e.cacheSize),parseClassName:NI(e),...EI(e)}),OI=/\s+/,DI=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],c=e.trim().split(OI);let l="";for(let d=c.length-1;d>=0;d-=1){const o=c[d],{modifiers:p,hasImportantModifier:v,baseClassName:m,maybePostfixModifierPosition:u}=r(o);let b=!!u,f=n(b?m.substring(0,u):m);if(!f){if(!b){l=o+(l.length>0?" "+l:l);continue}if(f=n(m),!f){l=o+(l.length>0?" "+l:l);continue}b=!1}const w=AI(p).join(":"),g=v?w+Qk:w,y=g+f;if(i.includes(y))continue;i.push(y);const _=s(f,b);for(let x=0;x<_.length;++x){const E=_[x];i.push(g+E)}l=o+(l.length>0?" "+l:l)}return l};function II(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Xk(t))&&(n&&(n+=" "),n+=r);return n}const Xk=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Xk(e[n]))&&(r&&(r+=" "),r+=t);return r};function MI(e,...t){let r,n,s,i=c;function c(d){const o=t.reduce((p,v)=>v(p),e());return r=jI(o),n=r.cache.get,s=r.cache.set,i=l,l(d)}function l(d){const o=n(d);if(o)return o;const p=DI(d,r);return s(d,p),p}return function(){return i(II.apply(null,arguments))}}const Kn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Zk=/^\[(?:([a-z-]+):)?(.+)\]$/i,LI=/^\d+\/\d+$/,FI=new Set(["px","full","screen"]),BI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$I=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bo=e=>au(e)||FI.has(e)||LI.test(e),hc=e=>Nu(e,"length",QI),au=e=>!!e&&!Number.isNaN(Number(e)),Xv=e=>Nu(e,"number",au),bp=e=>!!e&&Number.isInteger(Number(e)),zI=e=>e.endsWith("%")&&au(e.slice(0,-1)),Br=e=>Zk.test(e),fc=e=>BI.test(e),HI=new Set(["length","size","percentage"]),qI=e=>Nu(e,HI,eC),KI=e=>Nu(e,"position",eC),GI=new Set(["image","url"]),YI=e=>Nu(e,GI,ZI),JI=e=>Nu(e,"",XI),wp=()=>!0,Nu=(e,t,r)=>{const n=Zk.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},QI=e=>UI.test(e)&&!VI.test(e),eC=()=>!1,XI=e=>$I.test(e),ZI=e=>WI.test(e),e3=()=>{const e=Kn("colors"),t=Kn("spacing"),r=Kn("blur"),n=Kn("brightness"),s=Kn("borderColor"),i=Kn("borderRadius"),c=Kn("borderSpacing"),l=Kn("borderWidth"),d=Kn("contrast"),o=Kn("grayscale"),p=Kn("hueRotate"),v=Kn("invert"),m=Kn("gap"),u=Kn("gradientColorStops"),b=Kn("gradientColorStopPositions"),f=Kn("inset"),w=Kn("margin"),g=Kn("opacity"),y=Kn("padding"),_=Kn("saturate"),x=Kn("scale"),E=Kn("sepia"),j=Kn("skew"),R=Kn("space"),C=Kn("translate"),T=()=>["auto","contain","none"],h=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",Br,t],k=()=>[Br,t],P=()=>["",bo,hc],N=()=>["auto",au,Br],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",Br],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[au,Br];return{cacheSize:500,separator:":",theme:{colors:[wp],spacing:[bo,hc],blur:["none","",fc,Br],brightness:de(),borderColor:[e],borderRadius:["none","","full",fc,Br],borderSpacing:k(),borderWidth:P(),contrast:de(),grayscale:I(),hueRotate:de(),invert:I(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[zI,hc],inset:S(),margin:S(),opacity:de(),padding:k(),saturate:de(),scale:de(),sepia:I(),skew:de(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Br]}],container:["container"],columns:[{columns:[fc]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),Br]}],overflow:[{overflow:h()}],"overflow-x":[{"overflow-x":h()}],"overflow-y":[{"overflow-y":h()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bp,Br]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Br]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",bp,Br]}],"grid-cols":[{"grid-cols":[wp]}],"col-start-end":[{col:["auto",{span:["full",bp,Br]},Br]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[wp]}],"row-start-end":[{row:["auto",{span:[bp,Br]},Br]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Br]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Br]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Br,t]}],"min-w":[{"min-w":[Br,t,"min","max","fit"]}],"max-w":[{"max-w":[Br,t,"none","full","min","max","fit","prose",{screen:[fc]},fc]}],h:[{h:[Br,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Br,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Br,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Br,t,"auto","min","max","fit"]}],"font-size":[{text:["base",fc,hc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xv]}],"font-family":[{font:[wp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Br]}],"line-clamp":[{"line-clamp":["none",au,Xv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bo,Br]}],"list-image":[{"list-image":["none",Br]}],"list-style-type":[{list:["none","disc","decimal",Br]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bo,hc]}],"underline-offset":[{"underline-offset":["auto",bo,Br]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Br]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Br]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),KI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YI]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[u]}],"gradient-via":[{via:[u]}],"gradient-to":[{to:[u]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:D()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[bo,Br]}],"outline-w":[{outline:[bo,hc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[bo,hc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",fc,JI]}],"shadow-color":[{shadow:[wp]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",fc,Br]}],grayscale:[{grayscale:[o]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[v]}],saturate:[{saturate:[_]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[o]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Br]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Br]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Br]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[bp,Br]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Br]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Br]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Br]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bo,hc,Xv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},t3=MI(e3);function Vr(...e){return t3(Yk(e))}const r3=Gg("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/40 disabled:pointer-events-none disabled:opacity-50 shadow-md",{variants:{variant:{default:"bg-gradient-to-r from-blue-600 to-violet-600 text-white hover:from-blue-600/90 hover:to-violet-600/90",destructive:"bg-rose-600 text-white hover:bg-rose-600/90",outline:"border border-slate-200 dark:border-zinc-700 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-sm text-slate-700 dark:text-slate-200 hover:bg-white/80 dark:hover:bg-zinc-900/60",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-zinc-800 dark:text-slate-100 dark:hover:bg-zinc-700 border border-slate-200/60 dark:border-zinc-700/60",ghost:"hover:bg-slate-100 dark:hover:bg-zinc-800 text-slate-700 dark:text-slate-200",link:"text-blue-600 dark:text-blue-400 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-lg px-3 text-xs",lg:"h-11 rounded-xl px-6",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),tr=A.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const c=n?wu:"button";return a.jsx(c,{className:Vr(r3({variant:t,size:r,className:e})),ref:i,...s})});tr.displayName="Button";const n3=Gg("inline-flex items-center rounded-lg border px-2.5 py-1 text-xs font-medium backdrop-blur-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/30",{variants:{variant:{default:"border-transparent bg-blue-100/60 text-blue-700 dark:bg-blue-400/20 dark:text-blue-300",secondary:"border-transparent bg-slate-100/60 text-slate-700 dark:bg-zinc-400/20 dark:text-slate-300",destructive:"border-transparent bg-rose-100/60 text-rose-700 dark:bg-rose-400/20 dark:text-rose-300",outline:"text-foreground border-slate-200/60 dark:border-zinc-700/60"}},defaultVariants:{variant:"default"}});function Ur({className:e,variant:t,...r}){return a.jsx("div",{className:Vr(n3({variant:t}),e),...r})}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tC=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:c,...l},d)=>A.createElement("svg",{ref:d,...i3,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:tC("lucide",s),...l},[...c.map(([o,p])=>A.createElement(o,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=(e,t)=>{const r=A.forwardRef(({className:n,...s},i)=>A.createElement(a3,{ref:i,iconNode:t,className:tC(`lucide-${s3(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=_r("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=_r("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=_r("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=_r("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=_r("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=_r("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=_r("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=_r("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=_r("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=_r("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=_r("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=_r("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=_r("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=_r("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=_r("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=_r("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=_r("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=_r("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=_r("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=_r("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=_r("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=_r("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=_r("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=_r("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=_r("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=_r("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=_r("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=_r("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=_r("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=_r("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=_r("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=_r("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=_r("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=_r("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=_r("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=_r("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=_r("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=_r("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=_r("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=_r("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=_r("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=_r("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=_r("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=_r("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=_r("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=_r("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=_r("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=_r("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=_r("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=_r("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=_r("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$1=e=>{let t;const r=new Set,n=(o,p)=>{const v=typeof o=="function"?o(t):o;if(!Object.is(v,t)){const m=t;t=p??(typeof v!="object"||v===null)?v:Object.assign({},t,v),r.forEach(u=>u(t,m))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>d,subscribe:o=>(r.add(o),()=>r.delete(o))},d=t=e(n,s,l);return l},k3=e=>e?$1(e):$1,C3=e=>e;function T3(e,t=C3){const r=pt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return pt.useDebugValue(r),r}const P3=e=>{const t=k3(e),r=n=>T3(t,n);return Object.assign(r,t),r},N3=e=>P3;function A3(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var i;const c=d=>d===null?null:JSON.parse(d,void 0),l=(i=r.getItem(s))!=null?i:null;return l instanceof Promise?l.then(c):c(l)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const Vy=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return Vy(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Vy(n)(r)}}}},j3=(e,t)=>(r,n,s)=>{let i={storage:A3(()=>localStorage),partialize:f=>f,version:0,merge:(f,w)=>({...w,...f}),...t},c=!1;const l=new Set,d=new Set;let o=i.storage;if(!o)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...f)},n,s);const p=()=>{const f=i.partialize({...n()});return o.setItem(i.name,{state:f,version:i.version})},v=s.setState;s.setState=(f,w)=>{v(f,w),p()};const m=e((...f)=>{r(...f),p()},n,s);s.getInitialState=()=>m;let u;const b=()=>{var f,w;if(!o)return;c=!1,l.forEach(y=>{var _;return y((_=n())!=null?_:m)});const g=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(f=n())!=null?f:m))||void 0;return Vy(o.getItem.bind(o))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate){const _=i.migrate(y.state,y.version);return _ instanceof Promise?_.then(x=>[!0,x]):[!0,_]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var _;const[x,E]=y;if(u=i.merge(E,(_=n())!=null?_:m),r(u,!0),x)return p()}).then(()=>{g==null||g(u,void 0),u=n(),c=!0,d.forEach(y=>y(u))}).catch(y=>{g==null||g(void 0,y)})};return s.persist={setOptions:f=>{i={...i,...f},f.storage&&(o=f.storage)},clearStorage:()=>{o==null||o.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>c,onHydrate:f=>(l.add(f),()=>{l.delete(f)}),onFinishHydration:f=>(d.add(f),()=>{d.delete(f)})},i.skipHydration||b(),u||m},O3=j3,Bs=N3()(O3(e=>({user:null,setUser:t=>e({user:t}),logout:()=>e({user:null})}),{name:"auth-storage"})),qw=A.createContext({});function Kw(e){const t=A.useRef(null);return t.current===null&&(t.current=e()),t.current}const Gw=typeof window<"u",oC=Gw?A.useLayoutEffect:A.useEffect,Yg=A.createContext(null);function Yw(e,t){e.indexOf(t)===-1&&e.push(t)}function Jw(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Ao=(e,t,r)=>r>t?t:r<e?e:r;let Qw=()=>{};const jo={},cC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function lC(e){return typeof e=="object"&&e!==null}const dC=e=>/^0[^.\s]+$/u.test(e);function Xw(e){let t;return()=>(t===void 0&&(t=e()),t)}const ma=e=>e,D3=(e,t)=>r=>t(e(r)),Ih=(...e)=>e.reduce(D3),uh=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class Zw{constructor(){this.subscriptions=[]}add(t){return Yw(this.subscriptions,t),()=>Jw(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const c=this.subscriptions[i];c&&c(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const eo=e=>e*1e3,to=e=>e/1e3;function uC(e,t){return t?e*(1e3/t):0}const pC=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,I3=1e-7,M3=12;function L3(e,t,r,n,s){let i,c,l=0;do c=t+(r-t)/2,i=pC(c,n,s)-e,i>0?r=c:t=c;while(Math.abs(i)>I3&&++l<M3);return c}function Mh(e,t,r,n){if(e===t&&r===n)return ma;const s=i=>L3(i,0,1,e,r);return i=>i===0||i===1?i:pC(s(i),t,n)}const hC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fC=e=>t=>1-e(1-t),mC=Mh(.33,1.53,.69,.99),ex=fC(mC),gC=hC(ex),vC=e=>(e*=2)<1?.5*ex(e):.5*(2-Math.pow(2,-10*(e-1))),tx=e=>1-Math.sin(Math.acos(e)),yC=fC(tx),bC=hC(tx),F3=Mh(.42,0,1,1),B3=Mh(0,0,.58,1),wC=Mh(.42,0,.58,1),U3=e=>Array.isArray(e)&&typeof e[0]!="number",xC=e=>Array.isArray(e)&&typeof e[0]=="number",V3={linear:ma,easeIn:F3,easeInOut:wC,easeOut:B3,circIn:tx,circInOut:bC,circOut:yC,backIn:ex,backInOut:gC,backOut:mC,anticipate:vC},$3=e=>typeof e=="string",W1=e=>{if(xC(e)){Qw(e.length===4);const[t,r,n,s]=e;return Mh(t,r,n,s)}else if($3(e))return V3[e];return e},Vf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function W3(e,t){let r=new Set,n=new Set,s=!1,i=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(p){c.has(p)&&(o.schedule(p),e()),p(l)}const o={schedule:(p,v=!1,m=!1)=>{const b=m&&s?r:n;return v&&c.add(p),b.has(p)||b.add(p),p},cancel:p=>{n.delete(p),c.delete(p)},process:p=>{if(l=p,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(d),r.clear(),s=!1,i&&(i=!1,o.process(p))}};return o}const z3=40;function _C(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,c=Vf.reduce((_,x)=>(_[x]=W3(i),_),{}),{setup:l,read:d,resolveKeyframes:o,preUpdate:p,update:v,preRender:m,render:u,postRender:b}=c,f=()=>{const _=jo.useManualTiming?s.timestamp:performance.now();r=!1,jo.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(_-s.timestamp,z3),1)),s.timestamp=_,s.isProcessing=!0,l.process(s),d.process(s),o.process(s),p.process(s),v.process(s),m.process(s),u.process(s),b.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(f))},w=()=>{r=!0,n=!0,s.isProcessing||e(f)};return{schedule:Vf.reduce((_,x)=>{const E=c[x];return _[x]=(j,R=!1,C=!1)=>(r||w(),E.schedule(j,R,C)),_},{}),cancel:_=>{for(let x=0;x<Vf.length;x++)c[Vf[x]].cancel(_)},state:s,steps:c}}const{schedule:rs,cancel:$c,state:ti,steps:Zv}=_C(typeof requestAnimationFrame<"u"?requestAnimationFrame:ma,!0);let gm;function H3(){gm=void 0}const Mi={now:()=>(gm===void 0&&Mi.set(ti.isProcessing||jo.useManualTiming?ti.timestamp:performance.now()),gm),set:e=>{gm=e,queueMicrotask(H3)}},SC=e=>t=>typeof t=="string"&&t.startsWith(e),rx=SC("--"),q3=SC("var(--"),nx=e=>q3(e)?K3.test(e.split("/*")[0].trim()):!1,K3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Au={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ph={...Au,transform:e=>Ao(0,1,e)},$f={...Au,default:1},Vp=e=>Math.round(e*1e5)/1e5,sx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G3(e){return e==null}const Y3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ix=(e,t)=>r=>!!(typeof r=="string"&&Y3.test(r)&&r.startsWith(e)||t&&!G3(r)&&Object.prototype.hasOwnProperty.call(r,t)),EC=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,c,l]=n.match(sx);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},J3=e=>Ao(0,255,e),e0={...Au,transform:e=>Math.round(J3(e))},Bl={test:ix("rgb","red"),parse:EC("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+e0.transform(e)+", "+e0.transform(t)+", "+e0.transform(r)+", "+Vp(ph.transform(n))+")"};function Q3(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const $y={test:ix("#"),parse:Q3,transform:Bl.transform},Lh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),mc=Lh("deg"),ro=Lh("%"),kr=Lh("px"),X3=Lh("vh"),Z3=Lh("vw"),z1={...ro,parse:e=>ro.parse(e)/100,transform:e=>ro.transform(e*100)},Yd={test:ix("hsl","hue"),parse:EC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+ro.transform(Vp(t))+", "+ro.transform(Vp(r))+", "+Vp(ph.transform(n))+")"},As={test:e=>Bl.test(e)||$y.test(e)||Yd.test(e),parse:e=>Bl.test(e)?Bl.parse(e):Yd.test(e)?Yd.parse(e):$y.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Bl.transform(e):Yd.transform(e),getAnimatableNone:e=>{const t=As.parse(e);return t.alpha=0,As.transform(t)}},eM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tM(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(sx))==null?void 0:t.length)||0)+(((r=e.match(eM))==null?void 0:r.length)||0)>0}const RC="number",kC="color",rM="var",nM="var(",H1="${}",sM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hh(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(sM,d=>(As.test(d)?(n.color.push(i),s.push(kC),r.push(As.parse(d))):d.startsWith(nM)?(n.var.push(i),s.push(rM),r.push(d)):(n.number.push(i),s.push(RC),r.push(parseFloat(d))),++i,H1)).split(H1);return{values:r,split:l,indexes:n,types:s}}function CC(e){return hh(e).values}function TC(e){const{split:t,types:r}=hh(e),n=t.length;return s=>{let i="";for(let c=0;c<n;c++)if(i+=t[c],s[c]!==void 0){const l=r[c];l===RC?i+=Vp(s[c]):l===kC?i+=As.transform(s[c]):i+=s[c]}return i}}const iM=e=>typeof e=="number"?0:As.test(e)?As.getAnimatableNone(e):e;function aM(e){const t=CC(e);return TC(e)(t.map(iM))}const Wc={test:tM,parse:CC,createTransformer:TC,getAnimatableNone:aM};function t0(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function oM({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,c=0;if(!t)s=i=c=r;else{const l=r<.5?r*(1+t):r+t-r*t,d=2*r-l;s=t0(d,l,e+1/3),i=t0(d,l,e),c=t0(d,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:n}}function og(e,t){return r=>r>0?t:e}const ps=(e,t,r)=>e+(t-e)*r,r0=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},cM=[$y,Bl,Yd],lM=e=>cM.find(t=>t.test(e));function q1(e){const t=lM(e);if(!t)return!1;let r=t.parse(e);return t===Yd&&(r=oM(r)),r}const K1=(e,t)=>{const r=q1(e),n=q1(t);if(!r||!n)return og(e,t);const s={...r};return i=>(s.red=r0(r.red,n.red,i),s.green=r0(r.green,n.green,i),s.blue=r0(r.blue,n.blue,i),s.alpha=ps(r.alpha,n.alpha,i),Bl.transform(s))},Wy=new Set(["none","hidden"]);function dM(e,t){return Wy.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function uM(e,t){return r=>ps(e,t,r)}function ax(e){return typeof e=="number"?uM:typeof e=="string"?nx(e)?og:As.test(e)?K1:fM:Array.isArray(e)?PC:typeof e=="object"?As.test(e)?K1:pM:og}function PC(e,t){const r=[...e],n=r.length,s=e.map((i,c)=>ax(i)(i,t[c]));return i=>{for(let c=0;c<n;c++)r[c]=s[c](i);return r}}function pM(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=ax(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function hM(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],c=e.indexes[i][n[i]],l=e.values[c]??0;r[s]=l,n[i]++}return r}const fM=(e,t)=>{const r=Wc.createTransformer(t),n=hh(e),s=hh(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Wy.has(e)&&!s.values.length||Wy.has(t)&&!n.values.length?dM(e,t):Ih(PC(hM(n,s),s.values),r):og(e,t)};function NC(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?ps(e,t,r):ax(e)(e,t)}const mM=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>rs.update(t,r),stop:()=>$c(t),now:()=>ti.isProcessing?ti.timestamp:Mi.now()}},AC=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},cg=2e4;function ox(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<cg;)t+=r,n=e.next(t);return t>=cg?1/0:t}function gM(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(ox(n),cg);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:to(s)}}const vM=5;function jC(e,t,r){const n=Math.max(t-vM,0);return uC(r-e(n),t-n)}const vs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},G1=.001;function yM({duration:e=vs.duration,bounce:t=vs.bounce,velocity:r=vs.velocity,mass:n=vs.mass}){let s,i,c=1-t;c=Ao(vs.minDamping,vs.maxDamping,c),e=Ao(vs.minDuration,vs.maxDuration,to(e)),c<1?(s=o=>{const p=o*c,v=p*e,m=p-r,u=zy(o,c),b=Math.exp(-v);return G1-m/u*b},i=o=>{const v=o*c*e,m=v*r+r,u=Math.pow(c,2)*Math.pow(o,2)*e,b=Math.exp(-v),f=zy(Math.pow(o,2),c);return(-s(o)+G1>0?-1:1)*((m-u)*b)/f}):(s=o=>{const p=Math.exp(-o*e),v=(o-r)*e+1;return-.001+p*v},i=o=>{const p=Math.exp(-o*e),v=(r-o)*(e*e);return p*v});const l=5/e,d=wM(s,i,l);if(e=eo(e),isNaN(d))return{stiffness:vs.stiffness,damping:vs.damping,duration:e};{const o=Math.pow(d,2)*n;return{stiffness:o,damping:c*2*Math.sqrt(n*o),duration:e}}}const bM=12;function wM(e,t,r){let n=r;for(let s=1;s<bM;s++)n=n-e(n)/t(n);return n}function zy(e,t){return e*Math.sqrt(1-t*t)}const xM=["duration","bounce"],_M=["stiffness","damping","mass"];function Y1(e,t){return t.some(r=>e[r]!==void 0)}function SM(e){let t={velocity:vs.velocity,stiffness:vs.stiffness,damping:vs.damping,mass:vs.mass,isResolvedFromDuration:!1,...e};if(!Y1(e,_M)&&Y1(e,xM))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*Ao(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:vs.mass,stiffness:s,damping:i}}else{const r=yM(e);t={...t,...r,mass:vs.mass},t.isResolvedFromDuration=!0}return t}function lg(e=vs.visualDuration,t=vs.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],c=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:d,damping:o,mass:p,duration:v,velocity:m,isResolvedFromDuration:u}=SM({...r,velocity:-to(r.velocity||0)}),b=m||0,f=o/(2*Math.sqrt(d*p)),w=c-i,g=to(Math.sqrt(d/p)),y=Math.abs(w)<5;n||(n=y?vs.restSpeed.granular:vs.restSpeed.default),s||(s=y?vs.restDelta.granular:vs.restDelta.default);let _;if(f<1){const E=zy(g,f);_=j=>{const R=Math.exp(-f*g*j);return c-R*((b+f*g*w)/E*Math.sin(E*j)+w*Math.cos(E*j))}}else if(f===1)_=E=>c-Math.exp(-g*E)*(w+(b+g*w)*E);else{const E=g*Math.sqrt(f*f-1);_=j=>{const R=Math.exp(-f*g*j),C=Math.min(E*j,300);return c-R*((b+f*g*w)*Math.sinh(C)+E*w*Math.cosh(C))/E}}const x={calculatedDuration:u&&v||null,next:E=>{const j=_(E);if(u)l.done=E>=v;else{let R=E===0?b:0;f<1&&(R=E===0?eo(b):jC(_,E,j));const C=Math.abs(R)<=n,T=Math.abs(c-j)<=s;l.done=C&&T}return l.value=l.done?c:j,l},toString:()=>{const E=Math.min(ox(x),cg),j=AC(R=>x.next(E*R).value,E,30);return E+"ms "+j},toTransition:()=>{}};return x}lg.applyToOptions=e=>{const t=gM(e,100,lg);return e.ease=t.ease,e.duration=eo(t.duration),e.type="keyframes",e};function Hy({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:c,min:l,max:d,restDelta:o=.5,restSpeed:p}){const v=e[0],m={done:!1,value:v},u=C=>l!==void 0&&C<l||d!==void 0&&C>d,b=C=>l===void 0?d:d===void 0||Math.abs(l-C)<Math.abs(d-C)?l:d;let f=r*t;const w=v+f,g=c===void 0?w:c(w);g!==w&&(f=g-v);const y=C=>-f*Math.exp(-C/n),_=C=>g+y(C),x=C=>{const T=y(C),h=_(C);m.done=Math.abs(T)<=o,m.value=m.done?g:h};let E,j;const R=C=>{u(m.value)&&(E=C,j=lg({keyframes:[m.value,b(m.value)],velocity:jC(_,C,m.value),damping:s,stiffness:i,restDelta:o,restSpeed:p}))};return R(0),{calculatedDuration:null,next:C=>{let T=!1;return!j&&E===void 0&&(T=!0,x(C),R(C)),E!==void 0&&C>=E?j.next(C-E):(!T&&x(C),m)}}}function EM(e,t,r){const n=[],s=r||jo.mix||NC,i=e.length-1;for(let c=0;c<i;c++){let l=s(e[c],e[c+1]);if(t){const d=Array.isArray(t)?t[c]||ma:t;l=Ih(d,l)}n.push(l)}return n}function RM(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Qw(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=EM(t,n,s),d=l.length,o=p=>{if(c&&p<e[0])return t[0];let v=0;if(d>1)for(;v<e.length-2&&!(p<e[v+1]);v++);const m=uh(e[v],e[v+1],p);return l[v](m)};return r?p=>o(Ao(e[0],e[i-1],p)):o}function kM(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=uh(0,t,n);e.push(ps(r,1,s))}}function CM(e){const t=[0];return kM(t,e.length-1),t}function TM(e,t){return e.map(r=>r*t)}function PM(e,t){return e.map(()=>t||wC).splice(0,e.length-1)}function $p({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=U3(n)?n.map(W1):W1(n),i={done:!1,value:t[0]},c=TM(r&&r.length===t.length?r:CM(t),e),l=RM(c,t,{ease:Array.isArray(s)?s:PM(t,s)});return{calculatedDuration:e,next:d=>(i.value=l(d),i.done=d>=e,i)}}const NM=e=>e!==null;function cx(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(NM),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const AM={decay:Hy,inertia:Hy,tween:$p,keyframes:$p,spring:lg};function OC(e){typeof e.type=="string"&&(e.type=AM[e.type])}class lx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const jM=e=>e/100;class dx extends lx{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Mi.now()&&this.tick(Mi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;OC(t);const{type:r=$p,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:c=0}=t;let{keyframes:l}=t;const d=r||$p;d!==$p&&typeof l[0]!="number"&&(this.mixKeyframes=Ih(jM,NC(l[0],l[1])),l=[0,100]);const o=d({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...l].reverse(),velocity:-c})),o.calculatedDuration===null&&(o.calculatedDuration=ox(o));const{calculatedDuration:p}=o;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=o}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:o=0,keyframes:p,repeat:v,repeatType:m,repeatDelay:u,type:b,onUpdate:f,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const g=this.currentTime-o*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,x=n;if(v){const C=Math.min(this.currentTime,s)/l;let T=Math.floor(C),h=C%1;!h&&C>=1&&(h=1),h===1&&T--,T=Math.min(T,v+1),!!(T%2)&&(m==="reverse"?(h=1-h,u&&(h-=u/l)):m==="mirror"&&(x=c)),_=Ao(0,1,h)*l}const E=y?{done:!1,value:p[0]}:x.next(_);i&&(E.value=i(E.value));let{done:j}=E;!y&&d!==null&&(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return R&&b!==Hy&&(E.value=cx(p,this.options,w,this.speed)),f&&f(E.value),R&&this.finish(),E}then(t,r){return this.finished.then(t,r)}get duration(){return to(this.calculatedDuration)}get time(){return to(this.currentTime)}set time(t){var r;t=eo(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Mi.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=to(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=mM,startTime:r}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function OM(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ul=e=>e*180/Math.PI,qy=e=>{const t=Ul(Math.atan2(e[1],e[0]));return Ky(t)},DM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:qy,rotateZ:qy,skewX:e=>Ul(Math.atan(e[1])),skewY:e=>Ul(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Ky=e=>(e=e%360,e<0&&(e+=360),e),J1=qy,Q1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),X1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),IM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Q1,scaleY:X1,scale:e=>(Q1(e)+X1(e))/2,rotateX:e=>Ky(Ul(Math.atan2(e[6],e[5]))),rotateY:e=>Ky(Ul(Math.atan2(-e[2],e[0]))),rotateZ:J1,rotate:J1,skewX:e=>Ul(Math.atan(e[4])),skewY:e=>Ul(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Gy(e){return e.includes("scale")?1:0}function Yy(e,t){if(!e||e==="none")return Gy(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=IM,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=DM,s=l}if(!s)return Gy(t);const i=n[t],c=s[1].split(",").map(LM);return typeof i=="function"?i(c):c[i]}const MM=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Yy(r,t)};function LM(e){return parseFloat(e.trim())}const ju=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ou=new Set(ju),Z1=e=>e===Au||e===kr,FM=new Set(["x","y","z"]),BM=ju.filter(e=>!FM.has(e));function UM(e){const t=[];return BM.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const zl={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Yy(t,"x"),y:(e,{transform:t})=>Yy(t,"y")};zl.translateX=zl.x;zl.translateY=zl.y;const Hl=new Set;let Jy=!1,Qy=!1,Xy=!1;function DC(){if(Qy){const e=Array.from(Hl).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=UM(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,c])=>{var l;(l=n.getValue(i))==null||l.set(c)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Qy=!1,Jy=!1,Hl.forEach(e=>e.complete(Xy)),Hl.clear()}function IC(){Hl.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Qy=!0)})}function VM(){Xy=!0,IC(),DC(),Xy=!1}class ux{constructor(t,r,n,s,i,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Hl.add(this),Jy||(Jy=!0,rs.read(IC),rs.resolveKeyframes(DC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),c=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,c);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=c),s&&i===void 0&&s.set(t[0])}OM(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Hl.delete(this)}cancel(){this.state==="scheduled"&&(Hl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $M=e=>e.startsWith("--");function WM(e,t,r){$M(t)?e.style.setProperty(t,r):e.style[t]=r}const zM=Xw(()=>window.ScrollTimeline!==void 0),HM={};function qM(e,t){const r=Xw(e);return()=>HM[t]??r()}const MC=qM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Tp=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,eS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tp([0,.65,.55,1]),circOut:Tp([.55,0,1,.45]),backIn:Tp([.31,.01,.66,-.59]),backOut:Tp([.33,1.53,.69,.99])};function LC(e,t){if(e)return typeof e=="function"?MC()?AC(e,t):"ease-out":xC(e)?Tp(e):Array.isArray(e)?e.map(r=>LC(r,t)||eS.easeOut):eS[e]}function KM(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:c="loop",ease:l="easeOut",times:d}={},o=void 0){const p={[t]:r};d&&(p.offset=d);const v=LC(l,s);Array.isArray(v)&&(p.easing=v);const m={delay:n,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:i+1,direction:c==="reverse"?"alternate":"normal"};return o&&(m.pseudoElement=o),e.animate(p,m)}function FC(e){return typeof e=="function"&&"applyToOptions"in e}function GM({type:e,...t}){return FC(e)&&MC()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class YM extends lx{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:c=!1,finalKeyframe:l,onComplete:d}=t;this.isPseudoElement=!!i,this.allowFlatten=c,this.options=t,Qw(typeof t.type!="string");const o=GM(t);this.animation=KM(r,n,s,o,i),o.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=cx(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):WM(r,n,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return to(Number(t))}get time(){return to(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=eo(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&zM()?(this.animation.timeline=t,ma):r(this)}}const BC={anticipate:vC,backInOut:gC,circInOut:bC};function JM(e){return e in BC}function QM(e){typeof e.ease=="string"&&JM(e.ease)&&(e.ease=BC[e.ease])}const tS=10;class XM extends YM{constructor(t){QM(t),OC(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...c}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new dx({...c,autoplay:!1}),d=eo(this.finishedTime??this.time);r.setWithVelocity(l.sample(d-tS).value,l.sample(d).value,tS),l.stop()}}const rS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Wc.test(e)||e==="0")&&!e.startsWith("url("));function ZM(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function eL(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],c=rS(s,t),l=rS(i,t);return!c||!l?!1:ZM(e)||(r==="spring"||FC(r))&&n}function Zy(e){e.duration=0,e.type}const tL=new Set(["opacity","clipPath","filter","transform"]),rL=Xw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nL(e){var p;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:c}=e;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:o}=t.owner.getProps();return rL()&&r&&tL.has(r)&&(r!=="transform"||!o)&&!d&&!n&&s!=="mirror"&&i!==0&&c!=="inertia"}const sL=40;class iL extends lx{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:c="loop",keyframes:l,name:d,motionValue:o,element:p,...v}){var b;super(),this.stop=()=>{var f,w;this._animation&&(this._animation.stop(),(f=this.stopTimeline)==null||f.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Mi.now();const m={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:c,name:d,motionValue:o,element:p,...v},u=(p==null?void 0:p.KeyframeResolver)||ux;this.keyframeResolver=new u(l,(f,w,g)=>this.onKeyframesResolved(f,w,m,!g),d,o,p),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:c,velocity:l,delay:d,isHandoff:o,onUpdate:p}=n;this.resolvedAt=Mi.now(),eL(t,i,c,l)||((jo.instantAnimations||!d)&&(p==null||p(cx(t,n,r))),t[0]=t[t.length-1],Zy(n),n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>sL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},u=!o&&nL(m)?new XM({...m,element:m.motionValue.owner.current}):new dx(m);u.finished.then(()=>this.notifyFinished()).catch(ma),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),VM()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const aL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oL(e){const t=aL.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function UC(e,t,r=1){const[n,s]=oL(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const c=i.trim();return cC(c)?parseFloat(c):c}return nx(s)?UC(s,t,r+1):s}function px(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const VC=new Set(["width","height","top","left","right","bottom",...ju]),cL={test:e=>e==="auto",parse:e=>e},$C=e=>t=>t.test(e),WC=[Au,kr,ro,mc,Z3,X3,cL],nS=e=>WC.find($C(e));function lL(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||dC(e):!0}const dL=new Set(["brightness","contrast","saturate","opacity"]);function uL(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(sx)||[];if(!n)return e;const s=r.replace(n,"");let i=dL.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const pL=/\b([a-z-]*)\(.*?\)/gu,eb={...Wc,getAnimatableNone:e=>{const t=e.match(pL);return t?t.map(uL).join(" "):e}},sS={...Au,transform:Math.round},hL={rotate:mc,rotateX:mc,rotateY:mc,rotateZ:mc,scale:$f,scaleX:$f,scaleY:$f,scaleZ:$f,skew:mc,skewX:mc,skewY:mc,distance:kr,translateX:kr,translateY:kr,translateZ:kr,x:kr,y:kr,z:kr,perspective:kr,transformPerspective:kr,opacity:ph,originX:z1,originY:z1,originZ:kr},hx={borderWidth:kr,borderTopWidth:kr,borderRightWidth:kr,borderBottomWidth:kr,borderLeftWidth:kr,borderRadius:kr,radius:kr,borderTopLeftRadius:kr,borderTopRightRadius:kr,borderBottomRightRadius:kr,borderBottomLeftRadius:kr,width:kr,maxWidth:kr,height:kr,maxHeight:kr,top:kr,right:kr,bottom:kr,left:kr,padding:kr,paddingTop:kr,paddingRight:kr,paddingBottom:kr,paddingLeft:kr,margin:kr,marginTop:kr,marginRight:kr,marginBottom:kr,marginLeft:kr,backgroundPositionX:kr,backgroundPositionY:kr,...hL,zIndex:sS,fillOpacity:ph,strokeOpacity:ph,numOctaves:sS},fL={...hx,color:As,backgroundColor:As,outlineColor:As,fill:As,stroke:As,borderColor:As,borderTopColor:As,borderRightColor:As,borderBottomColor:As,borderLeftColor:As,filter:eb,WebkitFilter:eb},zC=e=>fL[e];function HC(e,t){let r=zC(e);return r!==eb&&(r=Wc),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const mL=new Set(["auto","none","0"]);function gL(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!mL.has(i)&&hh(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=HC(r,s)}class vL extends ux{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let o=t[d];if(typeof o=="string"&&(o=o.trim(),nx(o))){const p=UC(o,r.current);p!==void 0&&(t[d]=p),d===t.length-1&&(this.finalKeyframe=o)}}if(this.resolveNoneKeyframes(),!VC.has(n)||t.length!==2)return;const[s,i]=t,c=nS(s),l=nS(i);if(c!==l)if(Z1(c)&&Z1(l))for(let d=0;d<t.length;d++){const o=t[d];typeof o=="string"&&(t[d]=parseFloat(o))}else zl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||lL(t[s]))&&n.push(s);n.length&&gL(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,c=n[i];n[i]=zl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([d,o])=>{t.getValue(d).set(o)}),this.resolveNoneKeyframes()}}function yL(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=(r==null?void 0:r[e])??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const qC=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function KC(e){return lC(e)&&"offsetHeight"in e}const iS=30,bL=e=>!isNaN(parseFloat(e));class wL{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Mi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Mi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Zw);const n=this.events[t].add(r);return t==="change"?()=>{n(),rs.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>iS)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,iS);return uC(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xu(e,t){return new wL(e,t)}const{schedule:fx}=_C(queueMicrotask,!1),Sa={x:!1,y:!1};function GC(){return Sa.x||Sa.y}function xL(e){return e==="x"||e==="y"?Sa[e]?null:(Sa[e]=!0,()=>{Sa[e]=!1}):Sa.x||Sa.y?null:(Sa.x=Sa.y=!0,()=>{Sa.x=Sa.y=!1})}function YC(e,t){const r=yL(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function aS(e){return!(e.pointerType==="touch"||GC())}function _L(e,t,r={}){const[n,s,i]=YC(e,r),c=l=>{if(!aS(l))return;const{target:d}=l,o=t(d,l);if(typeof o!="function"||!d)return;const p=v=>{aS(v)&&(o(v),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return n.forEach(l=>{l.addEventListener("pointerenter",c,s)}),i}const JC=(e,t)=>t?e===t?!0:JC(e,t.parentElement):!1,mx=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,SL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EL(e){return SL.has(e.tagName)||e.tabIndex!==-1}const vm=new WeakSet;function oS(e){return t=>{t.key==="Enter"&&e(t)}}function n0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const RL=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=oS(()=>{if(vm.has(r))return;n0(r,"down");const s=oS(()=>{n0(r,"up")}),i=()=>n0(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function cS(e){return mx(e)&&!GC()}function kL(e,t,r={}){const[n,s,i]=YC(e,r),c=l=>{const d=l.currentTarget;if(!cS(l))return;vm.add(d);const o=t(d,l),p=(u,b)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",m),vm.has(d)&&vm.delete(d),cS(u)&&typeof o=="function"&&o(u,{success:b})},v=u=>{p(u,d===window||d===document||r.useGlobalTarget||JC(d,u.target))},m=u=>{p(u,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",m,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",c,s),KC(l)&&(l.addEventListener("focus",o=>RL(o,s)),!EL(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function QC(e){return lC(e)&&"ownerSVGElement"in e}function CL(e){return QC(e)&&e.tagName==="svg"}const hi=e=>!!(e&&e.getVelocity),TL=[...WC,As,Wc],PL=e=>TL.find($C(e)),gx=A.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class NL extends A.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=KC(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function AL({children:e,isPresent:t,anchorX:r,root:n}){const s=A.useId(),i=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=A.useContext(gx);return A.useInsertionEffect(()=>{const{width:d,height:o,top:p,left:v,right:m}=c.current;if(t||!i.current||!d||!o)return;const u=r==="left"?`left: ${v}`:`right: ${m}`;i.current.dataset.motionPopId=s;const b=document.createElement("style");l&&(b.nonce=l);const f=n??document.head;return f.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${o}px !important;
            ${u}px !important;
            top: ${p}px !important;
          }
        `),()=>{f.contains(b)&&f.removeChild(b)}},[t]),a.jsx(NL,{isPresent:t,childRef:i,sizeRef:c,children:A.cloneElement(e,{ref:i})})}const jL=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:c,anchorX:l,root:d})=>{const o=Kw(OL),p=A.useId();let v=!0,m=A.useMemo(()=>(v=!1,{id:p,initial:t,isPresent:r,custom:s,onExitComplete:u=>{o.set(u,!0);for(const b of o.values())if(!b)return;n&&n()},register:u=>(o.set(u,!1),()=>o.delete(u))}),[r,o,n]);return i&&v&&(m={...m}),A.useMemo(()=>{o.forEach((u,b)=>o.set(b,!1))},[r]),A.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),c==="popLayout"&&(e=a.jsx(AL,{isPresent:r,anchorX:l,root:d,children:e})),a.jsx(Yg.Provider,{value:m,children:e})};function OL(){return new Map}function XC(e=!0){const t=A.useContext(Yg);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=A.useId();A.useEffect(()=>{if(e)return s(i)},[e]);const c=A.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,c]:[!0]}const Wf=e=>e.key||"";function lS(e){const t=[];return A.Children.forEach(e,r=>{A.isValidElement(r)&&t.push(r)}),t}const DL=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:c=!1,anchorX:l="left",root:d})=>{const[o,p]=XC(c),v=A.useMemo(()=>lS(e),[e]),m=c&&!o?[]:v.map(Wf),u=A.useRef(!0),b=A.useRef(v),f=Kw(()=>new Map),[w,g]=A.useState(v),[y,_]=A.useState(v);oC(()=>{u.current=!1,b.current=v;for(let j=0;j<y.length;j++){const R=Wf(y[j]);m.includes(R)?f.delete(R):f.get(R)!==!0&&f.set(R,!1)}},[y,m.length,m.join("-")]);const x=[];if(v!==w){let j=[...v];for(let R=0;R<y.length;R++){const C=y[R],T=Wf(C);m.includes(T)||(j.splice(R,0,C),x.push(C))}return i==="wait"&&x.length&&(j=x),_(lS(j)),g(v),null}const{forceRender:E}=A.useContext(qw);return a.jsx(a.Fragment,{children:y.map(j=>{const R=Wf(j),C=c&&!o?!1:v===y||m.includes(R),T=()=>{if(f.has(R))f.set(R,!0);else return;let h=!0;f.forEach(S=>{S||(h=!1)}),h&&(E==null||E(),_(b.current),c&&(p==null||p()),n&&n())};return a.jsx(jL,{isPresent:C,initial:!u.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:d,onExitComplete:C?void 0:T,anchorX:l,children:j},R)})})},ZC=A.createContext({strict:!1}),dS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_u={};for(const e in dS)_u[e]={isEnabled:t=>dS[e].some(r=>!!t[r])};function IL(e){for(const t in e)_u[t]={..._u[t],...e[t]}}const ML=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ML.has(e)}let eT=e=>!dg(e);function LL(e){typeof e=="function"&&(eT=t=>t.startsWith("on")?!dg(t):e(t))}try{LL(require("@emotion/is-prop-valid").default)}catch{}function FL(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(eT(s)||r===!0&&dg(s)||!t&&!dg(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const Jg=A.createContext({});function Qg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function fh(e){return typeof e=="string"||Array.isArray(e)}const vx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yx=["initial",...vx];function Xg(e){return Qg(e.animate)||yx.some(t=>fh(e[t]))}function tT(e){return!!(Xg(e)||e.variants)}function BL(e,t){if(Xg(e)){const{initial:r,animate:n}=e;return{initial:r===!1||fh(r)?r:void 0,animate:fh(n)?n:void 0}}return e.inherit!==!1?t:{}}function UL(e){const{initial:t,animate:r}=BL(e,A.useContext(Jg));return A.useMemo(()=>({initial:t,animate:r}),[uS(t),uS(r)])}function uS(e){return Array.isArray(e)?e.join(" "):e}const mh={};function VL(e){for(const t in e)mh[t]=e[t],rx(t)&&(mh[t].isCSSVariable=!0)}function rT(e,{layout:t,layoutId:r}){return Ou.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!mh[e]||e==="opacity")}const $L={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WL=ju.length;function zL(e,t,r){let n="",s=!0;for(let i=0;i<WL;i++){const c=ju[i],l=e[c];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(c.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||r){const o=qC(l,hx[c]);if(!d){s=!1;const p=$L[c]||c;n+=`${p}(${o}) `}r&&(t[c]=o)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function bx(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let c=!1,l=!1;for(const d in t){const o=t[d];if(Ou.has(d)){c=!0;continue}else if(rx(d)){s[d]=o;continue}else{const p=qC(o,hx[d]);d.startsWith("origin")?(l=!0,i[d]=p):n[d]=p}}if(t.transform||(c||r?n.transform=zL(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:d="50%",originY:o="50%",originZ:p=0}=i;n.transformOrigin=`${d} ${o} ${p}`}}const wx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nT(e,t,r){for(const n in t)!hi(t[n])&&!rT(n,r)&&(e[n]=t[n])}function HL({transformTemplate:e},t){return A.useMemo(()=>{const r=wx();return bx(r,t,e),Object.assign({},r.vars,r.style)},[t])}function qL(e,t){const r=e.style||{},n={};return nT(n,r,e),Object.assign(n,HL(e,t)),n}function KL(e,t){const r={},n=qL(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const GL={offset:"stroke-dashoffset",array:"stroke-dasharray"},YL={offset:"strokeDashoffset",array:"strokeDasharray"};function JL(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?GL:YL;e[i.offset]=kr.transform(-n);const c=kr.transform(t),l=kr.transform(r);e[i.array]=`${c} ${l}`}function sT(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:c=0,...l},d,o,p){if(bx(e,l,o),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:m}=e;v.transform&&(m.transform=v.transform,delete v.transform),(m.transform||v.transformOrigin)&&(m.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),m.transform&&(m.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),r!==void 0&&(v.y=r),n!==void 0&&(v.scale=n),s!==void 0&&JL(v,s,i,c,!1)}const iT=()=>({...wx(),attrs:{}}),aT=e=>typeof e=="string"&&e.toLowerCase()==="svg";function QL(e,t,r,n){const s=A.useMemo(()=>{const i=iT();return sT(i,t,aT(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};nT(i,e.style,e),s.style={...i,...s.style}}return s}const XL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xx(e){return typeof e!="string"||e.includes("-")?!1:!!(XL.indexOf(e)>-1||/[A-Z]/u.test(e))}function ZL(e,t,r,{latestValues:n},s,i=!1){const l=(xx(e)?QL:KL)(t,n,s,e),d=FL(t,typeof e=="string",i),o=e!==A.Fragment?{...d,...l,ref:r}:{},{children:p}=t,v=A.useMemo(()=>hi(p)?p.get():p,[p]);return A.createElement(e,{...o,children:v})}function pS(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function _x(e,t,r,n){if(typeof t=="function"){const[s,i]=pS(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=pS(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function ym(e){return hi(e)?e.get():e}function e8({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:t8(r,n,s,e),renderState:t()}}function t8(e,t,r,n){const s={},i=n(e,{});for(const m in i)s[m]=ym(i[m]);let{initial:c,animate:l}=e;const d=Xg(e),o=tT(e);t&&o&&!d&&e.inherit!==!1&&(c===void 0&&(c=t.initial),l===void 0&&(l=t.animate));let p=r?r.initial===!1:!1;p=p||c===!1;const v=p?l:c;if(v&&typeof v!="boolean"&&!Qg(v)){const m=Array.isArray(v)?v:[v];for(let u=0;u<m.length;u++){const b=_x(e,m[u]);if(b){const{transitionEnd:f,transition:w,...g}=b;for(const y in g){let _=g[y];if(Array.isArray(_)){const x=p?_.length-1:0;_=_[x]}_!==null&&(s[y]=_)}for(const y in f)s[y]=f[y]}}}return s}const oT=e=>(t,r)=>{const n=A.useContext(Jg),s=A.useContext(Yg),i=()=>e8(e,t,n,s);return r?i():Kw(i)};function Sx(e,t,r){var i;const{style:n}=e,s={};for(const c in n)(hi(n[c])||t.style&&hi(t.style[c])||rT(c,e)||((i=r==null?void 0:r.getValue(c))==null?void 0:i.liveStyle)!==void 0)&&(s[c]=n[c]);return s}const r8=oT({scrapeMotionValuesFromProps:Sx,createRenderState:wx});function cT(e,t,r){const n=Sx(e,t,r);for(const s in e)if(hi(e[s])||hi(t[s])){const i=ju.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const n8=oT({scrapeMotionValuesFromProps:cT,createRenderState:iT}),s8=Symbol.for("motionComponentSymbol");function Jd(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function i8(e,t,r){return A.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Jd(r)&&(r.current=n))},[t])}const Ex=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),a8="framerAppearId",lT="data-"+Ex(a8),dT=A.createContext({});function o8(e,t,r,n,s){var f,w;const{visualElement:i}=A.useContext(Jg),c=A.useContext(ZC),l=A.useContext(Yg),d=A.useContext(gx).reducedMotion,o=A.useRef(null);n=n||c.renderer,!o.current&&n&&(o.current=n(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const p=o.current,v=A.useContext(dT);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&c8(o.current,r,s,v);const m=A.useRef(!1);A.useInsertionEffect(()=>{p&&m.current&&p.update(r,l)});const u=r[lT],b=A.useRef(!!u&&!((f=window.MotionHandoffIsComplete)!=null&&f.call(window,u))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,u)));return oC(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),b.current&&p.animationState&&p.animationState.animateChanges())}),A.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,u)}),b.current=!1),p.enteringChildren=void 0)}),p}function c8(e,t,r,n){const{layoutId:s,layout:i,drag:c,dragConstraints:l,layoutScroll:d,layoutRoot:o,layoutCrossfade:p}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:uT(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!c||l&&Jd(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:o})}function uT(e){if(e)return e.options.allowProjection!==!1?e.projection:uT(e.parent)}function s0(e,{forwardMotionProps:t=!1}={},r,n){r&&IL(r);const s=xx(e)?n8:r8;function i(l,d){let o;const p={...A.useContext(gx),...l,layoutId:l8(l)},{isStatic:v}=p,m=UL(l),u=s(l,v);if(!v&&Gw){d8();const b=u8(p);o=b.MeasureLayout,m.visualElement=o8(e,u,p,n,b.ProjectionNode)}return a.jsxs(Jg.Provider,{value:m,children:[o&&m.visualElement?a.jsx(o,{visualElement:m.visualElement,...p}):null,ZL(e,l,i8(u,m.visualElement,d),u,v,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=A.forwardRef(i);return c[s8]=e,c}function l8({layoutId:e}){const t=A.useContext(qw).id;return t&&e!==void 0?t+"-"+e:e}function d8(e,t){A.useContext(ZC).strict}function u8(e){const{drag:t,layout:r}=_u;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function p8(e,t){if(typeof Proxy>"u")return s0;const r=new Map,n=(i,c)=>s0(i,c,e,t),s=(i,c)=>n(i,c);return new Proxy(s,{get:(i,c)=>c==="create"?n:(r.has(c)||r.set(c,s0(c,void 0,e,t)),r.get(c))})}function pT({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function h8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function f8(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function i0(e){return e===void 0||e===1}function tb({scale:e,scaleX:t,scaleY:r}){return!i0(e)||!i0(t)||!i0(r)}function Dl(e){return tb(e)||hT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function hT(e){return hS(e.x)||hS(e.y)}function hS(e){return e&&e!=="0%"}function ug(e,t,r){const n=e-r,s=t*n;return r+s}function fS(e,t,r,n,s){return s!==void 0&&(e=ug(e,s,n)),ug(e,r,n)+t}function rb(e,t=0,r=1,n,s){e.min=fS(e.min,t,r,n,s),e.max=fS(e.max,t,r,n,s)}function fT(e,{x:t,y:r}){rb(e.x,t.translate,t.scale,t.originPoint),rb(e.y,r.translate,r.scale,r.originPoint)}const mS=.999999999999,gS=1.0000000000001;function m8(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,c;for(let l=0;l<s;l++){i=r[l],c=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Xd(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,fT(e,c)),n&&Dl(i.latestValues)&&Xd(e,i.latestValues))}t.x<gS&&t.x>mS&&(t.x=1),t.y<gS&&t.y>mS&&(t.y=1)}function Qd(e,t){e.min=e.min+t,e.max=e.max+t}function vS(e,t,r,n,s=.5){const i=ps(e.min,e.max,s);rb(e,t,r,i,n)}function Xd(e,t){vS(e.x,t.x,t.scaleX,t.scale,t.originX),vS(e.y,t.y,t.scaleY,t.scale,t.originY)}function mT(e,t){return pT(f8(e.getBoundingClientRect(),t))}function g8(e,t,r){const n=mT(e,r),{scroll:s}=t;return s&&(Qd(n.x,s.offset.x),Qd(n.y,s.offset.y)),n}const yS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zd=()=>({x:yS(),y:yS()}),bS=()=>({min:0,max:0}),Ss=()=>({x:bS(),y:bS()}),nb={current:null},gT={current:!1};function v8(){if(gT.current=!0,!!Gw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nb.current=e.matches;e.addEventListener("change",t),t()}else nb.current=!1}const y8=new WeakMap;function b8(e,t,r){for(const n in t){const s=t[n],i=r[n];if(hi(s))e.addValue(n,s);else if(hi(i))e.addValue(n,xu(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const c=e.getValue(n);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=e.getStaticValue(n);e.addValue(n,xu(c!==void 0?c:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const wS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class w8{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ux,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Mi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,rs.render(this.render,!1,!0))};const{latestValues:d,renderState:o}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=r.initial?{...d}:{},this.renderState=o,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Xg(r),this.isVariantNode=tT(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in v){const u=v[m];d[m]!==void 0&&hi(u)&&u.set(d[m])}}mount(t){var r;this.current=t,y8.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),gT.current||v8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:nb.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),$c(this.notifyUpdate),$c(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Ou.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&rs.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in _u){const r=_u[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ss()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<wS.length;n++){const s=wS[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,c=t[i];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=b8(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=xu(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(cC(n)||dC(n))?n=parseFloat(n):!PL(n)&&Wc.test(r)&&(n=HC(t,r)),this.setBaseTarget(t,hi(n)?n.get():n)),hi(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const c=_x(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);c&&(n=c[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!hi(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Zw),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){fx.render(this.render)}}class vT extends w8{constructor(){super(...arguments),this.KeyframeResolver=vL}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hi(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function yT(e,{style:t,vars:r},n,s){const i=e.style;let c;for(c in t)i[c]=t[c];s==null||s.applyProjectionStyles(i,n);for(c in r)i.setProperty(c,r[c])}function x8(e){return window.getComputedStyle(e)}class _8 extends vT{constructor(){super(...arguments),this.type="html",this.renderInstance=yT}readValueFromInstance(t,r){var n;if(Ou.has(r))return(n=this.projection)!=null&&n.isProjecting?Gy(r):MM(t,r);{const s=x8(t),i=(rx(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return mT(t,r)}build(t,r,n){bx(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Sx(t,r,n)}}const bT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function S8(e,t,r,n){yT(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(bT.has(s)?s:Ex(s),t.attrs[s])}class E8 extends vT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ss}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ou.has(r)){const n=zC(r);return n&&n.default||0}return r=bT.has(r)?r:Ex(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return cT(t,r,n)}build(t,r,n){sT(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){S8(t,r,n,s)}mount(t){this.isSVGTag=aT(t.tagName),super.mount(t)}}const R8=(e,t)=>xx(e)?new E8(t):new _8(t,{allowProjection:e!==A.Fragment});function ou(e,t,r){const n=e.getProps();return _x(n,t,r!==void 0?r:n.custom,e)}const sb=e=>Array.isArray(e);function k8(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,xu(r))}function C8(e){return sb(e)?e[e.length-1]||0:e}function T8(e,t){const r=ou(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const c in i){const l=C8(i[c]);k8(e,c,l)}}function P8(e){return!!(hi(e)&&e.add)}function ib(e,t){const r=e.getValue("willChange");if(P8(r))return r.add(t);if(!r&&jo.WillChange){const n=new jo.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function wT(e){return e.props[lT]}const N8=e=>e!==null;function A8(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(N8),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const j8={type:"spring",stiffness:500,damping:25,restSpeed:10},O8=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),D8={type:"keyframes",duration:.8},I8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},M8=(e,{keyframes:t})=>t.length>2?D8:Ou.has(e)?e.startsWith("scale")?O8(t[1]):j8:I8;function L8({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:c,repeatDelay:l,from:d,elapsed:o,...p}){return!!Object.keys(p).length}const Rx=(e,t,r,n={},s,i)=>c=>{const l=px(n,e)||{},d=l.delay||n.delay||0;let{elapsed:o=0}=n;o=o-eo(d);const p={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-o,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};L8(l)||Object.assign(p,M8(e,p)),p.duration&&(p.duration=eo(p.duration)),p.repeatDelay&&(p.repeatDelay=eo(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Zy(p),p.delay===0&&(v=!0)),(jo.instantAnimations||jo.skipAnimations)&&(v=!0,Zy(p),p.delay=0),p.allowFlatten=!l.type&&!l.ease,v&&!i&&t.get()!==void 0){const m=A8(p.keyframes,l);if(m!==void 0){rs.update(()=>{p.onUpdate(m),p.onComplete()});return}}return l.isSync?new dx(p):new iL(p)};function F8({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function xT(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:c,...l}=t;n&&(i=n);const d=[],o=s&&e.animationState&&e.animationState.getState()[s];for(const p in l){const v=e.getValue(p,e.latestValues[p]??null),m=l[p];if(m===void 0||o&&F8(o,p))continue;const u={delay:r,...px(i||{},p)},b=v.get();if(b!==void 0&&!v.isAnimating&&!Array.isArray(m)&&m===b&&!u.velocity)continue;let f=!1;if(window.MotionHandoffAnimation){const g=wT(e);if(g){const y=window.MotionHandoffAnimation(g,p,rs);y!==null&&(u.startTime=y,f=!0)}}ib(e,p),v.start(Rx(p,v,m,e.shouldReduceMotion&&VC.has(p)?{type:!1}:u,e,f));const w=v.animation;w&&d.push(w)}return c&&Promise.all(d).then(()=>{rs.update(()=>{c&&T8(e,c)})}),d}function _T(e,t,r,n=0,s=1){const i=Array.from(e).sort((o,p)=>o.sortNodePosition(p)).indexOf(t),c=e.size,l=(c-1)*n;return typeof r=="function"?r(i,c):s===1?i*n:l-i*n}function ab(e,t,r={}){var d;const n=ou(e,t,r.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(xT(e,n,r)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(o=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:m}=s;return B8(e,t,o,p,v,m,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[o,p]=l==="beforeChildren"?[i,c]:[c,i];return o().then(()=>p())}else return Promise.all([i(),c(r.delay)])}function B8(e,t,r=0,n=0,s=0,i=1,c){const l=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),l.push(ab(d,t,{...c,delay:r+(typeof n=="function"?0:n)+_T(e.variantChildren,d,n,s,i)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(l)}function U8(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>ab(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=ab(e,t,r);else{const s=typeof t=="function"?ou(e,t,r.custom):t;n=Promise.all(xT(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function ST(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const V8=yx.length;function ET(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?ET(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<V8;r++){const n=yx[r],s=e.props[n];(fh(s)||s===!1)&&(t[n]=s)}return t}const $8=[...vx].reverse(),W8=vx.length;function z8(e){return t=>Promise.all(t.map(({animation:r,options:n})=>U8(e,r,n)))}function H8(e){let t=z8(e),r=xS(),n=!0;const s=d=>(o,p)=>{var m;const v=ou(e,p,d==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(v){const{transition:u,transitionEnd:b,...f}=v;o={...o,...f,...b}}return o};function i(d){t=d(e)}function c(d){const{props:o}=e,p=ET(e.parent)||{},v=[],m=new Set;let u={},b=1/0;for(let w=0;w<W8;w++){const g=$8[w],y=r[g],_=o[g]!==void 0?o[g]:p[g],x=fh(_),E=g===d?y.isActive:null;E===!1&&(b=w);let j=_===p[g]&&_!==o[g]&&x;if(j&&n&&e.manuallyAnimateOnMount&&(j=!1),y.protectedKeys={...u},!y.isActive&&E===null||!_&&!y.prevProp||Qg(_)||typeof _=="boolean")continue;const R=q8(y.prevProp,_);let C=R||g===d&&y.isActive&&!j&&x||w>b&&x,T=!1;const h=Array.isArray(_)?_:[_];let S=h.reduce(s(g),{});E===!1&&(S={});const{prevResolvedValues:k={}}=y,P={...k,...S},N=L=>{C=!0,m.has(L)&&(T=!0,m.delete(L)),y.needsAnimating[L]=!0;const M=e.getValue(L);M&&(M.liveStyle=!1)};for(const L in P){const M=S[L],I=k[L];if(u.hasOwnProperty(L))continue;let G=!1;sb(M)&&sb(I)?G=!ST(M,I):G=M!==I,G?M!=null?N(L):m.add(L):M!==void 0&&m.has(L)?N(L):y.protectedKeys[L]=!0}y.prevProp=_,y.prevResolvedValues=S,y.isActive&&(u={...u,...S}),n&&e.blockInitialAnimation&&(C=!1);const O=j&&R;C&&(!O||T)&&v.push(...h.map(L=>{const M={type:g};if(typeof L=="string"&&n&&!O&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,G=ou(I,L);if(I.enteringChildren&&G){const{delayChildren:de}=G.transition||{};M.delay=_T(I.enteringChildren,e,de)}}return{animation:L,options:M}}))}if(m.size){const w={};if(typeof o.initial!="boolean"){const g=ou(e,Array.isArray(o.initial)?o.initial[0]:o.initial);g&&g.transition&&(w.transition=g.transition)}m.forEach(g=>{const y=e.getBaseTarget(g),_=e.getValue(g);_&&(_.liveStyle=!0),w[g]=y??null}),v.push({animation:w})}let f=!!v.length;return n&&(o.initial===!1||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(v):Promise.resolve()}function l(d,o){var v;if(r[d].isActive===o)return Promise.resolve();(v=e.variantChildren)==null||v.forEach(m=>{var u;return(u=m.animationState)==null?void 0:u.setActive(d,o)}),r[d].isActive=o;const p=c(d);for(const m in r)r[m].protectedKeys={};return p}return{animateChanges:c,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=xS(),n=!0}}}function q8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ST(t,e):!1}function Al(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xS(){return{animate:Al(!0),whileInView:Al(),whileHover:Al(),whileTap:Al(),whileDrag:Al(),whileFocus:Al(),exit:Al()}}class Xc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class K8 extends Xc{constructor(t){super(t),t.animationState||(t.animationState=H8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Qg(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let G8=0;class Y8 extends Xc{constructor(){super(...arguments),this.id=G8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const J8={animation:{Feature:K8},exit:{Feature:Y8}};function gh(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Fh(e){return{point:{x:e.pageX,y:e.pageY}}}const Q8=e=>t=>mx(t)&&e(t,Fh(t));function Wp(e,t,r,n){return gh(e,t,Q8(r),n)}const RT=1e-4,X8=1-RT,Z8=1+RT,kT=.01,e7=0-kT,t7=0+kT;function xi(e){return e.max-e.min}function r7(e,t,r){return Math.abs(e-t)<=r}function _S(e,t,r,n=.5){e.origin=n,e.originPoint=ps(t.min,t.max,e.origin),e.scale=xi(r)/xi(t),e.translate=ps(r.min,r.max,e.origin)-e.originPoint,(e.scale>=X8&&e.scale<=Z8||isNaN(e.scale))&&(e.scale=1),(e.translate>=e7&&e.translate<=t7||isNaN(e.translate))&&(e.translate=0)}function zp(e,t,r,n){_S(e.x,t.x,r.x,n?n.originX:void 0),_S(e.y,t.y,r.y,n?n.originY:void 0)}function SS(e,t,r){e.min=r.min+t.min,e.max=e.min+xi(t)}function n7(e,t,r){SS(e.x,t.x,r.x),SS(e.y,t.y,r.y)}function ES(e,t,r){e.min=t.min-r.min,e.max=e.min+xi(t)}function Hp(e,t,r){ES(e.x,t.x,r.x),ES(e.y,t.y,r.y)}function la(e){return[e("x"),e("y")]}const CT=({current:e})=>e?e.ownerDocument.defaultView:null,RS=(e,t)=>Math.abs(e-t);function s7(e,t){const r=RS(e.x,t.x),n=RS(e.y,t.y);return Math.sqrt(r**2+n**2)}class TT{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=o0(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,b=s7(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!u&&!b)return;const{point:f}=m,{timestamp:w}=ti;this.history.push({...f,timestamp:w});const{onStart:g,onMove:y}=this.handlers;u||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,m)},this.handlePointerMove=(m,u)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=a0(u,this.transformPagePoint),rs.update(this.updatePoint,!0)},this.handlePointerUp=(m,u)=>{this.end();const{onEnd:b,onSessionEnd:f,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=o0(m.type==="pointercancel"?this.lastMoveEventInfo:a0(u,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,g),f&&f(m,g)},!mx(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=c,this.contextWindow=s||window;const l=Fh(t),d=a0(l,this.transformPagePoint),{point:o}=d,{timestamp:p}=ti;this.history=[{...o,timestamp:p}];const{onSessionStart:v}=r;v&&v(t,o0(d,this.history)),this.removeListeners=Ih(Wp(this.contextWindow,"pointermove",this.handlePointerMove),Wp(this.contextWindow,"pointerup",this.handlePointerUp),Wp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),$c(this.updatePoint)}}function a0(e,t){return t?{point:t(e.point)}:e}function kS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function o0({point:e},t){return{point:e,delta:kS(e,PT(t)),offset:kS(e,i7(t)),velocity:a7(t,.1)}}function i7(e){return e[0]}function PT(e){return e[e.length-1]}function a7(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=PT(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>eo(t)));)r--;if(!n)return{x:0,y:0};const i=to(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const c={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function o7(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ps(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ps(r,e,n.max):Math.min(e,r)),e}function CS(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function c7(e,{top:t,left:r,bottom:n,right:s}){return{x:CS(e.x,r,s),y:CS(e.y,t,n)}}function TS(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function l7(e,t){return{x:TS(e.x,t.x),y:TS(e.y,t.y)}}function d7(e,t){let r=.5;const n=xi(e),s=xi(t);return s>n?r=uh(t.min,t.max-n,e.min):n>s&&(r=uh(e.min,e.max-s,t.min)),Ao(0,1,r)}function u7(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const ob=.35;function p7(e=ob){return e===!1?e=0:e===!0&&(e=ob),{x:PS(e,"left","right"),y:PS(e,"top","bottom")}}function PS(e,t,r){return{min:NS(e,t),max:NS(e,r)}}function NS(e,t){return typeof e=="number"?e:e[t]||0}const h7=new WeakMap;class f7{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ss(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=v=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Fh(v).point)},c=(v,m)=>{const{drag:u,dragPropagation:b,onDragStart:f}=this.getProps();if(u&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xL(u),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),la(g=>{let y=this.getAxisMotionValue(g).get()||0;if(ro.test(y)){const{projection:_}=this.visualElement;if(_&&_.layout){const x=_.layout.layoutBox[g];x&&(y=xi(x)*(parseFloat(y)/100))}}this.originPoint[g]=y}),f&&rs.postRender(()=>f(v,m)),ib(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(v,m)=>{this.latestPointerEvent=v,this.latestPanInfo=m;const{dragPropagation:u,dragDirectionLock:b,onDirectionLock:f,onDrag:w}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:g}=m;if(b&&this.currentDirection===null){this.currentDirection=m7(g),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),w&&w(v,m)},d=(v,m)=>{this.latestPointerEvent=v,this.latestPanInfo=m,this.stop(v,m),this.latestPointerEvent=null,this.latestPanInfo=null},o=()=>la(v=>{var m;return this.getAnimationState(v)==="paused"&&((m=this.getAxisMotionValue(v).animation)==null?void 0:m.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new TT(t,{onSessionStart:i,onStart:c,onMove:l,onSessionEnd:d,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:CT(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&rs.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!zf(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let c=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(c=o7(c,this.constraints[t],this.elastic[t])),i.set(c)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Jd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=c7(n.layoutBox,t):this.constraints=!1,this.elastic=p7(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&la(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=u7(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Jd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=g8(n,s.root,this.visualElement.getTransformPagePoint());let c=l7(s.layout.layoutBox,i);if(r){const l=r(h8(c));this.hasMutatedConstraints=!!l,l&&(c=pT(l))}return c}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},o=la(p=>{if(!zf(p,r,this.currentDirection))return;let v=d&&d[p]||{};c&&(v={min:0,max:0});const m=s?200:1e6,u=s?40:1e7,b={type:"inertia",velocity:n?t[p]:0,bounceStiffness:m,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...v};return this.startAxisValueAnimation(p,b)});return Promise.all(o).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return ib(this.visualElement,t),n.start(Rx(t,n,0,r,this.visualElement,!1))}stopAnimation(){la(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){la(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){la(r=>{const{drag:n}=this.getProps();if(!zf(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:c,max:l}=s.layout.layoutBox[r];i.set(t[r]-ps(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Jd(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};la(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const d=l.get();s[c]=d7({min:d,max:d},this.constraints[c])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),la(c=>{if(!zf(c,t,null))return;const l=this.getAxisMotionValue(c),{min:d,max:o}=this.constraints[c];l.set(ps(d,o,s[c]))})}addListeners(){if(!this.visualElement.current)return;h7.set(this.visualElement,this);const t=this.visualElement.current,r=Wp(t,"pointerdown",d=>{const{drag:o,dragListener:p=!0}=this.getProps();o&&p&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Jd(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),rs.read(n);const c=gh(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:o})=>{this.isDragging&&o&&(la(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())});return()=>{c(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:c=ob,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:c,dragMomentum:l}}}function zf(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function m7(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class g7 extends Xc{constructor(t){super(t),this.removeGroupControls=ma,this.removeListeners=ma,this.controls=new f7(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ma}unmount(){this.removeGroupControls(),this.removeListeners()}}const AS=e=>(t,r)=>{e&&rs.postRender(()=>e(t,r))};class v7 extends Xc{constructor(){super(...arguments),this.removePointerDownListener=ma}onPointerDown(t){this.session=new TT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:AS(t),onStart:AS(r),onMove:n,onEnd:(i,c)=>{delete this.session,s&&rs.postRender(()=>s(i,c))}}}mount(){this.removePointerDownListener=Wp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(kr.test(e))e=parseFloat(e);else return e;const r=jS(e,t.target.x),n=jS(e,t.target.y);return`${r}% ${n}%`}},y7={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Wc.parse(e);if(s.length>5)return n;const i=Wc.createTransformer(e),c=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,d=r.y.scale*t.y;s[0+c]/=l,s[1+c]/=d;const o=ps(l,d,.5);return typeof s[2+c]=="number"&&(s[2+c]/=o),typeof s[3+c]=="number"&&(s[3+c]/=o),i(s)}};let c0=!1;class b7 extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;VL(w7),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),c0&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:c}=n;return c&&(c.isPresent=i,c0=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?c.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?c.promote():c.relegate()||rs.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),fx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;c0=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function NT(e){const[t,r]=XC(),n=A.useContext(qw);return a.jsx(b7,{...e,layoutGroup:n,switchLayoutGroup:A.useContext(dT),isPresent:t,safeToRemove:r})}const w7={borderRadius:{...xp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xp,borderTopRightRadius:xp,borderBottomLeftRadius:xp,borderBottomRightRadius:xp,boxShadow:y7};function x7(e,t,r){const n=hi(e)?e:xu(e);return n.start(Rx("",n,t,r)),n.animation}const _7=(e,t)=>e.depth-t.depth;class S7{constructor(){this.children=[],this.isDirty=!1}add(t){Yw(this.children,t),this.isDirty=!0}remove(t){Jw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_7),this.isDirty=!1,this.children.forEach(t)}}function E7(e,t){const r=Mi.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&($c(n),e(i-t))};return rs.setup(n,!0),()=>$c(n)}const AT=["TopLeft","TopRight","BottomLeft","BottomRight"],R7=AT.length,OS=e=>typeof e=="string"?parseFloat(e):e,DS=e=>typeof e=="number"||kr.test(e);function k7(e,t,r,n,s,i){s?(e.opacity=ps(0,r.opacity??1,C7(n)),e.opacityExit=ps(t.opacity??1,0,T7(n))):i&&(e.opacity=ps(t.opacity??1,r.opacity??1,n));for(let c=0;c<R7;c++){const l=`border${AT[c]}Radius`;let d=IS(t,l),o=IS(r,l);if(d===void 0&&o===void 0)continue;d||(d=0),o||(o=0),d===0||o===0||DS(d)===DS(o)?(e[l]=Math.max(ps(OS(d),OS(o),n),0),(ro.test(o)||ro.test(d))&&(e[l]+="%")):e[l]=o}(t.rotate||r.rotate)&&(e.rotate=ps(t.rotate||0,r.rotate||0,n))}function IS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const C7=jT(0,.5,yC),T7=jT(.5,.95,ma);function jT(e,t,r){return n=>n<e?0:n>t?1:r(uh(e,t,n))}function MS(e,t){e.min=t.min,e.max=t.max}function ca(e,t){MS(e.x,t.x),MS(e.y,t.y)}function LS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function FS(e,t,r,n,s){return e-=t,e=ug(e,1/r,n),s!==void 0&&(e=ug(e,1/s,n)),e}function P7(e,t=0,r=1,n=.5,s,i=e,c=e){if(ro.test(t)&&(t=parseFloat(t),t=ps(c.min,c.max,t/100)-c.min),typeof t!="number")return;let l=ps(i.min,i.max,n);e===i&&(l-=t),e.min=FS(e.min,t,r,l,s),e.max=FS(e.max,t,r,l,s)}function BS(e,t,[r,n,s],i,c){P7(e,t[r],t[n],t[s],t.scale,i,c)}const N7=["x","scaleX","originX"],A7=["y","scaleY","originY"];function US(e,t,r,n){BS(e.x,t,N7,r?r.x:void 0,n?n.x:void 0),BS(e.y,t,A7,r?r.y:void 0,n?n.y:void 0)}function VS(e){return e.translate===0&&e.scale===1}function OT(e){return VS(e.x)&&VS(e.y)}function $S(e,t){return e.min===t.min&&e.max===t.max}function j7(e,t){return $S(e.x,t.x)&&$S(e.y,t.y)}function WS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function DT(e,t){return WS(e.x,t.x)&&WS(e.y,t.y)}function zS(e){return xi(e.x)/xi(e.y)}function HS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class O7{constructor(){this.members=[]}add(t){Yw(this.members,t),t.scheduleRender()}remove(t){if(Jw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function D7(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,c=(r==null?void 0:r.z)||0;if((s||i||c)&&(n=`translate3d(${s}px, ${i}px, ${c}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:o,rotate:p,rotateX:v,rotateY:m,skewX:u,skewY:b}=r;o&&(n=`perspective(${o}px) ${n}`),p&&(n+=`rotate(${p}deg) `),v&&(n+=`rotateX(${v}deg) `),m&&(n+=`rotateY(${m}deg) `),u&&(n+=`skewX(${u}deg) `),b&&(n+=`skewY(${b}deg) `)}const l=e.x.scale*t.x,d=e.y.scale*t.y;return(l!==1||d!==1)&&(n+=`scale(${l}, ${d})`),n||"none"}const l0=["","X","Y","Z"],I7=1e3;let M7=0;function d0(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function IT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=wT(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",rs,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&IT(n)}function MT({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(c={},l=t==null?void 0:t()){this.id=M7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(B7),this.nodes.forEach(W7),this.nodes.forEach(z7),this.nodes.forEach(U7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new S7)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Zw),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const d=this.eventHandlers.get(c);d&&d.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=QC(c)&&!CL(c),this.instance=c;const{layoutId:l,layout:d,visualElement:o}=this.options;if(o&&!o.current&&o.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),e){let p,v=0;const m=()=>this.root.updateBlockedByResize=!1;rs.read(()=>{v=window.innerWidth}),e(c,()=>{const u=window.innerWidth;u!==v&&(v=u,this.root.updateBlockedByResize=!0,p&&p(),p=E7(m,250),bm.hasAnimatedSinceResize&&(bm.hasAnimatedSinceResize=!1,this.nodes.forEach(GS)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&o&&(l||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:m,layout:u})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||o.getDefaultTransition()||Y7,{onLayoutAnimationStart:f,onLayoutAnimationComplete:w}=o.getProps(),g=!this.targetLayout||!DT(this.targetLayout,u),y=!v&&m;if(this.options.layoutRoot||this.resumeFrom||y||v&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...px(b,"layout"),onPlay:f,onComplete:w};(o.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(p,y)}else v||GS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=u})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$c(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(H7),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(KS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($7),this.nodes.forEach(L7),this.nodes.forEach(F7)):this.nodes.forEach(KS),this.clearAllSnapshots();const l=Mi.now();ti.delta=Ao(0,1e3/60,l-ti.timestamp),ti.timestamp=l,ti.isProcessing=!0,Zv.update.process(ti),Zv.preRender.process(ti),Zv.render.process(ti),ti.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(V7),this.sharedNodes.forEach(q7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xi(this.snapshot.measuredBox.x)&&!xi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ss(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!OT(this.projectionDelta),d=this.getTransformTemplate(),o=d?d(this.latestValues,""):void 0,p=o!==this.prevTransformTemplateValue;c&&this.instance&&(l||Dl(this.latestValues)||p)&&(s(this.instance,o),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return c&&(d=this.removeTransform(d)),J7(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return Ss();const l=c.measureViewportBox();if(!(((o=this.scroll)==null?void 0:o.wasRoot)||this.path.some(Q7))){const{scroll:p}=this.root;p&&(Qd(l.x,p.offset.x),Qd(l.y,p.offset.y))}return l}removeElementScroll(c){var d;const l=Ss();if(ca(l,c),(d=this.scroll)!=null&&d.wasRoot)return l;for(let o=0;o<this.path.length;o++){const p=this.path[o],{scroll:v,options:m}=p;p!==this.root&&v&&m.layoutScroll&&(v.wasRoot&&ca(l,c),Qd(l.x,v.offset.x),Qd(l.y,v.offset.y))}return l}applyTransform(c,l=!1){const d=Ss();ca(d,c);for(let o=0;o<this.path.length;o++){const p=this.path[o];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Xd(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Dl(p.latestValues)&&Xd(d,p.latestValues)}return Dl(this.latestValues)&&Xd(d,this.latestValues),d}removeTransform(c){const l=Ss();ca(l,c);for(let d=0;d<this.path.length;d++){const o=this.path[d];if(!o.instance||!Dl(o.latestValues))continue;tb(o.latestValues)&&o.updateSnapshot();const p=Ss(),v=o.measurePageBox();ca(p,v),US(l,o.latestValues,o.snapshot?o.snapshot.layoutBox:void 0,p)}return Dl(this.latestValues)&&US(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ti.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!(!this.layout||!(p||v))){if(this.resolvedRelativeTargetAt=ti.timestamp,!this.targetDelta&&!this.relativeTarget){const u=this.getClosestProjectingParent();u&&u.layout&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ss(),this.relativeTargetOrigin=Ss(),Hp(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ss(),this.targetWithTransforms=Ss()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),n7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ca(this.target,this.layout.layoutBox),fT(this.target,this.targetDelta)):ca(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const u=this.getClosestProjectingParent();u&&!!u.resumingFrom==!!this.resumingFrom&&!u.options.layoutScroll&&u.target&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ss(),this.relativeTargetOrigin=Ss(),Hp(this.relativeTargetOrigin,this.target,u.target),ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||tb(this.parent.latestValues)||hT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const c=this.getLead(),l=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ti.timestamp&&(d=!1),d)return;const{layout:o,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(o||p))return;ca(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,m=this.treeScale.y;m8(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ss());const{target:u}=c;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LS(this.prevProjectionDelta.x,this.projectionDelta.x),LS(this.prevProjectionDelta.y,this.projectionDelta.y)),zp(this.projectionDelta,this.layoutCorrected,u,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==m||!HS(this.projectionDelta.x,this.prevProjectionDelta.x)||!HS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zd(),this.projectionDelta=Zd(),this.projectionDeltaWithTransform=Zd()}setAnimationOrigin(c,l=!1){const d=this.snapshot,o=d?d.latestValues:{},p={...this.latestValues},v=Zd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Ss(),u=d?d.source:void 0,b=this.layout?this.layout.source:void 0,f=u!==b,w=this.getStack(),g=!w||w.members.length<=1,y=!!(f&&!g&&this.options.crossfade===!0&&!this.path.some(G7));this.animationProgress=0;let _;this.mixTargetDelta=x=>{const E=x/1e3;YS(v.x,c.x,E),YS(v.y,c.y,E),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hp(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),K7(this.relativeTarget,this.relativeTargetOrigin,m,E),_&&j7(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Ss()),ca(_,this.relativeTarget)),f&&(this.animationValues=p,k7(p,o,this.latestValues,E,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var l,d,o;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(o=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||o.stop(),this.pendingAnimation&&($c(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rs.update(()=>{bm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xu(0)),this.currentAnimation=x7(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(I7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:d,layout:o,latestValues:p}=c;if(!(!l||!d||!o)){if(this!==c&&this.layout&&o&&LT(this.options.animationType,this.layout.layoutBox,o.layoutBox)){d=this.target||Ss();const v=xi(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+v;const m=xi(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+m}ca(l,d),Xd(l,p),zp(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new O7),this.sharedNodes.get(c).add(l);const o=l.options.initialPromotionConfig;l.promote({transition:o?o.transition:void 0,preserveFollowOpacity:o&&o.shouldPreserveFollowOpacity?o.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:d}={}){const o=this.getStack();o&&o.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const o={};d.z&&d0("z",c,o,this.animationValues);for(let p=0;p<l0.length;p++)d0(`rotate${l0[p]}`,c,o,this.animationValues),d0(`skew${l0[p]}`,c,o,this.animationValues);c.render();for(const p in o)c.setStaticValue(p,o[p]),this.animationValues&&(this.animationValues[p]=o[p]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=ym(l==null?void 0:l.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=ym(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Dl(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=o.animationValues||o.latestValues;this.applyTransformsToTarget();let v=D7(this.projectionDeltaWithTransform,this.treeScale,p);d&&(v=d(p,v)),c.transform=v;const{x:m,y:u}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${u.origin*100}% 0`,o.animationValues?c.opacity=o===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=o===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in mh){if(p[b]===void 0)continue;const{correct:f,applyTo:w,isCSSVariable:g}=mh[b],y=v==="none"?p[b]:f(p[b],o);if(w){const _=w.length;for(let x=0;x<_;x++)c[w[x]]=y}else g?this.options.visualElement.renderState.vars[b]=y:c[b]=y}this.options.layoutId&&(c.pointerEvents=o===this?ym(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var l;return(l=c.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(qS),this.root.sharedNodes.clear()}}}function L7(e){e.updateLayout()}function F7(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,c=t.source!==e.layout.source;i==="size"?la(v=>{const m=c?t.measuredBox[v]:t.layoutBox[v],u=xi(m);m.min=n[v].min,m.max=m.min+u}):LT(i,t.layoutBox,n)&&la(v=>{const m=c?t.measuredBox[v]:t.layoutBox[v],u=xi(n[v]);m.max=m.min+u,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[v].max=e.relativeTarget[v].min+u)});const l=Zd();zp(l,n,t.layoutBox);const d=Zd();c?zp(d,e.applyTransform(s,!0),t.measuredBox):zp(d,n,t.layoutBox);const o=!OT(l);let p=!1;if(!e.resumeFrom){const v=e.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:m,layout:u}=v;if(m&&u){const b=Ss();Hp(b,t.layoutBox,m.layoutBox);const f=Ss();Hp(f,n,u.layoutBox),DT(b,f)||(p=!0),v.options.layoutRoot&&(e.relativeTarget=f,e.relativeTargetOrigin=b,e.relativeParent=v)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:o,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function B7(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function U7(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function V7(e){e.clearSnapshot()}function qS(e){e.clearMeasurements()}function KS(e){e.isLayoutDirty=!1}function $7(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function GS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function W7(e){e.resolveTargetDelta()}function z7(e){e.calcProjection()}function H7(e){e.resetSkewAndRotation()}function q7(e){e.removeLeadSnapshot()}function YS(e,t,r){e.translate=ps(t.translate,0,r),e.scale=ps(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function JS(e,t,r,n){e.min=ps(t.min,r.min,n),e.max=ps(t.max,r.max,n)}function K7(e,t,r,n){JS(e.x,t.x,r.x,n),JS(e.y,t.y,r.y,n)}function G7(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Y7={duration:.45,ease:[.4,0,.1,1]},QS=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XS=QS("applewebkit/")&&!QS("chrome/")?Math.round:ma;function ZS(e){e.min=XS(e.min),e.max=XS(e.max)}function J7(e){ZS(e.x),ZS(e.y)}function LT(e,t,r){return e==="position"||e==="preserve-aspect"&&!r7(zS(t),zS(r),.2)}function Q7(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const X7=MT({attachResizeListener:(e,t)=>gh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),u0={current:void 0},FT=MT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!u0.current){const e=new X7({});e.mount(window),e.setOptions({layoutScroll:!0}),u0.current=e}return u0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Z7={pan:{Feature:v7},drag:{Feature:g7,ProjectionNode:FT,MeasureLayout:NT}};function e2(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&rs.postRender(()=>i(t,Fh(t)))}class e9 extends Xc{mount(){const{current:t}=this.node;t&&(this.unmount=_L(t,(r,n)=>(e2(this.node,n,"Start"),s=>e2(this.node,s,"End"))))}unmount(){}}class t9 extends Xc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ih(gh(this.node.current,"focus",()=>this.onFocus()),gh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function t2(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&rs.postRender(()=>i(t,Fh(t)))}class r9 extends Xc{mount(){const{current:t}=this.node;t&&(this.unmount=kL(t,(r,n)=>(t2(this.node,n,"Start"),(s,{success:i})=>t2(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cb=new WeakMap,p0=new WeakMap,n9=e=>{const t=cb.get(e.target);t&&t(e)},s9=e=>{e.forEach(n9)};function i9({root:e,...t}){const r=e||document;p0.has(r)||p0.set(r,{});const n=p0.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(s9,{root:e,...t})),n[s]}function a9(e,t,r){const n=i9(t);return cb.set(e,r),n.observe(e),()=>{cb.delete(e),n.unobserve(e)}}const o9={some:0,all:1};class c9 extends Xc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,c={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:o9[s]},l=d=>{const{isIntersecting:o}=d;if(this.isInView===o||(this.isInView=o,i&&!o&&this.hasEnteredView))return;o&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",o);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),m=o?p:v;m&&m(d)};return a9(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(l9(t,r))&&this.startObserver()}unmount(){}}function l9({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const d9={inView:{Feature:c9},tap:{Feature:r9},focus:{Feature:t9},hover:{Feature:e9}},u9={layout:{ProjectionNode:FT,MeasureLayout:NT}},p9={...J8,...d9,...Z7,...u9},Qr=p8(p9,R8);function BT(e,t){return function(){return e.apply(t,arguments)}}const{toString:h9}=Object.prototype,{getPrototypeOf:kx}=Object,{iterator:Zg,toStringTag:UT}=Symbol,ev=(e=>t=>{const r=h9.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ba=e=>(e=e.toLowerCase(),t=>ev(t)===e),tv=e=>t=>typeof t===e,{isArray:Du}=Array,vh=tv("undefined");function f9(e){return e!==null&&!vh(e)&&e.constructor!==null&&!vh(e.constructor)&&Ui(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const VT=Ba("ArrayBuffer");function m9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&VT(e.buffer),t}const g9=tv("string"),Ui=tv("function"),$T=tv("number"),rv=e=>e!==null&&typeof e=="object",v9=e=>e===!0||e===!1,wm=e=>{if(ev(e)!=="object")return!1;const t=kx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(UT in e)&&!(Zg in e)},y9=Ba("Date"),b9=Ba("File"),w9=Ba("Blob"),x9=Ba("FileList"),_9=e=>rv(e)&&Ui(e.pipe),S9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ui(e.append)&&((t=ev(e))==="formdata"||t==="object"&&Ui(e.toString)&&e.toString()==="[object FormData]"))},E9=Ba("URLSearchParams"),[R9,k9,C9,T9]=["ReadableStream","Request","Response","Headers"].map(Ba),P9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bh(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Du(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),c=i.length;let l;for(n=0;n<c;n++)l=i[n],t.call(null,e[l],l,e)}}function WT(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zT=e=>!vh(e)&&e!==Vl;function lb(){const{caseless:e}=zT(this)&&this||{},t={},r=(n,s)=>{const i=e&&WT(t,s)||s;wm(t[i])&&wm(n)?t[i]=lb(t[i],n):wm(n)?t[i]=lb({},n):Du(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Bh(arguments[n],r);return t}const N9=(e,t,r,{allOwnKeys:n}={})=>(Bh(t,(s,i)=>{r&&Ui(s)?e[i]=BT(s,r):e[i]=s},{allOwnKeys:n}),e),A9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),j9=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},O9=(e,t,r,n)=>{let s,i,c;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)c=s[i],(!n||n(c,e,t))&&!l[c]&&(t[c]=e[c],l[c]=!0);e=r!==!1&&kx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},D9=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},I9=e=>{if(!e)return null;if(Du(e))return e;let t=e.length;if(!$T(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},M9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kx(Uint8Array)),L9=(e,t)=>{const n=(e&&e[Zg]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},F9=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},B9=Ba("HTMLFormElement"),U9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),r2=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),V9=Ba("RegExp"),HT=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Bh(r,(s,i)=>{let c;(c=t(s,i,e))!==!1&&(n[i]=c||s)}),Object.defineProperties(e,n)},$9=e=>{HT(e,(t,r)=>{if(Ui(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ui(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},W9=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Du(e)?n(e):n(String(e).split(t)),r},z9=()=>{},H9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function q9(e){return!!(e&&Ui(e.append)&&e[UT]==="FormData"&&e[Zg])}const K9=e=>{const t=new Array(10),r=(n,s)=>{if(rv(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const i=Du(n)?[]:{};return Bh(n,(c,l)=>{const d=r(c,s+1);!vh(d)&&(i[l]=d)}),t[s]=void 0,i}}return n};return r(e,0)},G9=Ba("AsyncFunction"),Y9=e=>e&&(rv(e)||Ui(e))&&Ui(e.then)&&Ui(e.catch),qT=((e,t)=>e?setImmediate:t?((r,n)=>(Vl.addEventListener("message",({source:s,data:i})=>{s===Vl&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Vl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ui(Vl.postMessage)),J9=typeof queueMicrotask<"u"?queueMicrotask.bind(Vl):typeof process<"u"&&process.nextTick||qT,Q9=e=>e!=null&&Ui(e[Zg]),Ge={isArray:Du,isArrayBuffer:VT,isBuffer:f9,isFormData:S9,isArrayBufferView:m9,isString:g9,isNumber:$T,isBoolean:v9,isObject:rv,isPlainObject:wm,isReadableStream:R9,isRequest:k9,isResponse:C9,isHeaders:T9,isUndefined:vh,isDate:y9,isFile:b9,isBlob:w9,isRegExp:V9,isFunction:Ui,isStream:_9,isURLSearchParams:E9,isTypedArray:M9,isFileList:x9,forEach:Bh,merge:lb,extend:N9,trim:P9,stripBOM:A9,inherits:j9,toFlatObject:O9,kindOf:ev,kindOfTest:Ba,endsWith:D9,toArray:I9,forEachEntry:L9,matchAll:F9,isHTMLForm:B9,hasOwnProperty:r2,hasOwnProp:r2,reduceDescriptors:HT,freezeMethods:$9,toObjectSet:W9,toCamelCase:U9,noop:z9,toFiniteNumber:H9,findKey:WT,global:Vl,isContextDefined:zT,isSpecCompliantForm:q9,toJSONObject:K9,isAsyncFn:G9,isThenable:Y9,setImmediate:qT,asap:J9,isIterable:Q9};function Ir(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Ge.inherits(Ir,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ge.toJSONObject(this.config),code:this.code,status:this.status}}});const KT=Ir.prototype,GT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{GT[e]={value:e}});Object.defineProperties(Ir,GT);Object.defineProperty(KT,"isAxiosError",{value:!0});Ir.from=(e,t,r,n,s,i)=>{const c=Object.create(KT);return Ge.toFlatObject(e,c,function(d){return d!==Error.prototype},l=>l!=="isAxiosError"),Ir.call(c,e.message,t,r,n,s),c.cause=e,c.name=e.name,i&&Object.assign(c,i),c};const X9=null;function db(e){return Ge.isPlainObject(e)||Ge.isArray(e)}function YT(e){return Ge.endsWith(e,"[]")?e.slice(0,-2):e}function n2(e,t,r){return e?e.concat(t).map(function(s,i){return s=YT(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function Z9(e){return Ge.isArray(e)&&!e.some(db)}const e5=Ge.toFlatObject(Ge,{},null,function(t){return/^is[A-Z]/.test(t)});function nv(e,t,r){if(!Ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ge.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,w){return!Ge.isUndefined(w[f])});const n=r.metaTokens,s=r.visitor||p,i=r.dots,c=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&Ge.isSpecCompliantForm(t);if(!Ge.isFunction(s))throw new TypeError("visitor must be a function");function o(b){if(b===null)return"";if(Ge.isDate(b))return b.toISOString();if(!d&&Ge.isBlob(b))throw new Ir("Blob is not supported. Use a Buffer instead.");return Ge.isArrayBuffer(b)||Ge.isTypedArray(b)?d&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,f,w){let g=b;if(b&&!w&&typeof b=="object"){if(Ge.endsWith(f,"{}"))f=n?f:f.slice(0,-2),b=JSON.stringify(b);else if(Ge.isArray(b)&&Z9(b)||(Ge.isFileList(b)||Ge.endsWith(f,"[]"))&&(g=Ge.toArray(b)))return f=YT(f),g.forEach(function(_,x){!(Ge.isUndefined(_)||_===null)&&t.append(c===!0?n2([f],x,i):c===null?f:f+"[]",o(_))}),!1}return db(b)?!0:(t.append(n2(w,f,i),o(b)),!1)}const v=[],m=Object.assign(e5,{defaultVisitor:p,convertValue:o,isVisitable:db});function u(b,f){if(!Ge.isUndefined(b)){if(v.indexOf(b)!==-1)throw Error("Circular reference detected in "+f.join("."));v.push(b),Ge.forEach(b,function(g,y){(!(Ge.isUndefined(g)||g===null)&&s.call(t,g,Ge.isString(y)?y.trim():y,f,m))===!0&&u(g,f?f.concat(y):[y])}),v.pop()}}if(!Ge.isObject(e))throw new TypeError("data must be an object");return u(e),t}function s2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Cx(e,t){this._pairs=[],e&&nv(e,this,t)}const JT=Cx.prototype;JT.append=function(t,r){this._pairs.push([t,r])};JT.toString=function(t){const r=t?function(n){return t.call(this,n,s2)}:s2;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function t5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QT(e,t,r){if(!t)return e;const n=r&&r.encode||t5;Ge.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=Ge.isURLSearchParams(t)?t.toString():new Cx(t,r).toString(n),i){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class i2{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ge.forEach(this.handlers,function(n){n!==null&&t(n)})}}const XT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r5=typeof URLSearchParams<"u"?URLSearchParams:Cx,n5=typeof FormData<"u"?FormData:null,s5=typeof Blob<"u"?Blob:null,i5={isBrowser:!0,classes:{URLSearchParams:r5,FormData:n5,Blob:s5},protocols:["http","https","file","blob","url","data"]},Tx=typeof window<"u"&&typeof document<"u",ub=typeof navigator=="object"&&navigator||void 0,a5=Tx&&(!ub||["ReactNative","NativeScript","NS"].indexOf(ub.product)<0),o5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c5=Tx&&window.location.href||"http://localhost",l5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tx,hasStandardBrowserEnv:a5,hasStandardBrowserWebWorkerEnv:o5,navigator:ub,origin:c5},Symbol.toStringTag,{value:"Module"})),pi={...l5,...i5};function d5(e,t){return nv(e,new pi.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return pi.isNode&&Ge.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function u5(e){return Ge.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function p5(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function ZT(e){function t(r,n,s,i){let c=r[i++];if(c==="__proto__")return!0;const l=Number.isFinite(+c),d=i>=r.length;return c=!c&&Ge.isArray(s)?s.length:c,d?(Ge.hasOwnProp(s,c)?s[c]=[s[c],n]:s[c]=n,!l):((!s[c]||!Ge.isObject(s[c]))&&(s[c]=[]),t(r,n,s[c],i)&&Ge.isArray(s[c])&&(s[c]=p5(s[c])),!l)}if(Ge.isFormData(e)&&Ge.isFunction(e.entries)){const r={};return Ge.forEachEntry(e,(n,s)=>{t(u5(n),s,r,0)}),r}return null}function h5(e,t,r){if(Ge.isString(e))try{return(t||JSON.parse)(e),Ge.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Uh={transitional:XT,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=Ge.isObject(t);if(i&&Ge.isHTMLForm(t)&&(t=new FormData(t)),Ge.isFormData(t))return s?JSON.stringify(ZT(t)):t;if(Ge.isArrayBuffer(t)||Ge.isBuffer(t)||Ge.isStream(t)||Ge.isFile(t)||Ge.isBlob(t)||Ge.isReadableStream(t))return t;if(Ge.isArrayBufferView(t))return t.buffer;if(Ge.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return d5(t,this.formSerializer).toString();if((l=Ge.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return nv(l?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),h5(t)):t}],transformResponse:[function(t){const r=this.transitional||Uh.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Ge.isResponse(t)||Ge.isReadableStream(t))return t;if(t&&Ge.isString(t)&&(n&&!this.responseType||s)){const c=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(c)throw l.name==="SyntaxError"?Ir.from(l,Ir.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pi.classes.FormData,Blob:pi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ge.forEach(["delete","get","head","post","put","patch"],e=>{Uh.headers[e]={}});const f5=Ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),m5=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(c){s=c.indexOf(":"),r=c.substring(0,s).trim().toLowerCase(),n=c.substring(s+1).trim(),!(!r||t[r]&&f5[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},a2=Symbol("internals");function _p(e){return e&&String(e).trim().toLowerCase()}function xm(e){return e===!1||e==null?e:Ge.isArray(e)?e.map(xm):String(e)}function g5(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const v5=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function h0(e,t,r,n,s){if(Ge.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!Ge.isString(t)){if(Ge.isString(n))return t.indexOf(n)!==-1;if(Ge.isRegExp(n))return n.test(t)}}function y5(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function b5(e,t){const r=Ge.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,c){return this[n].call(this,t,s,i,c)},configurable:!0})})}let Vi=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,d,o){const p=_p(d);if(!p)throw new Error("header name must be a non-empty string");const v=Ge.findKey(s,p);(!v||s[v]===void 0||o===!0||o===void 0&&s[v]!==!1)&&(s[v||d]=xm(l))}const c=(l,d)=>Ge.forEach(l,(o,p)=>i(o,p,d));if(Ge.isPlainObject(t)||t instanceof this.constructor)c(t,r);else if(Ge.isString(t)&&(t=t.trim())&&!v5(t))c(m5(t),r);else if(Ge.isObject(t)&&Ge.isIterable(t)){let l={},d,o;for(const p of t){if(!Ge.isArray(p))throw TypeError("Object iterator must return a key-value pair");l[o=p[0]]=(d=l[o])?Ge.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}c(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=_p(t),t){const n=Ge.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return g5(s);if(Ge.isFunction(r))return r.call(this,s,n);if(Ge.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_p(t),t){const n=Ge.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||h0(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(c){if(c=_p(c),c){const l=Ge.findKey(n,c);l&&(!r||h0(n,n[l],l,r))&&(delete n[l],s=!0)}}return Ge.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||h0(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return Ge.forEach(this,(s,i)=>{const c=Ge.findKey(n,i);if(c){r[c]=xm(s),delete r[i];return}const l=t?y5(i):String(i).trim();l!==i&&delete r[i],r[l]=xm(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ge.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&Ge.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[a2]=this[a2]={accessors:{}}).accessors,s=this.prototype;function i(c){const l=_p(c);n[l]||(b5(s,c),n[l]=!0)}return Ge.isArray(t)?t.forEach(i):i(t),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ge.reduceDescriptors(Vi.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Ge.freezeMethods(Vi);function f0(e,t){const r=this||Uh,n=t||r,s=Vi.from(n.headers);let i=n.data;return Ge.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function eP(e){return!!(e&&e.__CANCEL__)}function Iu(e,t,r){Ir.call(this,e??"canceled",Ir.ERR_CANCELED,t,r),this.name="CanceledError"}Ge.inherits(Iu,Ir,{__CANCEL__:!0});function tP(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ir("Request failed with status code "+r.status,[Ir.ERR_BAD_REQUEST,Ir.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function w5(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function x5(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,c;return t=t!==void 0?t:1e3,function(d){const o=Date.now(),p=n[i];c||(c=o),r[s]=d,n[s]=o;let v=i,m=0;for(;v!==s;)m+=r[v++],v=v%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),o-c<t)return;const u=p&&o-p;return u?Math.round(m*1e3/u):void 0}}function _5(e,t){let r=0,n=1e3/t,s,i;const c=(o,p=Date.now())=>{r=p,s=null,i&&(clearTimeout(i),i=null),e.apply(null,o)};return[(...o)=>{const p=Date.now(),v=p-r;v>=n?c(o,p):(s=o,i||(i=setTimeout(()=>{i=null,c(s)},n-v)))},()=>s&&c(s)]}const pg=(e,t,r=3)=>{let n=0;const s=x5(50,250);return _5(i=>{const c=i.loaded,l=i.lengthComputable?i.total:void 0,d=c-n,o=s(d),p=c<=l;n=c;const v={loaded:c,total:l,progress:l?c/l:void 0,bytes:d,rate:o||void 0,estimated:o&&l&&p?(l-c)/o:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(v)},r)},o2=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},c2=e=>(...t)=>Ge.asap(()=>e(...t)),S5=pi.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,pi.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(pi.origin),pi.navigator&&/(msie|trident)/i.test(pi.navigator.userAgent)):()=>!0,E5=pi.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const c=[e+"="+encodeURIComponent(t)];Ge.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),Ge.isString(n)&&c.push("path="+n),Ge.isString(s)&&c.push("domain="+s),i===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function R5(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function k5(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function rP(e,t,r){let n=!R5(t);return e&&(n||r==!1)?k5(e,t):t}const l2=e=>e instanceof Vi?{...e}:e;function Zl(e,t){t=t||{};const r={};function n(o,p,v,m){return Ge.isPlainObject(o)&&Ge.isPlainObject(p)?Ge.merge.call({caseless:m},o,p):Ge.isPlainObject(p)?Ge.merge({},p):Ge.isArray(p)?p.slice():p}function s(o,p,v,m){if(Ge.isUndefined(p)){if(!Ge.isUndefined(o))return n(void 0,o,v,m)}else return n(o,p,v,m)}function i(o,p){if(!Ge.isUndefined(p))return n(void 0,p)}function c(o,p){if(Ge.isUndefined(p)){if(!Ge.isUndefined(o))return n(void 0,o)}else return n(void 0,p)}function l(o,p,v){if(v in t)return n(o,p);if(v in e)return n(void 0,o)}const d={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:l,headers:(o,p,v)=>s(l2(o),l2(p),v,!0)};return Ge.forEach(Object.keys(Object.assign({},e,t)),function(p){const v=d[p]||s,m=v(e[p],t[p],p);Ge.isUndefined(m)&&v!==l||(r[p]=m)}),r}const nP=e=>{const t=Zl({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:c,auth:l}=t;t.headers=c=Vi.from(c),t.url=QT(rP(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&c.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let d;if(Ge.isFormData(r)){if(pi.hasStandardBrowserEnv||pi.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((d=c.getContentType())!==!1){const[o,...p]=d?d.split(";").map(v=>v.trim()).filter(Boolean):[];c.setContentType([o||"multipart/form-data",...p].join("; "))}}if(pi.hasStandardBrowserEnv&&(n&&Ge.isFunction(n)&&(n=n(t)),n||n!==!1&&S5(t.url))){const o=s&&i&&E5.read(i);o&&c.set(s,o)}return t},C5=typeof XMLHttpRequest<"u",T5=C5&&function(e){return new Promise(function(r,n){const s=nP(e);let i=s.data;const c=Vi.from(s.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:o}=s,p,v,m,u,b;function f(){u&&u(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let w=new XMLHttpRequest;w.open(s.method.toUpperCase(),s.url,!0),w.timeout=s.timeout;function g(){if(!w)return;const _=Vi.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:_,config:e,request:w};tP(function(R){r(R),f()},function(R){n(R),f()},E),w=null}"onloadend"in w?w.onloadend=g:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(g)},w.onabort=function(){w&&(n(new Ir("Request aborted",Ir.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new Ir("Network Error",Ir.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||XT;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),n(new Ir(x,E.clarifyTimeoutError?Ir.ETIMEDOUT:Ir.ECONNABORTED,e,w)),w=null},i===void 0&&c.setContentType(null),"setRequestHeader"in w&&Ge.forEach(c.toJSON(),function(x,E){w.setRequestHeader(E,x)}),Ge.isUndefined(s.withCredentials)||(w.withCredentials=!!s.withCredentials),l&&l!=="json"&&(w.responseType=s.responseType),o&&([m,b]=pg(o,!0),w.addEventListener("progress",m)),d&&w.upload&&([v,u]=pg(d),w.upload.addEventListener("progress",v),w.upload.addEventListener("loadend",u)),(s.cancelToken||s.signal)&&(p=_=>{w&&(n(!_||_.type?new Iu(null,e,w):_),w.abort(),w=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const y=w5(s.url);if(y&&pi.protocols.indexOf(y)===-1){n(new Ir("Unsupported protocol "+y+":",Ir.ERR_BAD_REQUEST,e));return}w.send(i||null)})},P5=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(o){if(!s){s=!0,l();const p=o instanceof Error?o:this.reason;n.abort(p instanceof Ir?p:new Iu(p instanceof Error?p.message:p))}};let c=t&&setTimeout(()=>{c=null,i(new Ir(`timeout ${t} of ms exceeded`,Ir.ETIMEDOUT))},t);const l=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(o=>{o.unsubscribe?o.unsubscribe(i):o.removeEventListener("abort",i)}),e=null)};e.forEach(o=>o.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>Ge.asap(l),d}},N5=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},A5=async function*(e,t){for await(const r of j5(e))yield*N5(r,t)},j5=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},d2=(e,t,r,n)=>{const s=A5(e,t);let i=0,c,l=d=>{c||(c=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:o,value:p}=await s.next();if(o){l(),d.close();return}let v=p.byteLength;if(r){let m=i+=v;r(m)}d.enqueue(new Uint8Array(p))}catch(o){throw l(o),o}},cancel(d){return l(d),s.return()}},{highWaterMark:2})},sv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sP=sv&&typeof ReadableStream=="function",O5=sv&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),iP=(e,...t)=>{try{return!!e(...t)}catch{return!1}},D5=sP&&iP(()=>{let e=!1;const t=new Request(pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u2=64*1024,pb=sP&&iP(()=>Ge.isReadableStream(new Response("").body)),hg={stream:pb&&(e=>e.body)};sv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!hg[t]&&(hg[t]=Ge.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Ir(`Response type '${t}' is not supported`,Ir.ERR_NOT_SUPPORT,n)})})})(new Response);const I5=async e=>{if(e==null)return 0;if(Ge.isBlob(e))return e.size;if(Ge.isSpecCompliantForm(e))return(await new Request(pi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ge.isArrayBufferView(e)||Ge.isArrayBuffer(e))return e.byteLength;if(Ge.isURLSearchParams(e)&&(e=e+""),Ge.isString(e))return(await O5(e)).byteLength},M5=async(e,t)=>{const r=Ge.toFiniteNumber(e.getContentLength());return r??I5(t)},L5=sv&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:c,onDownloadProgress:l,onUploadProgress:d,responseType:o,headers:p,withCredentials:v="same-origin",fetchOptions:m}=nP(e);o=o?(o+"").toLowerCase():"text";let u=P5([s,i&&i.toAbortSignal()],c),b;const f=u&&u.unsubscribe&&(()=>{u.unsubscribe()});let w;try{if(d&&D5&&r!=="get"&&r!=="head"&&(w=await M5(p,n))!==0){let E=new Request(t,{method:"POST",body:n,duplex:"half"}),j;if(Ge.isFormData(n)&&(j=E.headers.get("content-type"))&&p.setContentType(j),E.body){const[R,C]=o2(w,pg(c2(d)));n=d2(E.body,u2,R,C)}}Ge.isString(v)||(v=v?"include":"omit");const g="credentials"in Request.prototype;b=new Request(t,{...m,signal:u,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:g?v:void 0});let y=await fetch(b);const _=pb&&(o==="stream"||o==="response");if(pb&&(l||_&&f)){const E={};["status","statusText","headers"].forEach(T=>{E[T]=y[T]});const j=Ge.toFiniteNumber(y.headers.get("content-length")),[R,C]=l&&o2(j,pg(c2(l),!0))||[];y=new Response(d2(y.body,u2,R,()=>{C&&C(),f&&f()}),E)}o=o||"text";let x=await hg[Ge.findKey(hg,o)||"text"](y,e);return!_&&f&&f(),await new Promise((E,j)=>{tP(E,j,{data:x,headers:Vi.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:b})})}catch(g){throw f&&f(),g&&g.name==="TypeError"&&/Load failed|fetch/i.test(g.message)?Object.assign(new Ir("Network Error",Ir.ERR_NETWORK,e,b),{cause:g.cause||g}):Ir.from(g,g&&g.code,e,b)}}),hb={http:X9,xhr:T5,fetch:L5};Ge.forEach(hb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const p2=e=>`- ${e}`,F5=e=>Ge.isFunction(e)||e===null||e===!1,aP={getAdapter:e=>{e=Ge.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let c;if(n=r,!F5(r)&&(n=hb[(c=String(r)).toLowerCase()],n===void 0))throw new Ir(`Unknown adapter '${c}'`);if(n)break;s[c||"#"+i]=n}if(!n){const i=Object.entries(s).map(([l,d])=>`adapter ${l} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=t?i.length>1?`since :
`+i.map(p2).join(`
`):" "+p2(i[0]):"as no adapter specified";throw new Ir("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:hb};function m0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Iu(null,e)}function h2(e){return m0(e),e.headers=Vi.from(e.headers),e.data=f0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),aP.getAdapter(e.adapter||Uh.adapter)(e).then(function(n){return m0(e),n.data=f0.call(e,e.transformResponse,n),n.headers=Vi.from(n.headers),n},function(n){return eP(n)||(m0(e),n&&n.response&&(n.response.data=f0.call(e,e.transformResponse,n.response),n.response.headers=Vi.from(n.response.headers))),Promise.reject(n)})}const oP="1.9.0",iv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{iv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const f2={};iv.transitional=function(t,r,n){function s(i,c){return"[Axios v"+oP+"] Transitional option '"+i+"'"+c+(n?". "+n:"")}return(i,c,l)=>{if(t===!1)throw new Ir(s(c," has been removed"+(r?" in "+r:"")),Ir.ERR_DEPRECATED);return r&&!f2[c]&&(f2[c]=!0,console.warn(s(c," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,c,l):!0}};iv.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function B5(e,t,r){if(typeof e!="object")throw new Ir("options must be an object",Ir.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],c=t[i];if(c){const l=e[i],d=l===void 0||c(l,i,e);if(d!==!0)throw new Ir("option "+i+" must be "+d,Ir.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ir("Unknown option "+i,Ir.ERR_BAD_OPTION)}}const _m={assertOptions:B5,validators:iv},Ha=_m.validators;let ql=class{constructor(t){this.defaults=t||{},this.interceptors={request:new i2,response:new i2}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Zl(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&_m.assertOptions(n,{silentJSONParsing:Ha.transitional(Ha.boolean),forcedJSONParsing:Ha.transitional(Ha.boolean),clarifyTimeoutError:Ha.transitional(Ha.boolean)},!1),s!=null&&(Ge.isFunction(s)?r.paramsSerializer={serialize:s}:_m.assertOptions(s,{encode:Ha.function,serialize:Ha.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),_m.assertOptions(r,{baseUrl:Ha.spelling("baseURL"),withXsrfToken:Ha.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=i&&Ge.merge(i.common,i[r.method]);i&&Ge.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),r.headers=Vi.concat(c,i);const l=[];let d=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(d=d&&f.synchronous,l.unshift(f.fulfilled,f.rejected))});const o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});let p,v=0,m;if(!d){const b=[h2.bind(this),void 0];for(b.unshift.apply(b,l),b.push.apply(b,o),m=b.length,p=Promise.resolve(r);v<m;)p=p.then(b[v++],b[v++]);return p}m=l.length;let u=r;for(v=0;v<m;){const b=l[v++],f=l[v++];try{u=b(u)}catch(w){f.call(this,w);break}}try{p=h2.call(this,u)}catch(b){return Promise.reject(b)}for(v=0,m=o.length;v<m;)p=p.then(o[v++],o[v++]);return p}getUri(t){t=Zl(this.defaults,t);const r=rP(t.baseURL,t.url,t.allowAbsoluteUrls);return QT(r,t.params,t.paramsSerializer)}};Ge.forEach(["delete","get","head","options"],function(t){ql.prototype[t]=function(r,n){return this.request(Zl(n||{},{method:t,url:r,data:(n||{}).data}))}});Ge.forEach(["post","put","patch"],function(t){function r(n){return function(i,c,l){return this.request(Zl(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}ql.prototype[t]=r(),ql.prototype[t+"Form"]=r(!0)});let U5=class cP{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const c=new Promise(l=>{n.subscribe(l),i=l}).then(s);return c.cancel=function(){n.unsubscribe(i)},c},t(function(i,c,l){n.reason||(n.reason=new Iu(i,c,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new cP(function(s){t=s}),cancel:t}}};function V5(e){return function(r){return e.apply(null,r)}}function $5(e){return Ge.isObject(e)&&e.isAxiosError===!0}const fb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fb).forEach(([e,t])=>{fb[t]=e});function lP(e){const t=new ql(e),r=BT(ql.prototype.request,t);return Ge.extend(r,ql.prototype,t,{allOwnKeys:!0}),Ge.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return lP(Zl(e,s))},r}const Ft=lP(Uh);Ft.Axios=ql;Ft.CanceledError=Iu;Ft.CancelToken=U5;Ft.isCancel=eP;Ft.VERSION=oP;Ft.toFormData=nv;Ft.AxiosError=Ir;Ft.Cancel=Ft.CanceledError;Ft.all=function(t){return Promise.all(t)};Ft.spread=V5;Ft.isAxiosError=$5;Ft.mergeConfig=Zl;Ft.AxiosHeaders=Vi;Ft.formToJSON=e=>ZT(Ge.isHTMLForm(e)?new FormData(e):e);Ft.getAdapter=aP.getAdapter;Ft.HttpStatusCode=fb;Ft.default=Ft;const{Axios:CK,AxiosError:TK,CanceledError:PK,isCancel:NK,CancelToken:AK,VERSION:jK,all:OK,Cancel:DK,isAxiosError:IK,spread:MK,toFormData:LK,AxiosHeaders:FK,HttpStatusCode:BK,formToJSON:UK,getAdapter:VK,mergeConfig:$K}=Ft;function dP({isOpen:e,onToggle:t}){const r=Bs(l=>l.user),[n,s]=A.useState(0);A.useEffect(()=>{if(r){const l=async()=>{try{const o=await Ft.get("undefined/api/user/notifications/unread-count",{withCredentials:!0});o.data.success&&s(o.data.data.unreadCount)}catch(o){console.error("Error fetching unread count:",o)}};l();const d=setInterval(l,3e4);return()=>clearInterval(d)}},[r]);const c=r?r.role==="DOCTOR"?[{href:"/dashboard/doctor",label:"Home",icon:V1},{href:"/doctor/appointments",label:"Appointment Requests",icon:hs},{href:"/doctor/appointment-history",label:"Appointment History",icon:Fs},{href:"/chat",label:"Chat",icon:Vc},{href:"/notifications",label:"Notifications",icon:sg,badge:n},{href:"/profile",label:"Profile",icon:No}]:[{href:"/dashboard/patient",label:"Home",icon:V1},{href:"/appointments",label:"Appointments",icon:hs},{href:"/doctors",label:"Find Doctor",icon:Oh},{href:"/chat",label:"Chat",icon:Vc},{href:"/upload-report",label:"Analyze Report",icon:Ia},{href:"/prescriptions",label:"Prescriptions",icon:ig},{href:"/notifications",label:"Notifications",icon:sg,badge:n},{href:"/pharmacy",label:"Pharmacy Near Me",icon:Ma},{href:"/appointment-history",label:"Appointment History",icon:Fs},{href:"/profile",label:"Profile",icon:No}]:[];return r?a.jsxs(a.Fragment,{children:[a.jsx(DL,{children:e&&a.jsx(Qr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:t})}),a.jsx("aside",{className:"hidden md:flex w-64 h-screen bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm border-r border-slate-200/60 dark:border-zinc-700/60 flex-col shadow-lg fixed left-0 top-16 z-40",children:a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:c.map(l=>{const d=l.icon;return a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs(j1,{to:l.href,className:({isActive:o})=>`flex items-center justify-between px-4 py-3 rounded-xl transition-colors ${o?"bg-blue-100/70 dark:bg-blue-400/10 text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-300 hover:bg-slate-100/80 dark:hover:bg-zinc-800/70"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(d,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:l.label})]}),l.badge&&l.badge>0&&a.jsx(Ur,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:l.badge>99?"99+":l.badge})]})},l.href)})})}),a.jsxs(Qr.aside,{initial:!1,animate:{x:e?0:"-100%",transition:{type:"spring",damping:25,stiffness:200}},className:"md:hidden fixed top-16 left-0 h-full w-64 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm border-r border-slate-200/60 dark:border-zinc-700/60 z-50 flex flex-col shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-end p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx(tr,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(ag,{className:"h-5 w-5"})})}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:c.map(l=>{const d=l.icon;return a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs(j1,{to:l.href,className:({isActive:o})=>`flex items-center justify-between px-4 py-3 rounded-xl transition-colors ${o?"bg-blue-100/70 dark:bg-blue-400/10 text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-300 hover:bg-slate-100/80 dark:hover:bg-zinc-800/70"}`,onClick:()=>{window.innerWidth<768&&t()},children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(d,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:l.label})]}),l.badge&&l.badge>0&&a.jsx(Ur,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:l.badge>99?"99+":l.badge})]})},l.href)})})]})]}):null}function m2({children:e}){const[t,r]=A.useState(!1),n=Pu(),s=Bs(l=>l.user),c=s&&["/dashboard/patient","/dashboard/doctor","/admin","/profile","/appointments","/doctors","/book-appointment","/chat"].some(l=>n.pathname.startsWith(l));return console.log("Layout Debug:",{user:s,location:n.pathname,shouldShowSidebar:c}),s?c?a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-zinc-900 flex",children:[a.jsx(dP,{isOpen:t,onToggle:()=>r(!t)}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-200/60 dark:border-zinc-700/60 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm",children:[a.jsx(tr,{variant:"ghost",size:"sm",onClick:()=>r(!0),children:a.jsx(Ww,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:a.jsx(Uc,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CareXpert"})]}),a.jsx("div",{className:"w-8"})," "]}),a.jsx("main",{className:"flex-1",children:e||a.jsx(fm,{})})]})]}):a.jsx("div",{className:"min-h-screen font-sans",children:e||a.jsx(fm,{})}):a.jsx("div",{className:"min-h-screen font-sans",children:e||a.jsx(fm,{})})}function W5(e,t=[]){let r=[];function n(i,c){const l=A.createContext(c),d=r.length;r=[...r,c];const o=v=>{var g;const{scope:m,children:u,...b}=v,f=((g=m==null?void 0:m[e])==null?void 0:g[d])||l,w=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:w,children:u})};o.displayName=i+"Provider";function p(v,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[d])||l,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(l){const d=(l==null?void 0:l[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,z5(s,...t)]}function z5(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((l,{useScope:d,scopeName:o})=>{const v=d(i)[`__scope${o}`];return{...l,...v}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function Wi(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var Wn=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function g2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function H5(...e){return t=>{let r=!1;const n=e.map(s=>{const i=g2(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():g2(e[s],null)}}}}function q5(e){const t=K5(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,l=A.Children.toArray(i),d=l.find(Y5);if(d){const o=d.props.children,p=l.map(v=>v===d?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:v);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function K5(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=Q5(s),l=J5(i,s.props);return s.type!==A.Fragment&&(l.ref=n?H5(n,c):c),A.cloneElement(s,l)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var G5=Symbol("radix.slottable");function Y5(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===G5}function J5(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Q5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var X5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Px=X5.reduce((e,t)=>{const r=q5(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...l}=s,d=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),uP={exports:{}},pP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=A;function Z5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eF=typeof Object.is=="function"?Object.is:Z5,tF=Su.useState,rF=Su.useEffect,nF=Su.useLayoutEffect,sF=Su.useDebugValue;function iF(e,t){var r=t(),n=tF({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return nF(function(){s.value=r,s.getSnapshot=t,g0(s)&&i({inst:s})},[e,r,t]),rF(function(){return g0(s)&&i({inst:s}),e(function(){g0(s)&&i({inst:s})})},[e]),sF(r),r}function g0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!eF(e,r)}catch{return!0}}function aF(e,t){return t()}var oF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?aF:iF;pP.useSyncExternalStore=Su.useSyncExternalStore!==void 0?Su.useSyncExternalStore:oF;uP.exports=pP;var cF=uP.exports;function lF(){return cF.useSyncExternalStore(dF,()=>!0,()=>!1)}function dF(){return()=>{}}var Nx="Avatar",[uF,WK]=W5(Nx),[pF,hP]=uF(Nx),fP=A.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=A.useState("idle");return a.jsx(pF,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(Px.span,{...n,ref:t})})});fP.displayName=Nx;var mP="AvatarImage",gP=A.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,c=hP(mP,r),l=hF(n,i),d=Wi(o=>{s(o),c.onImageLoadingStatusChange(o)});return Wn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?a.jsx(Px.img,{...i,ref:t,src:n}):null});gP.displayName=mP;var vP="AvatarFallback",yP=A.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=hP(vP,r),[c,l]=A.useState(n===void 0);return A.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(d)}},[n]),c&&i.imageLoadingStatus!=="loaded"?a.jsx(Px.span,{...s,ref:t}):null});yP.displayName=vP;function v2(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hF(e,{referrerPolicy:t,crossOrigin:r}){const n=lF(),s=A.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[c,l]=A.useState(()=>v2(i,e));return Wn(()=>{l(v2(i,e))},[i,e]),Wn(()=>{const d=v=>()=>{l(v)};if(!i)return;const o=d("loaded"),p=d("error");return i.addEventListener("load",o),i.addEventListener("error",p),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",o),i.removeEventListener("error",p)}},[i,r,t]),c}var bP=fP,wP=gP,xP=yP;const ds=A.forwardRef(({className:e,...t},r)=>a.jsx(bP,{ref:r,className:Vr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ds.displayName=bP.displayName;const bs=A.forwardRef(({className:e,...t},r)=>a.jsx(wP,{ref:r,className:Vr("aspect-square h-full w-full",e),...t}));bs.displayName=wP.displayName;const us=A.forwardRef(({className:e,...t},r)=>a.jsx(xP,{ref:r,className:Vr("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));us.displayName=xP.displayName;function ln(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Vh(e,t=[]){let r=[];function n(i,c){const l=A.createContext(c),d=r.length;r=[...r,c];const o=v=>{var g;const{scope:m,children:u,...b}=v,f=((g=m==null?void 0:m[e])==null?void 0:g[d])||l,w=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:w,children:u})};o.displayName=i+"Provider";function p(v,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[d])||l,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(l){const d=(l==null?void 0:l[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,fF(s,...t)]}function fF(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((l,{useScope:d,scopeName:o})=>{const v=d(i)[`__scope${o}`];return{...l,...v}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function _P(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function SP({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=mF({defaultProp:t,onChange:r}),i=e!==void 0,c=i?e:n,l=_P(r),d=A.useCallback(o=>{if(i){const v=typeof o=="function"?o(e):o;v!==e&&l(v)}else s(o)},[i,e,s,l]);return[c,d]}function mF({defaultProp:e,onChange:t}){const r=A.useState(e),[n]=r,s=A.useRef(n),i=_P(t);return A.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var gF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ri=gF.reduce((e,t)=>{const r=A.forwardRef((n,s)=>{const{asChild:i,...c}=n,l=i?wu:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...c,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function EP(e,t){e&&Jc.flushSync(()=>e.dispatchEvent(t))}function RP(e){const t=e+"CollectionProvider",[r,n]=Vh(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=u=>{const{scope:b,children:f}=u,w=pt.useRef(null),g=pt.useRef(new Map).current;return a.jsx(s,{scope:b,itemMap:g,collectionRef:w,children:f})};c.displayName=t;const l=e+"CollectionSlot",d=pt.forwardRef((u,b)=>{const{scope:f,children:w}=u,g=i(l,f),y=$i(b,g.collectionRef);return a.jsx(wu,{ref:y,children:w})});d.displayName=l;const o=e+"CollectionItemSlot",p="data-radix-collection-item",v=pt.forwardRef((u,b)=>{const{scope:f,children:w,...g}=u,y=pt.useRef(null),_=$i(b,y),x=i(o,f);return pt.useEffect(()=>(x.itemMap.set(y,{ref:y,...g}),()=>void x.itemMap.delete(y))),a.jsx(wu,{[p]:"",ref:_,children:w})});v.displayName=o;function m(u){const b=i(e+"CollectionConsumer",u);return pt.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const g=Array.from(w.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((x,E)=>g.indexOf(x.ref.current)-g.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:d,ItemSlot:v},m,n]}var vF=A.createContext(void 0);function kP(e){const t=A.useContext(vF);return e||t||"ltr"}function CP(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function yF(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function bF(e,t=globalThis==null?void 0:globalThis.document){const r=yF(e);A.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var wF="DismissableLayer",mb="dismissableLayer.update",xF="dismissableLayer.pointerDownOutside",_F="dismissableLayer.focusOutside",y2,TP=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),PP=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:l,...d}=e,o=A.useContext(TP),[p,v]=A.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=A.useState({}),b=$i(t,R=>v(R)),f=Array.from(o.layers),[w]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(w),y=p?f.indexOf(p):-1,_=o.layersWithOutsidePointerEventsDisabled.size>0,x=y>=g,E=RF(R=>{const C=R.target,T=[...o.branches].some(h=>h.contains(C));!x||T||(s==null||s(R),c==null||c(R),R.defaultPrevented||l==null||l())},m),j=kF(R=>{const C=R.target;[...o.branches].some(h=>h.contains(C))||(i==null||i(R),c==null||c(R),R.defaultPrevented||l==null||l())},m);return bF(R=>{y===o.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),A.useEffect(()=>{if(p)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(y2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(p)),o.layers.add(p),b2(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=y2)}},[p,m,r,o]),A.useEffect(()=>()=>{p&&(o.layers.delete(p),o.layersWithOutsidePointerEventsDisabled.delete(p),b2())},[p,o]),A.useEffect(()=>{const R=()=>u({});return document.addEventListener(mb,R),()=>document.removeEventListener(mb,R)},[]),a.jsx(Ri.div,{...d,ref:b,style:{pointerEvents:_?x?"auto":"none":void 0,...e.style},onFocusCapture:ln(e.onFocusCapture,j.onFocusCapture),onBlurCapture:ln(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:ln(e.onPointerDownCapture,E.onPointerDownCapture)})});PP.displayName=wF;var SF="DismissableLayerBranch",EF=A.forwardRef((e,t)=>{const r=A.useContext(TP),n=A.useRef(null),s=$i(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(Ri.div,{...e,ref:s})});EF.displayName=SF;function RF(e,t=globalThis==null?void 0:globalThis.document){const r=CP(e),n=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){NP(xF,r,o,{discrete:!0})};const o={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function kF(e,t=globalThis==null?void 0:globalThis.document){const r=CP(e),n=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!n.current&&NP(_F,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function b2(){const e=new CustomEvent(mb);document.dispatchEvent(e)}function NP(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?EP(s,i):s.dispatchEvent(i)}var v0=0;function CF(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??w2()),document.body.insertAdjacentElement("beforeend",e[1]??w2()),v0++,()=>{v0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),v0--}},[])}function w2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}function x2(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var y0="focusScope.autoFocusOnMount",b0="focusScope.autoFocusOnUnmount",_2={bubbles:!1,cancelable:!0},TF="FocusScope",AP=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=e,[l,d]=A.useState(null),o=x2(s),p=x2(i),v=A.useRef(null),m=$i(t,f=>d(f)),u=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let f=function(_){if(u.paused||!l)return;const x=_.target;l.contains(x)?v.current=x:gc(v.current,{select:!0})},w=function(_){if(u.paused||!l)return;const x=_.relatedTarget;x!==null&&(l.contains(x)||gc(v.current,{select:!0}))},g=function(_){if(document.activeElement===document.body)for(const E of _)E.removedNodes.length>0&&gc(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",w);const y=new MutationObserver(g);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,u.paused]),A.useEffect(()=>{if(l){E2.add(u);const f=document.activeElement;if(!l.contains(f)){const g=new CustomEvent(y0,_2);l.addEventListener(y0,o),l.dispatchEvent(g),g.defaultPrevented||(PF(DF(jP(l)),{select:!0}),document.activeElement===f&&gc(l))}return()=>{l.removeEventListener(y0,o),setTimeout(()=>{const g=new CustomEvent(b0,_2);l.addEventListener(b0,p),l.dispatchEvent(g),g.defaultPrevented||gc(f??document.body,{select:!0}),l.removeEventListener(b0,p),E2.remove(u)},0)}}},[l,o,p,u]);const b=A.useCallback(f=>{if(!r&&!n||u.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(w&&g){const y=f.currentTarget,[_,x]=NF(y);_&&x?!f.shiftKey&&g===x?(f.preventDefault(),r&&gc(_,{select:!0})):f.shiftKey&&g===_&&(f.preventDefault(),r&&gc(x,{select:!0})):g===y&&f.preventDefault()}},[r,n,u.paused]);return a.jsx(Ri.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});AP.displayName=TF;function PF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(gc(n,{select:t}),document.activeElement!==r)return}function NF(e){const t=jP(e),r=S2(t,e),n=S2(t.reverse(),e);return[r,n]}function jP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function S2(e,t){for(const r of e)if(!AF(r,{upTo:t}))return r}function AF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function jF(e){return e instanceof HTMLInputElement&&"select"in e}function gc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&jF(e)&&t&&e.select()}}var E2=OF();function OF(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=R2(e,t),e.unshift(t)},remove(t){var r;e=R2(e,t),(r=e[0])==null||r.resume()}}}function R2(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function DF(e){return e.filter(t=>t.tagName!=="A")}var IF=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},MF=qc.useId||(()=>{}),LF=0;function gb(e){const[t,r]=A.useState(MF());return IF(()=>{r(n=>n??String(LF++))},[e]),t?`radix-${t}`:""}const FF=["top","right","bottom","left"],zc=Math.min,Gi=Math.max,fg=Math.round,Hf=Math.floor,no=e=>({x:e,y:e}),BF={left:"right",right:"left",bottom:"top",top:"bottom"},UF={start:"end",end:"start"};function vb(e,t,r){return Gi(e,zc(t,r))}function Oo(e,t){return typeof e=="function"?e(t):e}function Do(e){return e.split("-")[0]}function Mu(e){return e.split("-")[1]}function Ax(e){return e==="x"?"y":"x"}function jx(e){return e==="y"?"height":"width"}function Ya(e){return["top","bottom"].includes(Do(e))?"y":"x"}function Ox(e){return Ax(Ya(e))}function VF(e,t,r){r===void 0&&(r=!1);const n=Mu(e),s=Ox(e),i=jx(s);let c=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(c=mg(c)),[c,mg(c)]}function $F(e){const t=mg(e);return[yb(e),t,yb(t)]}function yb(e){return e.replace(/start|end/g,t=>UF[t])}function WF(e,t,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?i:c;default:return[]}}function zF(e,t,r,n){const s=Mu(e);let i=WF(Do(e),r==="start",n);return s&&(i=i.map(c=>c+"-"+s),t&&(i=i.concat(i.map(yb)))),i}function mg(e){return e.replace(/left|right|bottom|top/g,t=>BF[t])}function HF(e){return{top:0,right:0,bottom:0,left:0,...e}}function OP(e){return typeof e!="number"?HF(e):{top:e,right:e,bottom:e,left:e}}function gg(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function k2(e,t,r){let{reference:n,floating:s}=e;const i=Ya(t),c=Ox(t),l=jx(c),d=Do(t),o=i==="y",p=n.x+n.width/2-s.width/2,v=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let u;switch(d){case"top":u={x:p,y:n.y-s.height};break;case"bottom":u={x:p,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y:v};break;case"left":u={x:n.x-s.width,y:v};break;default:u={x:n.x,y:n.y}}switch(Mu(t)){case"start":u[c]-=m*(r&&o?-1:1);break;case"end":u[c]+=m*(r&&o?-1:1);break}return u}const qF=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:c}=r,l=i.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(t));let o=await c.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y:v}=k2(o,n,d),m=n,u={},b=0;for(let f=0;f<l.length;f++){const{name:w,fn:g}=l[f],{x:y,y:_,data:x,reset:E}=await g({x:p,y:v,initialPlacement:n,placement:m,strategy:s,middlewareData:u,rects:o,platform:c,elements:{reference:e,floating:t}});p=y??p,v=_??v,u={...u,[w]:{...u[w],...x}},E&&b<=50&&(b++,typeof E=="object"&&(E.placement&&(m=E.placement),E.rects&&(o=E.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:s}):E.rects),{x:p,y:v}=k2(o,m,d)),f=-1)}return{x:p,y:v,placement:m,strategy:s,middlewareData:u}};async function yh(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:c,elements:l,strategy:d}=e,{boundary:o="clippingAncestors",rootBoundary:p="viewport",elementContext:v="floating",altBoundary:m=!1,padding:u=0}=Oo(t,e),b=OP(u),w=l[m?v==="floating"?"reference":"floating":v],g=gg(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(w)))==null||r?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:o,rootBoundary:p,strategy:d})),y=v==="floating"?{x:n,y:s,width:c.floating.width,height:c.floating.height}:c.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),x=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},E=gg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:_,strategy:d}):y);return{top:(g.top-E.top+b.top)/x.y,bottom:(E.bottom-g.bottom+b.bottom)/x.y,left:(g.left-E.left+b.left)/x.x,right:(E.right-g.right+b.right)/x.x}}const KF=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:c,elements:l,middlewareData:d}=t,{element:o,padding:p=0}=Oo(e,t)||{};if(o==null)return{};const v=OP(p),m={x:r,y:n},u=Ox(s),b=jx(u),f=await c.getDimensions(o),w=u==="y",g=w?"top":"left",y=w?"bottom":"right",_=w?"clientHeight":"clientWidth",x=i.reference[b]+i.reference[u]-m[u]-i.floating[b],E=m[u]-i.reference[u],j=await(c.getOffsetParent==null?void 0:c.getOffsetParent(o));let R=j?j[_]:0;(!R||!await(c.isElement==null?void 0:c.isElement(j)))&&(R=l.floating[_]||i.floating[b]);const C=x/2-E/2,T=R/2-f[b]/2-1,h=zc(v[g],T),S=zc(v[y],T),k=h,P=R-f[b]-S,N=R/2-f[b]/2+C,O=vb(k,N,P),D=!d.arrow&&Mu(s)!=null&&N!==O&&i.reference[b]/2-(N<k?h:S)-f[b]/2<0,L=D?N<k?N-k:N-P:0;return{[u]:m[u]+L,data:{[u]:O,centerOffset:N-O-L,...D&&{alignmentOffset:L}},reset:D}}}),GF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:c,initialPlacement:l,platform:d,elements:o}=t,{mainAxis:p=!0,crossAxis:v=!0,fallbackPlacements:m,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:f=!0,...w}=Oo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const g=Do(s),y=Ya(l),_=Do(l)===l,x=await(d.isRTL==null?void 0:d.isRTL(o.floating)),E=m||(_||!f?[mg(l)]:$F(l)),j=b!=="none";!m&&j&&E.push(...zF(l,f,b,x));const R=[l,...E],C=await yh(t,w),T=[];let h=((n=i.flip)==null?void 0:n.overflows)||[];if(p&&T.push(C[g]),v){const N=VF(s,c,x);T.push(C[N[0]],C[N[1]])}if(h=[...h,{placement:s,overflows:T}],!T.every(N=>N<=0)){var S,k;const N=(((S=i.flip)==null?void 0:S.index)||0)+1,O=R[N];if(O&&(!(v==="alignment"?y!==Ya(O):!1)||h.every(M=>M.overflows[0]>0&&Ya(M.placement)===y)))return{data:{index:N,overflows:h},reset:{placement:O}};let D=(k=h.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!D)switch(u){case"bestFit":{var P;const L=(P=h.filter(M=>{if(j){const I=Ya(M.placement);return I===y||I==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(I=>I>0).reduce((I,G)=>I+G,0)]).sort((M,I)=>M[1]-I[1])[0])==null?void 0:P[0];L&&(D=L);break}case"initialPlacement":D=l;break}if(s!==D)return{reset:{placement:D}}}return{}}}};function C2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function T2(e){return FF.some(t=>e[t]>=0)}const YF=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Oo(e,t);switch(n){case"referenceHidden":{const i=await yh(t,{...s,elementContext:"reference"}),c=C2(i,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:T2(c)}}}case"escaped":{const i=await yh(t,{...s,altBoundary:!0}),c=C2(i,r.floating);return{data:{escapedOffsets:c,escaped:T2(c)}}}default:return{}}}}};async function JF(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),c=Do(r),l=Mu(r),d=Ya(r)==="y",o=["left","top"].includes(c)?-1:1,p=i&&d?-1:1,v=Oo(t,e);let{mainAxis:m,crossAxis:u,alignmentAxis:b}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return l&&typeof b=="number"&&(u=l==="end"?b*-1:b),d?{x:u*p,y:m*o}:{x:m*o,y:u*p}}const QF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:c,middlewareData:l}=t,d=await JF(t,e);return c===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:c}}}}},XF=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:l={fn:w=>{let{x:g,y}=w;return{x:g,y}}},...d}=Oo(e,t),o={x:r,y:n},p=await yh(t,d),v=Ya(Do(s)),m=Ax(v);let u=o[m],b=o[v];if(i){const w=m==="y"?"top":"left",g=m==="y"?"bottom":"right",y=u+p[w],_=u-p[g];u=vb(y,u,_)}if(c){const w=v==="y"?"top":"left",g=v==="y"?"bottom":"right",y=b+p[w],_=b-p[g];b=vb(y,b,_)}const f=l.fn({...t,[m]:u,[v]:b});return{...f,data:{x:f.x-r,y:f.y-n,enabled:{[m]:i,[v]:c}}}}}},ZF=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:c}=t,{offset:l=0,mainAxis:d=!0,crossAxis:o=!0}=Oo(e,t),p={x:r,y:n},v=Ya(s),m=Ax(v);let u=p[m],b=p[v];const f=Oo(l,t),w=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(d){const _=m==="y"?"height":"width",x=i.reference[m]-i.floating[_]+w.mainAxis,E=i.reference[m]+i.reference[_]-w.mainAxis;u<x?u=x:u>E&&(u=E)}if(o){var g,y;const _=m==="y"?"width":"height",x=["top","left"].includes(Do(s)),E=i.reference[v]-i.floating[_]+(x&&((g=c.offset)==null?void 0:g[v])||0)+(x?0:w.crossAxis),j=i.reference[v]+i.reference[_]+(x?0:((y=c.offset)==null?void 0:y[v])||0)-(x?w.crossAxis:0);b<E?b=E:b>j&&(b=j)}return{[m]:u,[v]:b}}}},eB=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:c,elements:l}=t,{apply:d=()=>{},...o}=Oo(e,t),p=await yh(t,o),v=Do(s),m=Mu(s),u=Ya(s)==="y",{width:b,height:f}=i.floating;let w,g;v==="top"||v==="bottom"?(w=v,g=m===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(g=v,w=m==="end"?"top":"bottom");const y=f-p.top-p.bottom,_=b-p.left-p.right,x=zc(f-p[w],y),E=zc(b-p[g],_),j=!t.middlewareData.shift;let R=x,C=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=_),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(R=y),j&&!m){const h=Gi(p.left,0),S=Gi(p.right,0),k=Gi(p.top,0),P=Gi(p.bottom,0);u?C=b-2*(h!==0||S!==0?h+S:Gi(p.left,p.right)):R=f-2*(k!==0||P!==0?k+P:Gi(p.top,p.bottom))}await d({...t,availableWidth:C,availableHeight:R});const T=await c.getDimensions(l.floating);return b!==T.width||f!==T.height?{reset:{rects:!0}}:{}}}};function av(){return typeof window<"u"}function Lu(e){return DP(e)?(e.nodeName||"").toLowerCase():"#document"}function Qi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function oo(e){var t;return(t=(DP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function DP(e){return av()?e instanceof Node||e instanceof Qi(e).Node:!1}function La(e){return av()?e instanceof Element||e instanceof Qi(e).Element:!1}function so(e){return av()?e instanceof HTMLElement||e instanceof Qi(e).HTMLElement:!1}function P2(e){return!av()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Qi(e).ShadowRoot}function $h(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Fa(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function tB(e){return["table","td","th"].includes(Lu(e))}function ov(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Dx(e){const t=Ix(),r=La(e)?Fa(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function rB(e){let t=Hc(e);for(;so(t)&&!Eu(t);){if(Dx(t))return t;if(ov(t))return null;t=Hc(t)}return null}function Ix(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Eu(e){return["html","body","#document"].includes(Lu(e))}function Fa(e){return Qi(e).getComputedStyle(e)}function cv(e){return La(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hc(e){if(Lu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||P2(e)&&e.host||oo(e);return P2(t)?t.host:t}function IP(e){const t=Hc(e);return Eu(t)?e.ownerDocument?e.ownerDocument.body:e.body:so(t)&&$h(t)?t:IP(t)}function bh(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=IP(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),c=Qi(s);if(i){const l=bb(c);return t.concat(c,c.visualViewport||[],$h(s)?s:[],l&&r?bh(l):[])}return t.concat(s,bh(s,[],r))}function bb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function MP(e){const t=Fa(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=so(e),i=s?e.offsetWidth:r,c=s?e.offsetHeight:n,l=fg(r)!==i||fg(n)!==c;return l&&(r=i,n=c),{width:r,height:n,$:l}}function Mx(e){return La(e)?e:e.contextElement}function cu(e){const t=Mx(e);if(!so(t))return no(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=MP(t);let c=(i?fg(r.width):r.width)/n,l=(i?fg(r.height):r.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!l||!Number.isFinite(l))&&(l=1),{x:c,y:l}}const nB=no(0);function LP(e){const t=Qi(e);return!Ix()||!t.visualViewport?nB:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sB(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Qi(e)?!1:t}function ed(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=Mx(e);let c=no(1);t&&(n?La(n)&&(c=cu(n)):c=cu(e));const l=sB(i,r,n)?LP(i):no(0);let d=(s.left+l.x)/c.x,o=(s.top+l.y)/c.y,p=s.width/c.x,v=s.height/c.y;if(i){const m=Qi(i),u=n&&La(n)?Qi(n):n;let b=m,f=bb(b);for(;f&&n&&u!==b;){const w=cu(f),g=f.getBoundingClientRect(),y=Fa(f),_=g.left+(f.clientLeft+parseFloat(y.paddingLeft))*w.x,x=g.top+(f.clientTop+parseFloat(y.paddingTop))*w.y;d*=w.x,o*=w.y,p*=w.x,v*=w.y,d+=_,o+=x,b=Qi(f),f=bb(b)}}return gg({width:p,height:v,x:d,y:o})}function Lx(e,t){const r=cv(e).scrollLeft;return t?t.left+r:ed(oo(e)).left+r}function FP(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Lx(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function iB(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",c=oo(n),l=t?ov(t.floating):!1;if(n===c||l&&i)return r;let d={scrollLeft:0,scrollTop:0},o=no(1);const p=no(0),v=so(n);if((v||!v&&!i)&&((Lu(n)!=="body"||$h(c))&&(d=cv(n)),so(n))){const u=ed(n);o=cu(n),p.x=u.x+n.clientLeft,p.y=u.y+n.clientTop}const m=c&&!v&&!i?FP(c,d,!0):no(0);return{width:r.width*o.x,height:r.height*o.y,x:r.x*o.x-d.scrollLeft*o.x+p.x+m.x,y:r.y*o.y-d.scrollTop*o.y+p.y+m.y}}function aB(e){return Array.from(e.getClientRects())}function oB(e){const t=oo(e),r=cv(e),n=e.ownerDocument.body,s=Gi(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Gi(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let c=-r.scrollLeft+Lx(e);const l=-r.scrollTop;return Fa(n).direction==="rtl"&&(c+=Gi(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:c,y:l}}function cB(e,t){const r=Qi(e),n=oo(e),s=r.visualViewport;let i=n.clientWidth,c=n.clientHeight,l=0,d=0;if(s){i=s.width,c=s.height;const o=Ix();(!o||o&&t==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:i,height:c,x:l,y:d}}function lB(e,t){const r=ed(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=so(e)?cu(e):no(1),c=e.clientWidth*i.x,l=e.clientHeight*i.y,d=s*i.x,o=n*i.y;return{width:c,height:l,x:d,y:o}}function N2(e,t,r){let n;if(t==="viewport")n=cB(e,r);else if(t==="document")n=oB(oo(e));else if(La(t))n=lB(t,r);else{const s=LP(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return gg(n)}function BP(e,t){const r=Hc(e);return r===t||!La(r)||Eu(r)?!1:Fa(r).position==="fixed"||BP(r,t)}function dB(e,t){const r=t.get(e);if(r)return r;let n=bh(e,[],!1).filter(l=>La(l)&&Lu(l)!=="body"),s=null;const i=Fa(e).position==="fixed";let c=i?Hc(e):e;for(;La(c)&&!Eu(c);){const l=Fa(c),d=Dx(c);!d&&l.position==="fixed"&&(s=null),(i?!d&&!s:!d&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||$h(c)&&!d&&BP(e,c))?n=n.filter(p=>p!==c):s=l,c=Hc(c)}return t.set(e,n),n}function uB(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const c=[...r==="clippingAncestors"?ov(t)?[]:dB(t,this._c):[].concat(r),n],l=c[0],d=c.reduce((o,p)=>{const v=N2(t,p,s);return o.top=Gi(v.top,o.top),o.right=zc(v.right,o.right),o.bottom=zc(v.bottom,o.bottom),o.left=Gi(v.left,o.left),o},N2(t,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function pB(e){const{width:t,height:r}=MP(e);return{width:t,height:r}}function hB(e,t,r){const n=so(t),s=oo(t),i=r==="fixed",c=ed(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const d=no(0);function o(){d.x=Lx(s)}if(n||!n&&!i)if((Lu(t)!=="body"||$h(s))&&(l=cv(t)),n){const u=ed(t,!0,i,t);d.x=u.x+t.clientLeft,d.y=u.y+t.clientTop}else s&&o();i&&!n&&s&&o();const p=s&&!n&&!i?FP(s,l):no(0),v=c.left+l.scrollLeft-d.x-p.x,m=c.top+l.scrollTop-d.y-p.y;return{x:v,y:m,width:c.width,height:c.height}}function w0(e){return Fa(e).position==="static"}function A2(e,t){if(!so(e)||Fa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return oo(e)===r&&(r=r.ownerDocument.body),r}function UP(e,t){const r=Qi(e);if(ov(e))return r;if(!so(e)){let s=Hc(e);for(;s&&!Eu(s);){if(La(s)&&!w0(s))return s;s=Hc(s)}return r}let n=A2(e,t);for(;n&&tB(n)&&w0(n);)n=A2(n,t);return n&&Eu(n)&&w0(n)&&!Dx(n)?r:n||rB(e)||r}const fB=async function(e){const t=this.getOffsetParent||UP,r=this.getDimensions,n=await r(e.floating);return{reference:hB(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mB(e){return Fa(e).direction==="rtl"}const gB={convertOffsetParentRelativeRectToViewportRelativeRect:iB,getDocumentElement:oo,getClippingRect:uB,getOffsetParent:UP,getElementRects:fB,getClientRects:aB,getDimensions:pB,getScale:cu,isElement:La,isRTL:mB};function VP(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function vB(e,t){let r=null,n;const s=oo(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function c(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const o=e.getBoundingClientRect(),{left:p,top:v,width:m,height:u}=o;if(l||t(),!m||!u)return;const b=Hf(v),f=Hf(s.clientWidth-(p+m)),w=Hf(s.clientHeight-(v+u)),g=Hf(p),_={rootMargin:-b+"px "+-f+"px "+-w+"px "+-g+"px",threshold:Gi(0,zc(1,d))||1};let x=!0;function E(j){const R=j[0].intersectionRatio;if(R!==d){if(!x)return c();R?c(!1,R):n=setTimeout(()=>{c(!1,1e-7)},1e3)}R===1&&!VP(o,e.getBoundingClientRect())&&c(),x=!1}try{r=new IntersectionObserver(E,{..._,root:s.ownerDocument})}catch{r=new IntersectionObserver(E,_)}r.observe(e)}return c(!0),i}function $P(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,o=Mx(e),p=s||i?[...o?bh(o):[],...bh(t)]:[];p.forEach(g=>{s&&g.addEventListener("scroll",r,{passive:!0}),i&&g.addEventListener("resize",r)});const v=o&&l?vB(o,r):null;let m=-1,u=null;c&&(u=new ResizeObserver(g=>{let[y]=g;y&&y.target===o&&u&&(u.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=u)==null||_.observe(t)})),r()}),o&&!d&&u.observe(o),u.observe(t));let b,f=d?ed(e):null;d&&w();function w(){const g=ed(e);f&&!VP(f,g)&&r(),f=g,b=requestAnimationFrame(w)}return r(),()=>{var g;p.forEach(y=>{s&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),v==null||v(),(g=u)==null||g.disconnect(),u=null,d&&cancelAnimationFrame(b)}}const yB=QF,bB=XF,wB=GF,xB=eB,_B=YF,j2=KF,SB=ZF,EB=(e,t,r)=>{const n=new Map,s={platform:gB,...r},i={...s.platform,_c:n};return qF(e,t,{...s,platform:i})};var RB=typeof document<"u",kB=function(){},Sm=RB?A.useLayoutEffect:kB;function vg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!vg(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!vg(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function WP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function O2(e,t){const r=WP(e);return Math.round(t*r)/r}function x0(e){const t=A.useRef(e);return Sm(()=>{t.current=e}),t}function zP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:c}={},transform:l=!0,whileElementsMounted:d,open:o}=e,[p,v]=A.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,u]=A.useState(n);vg(m,n)||u(n);const[b,f]=A.useState(null),[w,g]=A.useState(null),y=A.useCallback(M=>{M!==j.current&&(j.current=M,f(M))},[]),_=A.useCallback(M=>{M!==R.current&&(R.current=M,g(M))},[]),x=i||b,E=c||w,j=A.useRef(null),R=A.useRef(null),C=A.useRef(p),T=d!=null,h=x0(d),S=x0(s),k=x0(o),P=A.useCallback(()=>{if(!j.current||!R.current)return;const M={placement:t,strategy:r,middleware:m};S.current&&(M.platform=S.current),EB(j.current,R.current,M).then(I=>{const G={...I,isPositioned:k.current!==!1};N.current&&!vg(C.current,G)&&(C.current=G,Jc.flushSync(()=>{v(G)}))})},[m,t,r,S,k]);Sm(()=>{o===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,v(M=>({...M,isPositioned:!1})))},[o]);const N=A.useRef(!1);Sm(()=>(N.current=!0,()=>{N.current=!1}),[]),Sm(()=>{if(x&&(j.current=x),E&&(R.current=E),x&&E){if(h.current)return h.current(x,E,P);P()}},[x,E,P,h,T]);const O=A.useMemo(()=>({reference:j,floating:R,setReference:y,setFloating:_}),[y,_]),D=A.useMemo(()=>({reference:x,floating:E}),[x,E]),L=A.useMemo(()=>{const M={position:r,left:0,top:0};if(!D.floating)return M;const I=O2(D.floating,p.x),G=O2(D.floating,p.y);return l?{...M,transform:"translate("+I+"px, "+G+"px)",...WP(D.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:I,top:G}},[r,l,D.floating,p.x,p.y]);return A.useMemo(()=>({...p,update:P,refs:O,elements:D,floatingStyles:L}),[p,P,O,D,L])}const CB=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?j2({element:n.current,padding:s}).fn(r):{}:n?j2({element:n,padding:s}).fn(r):{}}}},HP=(e,t)=>({...yB(e),options:[e,t]}),qP=(e,t)=>({...bB(e),options:[e,t]}),KP=(e,t)=>({...SB(e),options:[e,t]}),GP=(e,t)=>({...wB(e),options:[e,t]}),YP=(e,t)=>({...xB(e),options:[e,t]}),JP=(e,t)=>({..._B(e),options:[e,t]}),QP=(e,t)=>({...CB(e),options:[e,t]});var TB="Arrow",XP=A.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(Ri.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});XP.displayName=TB;var PB=XP;function NB(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var D2=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},AB=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function jB(e){const[t,r]=A.useState(void 0);return AB(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let c,l;if("borderBoxSize"in i){const d=i.borderBoxSize,o=Array.isArray(d)?d[0]:d;c=o.inlineSize,l=o.blockSize}else c=e.offsetWidth,l=e.offsetHeight;r({width:c,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Fx="Popper",[ZP,eN]=Vh(Fx),[OB,tN]=ZP(Fx),rN=e=>{const{__scopePopper:t,children:r}=e,[n,s]=A.useState(null);return a.jsx(OB,{scope:t,anchor:n,onAnchorChange:s,children:r})};rN.displayName=Fx;var nN="PopperAnchor",sN=A.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=tN(nN,r),c=A.useRef(null),l=$i(t,c);return A.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||c.current)}),n?null:a.jsx(Ri.div,{...s,ref:l})});sN.displayName=nN;var Bx="PopperContent",[DB,IB]=ZP(Bx),iN=A.forwardRef((e,t)=>{var ie,We,Oe,se,ue,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:c=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:o=[],collisionPadding:p=0,sticky:v="partial",hideWhenDetached:m=!1,updatePositionStrategy:u="optimized",onPlaced:b,...f}=e,w=tN(Bx,r),[g,y]=A.useState(null),_=$i(t,$e=>y($e)),[x,E]=A.useState(null),j=jB(x),R=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,T=n+(i!=="center"?"-"+i:""),h=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},S=Array.isArray(o)?o:[o],k=S.length>0,P={padding:h,boundary:S.filter(LB),altBoundary:k},{refs:N,floatingStyles:O,placement:D,isPositioned:L,middlewareData:M}=zP({strategy:"fixed",placement:T,whileElementsMounted:(...$e)=>$P(...$e,{animationFrame:u==="always"}),elements:{reference:w.anchor},middleware:[HP({mainAxis:s+C,alignmentAxis:c}),d&&qP({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?KP():void 0,...P}),d&&GP({...P}),YP({...P,apply:({elements:$e,rects:Wt,availableWidth:er,availableHeight:wt})=>{const{width:Er,height:yr}=Wt.reference,Ot=$e.floating.style;Ot.setProperty("--radix-popper-available-width",`${er}px`),Ot.setProperty("--radix-popper-available-height",`${wt}px`),Ot.setProperty("--radix-popper-anchor-width",`${Er}px`),Ot.setProperty("--radix-popper-anchor-height",`${yr}px`)}}),x&&QP({element:x,padding:l}),FB({arrowWidth:R,arrowHeight:C}),m&&JP({strategy:"referenceHidden",...P})]}),[I,G]=cN(D),de=NB(b);D2(()=>{L&&(de==null||de())},[L,de]);const ee=(ie=M.arrow)==null?void 0:ie.x,Q=(We=M.arrow)==null?void 0:We.y,ae=((Oe=M.arrow)==null?void 0:Oe.centerOffset)!==0,[xe,Se]=A.useState();return D2(()=>{g&&Se(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:L?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(se=M.transformOrigin)==null?void 0:se.x,(ue=M.transformOrigin)==null?void 0:ue.y].join(" "),...((Ce=M.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(DB,{scope:r,placedSide:I,onArrowChange:E,arrowX:ee,arrowY:Q,shouldHideArrow:ae,children:a.jsx(Ri.div,{"data-side":I,"data-align":G,...f,ref:_,style:{...f.style,animation:L?void 0:"none"}})})})});iN.displayName=Bx;var aN="PopperArrow",MB={top:"bottom",right:"left",bottom:"top",left:"right"},oN=A.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=IB(aN,n),c=MB[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(PB,{...s,ref:r,style:{...s.style,display:"block"}})})});oN.displayName=aN;function LB(e){return e!==null}var FB=e=>({name:"transformOrigin",options:e,fn(t){var w,g,y;const{placement:r,rects:n,middlewareData:s}=t,c=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[o,p]=cN(r),v={start:"0%",center:"50%",end:"100%"}[p],m=(((g=s.arrow)==null?void 0:g.x)??0)+l/2,u=(((y=s.arrow)==null?void 0:y.y)??0)+d/2;let b="",f="";return o==="bottom"?(b=c?v:`${m}px`,f=`${-d}px`):o==="top"?(b=c?v:`${m}px`,f=`${n.floating.height+d}px`):o==="right"?(b=`${-d}px`,f=c?v:`${u}px`):o==="left"&&(b=`${n.floating.width+d}px`,f=c?v:`${u}px`),{data:{x:b,y:f}}}});function cN(e){const[t,r="center"]=e.split("-");return[t,r]}var BB=rN,UB=sN,VB=iN,$B=oN,WB=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},zB="Portal",lN=A.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=A.useState(!1);WB(()=>i(!0),[]);const c=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return c?Wg.createPortal(a.jsx(Ri.div,{...n,ref:t}),c):null});lN.displayName=zB;var I2=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function HB(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var Wh=e=>{const{present:t,children:r}=e,n=qB(t),s=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=$i(n.ref,KB(s));return typeof r=="function"||n.isPresent?A.cloneElement(s,{ref:i}):null};Wh.displayName="Presence";function qB(e){const[t,r]=A.useState(),n=A.useRef({}),s=A.useRef(e),i=A.useRef("none"),c=e?"mounted":"unmounted",[l,d]=HB(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const o=qf(n.current);i.current=l==="mounted"?o:"none"},[l]),I2(()=>{const o=n.current,p=s.current;if(p!==e){const m=i.current,u=qf(o);e?d("MOUNT"):u==="none"||(o==null?void 0:o.display)==="none"?d("UNMOUNT"):d(p&&m!==u?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),I2(()=>{if(t){let o;const p=t.ownerDocument.defaultView??window,v=u=>{const f=qf(n.current).includes(u.animationName);if(u.target===t&&f&&(d("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",o=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=u=>{u.target===t&&(i.current=qf(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{p.clearTimeout(o),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(o=>{o&&(n.current=getComputedStyle(o)),r(o)},[])}}function qf(e){return(e==null?void 0:e.animationName)||"none"}function KB(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function GB(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var _0="rovingFocusGroup.onEntryFocus",YB={bubbles:!1,cancelable:!0},lv="RovingFocusGroup",[wb,dN,JB]=RP(lv),[QB,uN]=Vh(lv,[JB]),[XB,ZB]=QB(lv),pN=A.forwardRef((e,t)=>a.jsx(wb.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(wb.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(eU,{...e,ref:t})})}));pN.displayName=lv;var eU=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:o,preventScrollOnEntryFocus:p=!1,...v}=e,m=A.useRef(null),u=$i(t,m),b=kP(i),[f=null,w]=SP({prop:c,defaultProp:l,onChange:d}),[g,y]=A.useState(!1),_=GB(o),x=dN(r),E=A.useRef(!1),[j,R]=A.useState(0);return A.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(_0,_),()=>C.removeEventListener(_0,_)},[_]),a.jsx(XB,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:f,onItemFocus:A.useCallback(C=>w(C),[w]),onItemShiftTab:A.useCallback(()=>y(!0),[]),onFocusableItemAdd:A.useCallback(()=>R(C=>C+1),[]),onFocusableItemRemove:A.useCallback(()=>R(C=>C-1),[]),children:a.jsx(Ri.div,{tabIndex:g||j===0?-1:0,"data-orientation":n,...v,ref:u,style:{outline:"none",...e.style},onMouseDown:ln(e.onMouseDown,()=>{E.current=!0}),onFocus:ln(e.onFocus,C=>{const T=!E.current;if(C.target===C.currentTarget&&T&&!g){const h=new CustomEvent(_0,YB);if(C.currentTarget.dispatchEvent(h),!h.defaultPrevented){const S=x().filter(D=>D.focusable),k=S.find(D=>D.active),P=S.find(D=>D.id===f),O=[k,P,...S].filter(Boolean).map(D=>D.ref.current);mN(O,p)}}E.current=!1}),onBlur:ln(e.onBlur,()=>y(!1))})})}),hN="RovingFocusGroupItem",fN=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...c}=e,l=gb(),d=i||l,o=ZB(hN,r),p=o.currentTabStopId===d,v=dN(r),{onFocusableItemAdd:m,onFocusableItemRemove:u}=o;return A.useEffect(()=>{if(n)return m(),()=>u()},[n,m,u]),a.jsx(wb.ItemSlot,{scope:r,id:d,focusable:n,active:s,children:a.jsx(Ri.span,{tabIndex:p?0:-1,"data-orientation":o.orientation,...c,ref:t,onMouseDown:ln(e.onMouseDown,b=>{n?o.onItemFocus(d):b.preventDefault()}),onFocus:ln(e.onFocus,()=>o.onItemFocus(d)),onKeyDown:ln(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){o.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const f=nU(b,o.orientation,o.dir);if(f!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let g=v().filter(y=>y.focusable).map(y=>y.ref.current);if(f==="last")g.reverse();else if(f==="prev"||f==="next"){f==="prev"&&g.reverse();const y=g.indexOf(b.currentTarget);g=o.loop?sU(g,y+1):g.slice(y+1)}setTimeout(()=>mN(g))}})})})});fN.displayName=hN;var tU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rU(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function nU(e,t,r){const n=rU(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return tU[n]}function mN(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function sU(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var iU=pN,aU=fN;function gN(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var oU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Dd=new WeakMap,Kf=new WeakMap,Gf={},S0=0,vN=function(e){return e&&(e.host||vN(e.parentNode))},cU=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=vN(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},lU=function(e,t,r,n){var s=cU(t,Array.isArray(e)?e:[e]);Gf[r]||(Gf[r]=new WeakMap);var i=Gf[r],c=[],l=new Set,d=new Set(s),o=function(v){!v||l.has(v)||(l.add(v),o(v.parentNode))};s.forEach(o);var p=function(v){!v||d.has(v)||Array.prototype.forEach.call(v.children,function(m){if(l.has(m))p(m);else try{var u=m.getAttribute(n),b=u!==null&&u!=="false",f=(Dd.get(m)||0)+1,w=(i.get(m)||0)+1;Dd.set(m,f),i.set(m,w),c.push(m),f===1&&b&&Kf.set(m,!0),w===1&&m.setAttribute(r,"true"),b||m.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return p(t),l.clear(),S0++,function(){c.forEach(function(v){var m=Dd.get(v)-1,u=i.get(v)-1;Dd.set(v,m),i.set(v,u),m||(Kf.has(v)||v.removeAttribute(n),Kf.delete(v)),u||v.removeAttribute(r)}),S0--,S0||(Dd=new WeakMap,Dd=new WeakMap,Kf=new WeakMap,Gf={})}},Ux=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=oU(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),lU(n,s,r,"aria-hidden")):function(){return null}},Ga=function(){return Ga=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ga.apply(this,arguments)};function yN(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function dU(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Em="right-scroll-bar-position",Rm="width-before-scroll-bar",uU="with-scroll-bars-hidden",pU="--removed-body-scroll-bar-size";function E0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function hU(e,t){var r=A.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var fU=typeof window<"u"?A.useLayoutEffect:A.useEffect,M2=new WeakMap;function mU(e,t){var r=hU(null,function(n){return e.forEach(function(s){return E0(s,n)})});return fU(function(){var n=M2.get(r);if(n){var s=new Set(n),i=new Set(e),c=r.current;s.forEach(function(l){i.has(l)||E0(l,null)}),i.forEach(function(l){s.has(l)||E0(l,c)})}M2.set(r,e)},[e]),r}function gU(e){return e}function vU(e,t){t===void 0&&(t=gU);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var c=t(i,n);return r.push(c),function(){r=r.filter(function(l){return l!==c})}},assignSyncMedium:function(i){for(n=!0;r.length;){var c=r;r=[],c.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var c=[];if(r.length){var l=r;r=[],l.forEach(i),c=r}var d=function(){var p=c;c=[],p.forEach(i)},o=function(){return Promise.resolve().then(d)};o(),r={push:function(p){c.push(p),o()},filter:function(p){return c=c.filter(p),r}}}};return s}function yU(e){e===void 0&&(e={});var t=vU(null);return t.options=Ga({async:!0,ssr:!1},e),t}var bN=function(e){var t=e.sideCar,r=yN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return A.createElement(n,Ga({},r))};bN.isSideCarExport=!0;function bU(e,t){return e.useMedium(t),bN}var wN=yU(),R0=function(){},dv=A.forwardRef(function(e,t){var r=A.useRef(null),n=A.useState({onScrollCapture:R0,onWheelCapture:R0,onTouchMoveCapture:R0}),s=n[0],i=n[1],c=e.forwardProps,l=e.children,d=e.className,o=e.removeScrollBar,p=e.enabled,v=e.shards,m=e.sideCar,u=e.noRelative,b=e.noIsolation,f=e.inert,w=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,_=e.gapMode,x=yN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,j=mU([r,t]),R=Ga(Ga({},x),s);return A.createElement(A.Fragment,null,p&&A.createElement(E,{sideCar:wN,removeScrollBar:o,shards:v,noRelative:u,noIsolation:b,inert:f,setCallbacks:i,allowPinchZoom:!!w,lockRef:r,gapMode:_}),c?A.cloneElement(A.Children.only(l),Ga(Ga({},R),{ref:j})):A.createElement(y,Ga({},R,{className:d,ref:j}),l))});dv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dv.classNames={fullWidth:Rm,zeroRight:Em};var wU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wU();return t&&e.setAttribute("nonce",t),e}function _U(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function SU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var EU=function(){var e=0,t=null;return{add:function(r){e==0&&(t=xU())&&(_U(t,r),SU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},RU=function(){var e=EU();return function(t,r){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},xN=function(){var e=RU(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},kU={left:0,top:0,right:0,gap:0},k0=function(e){return parseInt(e||"",10)||0},CU=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[k0(r),k0(n),k0(s)]},TU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kU;var t=CU(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},PU=xN(),lu="data-scroll-locked",NU=function(e,t,r,n){var s=e.left,i=e.top,c=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(uU,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(lu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Em,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Rm,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Em," .").concat(Em,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Rm," .").concat(Rm,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(lu,`] {
    `).concat(pU,": ").concat(l,`px;
  }
`)},L2=function(){var e=parseInt(document.body.getAttribute(lu)||"0",10);return isFinite(e)?e:0},AU=function(){A.useEffect(function(){return document.body.setAttribute(lu,(L2()+1).toString()),function(){var e=L2()-1;e<=0?document.body.removeAttribute(lu):document.body.setAttribute(lu,e.toString())}},[])},jU=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;AU();var i=A.useMemo(function(){return TU(s)},[s]);return A.createElement(PU,{styles:NU(i,!t,s,r?"":"!important")})},xb=!1;if(typeof window<"u")try{var Yf=Object.defineProperty({},"passive",{get:function(){return xb=!0,!0}});window.addEventListener("test",Yf,Yf),window.removeEventListener("test",Yf,Yf)}catch{xb=!1}var Id=xb?{passive:!1}:!1,OU=function(e){return e.tagName==="TEXTAREA"},_N=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!OU(e)&&r[t]==="visible")},DU=function(e){return _N(e,"overflowY")},IU=function(e){return _N(e,"overflowX")},F2=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=SN(e,n);if(s){var i=EN(e,n),c=i[1],l=i[2];if(c>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},MU=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},LU=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},SN=function(e,t){return e==="v"?DU(t):IU(t)},EN=function(e,t){return e==="v"?MU(t):LU(t)},FU=function(e,t){return e==="h"&&t==="rtl"?-1:1},BU=function(e,t,r,n,s){var i=FU(e,window.getComputedStyle(t).direction),c=i*n,l=r.target,d=t.contains(l),o=!1,p=c>0,v=0,m=0;do{if(!l)break;var u=EN(e,l),b=u[0],f=u[1],w=u[2],g=f-w-i*b;(b||g)&&SN(e,l)&&(v+=g,m+=b);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(p&&Math.abs(v)<1||!p&&Math.abs(m)<1)&&(o=!0),o},Jf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},B2=function(e){return[e.deltaX,e.deltaY]},U2=function(e){return e&&"current"in e?e.current:e},UU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},VU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},$U=0,Md=[];function WU(e){var t=A.useRef([]),r=A.useRef([0,0]),n=A.useRef(),s=A.useState($U++)[0],i=A.useState(xN)[0],c=A.useRef(e);A.useEffect(function(){c.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var f=dU([e.lockRef.current],(e.shards||[]).map(U2),!0).filter(Boolean);return f.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),f.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=A.useCallback(function(f,w){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!c.current.allowPinchZoom;var g=Jf(f),y=r.current,_="deltaX"in f?f.deltaX:y[0]-g[0],x="deltaY"in f?f.deltaY:y[1]-g[1],E,j=f.target,R=Math.abs(_)>Math.abs(x)?"h":"v";if("touches"in f&&R==="h"&&j.type==="range")return!1;var C=F2(R,j);if(!C)return!0;if(C?E=R:(E=R==="v"?"h":"v",C=F2(R,j)),!C)return!1;if(!n.current&&"changedTouches"in f&&(_||x)&&(n.current=E),!E)return!0;var T=n.current||E;return BU(T,w,f,T==="h"?_:x)},[]),d=A.useCallback(function(f){var w=f;if(!(!Md.length||Md[Md.length-1]!==i)){var g="deltaY"in w?B2(w):Jf(w),y=t.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&UU(E.delta,g)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var _=(c.current.shards||[]).map(U2).filter(Boolean).filter(function(E){return E.contains(w.target)}),x=_.length>0?l(w,_[0]):!c.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),o=A.useCallback(function(f,w,g,y){var _={name:f,delta:w,target:g,should:y,shadowParent:zU(g)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(x){return x!==_})},1)},[]),p=A.useCallback(function(f){r.current=Jf(f),n.current=void 0},[]),v=A.useCallback(function(f){o(f.type,B2(f),f.target,l(f,e.lockRef.current))},[]),m=A.useCallback(function(f){o(f.type,Jf(f),f.target,l(f,e.lockRef.current))},[]);A.useEffect(function(){return Md.push(i),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:m}),document.addEventListener("wheel",d,Id),document.addEventListener("touchmove",d,Id),document.addEventListener("touchstart",p,Id),function(){Md=Md.filter(function(f){return f!==i}),document.removeEventListener("wheel",d,Id),document.removeEventListener("touchmove",d,Id),document.removeEventListener("touchstart",p,Id)}},[]);var u=e.removeScrollBar,b=e.inert;return A.createElement(A.Fragment,null,b?A.createElement(i,{styles:VU(s)}):null,u?A.createElement(jU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function zU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const HU=bU(wN,WU);var uv=A.forwardRef(function(e,t){return A.createElement(dv,Ga({},e,{ref:t,sideCar:HU}))});uv.classNames=dv.classNames;var _b=["Enter"," "],qU=["ArrowDown","PageUp","Home"],RN=["ArrowUp","PageDown","End"],KU=[...qU,...RN],GU={ltr:[..._b,"ArrowRight"],rtl:[..._b,"ArrowLeft"]},YU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zh="Menu",[wh,JU,QU]=RP(zh),[od,kN]=Vh(zh,[QU,eN,uN]),pv=eN(),CN=uN(),[XU,cd]=od(zh),[ZU,Hh]=od(zh),TN=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:i,modal:c=!0}=e,l=pv(t),[d,o]=A.useState(null),p=A.useRef(!1),v=gN(i),m=kP(s);return A.useEffect(()=>{const u=()=>{p.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>p.current=!1;return document.addEventListener("keydown",u,{capture:!0}),()=>{document.removeEventListener("keydown",u,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),a.jsx(BB,{...l,children:a.jsx(XU,{scope:t,open:r,onOpenChange:v,content:d,onContentChange:o,children:a.jsx(ZU,{scope:t,onClose:A.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:p,dir:m,modal:c,children:n})})})};TN.displayName=zh;var eV="MenuAnchor",Vx=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=pv(r);return a.jsx(UB,{...s,...n,ref:t})});Vx.displayName=eV;var $x="MenuPortal",[tV,PN]=od($x,{forceMount:void 0}),NN=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,i=cd($x,t);return a.jsx(tV,{scope:t,forceMount:r,children:a.jsx(Wh,{present:r||i.open,children:a.jsx(lN,{asChild:!0,container:s,children:n})})})};NN.displayName=$x;var ga="MenuContent",[rV,Wx]=od(ga),AN=A.forwardRef((e,t)=>{const r=PN(ga,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=cd(ga,e.__scopeMenu),c=Hh(ga,e.__scopeMenu);return a.jsx(wh.Provider,{scope:e.__scopeMenu,children:a.jsx(Wh,{present:n||i.open,children:a.jsx(wh.Slot,{scope:e.__scopeMenu,children:c.modal?a.jsx(nV,{...s,ref:t}):a.jsx(sV,{...s,ref:t})})})})}),nV=A.forwardRef((e,t)=>{const r=cd(ga,e.__scopeMenu),n=A.useRef(null),s=$i(t,n);return A.useEffect(()=>{const i=n.current;if(i)return Ux(i)},[]),a.jsx(zx,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ln(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),sV=A.forwardRef((e,t)=>{const r=cd(ga,e.__scopeMenu);return a.jsx(zx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),zx=A.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:o,onPointerDownOutside:p,onFocusOutside:v,onInteractOutside:m,onDismiss:u,disableOutsideScroll:b,...f}=e,w=cd(ga,r),g=Hh(ga,r),y=pv(r),_=CN(r),x=JU(r),[E,j]=A.useState(null),R=A.useRef(null),C=$i(t,R,w.onContentChange),T=A.useRef(0),h=A.useRef(""),S=A.useRef(0),k=A.useRef(null),P=A.useRef("right"),N=A.useRef(0),O=b?uv:A.Fragment,D=b?{as:wu,allowPinchZoom:!0}:void 0,L=I=>{var ie,We;const G=h.current+I,de=x().filter(Oe=>!Oe.disabled),ee=document.activeElement,Q=(ie=de.find(Oe=>Oe.ref.current===ee))==null?void 0:ie.textValue,ae=de.map(Oe=>Oe.textValue),xe=gV(ae,G,Q),Se=(We=de.find(Oe=>Oe.textValue===xe))==null?void 0:We.ref.current;(function Oe(se){h.current=se,window.clearTimeout(T.current),se!==""&&(T.current=window.setTimeout(()=>Oe(""),1e3))})(G),Se&&setTimeout(()=>Se.focus())};A.useEffect(()=>()=>window.clearTimeout(T.current),[]),CF();const M=A.useCallback(I=>{var de,ee;return P.current===((de=k.current)==null?void 0:de.side)&&yV(I,(ee=k.current)==null?void 0:ee.area)},[]);return a.jsx(rV,{scope:r,searchRef:h,onItemEnter:A.useCallback(I=>{M(I)&&I.preventDefault()},[M]),onItemLeave:A.useCallback(I=>{var G;M(I)||((G=R.current)==null||G.focus(),j(null))},[M]),onTriggerLeave:A.useCallback(I=>{M(I)&&I.preventDefault()},[M]),pointerGraceTimerRef:S,onPointerGraceIntentChange:A.useCallback(I=>{k.current=I},[]),children:a.jsx(O,{...D,children:a.jsx(AP,{asChild:!0,trapped:s,onMountAutoFocus:ln(i,I=>{var G;I.preventDefault(),(G=R.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:a.jsx(PP,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:p,onFocusOutside:v,onInteractOutside:m,onDismiss:u,children:a.jsx(iU,{asChild:!0,..._,dir:g.dir,orientation:"vertical",loop:n,currentTabStopId:E,onCurrentTabStopIdChange:j,onEntryFocus:ln(d,I=>{g.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(VB,{role:"menu","aria-orientation":"vertical","data-state":KN(w.open),"data-radix-menu-content":"",dir:g.dir,...y,...f,ref:C,style:{outline:"none",...f.style},onKeyDown:ln(f.onKeyDown,I=>{const de=I.target.closest("[data-radix-menu-content]")===I.currentTarget,ee=I.ctrlKey||I.altKey||I.metaKey,Q=I.key.length===1;de&&(I.key==="Tab"&&I.preventDefault(),!ee&&Q&&L(I.key));const ae=R.current;if(I.target!==ae||!KU.includes(I.key))return;I.preventDefault();const Se=x().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);RN.includes(I.key)&&Se.reverse(),fV(Se)}),onBlur:ln(e.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(T.current),h.current="")}),onPointerMove:ln(e.onPointerMove,xh(I=>{const G=I.target,de=N.current!==I.clientX;if(I.currentTarget.contains(G)&&de){const ee=I.clientX>N.current?"right":"left";P.current=ee,N.current=I.clientX}}))})})})})})})});AN.displayName=ga;var iV="MenuGroup",Hx=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(Ri.div,{role:"group",...n,ref:t})});Hx.displayName=iV;var aV="MenuLabel",jN=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(Ri.div,{...n,ref:t})});jN.displayName=aV;var yg="MenuItem",V2="menu.itemSelect",hv=A.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,i=A.useRef(null),c=Hh(yg,e.__scopeMenu),l=Wx(yg,e.__scopeMenu),d=$i(t,i),o=A.useRef(!1),p=()=>{const v=i.current;if(!r&&v){const m=new CustomEvent(V2,{bubbles:!0,cancelable:!0});v.addEventListener(V2,u=>n==null?void 0:n(u),{once:!0}),EP(v,m),m.defaultPrevented?o.current=!1:c.onClose()}};return a.jsx(ON,{...s,ref:d,disabled:r,onClick:ln(e.onClick,p),onPointerDown:v=>{var m;(m=e.onPointerDown)==null||m.call(e,v),o.current=!0},onPointerUp:ln(e.onPointerUp,v=>{var m;o.current||(m=v.currentTarget)==null||m.click()}),onKeyDown:ln(e.onKeyDown,v=>{const m=l.searchRef.current!=="";r||m&&v.key===" "||_b.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})})});hv.displayName=yg;var ON=A.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=e,c=Wx(yg,r),l=CN(r),d=A.useRef(null),o=$i(t,d),[p,v]=A.useState(!1),[m,u]=A.useState("");return A.useEffect(()=>{const b=d.current;b&&u((b.textContent??"").trim())},[i.children]),a.jsx(wh.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(aU,{asChild:!0,...l,focusable:!n,children:a.jsx(Ri.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:o,onPointerMove:ln(e.onPointerMove,xh(b=>{n?c.onItemLeave(b):(c.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ln(e.onPointerLeave,xh(b=>c.onItemLeave(b))),onFocus:ln(e.onFocus,()=>v(!0)),onBlur:ln(e.onBlur,()=>v(!1))})})})}),oV="MenuCheckboxItem",DN=A.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return a.jsx(BN,{scope:e.__scopeMenu,checked:r,children:a.jsx(hv,{role:"menuitemcheckbox","aria-checked":bg(r)?"mixed":r,...s,ref:t,"data-state":Kx(r),onSelect:ln(s.onSelect,()=>n==null?void 0:n(bg(r)?!0:!r),{checkForDefaultPrevented:!1})})})});DN.displayName=oV;var IN="MenuRadioGroup",[cV,lV]=od(IN,{value:void 0,onValueChange:()=>{}}),MN=A.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,i=gN(n);return a.jsx(cV,{scope:e.__scopeMenu,value:r,onValueChange:i,children:a.jsx(Hx,{...s,ref:t})})});MN.displayName=IN;var LN="MenuRadioItem",FN=A.forwardRef((e,t)=>{const{value:r,...n}=e,s=lV(LN,e.__scopeMenu),i=r===s.value;return a.jsx(BN,{scope:e.__scopeMenu,checked:i,children:a.jsx(hv,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":Kx(i),onSelect:ln(n.onSelect,()=>{var c;return(c=s.onValueChange)==null?void 0:c.call(s,r)},{checkForDefaultPrevented:!1})})})});FN.displayName=LN;var qx="MenuItemIndicator",[BN,dV]=od(qx,{checked:!1}),UN=A.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,i=dV(qx,r);return a.jsx(Wh,{present:n||bg(i.checked)||i.checked===!0,children:a.jsx(Ri.span,{...s,ref:t,"data-state":Kx(i.checked)})})});UN.displayName=qx;var uV="MenuSeparator",VN=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(Ri.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});VN.displayName=uV;var pV="MenuArrow",$N=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=pv(r);return a.jsx($B,{...s,...n,ref:t})});$N.displayName=pV;var hV="MenuSub",[zK,WN]=od(hV),Pp="MenuSubTrigger",zN=A.forwardRef((e,t)=>{const r=cd(Pp,e.__scopeMenu),n=Hh(Pp,e.__scopeMenu),s=WN(Pp,e.__scopeMenu),i=Wx(Pp,e.__scopeMenu),c=A.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,o={__scopeMenu:e.__scopeMenu},p=A.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return A.useEffect(()=>p,[p]),A.useEffect(()=>{const v=l.current;return()=>{window.clearTimeout(v),d(null)}},[l,d]),a.jsx(Vx,{asChild:!0,...o,children:a.jsx(ON,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":KN(r.open),...e,ref:Kg(t,s.onTriggerChange),onClick:v=>{var m;(m=e.onClick)==null||m.call(e,v),!(e.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ln(e.onPointerMove,xh(v=>{i.onItemEnter(v),!v.defaultPrevented&&!e.disabled&&!r.open&&!c.current&&(i.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:ln(e.onPointerLeave,xh(v=>{var u,b;p();const m=(u=r.content)==null?void 0:u.getBoundingClientRect();if(m){const f=(b=r.content)==null?void 0:b.dataset.side,w=f==="right",g=w?-5:5,y=m[w?"left":"right"],_=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:v.clientX+g,y:v.clientY},{x:y,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:y,y:m.bottom}],side:f}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(v),v.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ln(e.onKeyDown,v=>{var u;const m=i.searchRef.current!=="";e.disabled||m&&v.key===" "||GU[n.dir].includes(v.key)&&(r.onOpenChange(!0),(u=r.content)==null||u.focus(),v.preventDefault())})})})});zN.displayName=Pp;var HN="MenuSubContent",qN=A.forwardRef((e,t)=>{const r=PN(ga,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=cd(ga,e.__scopeMenu),c=Hh(ga,e.__scopeMenu),l=WN(HN,e.__scopeMenu),d=A.useRef(null),o=$i(t,d);return a.jsx(wh.Provider,{scope:e.__scopeMenu,children:a.jsx(Wh,{present:n||i.open,children:a.jsx(wh.Slot,{scope:e.__scopeMenu,children:a.jsx(zx,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:o,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var v;c.isUsingKeyboardRef.current&&((v=d.current)==null||v.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:ln(e.onFocusOutside,p=>{p.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ln(e.onEscapeKeyDown,p=>{c.onClose(),p.preventDefault()}),onKeyDown:ln(e.onKeyDown,p=>{var u;const v=p.currentTarget.contains(p.target),m=YU[c.dir].includes(p.key);v&&m&&(i.onOpenChange(!1),(u=l.trigger)==null||u.focus(),p.preventDefault())})})})})})});qN.displayName=HN;function KN(e){return e?"open":"closed"}function bg(e){return e==="indeterminate"}function Kx(e){return bg(e)?"indeterminate":e?"checked":"unchecked"}function fV(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function mV(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function gV(e,t,r){const s=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let c=mV(e,Math.max(i,0));s.length===1&&(c=c.filter(o=>o!==r));const d=c.find(o=>o.toLowerCase().startsWith(s.toLowerCase()));return d!==r?d:void 0}function vV(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const l=t[i].x,d=t[i].y,o=t[c].x,p=t[c].y;d>n!=p>n&&r<(o-l)*(n-d)/(p-d)+l&&(s=!s)}return s}function yV(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return vV(r,t)}function xh(e){return t=>t.pointerType==="mouse"?e(t):void 0}var bV=TN,wV=Vx,xV=NN,_V=AN,SV=Hx,EV=jN,RV=hv,kV=DN,CV=MN,TV=FN,PV=UN,NV=VN,AV=$N,jV=zN,OV=qN,Gx="DropdownMenu",[DV,HK]=Vh(Gx,[kN]),ki=kN(),[IV,GN]=DV(Gx),YN=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:c,modal:l=!0}=e,d=ki(t),o=A.useRef(null),[p=!1,v]=SP({prop:s,defaultProp:i,onChange:c});return a.jsx(IV,{scope:t,triggerId:gb(),triggerRef:o,contentId:gb(),open:p,onOpenChange:v,onOpenToggle:A.useCallback(()=>v(m=>!m),[v]),modal:l,children:a.jsx(bV,{...d,open:p,onOpenChange:v,dir:n,modal:l,children:r})})};YN.displayName=Gx;var JN="DropdownMenuTrigger",QN=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,i=GN(JN,r),c=ki(r);return a.jsx(wV,{asChild:!0,...c,children:a.jsx(Ri.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Kg(t,i.triggerRef),onPointerDown:ln(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ln(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});QN.displayName=JN;var MV="DropdownMenuPortal",XN=e=>{const{__scopeDropdownMenu:t,...r}=e,n=ki(t);return a.jsx(xV,{...n,...r})};XN.displayName=MV;var ZN="DropdownMenuContent",e4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=GN(ZN,r),i=ki(r),c=A.useRef(!1);return a.jsx(_V,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:t,onCloseAutoFocus:ln(e.onCloseAutoFocus,l=>{var d;c.current||(d=s.triggerRef.current)==null||d.focus(),c.current=!1,l.preventDefault()}),onInteractOutside:ln(e.onInteractOutside,l=>{const d=l.detail.originalEvent,o=d.button===0&&d.ctrlKey===!0,p=d.button===2||o;(!s.modal||p)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e4.displayName=ZN;var LV="DropdownMenuGroup",FV=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(SV,{...s,...n,ref:t})});FV.displayName=LV;var BV="DropdownMenuLabel",t4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(EV,{...s,...n,ref:t})});t4.displayName=BV;var UV="DropdownMenuItem",r4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(RV,{...s,...n,ref:t})});r4.displayName=UV;var VV="DropdownMenuCheckboxItem",n4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(kV,{...s,...n,ref:t})});n4.displayName=VV;var $V="DropdownMenuRadioGroup",WV=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(CV,{...s,...n,ref:t})});WV.displayName=$V;var zV="DropdownMenuRadioItem",s4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(TV,{...s,...n,ref:t})});s4.displayName=zV;var HV="DropdownMenuItemIndicator",i4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(PV,{...s,...n,ref:t})});i4.displayName=HV;var qV="DropdownMenuSeparator",a4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(NV,{...s,...n,ref:t})});a4.displayName=qV;var KV="DropdownMenuArrow",GV=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(AV,{...s,...n,ref:t})});GV.displayName=KV;var YV="DropdownMenuSubTrigger",o4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(jV,{...s,...n,ref:t})});o4.displayName=YV;var JV="DropdownMenuSubContent",c4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(OV,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});c4.displayName=JV;var QV=YN,XV=QN,ZV=XN,l4=e4,d4=t4,u4=r4,p4=n4,h4=s4,f4=i4,m4=a4,g4=o4,v4=c4;const e$=QV,t$=XV,r$=A.forwardRef(({className:e,inset:t,children:r,...n},s)=>a.jsxs(g4,{ref:s,className:Vr("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,a.jsx(u3,{className:"ml-auto h-4 w-4"})]}));r$.displayName=g4.displayName;const n$=A.forwardRef(({className:e,...t},r)=>a.jsx(v4,{ref:r,className:Vr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));n$.displayName=v4.displayName;const y4=A.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(ZV,{children:a.jsx(l4,{ref:n,sideOffset:t,className:Vr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));y4.displayName=l4.displayName;const Sb=A.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(u4,{ref:n,className:Vr("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Sb.displayName=u4.displayName;const s$=A.forwardRef(({className:e,children:t,checked:r,...n},s)=>a.jsxs(p4,{ref:s,className:Vr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(f4,{children:a.jsx(Bw,{className:"h-4 w-4"})})}),t]}));s$.displayName=p4.displayName;const i$=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(h4,{ref:n,className:Vr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(f4,{children:a.jsx(p3,{className:"h-2 w-2 fill-current"})})}),t]}));i$.displayName=h4.displayName;const a$=A.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(d4,{ref:n,className:Vr("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));a$.displayName=d4.displayName;const Eb=A.forwardRef(({className:e,...t},r)=>a.jsx(m4,{ref:r,className:Vr("-mx-1 my-1 h-px bg-muted",e),...t}));Eb.displayName=m4.displayName;function Ic(){var l,d;const e=Bs(o=>o.user),t=Bs(o=>o.logout),r=ao(),[n,s]=A.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");A.useEffect(()=>{n==="dark"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[n]);const i=()=>{s(o=>o==="dark"?"light":"dark")},c=async()=>{t(),localStorage.removeItem("auth-storage"),r("/")};return a.jsx("nav",{className:"fixed top-0 w-full bg-white/70 dark:bg-zinc-900/40 backdrop-blur-md border-b border-slate-200/60 dark:border-zinc-700/60 z-50",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs(Es,{to:e?e.role==="DOCTOR"?"/dashboard/doctor":"/dashboard/patient":"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:a.jsx(Dh,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CareXpert"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tr,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:i,className:"rounded-full",children:n==="dark"?a.jsx(x3,{className:"h-5 w-5 text-yellow-400"}):a.jsx(y3,{className:"h-5 w-5 text-gray-700"})}),e?a.jsxs(e$,{children:[a.jsx(t$,{asChild:!0,children:a.jsxs(tr,{variant:"ghost",className:"flex items-center space-x-2 p-2",children:[a.jsxs(ds,{className:"h-8 w-8",children:[a.jsx(bs,{src:e.profilePicture}),a.jsx(us,{className:"bg-blue-600 text-white text-sm",children:((l=e.name)==null?void 0:l.charAt(0))||"U"})]}),a.jsxs("div",{className:"hidden sm:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.role||"Patient"})]})]})}),a.jsxs(y4,{align:"end",className:"w-56",children:[a.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[a.jsxs(ds,{className:"h-8 w-8",children:[a.jsx(bs,{src:e.profilePicture}),a.jsx(us,{className:"bg-blue-600 text-white text-sm",children:((d=e.name)==null?void 0:d.charAt(0))||"U"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name||"User"}),a.jsx("p",{className:"text-xs text-gray-500",children:e.email})]})]}),a.jsx(Eb,{}),a.jsx(Sb,{asChild:!0,children:a.jsxs(Es,{to:"/profile",className:"flex items-center",children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Profile"]})}),a.jsx(Eb,{}),a.jsxs(Sb,{onClick:c,className:"text-red-600 focus:text-red-600",children:[a.jsx(g3,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Es,{to:"/auth/login",children:a.jsx(tr,{variant:"ghost",size:"sm",children:"Login"})}),a.jsx(Es,{to:"/auth/patient/signup",children:a.jsx(tr,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Sign Up"})})]})]})]})})})}function Hs(){const[e,t]=A.useState(!1),r=Bs(n=>n.user);return a.jsxs("div",{className:"h-screen bg-slate-50 dark:bg-zinc-900 flex flex-col overflow-hidden",children:[a.jsx(Ic,{}),a.jsx(dP,{isOpen:e,onToggle:()=>t(!e)}),a.jsxs("div",{className:"flex-1 flex pt-16 md:ml-64 overflow-hidden",children:[r&&a.jsx("div",{className:"md:hidden fixed top-16 left-4 z-30",children:a.jsx(tr,{variant:"ghost",size:"sm",onClick:()=>t(!0),className:"bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm border border-slate-200/60 dark:border-zinc-700/60 shadow-md rounded-xl",children:a.jsx(Ww,{className:"h-5 w-5"})})}),a.jsx("main",{className:"flex-1 overflow-y-auto scrollbar-hide",children:a.jsx(fm,{})})]})]})}const Nt=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Vr("rounded-2xl border border-slate-200/60 dark:border-zinc-700/60 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm text-card-foreground shadow-lg",e),...t}));Nt.displayName="Card";const En=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Vr("flex flex-col space-y-1.5 p-6",e),...t}));En.displayName="CardHeader";const xn=A.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:Vr("font-semibold leading-none tracking-tight",e),...t}));xn.displayName="CardTitle";const Vn=A.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:Vr("text-sm text-muted-foreground",e),...t}));Vn.displayName="CardDescription";const jt=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Vr("p-6 pt-0",e),...t}));jt.displayName="CardContent";const o$=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Vr("flex items-center p-6 pt-0",e),...t}));o$.displayName="CardFooter";function Kl(){return a.jsx("footer",{className:"bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Es,{to:"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Uc,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"careXpert"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Modern healthcare platform connecting patients with doctors."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(Es,{to:"/doctors",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Find Doctors"})}),a.jsx("li",{children:a.jsx(Es,{to:"/about",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"About Us"})}),a.jsx("li",{children:a.jsx(Es,{to:"/chat",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Chat"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Services"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(Es,{to:"/auth/patient/signup",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Patient Portal"})}),a.jsx("li",{children:a.jsx(Es,{to:"/auth/doctor/signup",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Doctor Portal"})}),a.jsx("li",{children:a.jsx(Es,{to:"/chat",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"AI Consultation"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Email: support@carexpert.com"}),a.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Phone: +1 (555) 123-4567"}),a.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Address: 123 Healthcare St, Medical City"})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[" ",new Date().getFullYear()," careXpert. All rights reserved."]})})]})})}var c$=e=>{switch(e){case"success":return u$;case"info":return h$;case"warning":return p$;case"error":return f$;default:return null}},l$=Array(12).fill(0),d$=({visible:e,className:t})=>pt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},pt.createElement("div",{className:"sonner-spinner"},l$.map((r,n)=>pt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),u$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),p$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),h$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),f$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),m$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),g$=()=>{let[e,t]=pt.useState(document.hidden);return pt.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Rb=1,v$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Rb++,i=this.toasts.find(l=>l.id===s),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:c,title:r}):l):this.addToast({title:r,...n,dismissible:c,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,i,c=n.then(async d=>{if(i=["resolve",d],pt.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(b$(d)&&!d.ok){s=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,p=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:r,type:"error",message:o,description:p})}else if(t.success!==void 0){s=!1;let o=typeof t.success=="function"?await t.success(d):t.success,p=typeof t.description=="function"?await t.description(d):t.description;this.create({id:r,type:"success",message:o,description:p})}}).catch(async d=>{if(i=["reject",d],t.error!==void 0){s=!1;let o=typeof t.error=="function"?await t.error(d):t.error,p=typeof t.description=="function"?await t.description(d):t.description;this.create({id:r,type:"error",message:o,description:p})}}).finally(()=>{var d;s&&(this.dismiss(r),r=void 0),(d=t.finally)==null||d.call(t)}),l=()=>new Promise((d,o)=>c.then(()=>i[0]==="reject"?o(i[1]):d(i[1])).catch(o));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Rb++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Oi=new v$,y$=(e,t)=>{let r=(t==null?void 0:t.id)||Rb++;return Oi.addToast({title:e,...t,id:r}),r},b$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",w$=y$,x$=()=>Oi.toasts,_$=()=>Oi.getActiveToasts(),$t=Object.assign(w$,{success:Oi.success,info:Oi.info,warning:Oi.warning,error:Oi.error,custom:Oi.custom,message:Oi.message,promise:Oi.promise,dismiss:Oi.dismiss,loading:Oi.loading},{getHistory:x$,getToasts:_$});function S$(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}S$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Qf(e){return e.label!==void 0}var E$=3,R$="32px",k$="16px",$2=4e3,C$=356,T$=14,P$=20,N$=200;function _a(...e){return e.filter(Boolean).join(" ")}function A$(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var j$=e=>{var t,r,n,s,i,c,l,d,o,p,v;let{invert:m,toast:u,unstyled:b,interacting:f,setHeights:w,visibleToasts:g,heights:y,index:_,toasts:x,expanded:E,removeToast:j,defaultRichColors:R,closeButton:C,style:T,cancelButtonStyle:h,actionButtonStyle:S,className:k="",descriptionClassName:P="",duration:N,position:O,gap:D,loadingIcon:L,expandByDefault:M,classNames:I,icons:G,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ee}=e,[Q,ae]=pt.useState(null),[xe,Se]=pt.useState(null),[ie,We]=pt.useState(!1),[Oe,se]=pt.useState(!1),[ue,Ce]=pt.useState(!1),[$e,Wt]=pt.useState(!1),[er,wt]=pt.useState(!1),[Er,yr]=pt.useState(0),[Ot,nn]=pt.useState(0),Dt=pt.useRef(u.duration||N||$2),Xt=pt.useRef(null),Gr=pt.useRef(null),dn=_===0,Mr=_+1<=g,Yr=u.type,un=u.dismissible!==!1,Mt=u.className||"",pn=u.descriptionClassName||"",sn=pt.useMemo(()=>y.findIndex(Me=>Me.toastId===u.id)||0,[y,u.id]),zr=pt.useMemo(()=>{var Me;return(Me=u.closeButton)!=null?Me:C},[u.closeButton,C]),Lr=pt.useMemo(()=>u.duration||N||$2,[u.duration,N]),_n=pt.useRef(0),Xr=pt.useRef(0),Pn=pt.useRef(0),Sn=pt.useRef(null),[In,Nn]=O.split("-"),zt=pt.useMemo(()=>y.reduce((Me,ot,Le)=>Le>=sn?Me:Me+ot.height,0),[y,sn]),Mn=g$(),ns=u.invert||m,hn=Yr==="loading";Xr.current=pt.useMemo(()=>sn*D+zt,[sn,zt]),pt.useEffect(()=>{Dt.current=Lr},[Lr]),pt.useEffect(()=>{We(!0)},[]),pt.useEffect(()=>{let Me=Gr.current;if(Me){let ot=Me.getBoundingClientRect().height;return nn(ot),w(Le=>[{toastId:u.id,height:ot,position:u.position},...Le]),()=>w(Le=>Le.filter(lt=>lt.toastId!==u.id))}},[w,u.id]),pt.useLayoutEffect(()=>{if(!ie)return;let Me=Gr.current,ot=Me.style.height;Me.style.height="auto";let Le=Me.getBoundingClientRect().height;Me.style.height=ot,nn(Le),w(lt=>lt.find(cr=>cr.toastId===u.id)?lt.map(cr=>cr.toastId===u.id?{...cr,height:Le}:cr):[{toastId:u.id,height:Le,position:u.position},...lt])},[ie,u.title,u.description,w,u.id]);let or=pt.useCallback(()=>{se(!0),yr(Xr.current),w(Me=>Me.filter(ot=>ot.toastId!==u.id)),setTimeout(()=>{j(u)},N$)},[u,j,w,Xr]);pt.useEffect(()=>{if(u.promise&&Yr==="loading"||u.duration===1/0||u.type==="loading")return;let Me;return E||f||ee&&Mn?(()=>{if(Pn.current<_n.current){let ot=new Date().getTime()-_n.current;Dt.current=Dt.current-ot}Pn.current=new Date().getTime()})():Dt.current!==1/0&&(_n.current=new Date().getTime(),Me=setTimeout(()=>{var ot;(ot=u.onAutoClose)==null||ot.call(u,u),or()},Dt.current)),()=>clearTimeout(Me)},[E,f,u,Yr,ee,Mn,or]),pt.useEffect(()=>{u.delete&&or()},[or,u.delete]);function Ye(){var Me,ot,Le;return G!=null&&G.loading?pt.createElement("div",{className:_a(I==null?void 0:I.loader,(Me=u==null?void 0:u.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":Yr==="loading"},G.loading):L?pt.createElement("div",{className:_a(I==null?void 0:I.loader,(ot=u==null?void 0:u.classNames)==null?void 0:ot.loader,"sonner-loader"),"data-visible":Yr==="loading"},L):pt.createElement(d$,{className:_a(I==null?void 0:I.loader,(Le=u==null?void 0:u.classNames)==null?void 0:Le.loader),visible:Yr==="loading"})}return pt.createElement("li",{tabIndex:0,ref:Gr,className:_a(k,Mt,I==null?void 0:I.toast,(t=u==null?void 0:u.classNames)==null?void 0:t.toast,I==null?void 0:I.default,I==null?void 0:I[Yr],(r=u==null?void 0:u.classNames)==null?void 0:r[Yr]),"data-sonner-toast":"","data-rich-colors":(n=u.richColors)!=null?n:R,"data-styled":!(u.jsx||u.unstyled||b),"data-mounted":ie,"data-promise":!!u.promise,"data-swiped":er,"data-removed":Oe,"data-visible":Mr,"data-y-position":In,"data-x-position":Nn,"data-index":_,"data-front":dn,"data-swiping":ue,"data-dismissible":un,"data-type":Yr,"data-invert":ns,"data-swipe-out":$e,"data-swipe-direction":xe,"data-expanded":!!(E||M&&ie),style:{"--index":_,"--toasts-before":_,"--z-index":x.length-_,"--offset":`${Oe?Er:Xr.current}px`,"--initial-height":M?"auto":`${Ot}px`,...T,...u.style},onDragEnd:()=>{Ce(!1),ae(null),Sn.current=null},onPointerDown:Me=>{hn||!un||(Xt.current=new Date,yr(Xr.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Ce(!0),Sn.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,ot,Le,lt;if($e||!un)return;Sn.current=null;let cr=Number(((Me=Gr.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),De=Number(((ot=Gr.current)==null?void 0:ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Zt=new Date().getTime()-((Le=Xt.current)==null?void 0:Le.getTime()),Vt=Q==="x"?cr:De,br=Math.abs(Vt)/Zt;if(Math.abs(Vt)>=P$||br>.11){yr(Xr.current),(lt=u.onDismiss)==null||lt.call(u,u),Se(Q==="x"?cr>0?"right":"left":De>0?"down":"up"),or(),Wt(!0),wt(!1);return}Ce(!1),ae(null)},onPointerMove:Me=>{var ot,Le,lt,cr;if(!Sn.current||!un||((ot=window.getSelection())==null?void 0:ot.toString().length)>0)return;let De=Me.clientY-Sn.current.y,Zt=Me.clientX-Sn.current.x,Vt=(Le=e.swipeDirections)!=null?Le:A$(O);!Q&&(Math.abs(Zt)>1||Math.abs(De)>1)&&ae(Math.abs(Zt)>Math.abs(De)?"x":"y");let br={x:0,y:0};Q==="y"?(Vt.includes("top")||Vt.includes("bottom"))&&(Vt.includes("top")&&De<0||Vt.includes("bottom")&&De>0)&&(br.y=De):Q==="x"&&(Vt.includes("left")||Vt.includes("right"))&&(Vt.includes("left")&&Zt<0||Vt.includes("right")&&Zt>0)&&(br.x=Zt),(Math.abs(br.x)>0||Math.abs(br.y)>0)&&wt(!0),(lt=Gr.current)==null||lt.style.setProperty("--swipe-amount-x",`${br.x}px`),(cr=Gr.current)==null||cr.style.setProperty("--swipe-amount-y",`${br.y}px`)}},zr&&!u.jsx?pt.createElement("button",{"aria-label":de,"data-disabled":hn,"data-close-button":!0,onClick:hn||!un?()=>{}:()=>{var Me;or(),(Me=u.onDismiss)==null||Me.call(u,u)},className:_a(I==null?void 0:I.closeButton,(s=u==null?void 0:u.classNames)==null?void 0:s.closeButton)},(i=G==null?void 0:G.close)!=null?i:m$):null,u.jsx||A.isValidElement(u.title)?u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title:pt.createElement(pt.Fragment,null,Yr||u.icon||u.promise?pt.createElement("div",{"data-icon":"",className:_a(I==null?void 0:I.icon,(c=u==null?void 0:u.classNames)==null?void 0:c.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||Ye():null,u.type!=="loading"?u.icon||(G==null?void 0:G[Yr])||c$(Yr):null):null,pt.createElement("div",{"data-content":"",className:_a(I==null?void 0:I.content,(l=u==null?void 0:u.classNames)==null?void 0:l.content)},pt.createElement("div",{"data-title":"",className:_a(I==null?void 0:I.title,(d=u==null?void 0:u.classNames)==null?void 0:d.title)},typeof u.title=="function"?u.title():u.title),u.description?pt.createElement("div",{"data-description":"",className:_a(P,pn,I==null?void 0:I.description,(o=u==null?void 0:u.classNames)==null?void 0:o.description)},typeof u.description=="function"?u.description():u.description):null),A.isValidElement(u.cancel)?u.cancel:u.cancel&&Qf(u.cancel)?pt.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||h,onClick:Me=>{var ot,Le;Qf(u.cancel)&&un&&((Le=(ot=u.cancel).onClick)==null||Le.call(ot,Me),or())},className:_a(I==null?void 0:I.cancelButton,(p=u==null?void 0:u.classNames)==null?void 0:p.cancelButton)},u.cancel.label):null,A.isValidElement(u.action)?u.action:u.action&&Qf(u.action)?pt.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||S,onClick:Me=>{var ot,Le;Qf(u.action)&&((Le=(ot=u.action).onClick)==null||Le.call(ot,Me),!Me.defaultPrevented&&or())},className:_a(I==null?void 0:I.actionButton,(v=u==null?void 0:u.classNames)==null?void 0:v.actionButton)},u.action.label):null))};function W2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function O$(e,t){let r={};return[e,t].forEach((n,s)=>{let i=s===1,c=i?"--mobile-offset":"--offset",l=i?k$:R$;function d(o){["top","right","bottom","left"].forEach(p=>{r[`${c}-${p}`]=typeof o=="number"?`${o}px`:o})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(o=>{n[o]===void 0?r[`${c}-${o}`]=l:r[`${c}-${o}`]=typeof n[o]=="number"?`${n[o]}px`:n[o]}):d(l)}),r}var D$=A.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:c,className:l,offset:d,mobileOffset:o,theme:p="light",richColors:v,duration:m,style:u,visibleToasts:b=E$,toastOptions:f,dir:w=W2(),gap:g=T$,loadingIcon:y,icons:_,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:E}=e,[j,R]=pt.useState([]),C=pt.useMemo(()=>Array.from(new Set([n].concat(j.filter(ee=>ee.position).map(ee=>ee.position)))),[j,n]),[T,h]=pt.useState([]),[S,k]=pt.useState(!1),[P,N]=pt.useState(!1),[O,D]=pt.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=pt.useRef(null),M=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=pt.useRef(null),G=pt.useRef(!1),de=pt.useCallback(ee=>{R(Q=>{var ae;return(ae=Q.find(xe=>xe.id===ee.id))!=null&&ae.delete||Oi.dismiss(ee.id),Q.filter(({id:xe})=>xe!==ee.id)})},[]);return pt.useEffect(()=>Oi.subscribe(ee=>{if(ee.dismiss){R(Q=>Q.map(ae=>ae.id===ee.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{Wg.flushSync(()=>{R(Q=>{let ae=Q.findIndex(xe=>xe.id===ee.id);return ae!==-1?[...Q.slice(0,ae),{...Q[ae],...ee},...Q.slice(ae+1)]:[ee,...Q]})})})}),[]),pt.useEffect(()=>{if(p!=="system"){D(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:Q})=>{D(Q?"dark":"light")})}catch{ee.addListener(({matches:ae})=>{try{D(ae?"dark":"light")}catch(xe){console.error(xe)}})}},[p]),pt.useEffect(()=>{j.length<=1&&k(!1)},[j]),pt.useEffect(()=>{let ee=Q=>{var ae,xe;s.every(Se=>Q[Se]||Q.code===Se)&&(k(!0),(ae=L.current)==null||ae.focus()),Q.code==="Escape"&&(document.activeElement===L.current||(xe=L.current)!=null&&xe.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[s]),pt.useEffect(()=>{if(L.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,G.current=!1)}},[L.current]),pt.createElement("section",{ref:t,"aria-label":`${x} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((ee,Q)=>{var ae;let[xe,Se]=ee.split("-");return j.length?pt.createElement("ol",{key:ee,dir:w==="auto"?W2():w,tabIndex:-1,ref:L,className:l,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":xe,"data-lifted":S&&j.length>1&&!i,"data-x-position":Se,style:{"--front-toast-height":`${((ae=T[0])==null?void 0:ae.height)||0}px`,"--width":`${C$}px`,"--gap":`${g}px`,...u,...O$(d,o)},onBlur:ie=>{G.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(G.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||G.current||(G.current=!0,I.current=ie.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{P||k(!1)},onDragEnd:()=>k(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},j.filter(ie=>!ie.position&&Q===0||ie.position===ee).map((ie,We)=>{var Oe,se;return pt.createElement(j$,{key:ie.id,icons:_,index:We,toast:ie,defaultRichColors:v,duration:(Oe=f==null?void 0:f.duration)!=null?Oe:m,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:r,visibleToasts:b,closeButton:(se=f==null?void 0:f.closeButton)!=null?se:c,interacting:P,position:ee,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:de,toasts:j.filter(ue=>ue.position==ie.position),heights:T.filter(ue=>ue.position==ie.position),setHeights:h,expandByDefault:i,gap:g,loadingIcon:y,expanded:S,pauseWhenPageIsHidden:E,swipeDirections:e.swipeDirections})})):null}))});function I$(){const[e,t]=A.useState(""),[r,n]=A.useState([{type:"ai",content:"Hello! I'm your AI health assistant. How can I help you today?"}]),s=c=>{c.preventDefault(),e.trim()&&(n(l=>[...l,{type:"user",content:e}]),setTimeout(()=>{n(l=>[...l,{type:"ai",content:"I'm a demo AI assistant. In the full version, I'll be able to help you with health-related questions!"}])},1e3),t(""))},i=async()=>{try{n([{type:"ai",content:"Chat cleared. How can I assist you now?"}]),await Ft.delete("undefined/api/ai-chat/history",{withCredentials:!0}),$t.success("Chat history cleared")}catch{$t.error("Failed to clear chat")}};return a.jsxs("div",{className:"flex flex-col h-[400px]",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"AI Assistant"}),a.jsxs(tr,{variant:"outline",size:"sm",onClick:i,children:[a.jsx(iC,{className:"h-4 w-4 mr-2"}),"Clear chat"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.map((c,l)=>a.jsx("div",{className:`flex ${c.type==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${c.type==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"}`,children:c.content})},l))}),a.jsx("form",{onSubmit:s,className:"p-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:e,onChange:c=>t(c.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx(tr,{type:"submit",size:"icon",children:a.jsx(nC,{className:"h-4 w-4"})})]})})]})}function M$(){const[e,t]=A.useState(!0);return e?a.jsx("div",{}):null}function L$(){return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[a.jsx(Ic,{}),a.jsxs("section",{className:"container mx-auto px-4 pt-20 pb-16",children:[a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Your Health, Our",a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ","Priority"]})]}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Connect with certified doctors, get AI-powered consultations, and manage your health journey with careXpert - the modern healthcare platform."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx(Es,{to:"/auth/patient/signup",children:a.jsxs(tr,{size:"lg",className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl",children:[a.jsx(Uc,{className:"mr-2 h-5 w-5"}),"Book Appointment"]})}),a.jsx(Es,{to:"/auth/doctor/signup",children:a.jsx(tr,{size:"lg",variant:"secondary",className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-xl",children:"Join as Doctor"})})]})]}),a.jsx("div",{children:a.jsxs(Nt,{className:"border-0 shadow-2xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:[a.jsxs(En,{className:"text-center pb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx(Uc,{className:"h-6 w-6 text-white"})}),a.jsx(xn,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Try CareXpert AI"}),a.jsx(Vn,{className:"text-gray-600 dark:text-gray-300",children:"Get instant health guidance from our AI assistant"})]}),a.jsx(jt,{children:a.jsx(I$,{})})]})})]}),a.jsx(M$,{})]}),a.jsxs("section",{className:"container mx-auto px-4 py-16",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Why Choose careXpert?"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Experience healthcare like never before with our cutting-edge platform designed for modern patients and doctors."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Nt,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(Pa,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Expert Doctors"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Connect with certified healthcare professionals"})]})}),a.jsx(Nt,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(Fs,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"24/7 Available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Round-the-clock healthcare support"})]})}),a.jsx(Nt,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-purple-100 dark:bg-purple-900/30 backdrop-blur-sm",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(zw,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Secure & Private"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your health data is protected and encrypted"})]})}),a.jsx(Nt,{className:"p-6 text-center hover:shadow-lg transition-shadow duration-300 border-0 bg-orange-100 dark:bg-orange-900/30 backdrop-blur-sm",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(Hw,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"AI Powered"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Smart consultations with AI assistance"})]})})]})]}),a.jsx(Kl,{})]})}function F$(){const e=[{icon:Pa,label:"Active Users",value:"10,000+"},{icon:Uc,label:"Doctors",value:"500+"},{icon:Fs,label:"Consultations",value:"50,000+"},{icon:m3,label:"Cities",value:"25+"}],t=[{icon:Uc,title:"Expert Healthcare",description:"Connect with certified doctors and healthcare professionals"},{icon:zw,title:"Secure & Private",description:"Your health data is protected with enterprise-grade security"},{icon:Fs,title:"24/7 Available",description:"Access healthcare support anytime, anywhere"},{icon:c3,title:"Quality Assured",description:"All doctors are verified and maintain high standards"}],r=[{name:"Dr. Sarah Mitchell",role:"Chief Medical Officer",image:"/placeholder.svg",bio:"15+ years in digital healthcare innovation"},{name:"John Anderson",role:"CEO & Founder",image:"/placeholder.svg",bio:"Healthcare technology entrepreneur"},{name:"Dr. Michael Rodriguez",role:"Head of AI Development",image:"/placeholder.svg",bio:"AI researcher specializing in medical applications"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Ic,{}),a.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h1",{className:"text-5xl font-bold text-gray-900 dark:text-white mb-6",children:"About careXpert"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"We're revolutionizing healthcare by making quality medical care accessible to everyone, anywhere, anytime through cutting-edge technology and compassionate care."})]}),a.jsx("div",{className:"grid md:grid-cols-4 gap-6 mb-16",children:e.map((n,s)=>a.jsx(Nt,{className:"text-center p-6",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(n.icon,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n.value}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.label})]})},s))}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-16",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Our Mission"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:"At careXpert, we believe that quality healthcare should be accessible to everyone. Our platform bridges the gap between patients and healthcare providers through innovative technology, making medical consultations more convenient, affordable, and effective."}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"We combine the expertise of certified medical professionals with the power of AI to provide comprehensive healthcare solutions that adapt to your needs."})]}),a.jsx("div",{className:"relative",children:a.jsx("img",{src:"/image.png",alt:"Healthcare team",className:"rounded-2xl shadow-xl"})})]}),a.jsxs("div",{className:"mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Why Choose careXpert?"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,s)=>a.jsx(Nt,{className:"text-center p-6 hover:shadow-lg transition-shadow",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx(n.icon,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:n.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.description})]})},s))})]}),a.jsxs("div",{className:"mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Meet Our Team"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map((n,s)=>a.jsx(Nt,{className:"text-center p-6",children:a.jsxs(jt,{className:"p-0",children:[a.jsx("img",{src:n.image||"/placeholder.svg",alt:n.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:n.name}),a.jsx(Ur,{className:"mb-3",children:n.role}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.bio})]})},s))})]}),a.jsx(Nt,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:a.jsxs(jt,{className:"p-12 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Our Values"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Compassion"}),a.jsx("p",{className:"opacity-90",children:"We put patients first and treat everyone with empathy and respect"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Innovation"}),a.jsx("p",{className:"opacity-90",children:"We continuously improve our platform with cutting-edge technology"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Trust"}),a.jsx("p",{className:"opacity-90",children:"We maintain the highest standards of security and privacy"})]})]})]})})]}),a.jsx(Kl,{})]})}const cs=A.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:Vr("flex h-10 w-full rounded-xl border border-slate-200/60 dark:border-zinc-700/60 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-sm px-3 py-2 text-sm shadow-sm transition-colors placeholder:text-slate-400 dark:placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/30 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));cs.displayName="Input";function z2(e,[t,r]){return Math.min(r,Math.max(t,e))}function js(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Yx(e,t=[]){let r=[];function n(i,c){const l=A.createContext(c),d=r.length;r=[...r,c];const o=v=>{var g;const{scope:m,children:u,...b}=v,f=((g=m==null?void 0:m[e])==null?void 0:g[d])||l,w=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:w,children:u})};o.displayName=i+"Provider";function p(v,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[d])||l,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(l){const d=(l==null?void 0:l[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,B$(s,...t)]}function B$(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((l,{useScope:d,scopeName:o})=>{const v=d(i)[`__scope${o}`];return{...l,...v}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function H2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function b4(...e){return t=>{let r=!1;const n=e.map(s=>{const i=H2(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():H2(e[s],null)}}}}function si(...e){return A.useCallback(b4(...e),e)}function wg(e){const t=U$(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,l=A.Children.toArray(i),d=l.find($$);if(d){const o=d.props.children,p=l.map(v=>v===d?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:v);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function U$(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=z$(s),l=W$(i,s.props);return s.type!==A.Fragment&&(l.ref=n?b4(n,c):c),A.cloneElement(s,l)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var V$=Symbol("radix.slottable");function $$(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===V$}function W$(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function z$(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function H$(e){const t=e+"CollectionProvider",[r,n]=Yx(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=f=>{const{scope:w,children:g}=f,y=pt.useRef(null),_=pt.useRef(new Map).current;return a.jsx(s,{scope:w,itemMap:_,collectionRef:y,children:g})};c.displayName=t;const l=e+"CollectionSlot",d=wg(l),o=pt.forwardRef((f,w)=>{const{scope:g,children:y}=f,_=i(l,g),x=si(w,_.collectionRef);return a.jsx(d,{ref:x,children:y})});o.displayName=l;const p=e+"CollectionItemSlot",v="data-radix-collection-item",m=wg(p),u=pt.forwardRef((f,w)=>{const{scope:g,children:y,..._}=f,x=pt.useRef(null),E=si(w,x),j=i(p,g);return pt.useEffect(()=>(j.itemMap.set(x,{ref:x,..._}),()=>void j.itemMap.delete(x))),a.jsx(m,{[v]:"",ref:E,children:y})});u.displayName=p;function b(f){const w=i(e+"CollectionConsumer",f);return pt.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const _=Array.from(y.querySelectorAll(`[${v}]`));return Array.from(w.itemMap.values()).sort((j,R)=>_.indexOf(j.ref.current)-_.indexOf(R.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:c,Slot:o,ItemSlot:u},b,n]}var q$=A.createContext(void 0);function K$(e){const t=A.useContext(q$);return e||t||"ltr"}var G$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ks=G$.reduce((e,t)=>{const r=wg(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...l}=s,d=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Y$(e,t){e&&Jc.flushSync(()=>e.dispatchEvent(t))}function J$(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e);A.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Q$="DismissableLayer",kb="dismissableLayer.update",X$="dismissableLayer.pointerDownOutside",Z$="dismissableLayer.focusOutside",q2,w4=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x4=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:l,...d}=e,o=A.useContext(w4),[p,v]=A.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=A.useState({}),b=si(t,R=>v(R)),f=Array.from(o.layers),[w]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(w),y=p?f.indexOf(p):-1,_=o.layersWithOutsidePointerEventsDisabled.size>0,x=y>=g,E=rW(R=>{const C=R.target,T=[...o.branches].some(h=>h.contains(C));!x||T||(s==null||s(R),c==null||c(R),R.defaultPrevented||l==null||l())},m),j=nW(R=>{const C=R.target;[...o.branches].some(h=>h.contains(C))||(i==null||i(R),c==null||c(R),R.defaultPrevented||l==null||l())},m);return J$(R=>{y===o.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),A.useEffect(()=>{if(p)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(q2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(p)),o.layers.add(p),K2(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=q2)}},[p,m,r,o]),A.useEffect(()=>()=>{p&&(o.layers.delete(p),o.layersWithOutsidePointerEventsDisabled.delete(p),K2())},[p,o]),A.useEffect(()=>{const R=()=>u({});return document.addEventListener(kb,R),()=>document.removeEventListener(kb,R)},[]),a.jsx(ks.div,{...d,ref:b,style:{pointerEvents:_?x?"auto":"none":void 0,...e.style},onFocusCapture:js(e.onFocusCapture,j.onFocusCapture),onBlurCapture:js(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:js(e.onPointerDownCapture,E.onPointerDownCapture)})});x4.displayName=Q$;var eW="DismissableLayerBranch",tW=A.forwardRef((e,t)=>{const r=A.useContext(w4),n=A.useRef(null),s=si(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(ks.div,{...e,ref:s})});tW.displayName=eW;function rW(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){_4(X$,r,o,{discrete:!0})};const o={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function nW(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!n.current&&_4(Z$,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function K2(){const e=new CustomEvent(kb);document.dispatchEvent(e)}function _4(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Y$(s,i):s.dispatchEvent(i)}var C0=0;function sW(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??G2()),document.body.insertAdjacentElement("beforeend",e[1]??G2()),C0++,()=>{C0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),C0--}},[])}function G2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var T0="focusScope.autoFocusOnMount",P0="focusScope.autoFocusOnUnmount",Y2={bubbles:!1,cancelable:!0},iW="FocusScope",S4=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=e,[l,d]=A.useState(null),o=Wi(s),p=Wi(i),v=A.useRef(null),m=si(t,f=>d(f)),u=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let f=function(_){if(u.paused||!l)return;const x=_.target;l.contains(x)?v.current=x:vc(v.current,{select:!0})},w=function(_){if(u.paused||!l)return;const x=_.relatedTarget;x!==null&&(l.contains(x)||vc(v.current,{select:!0}))},g=function(_){if(document.activeElement===document.body)for(const E of _)E.removedNodes.length>0&&vc(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",w);const y=new MutationObserver(g);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,u.paused]),A.useEffect(()=>{if(l){Q2.add(u);const f=document.activeElement;if(!l.contains(f)){const g=new CustomEvent(T0,Y2);l.addEventListener(T0,o),l.dispatchEvent(g),g.defaultPrevented||(aW(uW(E4(l)),{select:!0}),document.activeElement===f&&vc(l))}return()=>{l.removeEventListener(T0,o),setTimeout(()=>{const g=new CustomEvent(P0,Y2);l.addEventListener(P0,p),l.dispatchEvent(g),g.defaultPrevented||vc(f??document.body,{select:!0}),l.removeEventListener(P0,p),Q2.remove(u)},0)}}},[l,o,p,u]);const b=A.useCallback(f=>{if(!r&&!n||u.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(w&&g){const y=f.currentTarget,[_,x]=oW(y);_&&x?!f.shiftKey&&g===x?(f.preventDefault(),r&&vc(_,{select:!0})):f.shiftKey&&g===_&&(f.preventDefault(),r&&vc(x,{select:!0})):g===y&&f.preventDefault()}},[r,n,u.paused]);return a.jsx(ks.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});S4.displayName=iW;function aW(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(vc(n,{select:t}),document.activeElement!==r)return}function oW(e){const t=E4(e),r=J2(t,e),n=J2(t.reverse(),e);return[r,n]}function E4(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function J2(e,t){for(const r of e)if(!cW(r,{upTo:t}))return r}function cW(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lW(e){return e instanceof HTMLInputElement&&"select"in e}function vc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&lW(e)&&t&&e.select()}}var Q2=dW();function dW(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=X2(e,t),e.unshift(t)},remove(t){var r;e=X2(e,t),(r=e[0])==null||r.resume()}}}function X2(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function uW(e){return e.filter(t=>t.tagName!=="A")}var pW=qc[" useId ".trim().toString()]||(()=>{}),hW=0;function Jx(e){const[t,r]=A.useState(pW());return Wn(()=>{r(n=>n??String(hW++))},[e]),t?`radix-${t}`:""}var fW="Arrow",R4=A.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(ks.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});R4.displayName=fW;var mW=R4;function gW(e){const[t,r]=A.useState(void 0);return Wn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let c,l;if("borderBoxSize"in i){const d=i.borderBoxSize,o=Array.isArray(d)?d[0]:d;c=o.inlineSize,l=o.blockSize}else c=e.offsetWidth,l=e.offsetHeight;r({width:c,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Qx="Popper",[k4,C4]=Yx(Qx),[vW,T4]=k4(Qx),P4=e=>{const{__scopePopper:t,children:r}=e,[n,s]=A.useState(null);return a.jsx(vW,{scope:t,anchor:n,onAnchorChange:s,children:r})};P4.displayName=Qx;var N4="PopperAnchor",A4=A.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=T4(N4,r),c=A.useRef(null),l=si(t,c);return A.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||c.current)}),n?null:a.jsx(ks.div,{...s,ref:l})});A4.displayName=N4;var Xx="PopperContent",[yW,bW]=k4(Xx),j4=A.forwardRef((e,t)=>{var ie,We,Oe,se,ue,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:c=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:o=[],collisionPadding:p=0,sticky:v="partial",hideWhenDetached:m=!1,updatePositionStrategy:u="optimized",onPlaced:b,...f}=e,w=T4(Xx,r),[g,y]=A.useState(null),_=si(t,$e=>y($e)),[x,E]=A.useState(null),j=gW(x),R=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,T=n+(i!=="center"?"-"+i:""),h=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},S=Array.isArray(o)?o:[o],k=S.length>0,P={padding:h,boundary:S.filter(xW),altBoundary:k},{refs:N,floatingStyles:O,placement:D,isPositioned:L,middlewareData:M}=zP({strategy:"fixed",placement:T,whileElementsMounted:(...$e)=>$P(...$e,{animationFrame:u==="always"}),elements:{reference:w.anchor},middleware:[HP({mainAxis:s+C,alignmentAxis:c}),d&&qP({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?KP():void 0,...P}),d&&GP({...P}),YP({...P,apply:({elements:$e,rects:Wt,availableWidth:er,availableHeight:wt})=>{const{width:Er,height:yr}=Wt.reference,Ot=$e.floating.style;Ot.setProperty("--radix-popper-available-width",`${er}px`),Ot.setProperty("--radix-popper-available-height",`${wt}px`),Ot.setProperty("--radix-popper-anchor-width",`${Er}px`),Ot.setProperty("--radix-popper-anchor-height",`${yr}px`)}}),x&&QP({element:x,padding:l}),_W({arrowWidth:R,arrowHeight:C}),m&&JP({strategy:"referenceHidden",...P})]}),[I,G]=I4(D),de=Wi(b);Wn(()=>{L&&(de==null||de())},[L,de]);const ee=(ie=M.arrow)==null?void 0:ie.x,Q=(We=M.arrow)==null?void 0:We.y,ae=((Oe=M.arrow)==null?void 0:Oe.centerOffset)!==0,[xe,Se]=A.useState();return Wn(()=>{g&&Se(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:L?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(se=M.transformOrigin)==null?void 0:se.x,(ue=M.transformOrigin)==null?void 0:ue.y].join(" "),...((Ce=M.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(yW,{scope:r,placedSide:I,onArrowChange:E,arrowX:ee,arrowY:Q,shouldHideArrow:ae,children:a.jsx(ks.div,{"data-side":I,"data-align":G,...f,ref:_,style:{...f.style,animation:L?void 0:"none"}})})})});j4.displayName=Xx;var O4="PopperArrow",wW={top:"bottom",right:"left",bottom:"top",left:"right"},D4=A.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=bW(O4,n),c=wW[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(mW,{...s,ref:r,style:{...s.style,display:"block"}})})});D4.displayName=O4;function xW(e){return e!==null}var _W=e=>({name:"transformOrigin",options:e,fn(t){var w,g,y;const{placement:r,rects:n,middlewareData:s}=t,c=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[o,p]=I4(r),v={start:"0%",center:"50%",end:"100%"}[p],m=(((g=s.arrow)==null?void 0:g.x)??0)+l/2,u=(((y=s.arrow)==null?void 0:y.y)??0)+d/2;let b="",f="";return o==="bottom"?(b=c?v:`${m}px`,f=`${-d}px`):o==="top"?(b=c?v:`${m}px`,f=`${n.floating.height+d}px`):o==="right"?(b=`${-d}px`,f=c?v:`${u}px`):o==="left"&&(b=`${n.floating.width+d}px`,f=c?v:`${u}px`),{data:{x:b,y:f}}}});function I4(e){const[t,r="center"]=e.split("-");return[t,r]}var SW=P4,EW=A4,RW=j4,kW=D4,CW="Portal",M4=A.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=A.useState(!1);Wn(()=>i(!0),[]);const c=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return c?Wg.createPortal(a.jsx(ks.div,{...n,ref:t}),c):null});M4.displayName=CW;var TW=qc[" useInsertionEffect ".trim().toString()]||Wn;function Z2({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,c]=PW({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s;{const p=A.useRef(e!==void 0);A.useEffect(()=>{const v=p.current;v!==l&&console.warn(`${n} is changing from ${v?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,n])}const o=A.useCallback(p=>{var v;if(l){const m=NW(p)?p(e):p;m!==e&&((v=c.current)==null||v.call(c,m))}else i(p)},[l,e,i,c]);return[d,o]}function PW({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),s=A.useRef(r),i=A.useRef(t);return TW(()=>{i.current=t},[t]),A.useEffect(()=>{var c;s.current!==r&&((c=i.current)==null||c.call(i,r),s.current=r)},[r,s]),[r,n,i]}function NW(e){return typeof e=="function"}function AW(e){const t=A.useRef({value:e,previous:e});return A.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var L4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jW="VisuallyHidden",OW=A.forwardRef((e,t)=>a.jsx(ks.span,{...e,ref:t,style:{...L4,...e.style}}));OW.displayName=jW;var DW=[" ","Enter","ArrowUp","ArrowDown"],IW=[" ","Enter"],td="Select",[fv,mv,MW]=H$(td),[Fu,qK]=Yx(td,[MW,C4]),gv=C4(),[LW,Zc]=Fu(td),[FW,BW]=Fu(td),F4=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:c,defaultValue:l,onValueChange:d,dir:o,name:p,autoComplete:v,disabled:m,required:u,form:b}=e,f=gv(t),[w,g]=A.useState(null),[y,_]=A.useState(null),[x,E]=A.useState(!1),j=K$(o),[R,C]=Z2({prop:n,defaultProp:s??!1,onChange:i,caller:td}),[T,h]=Z2({prop:c,defaultProp:l,onChange:d,caller:td}),S=A.useRef(null),k=w?b||!!w.closest("form"):!0,[P,N]=A.useState(new Set),O=Array.from(P).map(D=>D.props.value).join(";");return a.jsx(SW,{...f,children:a.jsxs(LW,{required:u,scope:t,trigger:w,onTriggerChange:g,valueNode:y,onValueNodeChange:_,valueNodeHasChildren:x,onValueNodeHasChildrenChange:E,contentId:Jx(),value:T,onValueChange:h,open:R,onOpenChange:C,dir:j,triggerPointerDownPosRef:S,disabled:m,children:[a.jsx(fv.Provider,{scope:t,children:a.jsx(FW,{scope:e.__scopeSelect,onNativeOptionAdd:A.useCallback(D=>{N(L=>new Set(L).add(D))},[]),onNativeOptionRemove:A.useCallback(D=>{N(L=>{const M=new Set(L);return M.delete(D),M})},[]),children:r})}),k?a.jsxs(aA,{"aria-hidden":!0,required:u,tabIndex:-1,name:p,autoComplete:v,value:T,onChange:D=>h(D.target.value),disabled:m,form:b,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(P)]},O):null]})})};F4.displayName=td;var B4="SelectTrigger",U4=A.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=gv(r),c=Zc(B4,r),l=c.disabled||n,d=si(t,c.onTriggerChange),o=mv(r),p=A.useRef("touch"),[v,m,u]=cA(f=>{const w=o().filter(_=>!_.disabled),g=w.find(_=>_.value===c.value),y=lA(w,f,g);y!==void 0&&c.onValueChange(y.value)}),b=f=>{l||(c.onOpenChange(!0),u()),f&&(c.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return a.jsx(EW,{asChild:!0,...i,children:a.jsx(ks.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":oA(c.value)?"":void 0,...s,ref:d,onClick:js(s.onClick,f=>{f.currentTarget.focus(),p.current!=="mouse"&&b(f)}),onPointerDown:js(s.onPointerDown,f=>{p.current=f.pointerType;const w=f.target;w.hasPointerCapture(f.pointerId)&&w.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(b(f),f.preventDefault())}),onKeyDown:js(s.onKeyDown,f=>{const w=v.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&m(f.key),!(w&&f.key===" ")&&DW.includes(f.key)&&(b(),f.preventDefault())})})})});U4.displayName=B4;var V4="SelectValue",$4=A.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:c="",...l}=e,d=Zc(V4,r),{onValueNodeHasChildrenChange:o}=d,p=i!==void 0,v=si(t,d.onValueNodeChange);return Wn(()=>{o(p)},[o,p]),a.jsx(ks.span,{...l,ref:v,style:{pointerEvents:"none"},children:oA(d.value)?a.jsx(a.Fragment,{children:c}):i})});$4.displayName=V4;var UW="SelectIcon",W4=A.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return a.jsx(ks.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});W4.displayName=UW;var VW="SelectPortal",z4=e=>a.jsx(M4,{asChild:!0,...e});z4.displayName=VW;var rd="SelectContent",H4=A.forwardRef((e,t)=>{const r=Zc(rd,e.__scopeSelect),[n,s]=A.useState();if(Wn(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Jc.createPortal(a.jsx(q4,{scope:e.__scopeSelect,children:a.jsx(fv.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(K4,{...e,ref:t})});H4.displayName=rd;var Ea=10,[q4,el]=Fu(rd),$W="SelectContentImpl",WW=wg("SelectContent.RemoveScroll"),K4=A.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:c,side:l,sideOffset:d,align:o,alignOffset:p,arrowPadding:v,collisionBoundary:m,collisionPadding:u,sticky:b,hideWhenDetached:f,avoidCollisions:w,...g}=e,y=Zc(rd,r),[_,x]=A.useState(null),[E,j]=A.useState(null),R=si(t,ie=>x(ie)),[C,T]=A.useState(null),[h,S]=A.useState(null),k=mv(r),[P,N]=A.useState(!1),O=A.useRef(!1);A.useEffect(()=>{if(_)return Ux(_)},[_]),sW();const D=A.useCallback(ie=>{const[We,...Oe]=k().map(Ce=>Ce.ref.current),[se]=Oe.slice(-1),ue=document.activeElement;for(const Ce of ie)if(Ce===ue||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===We&&E&&(E.scrollTop=0),Ce===se&&E&&(E.scrollTop=E.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==ue))return},[k,E]),L=A.useCallback(()=>D([C,_]),[D,C,_]);A.useEffect(()=>{P&&L()},[P,L]);const{onOpenChange:M,triggerPointerDownPosRef:I}=y;A.useEffect(()=>{if(_){let ie={x:0,y:0};const We=se=>{var ue,Ce;ie={x:Math.abs(Math.round(se.pageX)-(((ue=I.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(se.pageY)-(((Ce=I.current)==null?void 0:Ce.y)??0))}},Oe=se=>{ie.x<=10&&ie.y<=10?se.preventDefault():_.contains(se.target)||M(!1),document.removeEventListener("pointermove",We),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",We),document.addEventListener("pointerup",Oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",We),document.removeEventListener("pointerup",Oe,{capture:!0})}}},[_,M,I]),A.useEffect(()=>{const ie=()=>M(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[M]);const[G,de]=cA(ie=>{const We=k().filter(ue=>!ue.disabled),Oe=We.find(ue=>ue.ref.current===document.activeElement),se=lA(We,ie,Oe);se&&setTimeout(()=>se.ref.current.focus())}),ee=A.useCallback((ie,We,Oe)=>{const se=!O.current&&!Oe;(y.value!==void 0&&y.value===We||se)&&(T(ie),se&&(O.current=!0))},[y.value]),Q=A.useCallback(()=>_==null?void 0:_.focus(),[_]),ae=A.useCallback((ie,We,Oe)=>{const se=!O.current&&!Oe;(y.value!==void 0&&y.value===We||se)&&S(ie)},[y.value]),xe=n==="popper"?Cb:G4,Se=xe===Cb?{side:l,sideOffset:d,align:o,alignOffset:p,arrowPadding:v,collisionBoundary:m,collisionPadding:u,sticky:b,hideWhenDetached:f,avoidCollisions:w}:{};return a.jsx(q4,{scope:r,content:_,viewport:E,onViewportChange:j,itemRefCallback:ee,selectedItem:C,onItemLeave:Q,itemTextRefCallback:ae,focusSelectedItem:L,selectedItemText:h,position:n,isPositioned:P,searchRef:G,children:a.jsx(uv,{as:WW,allowPinchZoom:!0,children:a.jsx(S4,{asChild:!0,trapped:y.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:js(s,ie=>{var We;(We=y.trigger)==null||We.focus({preventScroll:!0}),ie.preventDefault()}),children:a.jsx(x4,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(xe,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ie=>ie.preventDefault(),...g,...Se,onPlaced:()=>N(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:js(g.onKeyDown,ie=>{const We=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!We&&ie.key.length===1&&de(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let se=k().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const ue=ie.target,Ce=se.indexOf(ue);se=se.slice(Ce+1)}setTimeout(()=>D(se)),ie.preventDefault()}})})})})})})});K4.displayName=$W;var zW="SelectItemAlignedPosition",G4=A.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=Zc(rd,r),c=el(rd,r),[l,d]=A.useState(null),[o,p]=A.useState(null),v=si(t,R=>p(R)),m=mv(r),u=A.useRef(!1),b=A.useRef(!0),{viewport:f,selectedItem:w,selectedItemText:g,focusSelectedItem:y}=c,_=A.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&o&&f&&w&&g){const R=i.trigger.getBoundingClientRect(),C=o.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),h=g.getBoundingClientRect();if(i.dir!=="rtl"){const ue=h.left-C.left,Ce=T.left-ue,$e=R.left-Ce,Wt=R.width+$e,er=Math.max(Wt,C.width),wt=window.innerWidth-Ea,Er=z2(Ce,[Ea,Math.max(Ea,wt-er)]);l.style.minWidth=Wt+"px",l.style.left=Er+"px"}else{const ue=C.right-h.right,Ce=window.innerWidth-T.right-ue,$e=window.innerWidth-R.right-Ce,Wt=R.width+$e,er=Math.max(Wt,C.width),wt=window.innerWidth-Ea,Er=z2(Ce,[Ea,Math.max(Ea,wt-er)]);l.style.minWidth=Wt+"px",l.style.right=Er+"px"}const S=m(),k=window.innerHeight-Ea*2,P=f.scrollHeight,N=window.getComputedStyle(o),O=parseInt(N.borderTopWidth,10),D=parseInt(N.paddingTop,10),L=parseInt(N.borderBottomWidth,10),M=parseInt(N.paddingBottom,10),I=O+D+P+M+L,G=Math.min(w.offsetHeight*5,I),de=window.getComputedStyle(f),ee=parseInt(de.paddingTop,10),Q=parseInt(de.paddingBottom,10),ae=R.top+R.height/2-Ea,xe=k-ae,Se=w.offsetHeight/2,ie=w.offsetTop+Se,We=O+D+ie,Oe=I-We;if(We<=ae){const ue=S.length>0&&w===S[S.length-1].ref.current;l.style.bottom="0px";const Ce=o.clientHeight-f.offsetTop-f.offsetHeight,$e=Math.max(xe,Se+(ue?Q:0)+Ce+L),Wt=We+$e;l.style.height=Wt+"px"}else{const ue=S.length>0&&w===S[0].ref.current;l.style.top="0px";const $e=Math.max(ae,O+f.offsetTop+(ue?ee:0)+Se)+Oe;l.style.height=$e+"px",f.scrollTop=We-ae+f.offsetTop}l.style.margin=`${Ea}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=k+"px",n==null||n(),requestAnimationFrame(()=>u.current=!0)}},[m,i.trigger,i.valueNode,l,o,f,w,g,i.dir,n]);Wn(()=>_(),[_]);const[x,E]=A.useState();Wn(()=>{o&&E(window.getComputedStyle(o).zIndex)},[o]);const j=A.useCallback(R=>{R&&b.current===!0&&(_(),y==null||y(),b.current=!1)},[_,y]);return a.jsx(qW,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:u,onScrollButtonChange:j,children:a.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:a.jsx(ks.div,{...s,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});G4.displayName=zW;var HW="SelectPopperPosition",Cb=A.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Ea,...i}=e,c=gv(r);return a.jsx(RW,{...c,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cb.displayName=HW;var[qW,Zx]=Fu(rd,{}),Tb="SelectViewport",Y4=A.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=el(Tb,r),c=Zx(Tb,r),l=si(t,i.onViewportChange),d=A.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(fv.Slot,{scope:r,children:a.jsx(ks.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:js(s.onScroll,o=>{const p=o.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:m}=c;if(m!=null&&m.current&&v){const u=Math.abs(d.current-p.scrollTop);if(u>0){const b=window.innerHeight-Ea*2,f=parseFloat(v.style.minHeight),w=parseFloat(v.style.height),g=Math.max(f,w);if(g<b){const y=g+u,_=Math.min(b,y),x=y-_;v.style.height=_+"px",v.style.bottom==="0px"&&(p.scrollTop=x>0?x:0,v.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});Y4.displayName=Tb;var J4="SelectGroup",[KW,GW]=Fu(J4),YW=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Jx();return a.jsx(KW,{scope:r,id:s,children:a.jsx(ks.div,{role:"group","aria-labelledby":s,...n,ref:t})})});YW.displayName=J4;var Q4="SelectLabel",X4=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=GW(Q4,r);return a.jsx(ks.div,{id:s.id,...n,ref:t})});X4.displayName=Q4;var xg="SelectItem",[JW,Z4]=Fu(xg),eA=A.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...c}=e,l=Zc(xg,r),d=el(xg,r),o=l.value===n,[p,v]=A.useState(i??""),[m,u]=A.useState(!1),b=si(t,y=>{var _;return(_=d.itemRefCallback)==null?void 0:_.call(d,y,n,s)}),f=Jx(),w=A.useRef("touch"),g=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(JW,{scope:r,value:n,disabled:s,textId:f,isSelected:o,onItemTextChange:A.useCallback(y=>{v(_=>_||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(fv.ItemSlot,{scope:r,value:n,disabled:s,textValue:p,children:a.jsx(ks.div,{role:"option","aria-labelledby":f,"data-highlighted":m?"":void 0,"aria-selected":o&&m,"data-state":o?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:b,onFocus:js(c.onFocus,()=>u(!0)),onBlur:js(c.onBlur,()=>u(!1)),onClick:js(c.onClick,()=>{w.current!=="mouse"&&g()}),onPointerUp:js(c.onPointerUp,()=>{w.current==="mouse"&&g()}),onPointerDown:js(c.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:js(c.onPointerMove,y=>{var _;w.current=y.pointerType,s?(_=d.onItemLeave)==null||_.call(d):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:js(c.onPointerLeave,y=>{var _;y.currentTarget===document.activeElement&&((_=d.onItemLeave)==null||_.call(d))}),onKeyDown:js(c.onKeyDown,y=>{var x;((x=d.searchRef)==null?void 0:x.current)!==""&&y.key===" "||(IW.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})})})})});eA.displayName=xg;var Np="SelectItemText",tA=A.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,c=Zc(Np,r),l=el(Np,r),d=Z4(Np,r),o=BW(Np,r),[p,v]=A.useState(null),m=si(t,g=>v(g),d.onItemTextChange,g=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,g,d.value,d.disabled)}),u=p==null?void 0:p.textContent,b=A.useMemo(()=>a.jsx("option",{value:d.value,disabled:d.disabled,children:u},d.value),[d.disabled,d.value,u]),{onNativeOptionAdd:f,onNativeOptionRemove:w}=o;return Wn(()=>(f(b),()=>w(b)),[f,w,b]),a.jsxs(a.Fragment,{children:[a.jsx(ks.span,{id:d.textId,...i,ref:m}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Jc.createPortal(i.children,c.valueNode):null]})});tA.displayName=Np;var rA="SelectItemIndicator",nA=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Z4(rA,r).isSelected?a.jsx(ks.span,{"aria-hidden":!0,...n,ref:t}):null});nA.displayName=rA;var Pb="SelectScrollUpButton",QW=A.forwardRef((e,t)=>{const r=el(Pb,e.__scopeSelect),n=Zx(Pb,e.__scopeSelect),[s,i]=A.useState(!1),c=si(t,n.onScrollButtonChange);return Wn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const o=d.scrollTop>0;i(o)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(sA,{...e,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});QW.displayName=Pb;var Nb="SelectScrollDownButton",XW=A.forwardRef((e,t)=>{const r=el(Nb,e.__scopeSelect),n=Zx(Nb,e.__scopeSelect),[s,i]=A.useState(!1),c=si(t,n.onScrollButtonChange);return Wn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const o=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<o;i(p)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(sA,{...e,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});XW.displayName=Nb;var sA=A.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=el("SelectScrollButton",r),c=A.useRef(null),l=mv(r),d=A.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return A.useEffect(()=>()=>d(),[d]),Wn(()=>{var p;const o=l().find(v=>v.ref.current===document.activeElement);(p=o==null?void 0:o.ref.current)==null||p.scrollIntoView({block:"nearest"})},[l]),a.jsx(ks.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:js(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(n,50))}),onPointerMove:js(s.onPointerMove,()=>{var o;(o=i.onItemLeave)==null||o.call(i),c.current===null&&(c.current=window.setInterval(n,50))}),onPointerLeave:js(s.onPointerLeave,()=>{d()})})}),ZW="SelectSeparator",iA=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx(ks.div,{"aria-hidden":!0,...n,ref:t})});iA.displayName=ZW;var Ab="SelectArrow",ez=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=gv(r),i=Zc(Ab,r),c=el(Ab,r);return i.open&&c.position==="popper"?a.jsx(kW,{...s,...n,ref:t}):null});ez.displayName=Ab;var tz="SelectBubbleInput",aA=A.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=A.useRef(null),i=si(n,s),c=AW(t);return A.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==t&&p){const v=new Event("change",{bubbles:!0});p.call(l,t),l.dispatchEvent(v)}},[c,t]),a.jsx(ks.select,{...r,style:{...L4,...r.style},ref:i,defaultValue:t})});aA.displayName=tz;function oA(e){return e===""||e===void 0}function cA(e){const t=Wi(e),r=A.useRef(""),n=A.useRef(0),s=A.useCallback(c=>{const l=r.current+c;t(l),function d(o){r.current=o,window.clearTimeout(n.current),o!==""&&(n.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),i=A.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function lA(e,t,r){const s=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let c=rz(e,Math.max(i,0));s.length===1&&(c=c.filter(o=>o!==r));const d=c.find(o=>o.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==r?d:void 0}function rz(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var nz=F4,dA=U4,sz=$4,iz=W4,az=z4,uA=H4,oz=Y4,pA=X4,hA=eA,cz=tA,lz=nA,fA=iA;const Ja=nz,Qa=sz,Na=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(dA,{ref:n,className:Vr("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,a.jsx(iz,{asChild:!0,children:a.jsx(d3,{className:"h-4 w-4 opacity-50"})})]}));Na.displayName=dA.displayName;const Aa=A.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>a.jsx(az,{children:a.jsx(uA,{ref:s,className:Vr("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:a.jsx(oz,{className:Vr("p-1 max-h-60 overflow-y-auto",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Aa.displayName=uA.displayName;const dz=A.forwardRef(({className:e,...t},r)=>a.jsx(pA,{ref:r,className:Vr("px-2 py-1.5 text-sm font-semibold",e),...t}));dz.displayName=pA.displayName;const qr=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(hA,{ref:n,className:Vr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(lz,{children:a.jsx(Bw,{className:"h-4 w-4"})})}),a.jsx(cz,{children:t})]}));qr.displayName=hA.displayName;const uz=A.forwardRef(({className:e,...t},r)=>a.jsx(fA,{ref:r,className:Vr("-mx-1 my-1 h-px bg-muted",e),...t}));uz.displayName=fA.displayName;const nd=A.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:Vr("flex min-h-[80px] w-full rounded-xl border border-slate-200/60 dark:border-zinc-700/60 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-sm px-3 py-2 text-base placeholder:text-slate-400 dark:placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/30 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));nd.displayName="Textarea";const pz=Gg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gn=A.forwardRef(({className:e,...t},r)=>a.jsx("label",{ref:r,className:Vr(pz(),e),...t}));gn.displayName="Label";function Mc(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function eE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function mA(...e){return t=>{let r=!1;const n=e.map(s=>{const i=eE(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():eE(e[s],null)}}}}function ld(...e){return A.useCallback(mA(...e),e)}function hz(e,t){const r=A.createContext(t),n=i=>{const{children:c,...l}=i,d=A.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:d,children:c})};n.displayName=e+"Provider";function s(i){const c=A.useContext(r);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function fz(e,t=[]){let r=[];function n(i,c){const l=A.createContext(c),d=r.length;r=[...r,c];const o=v=>{var g;const{scope:m,children:u,...b}=v,f=((g=m==null?void 0:m[e])==null?void 0:g[d])||l,w=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:w,children:u})};o.displayName=i+"Provider";function p(v,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[d])||l,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(l){const d=(l==null?void 0:l[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,mz(s,...t)]}function mz(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((l,{useScope:d,scopeName:o})=>{const v=d(i)[`__scope${o}`];return{...l,...v}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}var gz=qc[" useId ".trim().toString()]||(()=>{}),vz=0;function N0(e){const[t,r]=A.useState(gz());return Wn(()=>{r(n=>n??String(vz++))},[e]),e||(t?`radix-${t}`:"")}var yz=qc[" useInsertionEffect ".trim().toString()]||Wn;function bz({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,c]=wz({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s;{const p=A.useRef(e!==void 0);A.useEffect(()=>{const v=p.current;v!==l&&console.warn(`${n} is changing from ${v?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,n])}const o=A.useCallback(p=>{var v;if(l){const m=xz(p)?p(e):p;m!==e&&((v=c.current)==null||v.call(c,m))}else i(p)},[l,e,i,c]);return[d,o]}function wz({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),s=A.useRef(r),i=A.useRef(t);return yz(()=>{i.current=t},[t]),A.useEffect(()=>{var c;s.current!==r&&((c=i.current)==null||c.call(i,r),s.current=r)},[r,s]),[r,n,i]}function xz(e){return typeof e=="function"}function gA(e){const t=_z(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,l=A.Children.toArray(i),d=l.find(Ez);if(d){const o=d.props.children,p=l.map(v=>v===d?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:v);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function _z(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=kz(s),l=Rz(i,s.props);return s.type!==A.Fragment&&(l.ref=n?mA(n,c):c),A.cloneElement(s,l)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Sz=Symbol("radix.slottable");function Ez(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Sz}function Rz(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function kz(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Cz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Lo=Cz.reduce((e,t)=>{const r=gA(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...l}=s,d=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Tz(e,t){e&&Jc.flushSync(()=>e.dispatchEvent(t))}function Pz(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e);A.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Nz="DismissableLayer",jb="dismissableLayer.update",Az="dismissableLayer.pointerDownOutside",jz="dismissableLayer.focusOutside",tE,vA=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yA=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:l,...d}=e,o=A.useContext(vA),[p,v]=A.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=A.useState({}),b=ld(t,R=>v(R)),f=Array.from(o.layers),[w]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(w),y=p?f.indexOf(p):-1,_=o.layersWithOutsidePointerEventsDisabled.size>0,x=y>=g,E=Iz(R=>{const C=R.target,T=[...o.branches].some(h=>h.contains(C));!x||T||(s==null||s(R),c==null||c(R),R.defaultPrevented||l==null||l())},m),j=Mz(R=>{const C=R.target;[...o.branches].some(h=>h.contains(C))||(i==null||i(R),c==null||c(R),R.defaultPrevented||l==null||l())},m);return Pz(R=>{y===o.layers.size-1&&(n==null||n(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},m),A.useEffect(()=>{if(p)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(tE=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(p)),o.layers.add(p),rE(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=tE)}},[p,m,r,o]),A.useEffect(()=>()=>{p&&(o.layers.delete(p),o.layersWithOutsidePointerEventsDisabled.delete(p),rE())},[p,o]),A.useEffect(()=>{const R=()=>u({});return document.addEventListener(jb,R),()=>document.removeEventListener(jb,R)},[]),a.jsx(Lo.div,{...d,ref:b,style:{pointerEvents:_?x?"auto":"none":void 0,...e.style},onFocusCapture:Mc(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Mc(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Mc(e.onPointerDownCapture,E.onPointerDownCapture)})});yA.displayName=Nz;var Oz="DismissableLayerBranch",Dz=A.forwardRef((e,t)=>{const r=A.useContext(vA),n=A.useRef(null),s=ld(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(Lo.div,{...e,ref:s})});Dz.displayName=Oz;function Iz(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){bA(Az,r,o,{discrete:!0})};const o={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=d,t.addEventListener("click",s.current,{once:!0})):d()}else t.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Mz(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!n.current&&bA(jz,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function rE(){const e=new CustomEvent(jb);document.dispatchEvent(e)}function bA(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Tz(s,i):s.dispatchEvent(i)}var A0="focusScope.autoFocusOnMount",j0="focusScope.autoFocusOnUnmount",nE={bubbles:!1,cancelable:!0},Lz="FocusScope",wA=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=e,[l,d]=A.useState(null),o=Wi(s),p=Wi(i),v=A.useRef(null),m=ld(t,f=>d(f)),u=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let f=function(_){if(u.paused||!l)return;const x=_.target;l.contains(x)?v.current=x:yc(v.current,{select:!0})},w=function(_){if(u.paused||!l)return;const x=_.relatedTarget;x!==null&&(l.contains(x)||yc(v.current,{select:!0}))},g=function(_){if(document.activeElement===document.body)for(const E of _)E.removedNodes.length>0&&yc(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",w);const y=new MutationObserver(g);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,u.paused]),A.useEffect(()=>{if(l){iE.add(u);const f=document.activeElement;if(!l.contains(f)){const g=new CustomEvent(A0,nE);l.addEventListener(A0,o),l.dispatchEvent(g),g.defaultPrevented||(Fz(Wz(xA(l)),{select:!0}),document.activeElement===f&&yc(l))}return()=>{l.removeEventListener(A0,o),setTimeout(()=>{const g=new CustomEvent(j0,nE);l.addEventListener(j0,p),l.dispatchEvent(g),g.defaultPrevented||yc(f??document.body,{select:!0}),l.removeEventListener(j0,p),iE.remove(u)},0)}}},[l,o,p,u]);const b=A.useCallback(f=>{if(!r&&!n||u.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(w&&g){const y=f.currentTarget,[_,x]=Bz(y);_&&x?!f.shiftKey&&g===x?(f.preventDefault(),r&&yc(_,{select:!0})):f.shiftKey&&g===_&&(f.preventDefault(),r&&yc(x,{select:!0})):g===y&&f.preventDefault()}},[r,n,u.paused]);return a.jsx(Lo.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});wA.displayName=Lz;function Fz(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(yc(n,{select:t}),document.activeElement!==r)return}function Bz(e){const t=xA(e),r=sE(t,e),n=sE(t.reverse(),e);return[r,n]}function xA(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function sE(e,t){for(const r of e)if(!Uz(r,{upTo:t}))return r}function Uz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Vz(e){return e instanceof HTMLInputElement&&"select"in e}function yc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Vz(e)&&t&&e.select()}}var iE=$z();function $z(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=aE(e,t),e.unshift(t)},remove(t){var r;e=aE(e,t),(r=e[0])==null||r.resume()}}}function aE(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Wz(e){return e.filter(t=>t.tagName!=="A")}var zz="Portal",_A=A.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=A.useState(!1);Wn(()=>i(!0),[]);const c=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return c?Wg.createPortal(a.jsx(Lo.div,{...n,ref:t}),c):null});_A.displayName=zz;function Hz(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var vv=e=>{const{present:t,children:r}=e,n=qz(t),s=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=ld(n.ref,Kz(s));return typeof r=="function"||n.isPresent?A.cloneElement(s,{ref:i}):null};vv.displayName="Presence";function qz(e){const[t,r]=A.useState(),n=A.useRef(null),s=A.useRef(e),i=A.useRef("none"),c=e?"mounted":"unmounted",[l,d]=Hz(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const o=Xf(n.current);i.current=l==="mounted"?o:"none"},[l]),Wn(()=>{const o=n.current,p=s.current;if(p!==e){const m=i.current,u=Xf(o);e?d("MOUNT"):u==="none"||(o==null?void 0:o.display)==="none"?d("UNMOUNT"):d(p&&m!==u?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),Wn(()=>{if(t){let o;const p=t.ownerDocument.defaultView??window,v=u=>{const f=Xf(n.current).includes(CSS.escape(u.animationName));if(u.target===t&&f&&(d("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",o=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=u=>{u.target===t&&(i.current=Xf(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{p.clearTimeout(o),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(o=>{n.current=o?getComputedStyle(o):null,r(o)},[])}}function Xf(e){return(e==null?void 0:e.animationName)||"none"}function Kz(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var O0=0;function Gz(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??oE()),document.body.insertAdjacentElement("beforeend",e[1]??oE()),O0++,()=>{O0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),O0--}},[])}function oE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var yv="Dialog",[SA,KK]=fz(yv),[Yz,Ua]=SA(yv),EA=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:c=!0}=e,l=A.useRef(null),d=A.useRef(null),[o,p]=bz({prop:n,defaultProp:s??!1,onChange:i,caller:yv});return a.jsx(Yz,{scope:t,triggerRef:l,contentRef:d,contentId:N0(),titleId:N0(),descriptionId:N0(),open:o,onOpenChange:p,onOpenToggle:A.useCallback(()=>p(v=>!v),[p]),modal:c,children:r})};EA.displayName=yv;var RA="DialogTrigger",kA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ua(RA,r),i=ld(t,s.triggerRef);return a.jsx(Lo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":r_(s.open),...n,ref:i,onClick:Mc(e.onClick,s.onOpenToggle)})});kA.displayName=RA;var e_="DialogPortal",[Jz,CA]=SA(e_,{forceMount:void 0}),TA=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=Ua(e_,t);return a.jsx(Jz,{scope:t,forceMount:r,children:A.Children.map(n,c=>a.jsx(vv,{present:r||i.open,children:a.jsx(_A,{asChild:!0,container:s,children:c})}))})};TA.displayName=e_;var _g="DialogOverlay",PA=A.forwardRef((e,t)=>{const r=CA(_g,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Ua(_g,e.__scopeDialog);return i.modal?a.jsx(vv,{present:n||i.open,children:a.jsx(Xz,{...s,ref:t})}):null});PA.displayName=_g;var Qz=gA("DialogOverlay.RemoveScroll"),Xz=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ua(_g,r);return a.jsx(uv,{as:Qz,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Lo.div,{"data-state":r_(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),sd="DialogContent",NA=A.forwardRef((e,t)=>{const r=CA(sd,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Ua(sd,e.__scopeDialog);return a.jsx(vv,{present:n||i.open,children:i.modal?a.jsx(Zz,{...s,ref:t}):a.jsx(eH,{...s,ref:t})})});NA.displayName=sd;var Zz=A.forwardRef((e,t)=>{const r=Ua(sd,e.__scopeDialog),n=A.useRef(null),s=ld(t,r.contentRef,n);return A.useEffect(()=>{const i=n.current;if(i)return Ux(i)},[]),a.jsx(AA,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mc(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Mc(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0;(c.button===2||l)&&i.preventDefault()}),onFocusOutside:Mc(e.onFocusOutside,i=>i.preventDefault())})}),eH=A.forwardRef((e,t)=>{const r=Ua(sd,e.__scopeDialog),n=A.useRef(!1),s=A.useRef(!1);return a.jsx(AA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,l;(c=e.onCloseAutoFocus)==null||c.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var d,o;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=i.target;((o=r.triggerRef.current)==null?void 0:o.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),AA=A.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...c}=e,l=Ua(sd,r),d=A.useRef(null),o=ld(t,d);return Gz(),a.jsxs(a.Fragment,{children:[a.jsx(wA,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(yA,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":r_(l.open),...c,ref:o,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(tH,{titleId:l.titleId}),a.jsx(nH,{contentRef:d,descriptionId:l.descriptionId})]})]})}),t_="DialogTitle",jA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ua(t_,r);return a.jsx(Lo.h2,{id:s.titleId,...n,ref:t})});jA.displayName=t_;var OA="DialogDescription",DA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ua(OA,r);return a.jsx(Lo.p,{id:s.descriptionId,...n,ref:t})});DA.displayName=OA;var IA="DialogClose",MA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Ua(IA,r);return a.jsx(Lo.button,{type:"button",...n,ref:t,onClick:Mc(e.onClick,()=>s.onOpenChange(!1))})});MA.displayName=IA;function r_(e){return e?"open":"closed"}var LA="DialogTitleWarning",[GK,FA]=hz(LA,{contentName:sd,titleName:t_,docsSlug:"dialog"}),tH=({titleId:e})=>{const t=FA(LA),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return A.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},rH="DialogDescriptionWarning",nH=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${FA(rH).contentName}}.`;return A.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},sH=EA,iH=kA,aH=TA,BA=PA,UA=NA,VA=jA,$A=DA,oH=MA;const Sg=sH,cH=iH,lH=aH,WA=A.forwardRef(({className:e,...t},r)=>a.jsx(BA,{ref:r,className:Vr("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));WA.displayName=BA.displayName;const _h=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(lH,{children:[a.jsx(WA,{}),a.jsxs(UA,{ref:n,className:Vr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200/60 dark:border-zinc-700/60 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-md p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",e),...r,children:[t,a.jsxs(oH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(ag,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_h.displayName=UA.displayName;const Sh=({className:e,...t})=>a.jsx("div",{className:Vr("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Sh.displayName="DialogHeader";const Eh=({className:e,...t})=>a.jsx("div",{className:Vr("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Eh.displayName="DialogFooter";const Rh=A.forwardRef(({className:e,...t},r)=>a.jsx(VA,{ref:r,className:Vr("text-lg font-semibold leading-none tracking-tight",e),...t}));Rh.displayName=VA.displayName;const Eg=A.forwardRef(({className:e,...t},r)=>a.jsx($A,{ref:r,className:Vr("text-sm text-muted-foreground",e),...t}));Eg.displayName=$A.displayName;function dH(){const[e,t]=A.useState(""),[r,n]=A.useState("all"),[s,i]=A.useState("all"),[c,l]=A.useState([]),[d,o]=A.useState(!1),[p,v]=A.useState(null),[m,u]=A.useState({doctorId:"",date:"",time:"",appointmentType:"OFFLINE",notes:""}),[b,f]=A.useState(!1),w=Bs(T=>T.user),g="undefined/api/patient";A.useEffect(()=>{(async()=>{var h;try{const S=await Ft.get(`${g}/fetchAllDoctors`,{withCredentials:!0});S.data.success&&l(S.data.data)}catch(S){Ft.isAxiosError(S)&&S.response?$t.error(((h=S.response.data)==null?void 0:h.message)||"Something went wrong"):$t.error("An unexpected error occurred.")}})()},[]);const y=["Cardiology","Dermatology","General Medicine","Neurology","Pediatrics","Psychiatry","Orthopedics","Gynecology"],_=["New York, NY","Los Angeles, CA","Chicago, IL","Boston, MA","Miami, FL","Seattle, WA"],x=c.filter(T=>{const h=T.user.name.toLowerCase().includes(e.toLowerCase())||T.specialty.toLowerCase().includes(e.toLowerCase()),S=r==="all"||T.specialty===r,k=s==="all"||T.clinicLocation===s;return h&&S&&k}),E=T=>{if(!w||w.role!=="PATIENT"){$t.error("Please login as a patient to book appointments");return}v(T),u({doctorId:T.id,date:"",time:"",appointmentType:"OFFLINE",notes:""}),o(!0)},j=()=>{o(!1),v(null),u({doctorId:"",date:"",time:"",appointmentType:"OFFLINE",notes:""})},R=async T=>{var h;if(T.preventDefault(),!m.date||!m.time){$t.error("Please select both date and time");return}f(!0);try{(await Ft.post(`${g}/book-direct-appointment`,m,{withCredentials:!0})).data.success&&($t.success("Appointment booked successfully!"),j())}catch(S){Ft.isAxiosError(S)&&S.response?$t.error(((h=S.response.data)==null?void 0:h.message)||"Failed to ppiunppointment"):$t.error("An unexpected error occurred")}finally{f(!1)}},C=()=>{const T=[];for(let h=9;h<=17;h++)for(let S=0;S<60;S+=30){const k=`${h.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`;T.push(k)}return T};return a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Find Your Doctor"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Connect with certified healthcare professionals and book appointments with ease"})]}),a.jsx(Nt,{className:"mb-8",children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(cs,{placeholder:"Search doctors or specialties...",value:e,onChange:T=>t(T.target.value),className:"pl-10"})]}),a.jsxs(Ja,{value:r,onValueChange:n,children:[a.jsx(Na,{children:a.jsx(Qa,{placeholder:"All Specialties"})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"all",children:"All Specialties"}),y.map(T=>a.jsx(qr,{value:T,children:T},T))]})]}),a.jsxs(Ja,{value:s,onValueChange:i,children:[a.jsx(Na,{children:a.jsx(Qa,{placeholder:"All Locations"})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"all",children:"All Locations"}),_.map(T=>a.jsx(qr,{value:T,children:T},T))]})]}),a.jsxs(tr,{className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(f3,{className:"h-4 w-4 mr-2"}),"Apply Filters"]})]})})}),a.jsx("div",{className:"mb-6",children:a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Showing ",x.length," doctors"]})}),a.jsx("div",{className:"grid gap-6",children:x.map(T=>a.jsx(Nt,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"grid lg:grid-cols-12 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-8",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs(ds,{className:"h-20 w-20 flex-shrink-0",children:[a.jsx(bs,{src:T.user.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:T.user.name.split(" ").map(h=>h[0]).join("")})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white truncate",children:T.user.name})}),a.jsx("p",{className:"text-blue-600 dark:text-blue-400 font-medium mb-2",children:T.specialty}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ma,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:T.clinicLocation})]}),a.jsxs("span",{className:"whitespace-nowrap",children:[T.experience," experience"]})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3 line-clamp-2",children:T.bio}),a.jsxs("div",{className:"flex flex-col gap-2",children:[T.education&&a.jsx("div",{className:"flex flex-wrap gap-2",children:a.jsx(Ur,{variant:"outline",className:"text-xs",children:T.education})}),a.jsx("div",{className:"flex flex-wrap gap-2",children:T.languages.map(h=>a.jsx(Ur,{variant:"outline",className:"text-xs",children:h},h))})]})]})]})}),a.jsx("div",{className:"lg:col-span-4",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",T.consultationFee||" 0 "]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Consultation fee"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-300 mb-4",children:[a.jsx(Fs,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{children:"Available for booking"})]}),a.jsxs(tr,{className:"w-full",onClick:()=>E(T),children:[a.jsx(Uc,{className:"h-4 w-4 mr-2"}),"Book Appointment"]})]})})]})})},T.id))})]}),a.jsx(Sg,{open:d,onOpenChange:o,children:a.jsxs(_h,{className:"sm:max-w-[425px]",children:[a.jsx(Sh,{children:a.jsx(Rh,{children:"Book Appointment"})}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs(ds,{className:"h-12 w-12",children:[a.jsx(bs,{src:p.user.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:p.user.name.split(" ").map(T=>T[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:p.user.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:p.specialty}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["$",p.consultationFee," consultation fee"]})]})]}),a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"date",children:"Date"}),a.jsx(cs,{id:"date",type:"date",value:m.date,onChange:T=>u(h=>({...h,date:T.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"time",children:"Time"}),a.jsxs(Ja,{value:m.time,onValueChange:T=>u(h=>({...h,time:T})),children:[a.jsx(Na,{children:a.jsx(Qa,{placeholder:"Select time"})}),a.jsx(Aa,{children:C().map(T=>a.jsx(qr,{value:T,children:T},T))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"appointmentType",children:"Appointment Type"}),a.jsxs(Ja,{value:m.appointmentType,onValueChange:T=>u(h=>({...h,appointmentType:T})),children:[a.jsx(Na,{children:a.jsx(Qa,{})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"OFFLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(No,{className:"h-4 w-4"}),"In-Person"]})}),a.jsx(qr,{value:"ONLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aC,{className:"h-4 w-4"}),"Video Call"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx(nd,{id:"notes",placeholder:"Any specific concerns or symptoms you'd like to discuss...",value:m.notes,onChange:T=>u(h=>({...h,notes:T.target.value})),rows:3})]}),a.jsxs(Eh,{children:[a.jsx(tr,{type:"button",variant:"outline",onClick:j,children:"Cancel"}),a.jsx(tr,{type:"submit",disabled:b,children:b?"Booking...":"Book Appointment"})]})]})]})]})})]})}function uH(){const{id:e}=Vk();return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Ic,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Doctor Profile"}),a.jsxs("p",{children:["Doctor ID: ",e]})]}),a.jsx(Kl,{})]})}function pH(){const{id:e}=Vk(),t=ao(),r=Bs(f=>f.user),[n,s]=A.useState(null),[i,c]=A.useState(!0),[l,d]=A.useState(!1),[o,p]=A.useState({doctorId:e||"",date:"",time:"",appointmentType:"OFFLINE",notes:""}),v="undefined/api/patient";A.useEffect(()=>{if(!r||r.role!=="PATIENT"){t("/auth/login");return}e&&(async()=>{var w;try{const g=await Ft.get(`${v}/fetchAllDoctors`,{withCredentials:!0});if(g.data.success){const y=g.data.data;y&&y.id===e?s(y):($t.error("Doctor not found"),t("/doctors"))}}catch(g){Ft.isAxiosError(g)&&g.response?$t.error(((w=g.response.data)==null?void 0:w.message)||"Failed to fetch doctor details"):$t.error("An unexpected error occurred"),t("/doctors")}finally{c(!1)}})()},[e,r,t,v]);const m=(f,w)=>{p(g=>({...g,[f]:w}))},u=async f=>{var w;if(f.preventDefault(),!o.date||!o.time){$t.error("Please select both date and time");return}d(!0);try{(await Ft.post(`${v}/book-direct-appointment`,o,{withCredentials:!0})).data.success&&($t.success("Appointment request sent successfully! You will be notified once the doctor responds."),t("/dashboard/patient"))}catch(g){Ft.isAxiosError(g)&&g.response?$t.error(((w=g.response.data)==null?void 0:w.message)||"Failed to book appointment"):$t.error("An unexpected error occurred")}finally{d(!1)}},b=()=>{const f=[];for(let w=9;w<=17;w++)for(let g=0;g<60;g+=30){const y=`${w.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`;f.push(y)}return f};return i?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Ic,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-lg",children:"Loading doctor details..."})})}),a.jsx(Kl,{})]}):n?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Ic,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Book an Appointment"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Schedule your consultation with ",n.user.name]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(Nt,{children:[a.jsx(En,{children:a.jsxs(xn,{className:"flex items-center gap-3",children:[a.jsxs(ds,{className:"h-12 w-12",children:[a.jsx(bs,{src:n.user.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:n.user.name.split(" ").map(f=>f[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:n.user.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:n.specialty})]})]})}),a.jsxs(jt,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ma,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{children:n.clinicLocation})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{children:[n.experience," experience"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Hw,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{children:["$",n.consultationFee," consultation fee"]})]}),n.education&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-1",children:"Education:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.education})]}),n.bio&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-1",children:"About:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.bio})]}),n.languages.length>0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-2",children:"Languages:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:n.languages.map(f=>a.jsx(Ur,{variant:"outline",className:"text-xs",children:f},f))})]})]})]})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(xn,{children:"Appointment Details"}),a.jsx(Vn,{children:"Fill in the details to send an appointment request to the doctor"})]}),a.jsx(jt,{children:a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"date",children:"Date"}),a.jsx(cs,{id:"date",type:"date",value:o.date,onChange:f=>m("date",f.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"time",children:"Time"}),a.jsxs(Ja,{value:o.time,onValueChange:f=>m("time",f),children:[a.jsx(Na,{children:a.jsx(Qa,{placeholder:"Select time"})}),a.jsx(Aa,{children:b().map(f=>a.jsx(qr,{value:f,children:f},f))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"appointmentType",children:"Appointment Type"}),a.jsxs(Ja,{value:o.appointmentType,onValueChange:f=>m("appointmentType",f),children:[a.jsx(Na,{children:a.jsx(Qa,{})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"OFFLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(No,{className:"h-4 w-4"}),"In-Person"]})}),a.jsx(qr,{value:"ONLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aC,{className:"h-4 w-4"}),"Video Call"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx(nd,{id:"notes",placeholder:"Any specific concerns or symptoms you'd like to discuss...",value:o.notes,onChange:f=>m("notes",f.target.value),rows:4})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx(tr,{type:"button",variant:"outline",onClick:()=>t("/doctors"),className:"flex-1",children:"Cancel"}),a.jsx(tr,{type:"submit",disabled:l,className:"flex-1",children:l?"Sending Request...":"Send Appointment Request"})]})]})})]})})]})]})}),a.jsx(Kl,{})]}):a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Ic,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-lg text-red-600",children:"Doctor not found"})})}),a.jsx(Kl,{})]})}function hH(){const e=Bs(g=>g.user),[t,r]=A.useState(!1),[n,s]=A.useState({name:(e==null?void 0:e.name)||"John Doe",email:(e==null?void 0:e.email)||"john.doe@example.com",phone:"+1 (555) 123-4567",age:"28",address:"123 Main Street, City, State 12345"}),[i,c]=A.useState(null),[l,d]=A.useState(null),o=Bs(g=>g.setUser),p="undefined/api/user",[v,m]=A.useState(!1),u=(g,y)=>{s(_=>({..._,[g]:y}))},b=()=>{(async()=>{var y,_,x,E,j,R;try{m(!0);const C=new FormData;n.name&&n.name!==(e==null?void 0:e.name)&&C.append("name",n.name),i&&C.append("profilePicture",i);const T=(e==null?void 0:e.role)==="DOCTOR"?`${p}/update-doctor`:`${p}/update-patient`,h=await Ft.put(T,C,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(!((y=h.data)!=null&&y.success))throw new Error(((_=h.data)==null?void 0:_.message)||"Failed to update profile");const S=await Ft.get(`${p}/authenticated-profile`,{withCredentials:!0});if((x=S.data)!=null&&x.success&&((j=(E=S.data)==null?void 0:E.data)!=null&&j.user)){const k=S.data.data.user;o(k),s(P=>({...P,name:k.name||P.name,email:k.email||P.email}))}$t.success("Profile updated successfully"),r(!1),c(null),d(null)}catch(C){Ft.isAxiosError(C)&&C.response?$t.error(((R=C.response.data)==null?void 0:R.message)||"Failed to update profile"):$t.error("Failed to update profile")}finally{m(!1)}})()},f=()=>{s({name:(e==null?void 0:e.name)||"John Doe",email:(e==null?void 0:e.email)||"john.doe@example.com",phone:"+1 (555) 123-4567",age:"28",address:"123 Main Street, City, State 12345"}),r(!1),c(null),d(null)},w=g=>{var _;const y=((_=g.target.files)==null?void 0:_[0])||null;if(c(y),y){const x=new FileReader;x.onload=()=>d(x.result),x.readAsDataURL(y)}else d(null)};return a.jsxs("div",{className:"p-6 md:p-8 max-w-4xl mx-auto",children:[a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Profile"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your personal information and account settings"})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsx(Qr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"lg:col-span-1",children:a.jsxs(Nt,{className:"sticky top-8",children:[a.jsxs(En,{className:"text-center",children:[a.jsxs("div",{className:"flex flex-col items-center mb-4",children:[a.jsxs(ds,{className:"w-24 h-24",children:[a.jsx(bs,{src:l||(e==null?void 0:e.profilePicture)||"/placeholder-user.jpg",alt:"Profile Picture"}),a.jsx(us,{className:"text-2xl",children:n.name.split(" ").map(g=>g[0]).join("")})]}),t&&a.jsx("div",{className:"mt-3",children:a.jsx(cs,{type:"file",accept:"image/*",onChange:w})})]}),a.jsx(xn,{className:"text-xl",children:n.name}),a.jsx(Vn,{className:"text-base",children:(e==null?void 0:e.role)||"Patient"})]}),a.jsxs(jt,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx($w,{className:"h-4 w-4"}),a.jsx("span",{children:n.email})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(rC,{className:"h-4 w-4"}),a.jsx("span",{children:n.phone})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(hs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Age: ",n.age]})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(Ma,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:n.address})]})]})]})}),a.jsxs(Qr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"lg:col-span-2",children:[a.jsxs(Nt,{children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(xn,{className:"text-2xl",children:"Personal Information"}),a.jsx(Vn,{children:"Update your personal details and contact information"})]}),a.jsxs(tr,{variant:t?"outline":"default",onClick:()=>r(!t),className:"flex items-center space-x-2",children:[a.jsx(w3,{className:"h-4 w-4"}),a.jsx("span",{children:t?"Cancel":"Edit Profile"})]})]})}),a.jsxs(jt,{className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"name",children:"Full Name"}),a.jsx(cs,{id:"name",value:n.name,onChange:g=>u("name",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"email",children:"Email Address"}),a.jsx(cs,{id:"email",type:"email",value:n.email,onChange:g=>u("email",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"phone",children:"Phone Number"}),a.jsx(cs,{id:"phone",value:n.phone,onChange:g=>u("phone",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"age",children:"Age"}),a.jsx(cs,{id:"age",value:n.age,onChange:g=>u("age",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"address",children:"Address"}),a.jsx(cs,{id:"address",value:n.address,onChange:g=>u("address",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),t&&a.jsxs(Qr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex space-x-4 pt-4",children:[a.jsx(tr,{onClick:b,disabled:v,className:"bg-blue-600 hover:bg-blue-700",children:v?"Saving...":"Save Changes"}),a.jsx(tr,{variant:"outline",onClick:f,children:"Cancel"})]})]})]}),a.jsxs(Nt,{className:"mt-6",children:[a.jsxs(En,{children:[a.jsx(xn,{className:"text-xl",children:"Account Information"}),a.jsx(Vn,{children:"Your account details and preferences"})]}),a.jsx(jt,{className:"space-y-4",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Account Type"}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:(e==null?void 0:e.role)||"Patient"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Member Since"}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"January 2024"})})]})]})})]})]})]})]})}function fH(){const e=ao(),t=Bs(o=>o.user),[r,n]=A.useState([]),[s,i]=A.useState([]),[c,l]=A.useState(!0),d="undefined/api/patient";return A.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,e]),A.useEffect(()=>{async function o(){try{l(!0);const p=await Ft.get(`${d}/all-appointments`,{withCredentials:!0});if(p.data.success){let v=function(w,g){return w.includes("T")?new Date(w):new Date(`${w}T${g}`)};const m=p.data.data,u=new Date,b=m.filter(w=>v(w.date,w.time)>=u),f=m.filter(w=>v(w.date,w.time)<u);n(b),i(f)}}catch(p){Ft.isAxiosError(p)&&p.response?$t.error(p.response.data.message):$t.error("Unknown error occurred..")}finally{l(!1)}}o()},[d]),A.useEffect(()=>{console.log(r)},[r]),c?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Appointments"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your upcoming and past appointments"})]}),a.jsxs(tr,{onClick:()=>e("/doctors"),className:"bg-blue-600 hover:bg-blue-700 dark:text-white ",children:[a.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Book New Appointment"]})]})}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[a.jsx(Qr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-5 w-5 text-blue-600"}),"Upcoming Appointments",a.jsx(Ur,{variant:"secondary",className:"ml-2",children:r.length})]}),a.jsx(Vn,{children:"Your scheduled appointments"})]}),a.jsx(jt,{className:"space-y-4",children:r.length>0?r.map(o=>a.jsxs(Qr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{children:[a.jsx(bs,{src:o.doctor.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:o.doctor.name.split(" ").map(p=>p[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:o.doctor.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o.doctor.specialty}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(o.date).toLocaleDateString("en-US")," at ",o.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(Ur,{variant:o.appointmentType==="ONLINE"?"secondary":"default",children:o.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx(Ur,{variant:o.status==="PENDING"?"outline":o.status==="CONFIRMED"?"default":o.status==="COMPLETED"?"secondary":o.status==="REJECTED"?"destructive":"secondary",children:o.status==="PENDING"?"Request Sent":o.status})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[o.appointmentType==="ONLINE"&&o.status==="CONFIRMED"&&a.jsxs(tr,{size:"sm",variant:"outline",children:[a.jsx(Vc,{className:"h-4 w-4 mr-1"}),"Join Call"]}),a.jsxs(tr,{size:"sm",variant:"outline",children:[a.jsx(Ia,{className:"h-4 w-4 mr-1"}),"Details"]})]})]},o.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(hs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No upcoming appointments"}),a.jsxs(tr,{onClick:()=>e("/doctors"),variant:"outline",children:[a.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Book an Appointment"]})]})})]})}),a.jsx(Qr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(hs,{className:"h-5 w-5 text-gray-600"}),"Past Appointments",a.jsx(Ur,{variant:"secondary",className:"ml-2",children:s.length})]}),a.jsx(Vn,{children:"Your completed appointments"})]}),a.jsx(jt,{className:"space-y-4",children:s.length>0?s.map(o=>a.jsxs(Qr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{children:[a.jsx(bs,{src:o.doctor.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:o.doctor.name.split(" ").map(p=>p[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:o.doctor.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o.doctor.specialty}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(o.date).toLocaleDateString("en-US")," at ",o.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(Ur,{variant:o.appointmentType==="ONLINE"?"secondary":"default",children:o.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx(Ur,{variant:o.status==="PENDING"?"outline":o.status==="CONFIRMED"?"default":o.status==="COMPLETED"?"secondary":o.status==="REJECTED"?"destructive":"secondary",children:o.status==="PENDING"?"Request Sent":o.status})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(tr,{size:"sm",variant:"outline",children:[a.jsx(Ia,{className:"h-4 w-4 mr-1"}),"View Report"]}),a.jsxs(tr,{size:"sm",variant:"outline",children:[a.jsx(Vc,{className:"h-4 w-4 mr-1"}),"Feedback"]})]})]},o.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(hs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No past appointments"})]})})]})})]})]})}function mH(){const[e,t]=A.useState([]),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,l]=A.useState("requests"),[d,o]=A.useState(!1),[p,v]=A.useState(null),[m,u]=A.useState(""),[b,f]=A.useState(!1),[w,g]=A.useState(!1),[y,_]=A.useState(""),[x,E]=A.useState(null),[j,R]=A.useState(!1),C=Bs(I=>I.user),T="undefined/api";A.useEffect(()=>{(C==null?void 0:C.role)==="DOCTOR"&&h()},[C]);const h=async()=>{var I;try{i(!0);const G=await Ft.get(`${T}/doctor/pending-requests`,{withCredentials:!0}),de=await Ft.get(`${T}/doctor/all-appointments`,{withCredentials:!0});G.data.success&&n(G.data.data),de.data.success&&t(de.data.data)}catch(G){console.error("Error fetching appointments:",G),Ft.isAxiosError(G)&&G.response?$t.error(((I=G.response.data)==null?void 0:I.message)||"Failed to fetch appointments"):$t.error("Failed to fetch appointments")}finally{i(!1)}},S=async I=>{var G;try{f(!0),(await Ft.patch(`${T}/doctor/appointment-requests/${I}/respond`,{action:"accept"},{withCredentials:!0})).data.success&&($t.success("Appointment accepted successfully!"),h())}catch(de){console.error("Error accepting appointment:",de),Ft.isAxiosError(de)&&de.response?$t.error(((G=de.response.data)==null?void 0:G.message)||"Failed to accept appointment"):$t.error("Failed to accept appointment")}finally{f(!1)}},k=async()=>{var I,G;if(!x||!y.trim()){$t.error("Please enter prescription");return}try{if(f(!0),(await Ft.post(`${T}/doctor/appointments/${x}/prescription`,{prescriptionText:y.trim()},{withCredentials:!0})).data.success){if($t.success("Prescription saved"),j&&x)try{(await Ft.patch(`${T}/doctor/appointments/${x}/complete`,{},{withCredentials:!0})).data.success&&$t.success("Appointment marked as completed")}catch(ee){Ft.isAxiosError(ee)&&ee.response?$t.error(((I=ee.response.data)==null?void 0:I.message)||"Failed to mark as completed"):$t.error("Failed to mark as completed")}R(!1),g(!1),_(""),E(null),h()}}catch(de){Ft.isAxiosError(de)&&de.response?$t.error(((G=de.response.data)==null?void 0:G.message)||"Failed to save prescription"):$t.error("Failed to save prescription")}finally{f(!1)}},P=I=>{if(I.appointmentType!=="OFFLINE"||I.status!=="CONFIRMED")return!1;try{const G=new Date(I.date),[de,ee]=I.time.split(":");return G.setHours(parseInt(de,10),parseInt(ee,10),0,0),G.getTime()<=Date.now()}catch{return!0}},N=async I=>{E(I),R(!0),g(!0)},O=async()=>{var I;if(!p||!m.trim()){$t.error("Please provide a reason for rejection");return}try{f(!0),(await Ft.patch(`${T}/doctor/appointment-requests/${p.id}/respond`,{action:"reject",rejectionReason:m.trim()},{withCredentials:!0})).data.success&&($t.success("Appointment request rejected"),o(!1),u(""),v(null),h())}catch(G){console.error("Error rejecting appointment:",G),Ft.isAxiosError(G)&&G.response?$t.error(((I=G.response.data)==null?void 0:I.message)||"Failed to reject appointment"):$t.error("Failed to reject appointment")}finally{f(!1)}},D=I=>{const G="backdrop-blur-sm rounded-full px-2.5 py-1 border shadow-sm text-xs font-medium",de={PENDING:{label:"Pending",cls:"bg-gradient-to-r from-amber-400/15 to-yellow-500/15 text-amber-700 dark:text-amber-200 border-amber-400/30"},CONFIRMED:{label:"Confirmed",cls:"bg-gradient-to-r from-emerald-400/15 to-teal-500/15 text-emerald-700 dark:text-emerald-200 border-emerald-400/30"},COMPLETED:{label:"Completed",cls:"bg-gradient-to-r from-sky-400/15 to-indigo-500/15 text-sky-700 dark:text-sky-200 border-sky-400/30"},CANCELLED:{label:"Cancelled",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"},REJECTED:{label:"Rejected",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"}},ee=de[I]||de.PENDING;return a.jsx(Ur,{variant:"outline",className:`${G} ${ee.cls}`,children:ee.label})},L=I=>new Date(I).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),M=I=>new Date(`2000-01-01T${I}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointment Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your appointment requests and view all appointments"})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:[a.jsxs("button",{onClick:()=>l("requests"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="requests"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Pending Requests (",r.length,")"]}),a.jsxs("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="all"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["All Appointments (",e.length,")"]})]})}),c==="requests"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Pending Appointment Requests"}),a.jsxs(Ur,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.length," requests"]})]}),r.length===0?a.jsx(Nt,{children:a.jsxs(jt,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(hs,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No pending requests"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"You don't have any pending appointment requests at the moment."})]})}):a.jsx("div",{className:"grid gap-6",children:r.map(I=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsxs(Nt,{className:"border-l-4 border-l-yellow-500",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ds,{className:"h-12 w-12",children:[a.jsx(bs,{src:I.patient.profilePicture}),a.jsx(us,{children:I.patient.name.charAt(0)})]}),a.jsxs("div",{children:[a.jsx(xn,{className:"text-lg",children:I.patient.name}),a.jsxs(Vn,{className:"flex items-center space-x-2",children:[a.jsx($w,{className:"h-4 w-4"}),a.jsx("span",{children:I.patient.email})]})]})]}),D(I.status)]})}),a.jsxs(jt,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:L(I.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:M(I.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ia,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.appointmentType})]}),I.consultationFee&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",I.consultationFee]})})]}),I.notes&&a.jsxs("div",{className:"mb-4",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Patient Notes:"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:I.notes})]}),I.patient.medicalHistory&&a.jsxs("div",{className:"mb-4",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Medical History:"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:I.patient.medicalHistory})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(tr,{onClick:()=>S(I.id),disabled:b,className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Uw,{className:"h-4 w-4 mr-2"}),"Accept"]}),a.jsxs(Sg,{open:d,onOpenChange:o,children:[a.jsx(cH,{asChild:!0,children:a.jsxs(tr,{variant:"destructive",onClick:()=>v(I),disabled:b,children:[a.jsx(Vw,{className:"h-4 w-4 mr-2"}),"Reject"]})}),a.jsxs(_h,{children:[a.jsxs(Sh,{children:[a.jsx(Rh,{children:"Reject Appointment Request"}),a.jsx(Eg,{children:"Please provide a reason for rejecting this appointment request. The patient will be notified with your feedback."})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"rejection-reason",children:"Reason for rejection"}),a.jsx(nd,{id:"rejection-reason",placeholder:"e.g., Time slot not available, suggest alternative time...",value:m,onChange:G=>u(G.target.value),className:"mt-1"})]})}),a.jsxs(Eh,{children:[a.jsx(tr,{variant:"outline",onClick:()=>{o(!1),u(""),v(null)},children:"Cancel"}),a.jsx(tr,{variant:"destructive",onClick:O,disabled:b||!m.trim(),children:b?"Rejecting...":"Reject Request"})]})]})]})]})]})]})},I.id))})]}),c==="all"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"All Appointments"}),a.jsxs(Ur,{variant:"secondary",children:[e.length," total"]})]}),e.length===0?a.jsx(Nt,{children:a.jsxs(jt,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(hs,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"You don't have any appointments scheduled yet."})]})}):a.jsx("div",{className:"grid gap-4",children:e.map(I=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(Nt,{children:a.jsxs(jt,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ds,{className:"h-10 w-10",children:[a.jsx(bs,{src:I.patient.profilePicture}),a.jsx(us,{children:I.patient.name.charAt(0)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:I.patient.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.patient.email})]})]}),D(I.status)]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:L(I.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:M(I.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ia,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:I.appointmentType})]}),I.consultationFee&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["",I.consultationFee]})})]}),I.notes&&a.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Notes:"})," ",I.notes]})}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[I.status==="CONFIRMED"&&a.jsx(tr,{variant:"outline",onClick:()=>{E(I.id),g(!0)},disabled:b,children:"Upload Prescription"}),I.prescriptionId&&a.jsx(tr,{variant:"secondary",onClick:()=>window.open(`${T}/patient/prescription-pdf/${I.prescriptionId}`,"_blank"),children:"View Prescription"}),P(I)&&a.jsx(tr,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>N(I.id),disabled:b,children:"Mark as Completed"})]})]})})},I.id))})]}),a.jsx(Sg,{open:w,onOpenChange:g,children:a.jsxs(_h,{children:[a.jsxs(Sh,{children:[a.jsx(Rh,{children:"Upload Prescription"}),a.jsx(Eg,{children:"Add prescription details for this appointment. Patients will be able to view it as a PDF."})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"prescription-text",children:"Prescription"}),a.jsx(nd,{id:"prescription-text",placeholder:"Medication, dosage, instructions...",value:y,onChange:I=>_(I.target.value),className:"mt-1",rows:8})]})}),a.jsxs(Eh,{children:[a.jsx(tr,{variant:"outline",onClick:()=>{g(!1),_(""),E(null)},children:"Cancel"}),a.jsx(tr,{onClick:k,disabled:b||!y.trim(),children:b?"Saving...":"Save Prescription"})]})]})})]})}function gH(){const[e,t]=A.useState([]),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,l]=A.useState(""),[d,o]=A.useState("all"),[p,v]=A.useState("all"),m=Bs(E=>E.user),u="undefined/api";A.useEffect(()=>{(m==null?void 0:m.role)==="DOCTOR"&&b()},[m]),A.useEffect(()=>{f()},[e,c,d,p]);const b=async()=>{var E;try{i(!0);const j=await Ft.get(`${u}/doctor/all-appointments`,{withCredentials:!0});j.data.success&&t(j.data.data)}catch(j){console.error("Error fetching appointment history:",j),Ft.isAxiosError(j)&&j.response?$t.error(((E=j.response.data)==null?void 0:E.message)||"Failed to fetch appointment history"):$t.error("Failed to fetch appointment history")}finally{i(!1)}},f=()=>{let E=[...e];if(c&&(E=E.filter(j=>j.patient.name.toLowerCase().includes(c.toLowerCase())||j.patient.email.toLowerCase().includes(c.toLowerCase()))),d!=="all"&&(E=E.filter(j=>j.status===d)),p!=="all"){const j=new Date,R=new Date(j.getFullYear(),j.getMonth(),j.getDate());E=E.filter(C=>{const T=new Date(C.date);switch(p){case"today":return T.toDateString()===R.toDateString();case"thisWeek":const h=new Date(R);h.setDate(R.getDate()-R.getDay());const S=new Date(h);return S.setDate(h.getDate()+6),T>=h&&T<=S;case"thisMonth":return T.getMonth()===j.getMonth()&&T.getFullYear()===j.getFullYear();case"past":return T<R;case"upcoming":return T>=R;default:return!0}})}E.sort((j,R)=>new Date(R.createdAt).getTime()-new Date(j.createdAt).getTime()),n(E)},w=E=>{const j={PENDING:{variant:"secondary",label:"Pending",color:"text-yellow-600"},CONFIRMED:{variant:"default",label:"Confirmed",color:"text-green-600"},COMPLETED:{variant:"default",label:"Completed",color:"text-blue-600"},CANCELLED:{variant:"destructive",label:"Cancelled",color:"text-red-600"},REJECTED:{variant:"destructive",label:"Rejected",color:"text-red-600"}},R=j[E]||j.PENDING;return a.jsx(Ur,{variant:R.variant,className:R.color,children:R.label})},g=E=>new Date(E).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),y=E=>new Date(`2000-01-01T${E}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),x={total:e.length,pending:e.filter(j=>j.status==="PENDING").length,confirmed:e.filter(j=>j.status==="CONFIRMED").length,completed:e.filter(j=>j.status==="COMPLETED").length,cancelled:e.filter(j=>j.status==="CANCELLED").length,rejected:e.filter(j=>j.status==="REJECTED").length};return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointment History"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage your appointment history"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8",children:[a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.total}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x.pending}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.confirmed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confirmed"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.completed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.cancelled}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cancelled"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:x.rejected}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected"})]})})})]}),a.jsx(Nt,{className:"mb-6",children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(cs,{placeholder:"Search by patient name or email...",value:c,onChange:E=>l(E.target.value),className:"pl-10"})]})}),a.jsxs(Ja,{value:d,onValueChange:o,children:[a.jsx(Na,{className:"w-full md:w-48",children:a.jsx(Qa,{placeholder:"Filter by status"})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"all",children:"All Statuses"}),a.jsx(qr,{value:"PENDING",children:"Pending"}),a.jsx(qr,{value:"CONFIRMED",children:"Confirmed"}),a.jsx(qr,{value:"COMPLETED",children:"Completed"}),a.jsx(qr,{value:"CANCELLED",children:"Cancelled"}),a.jsx(qr,{value:"REJECTED",children:"Rejected"})]})]}),a.jsxs(Ja,{value:p,onValueChange:v,children:[a.jsx(Na,{className:"w-full md:w-48",children:a.jsx(Qa,{placeholder:"Filter by date"})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"all",children:"All Dates"}),a.jsx(qr,{value:"today",children:"Today"}),a.jsx(qr,{value:"thisWeek",children:"This Week"}),a.jsx(qr,{value:"thisMonth",children:"This Month"}),a.jsx(qr,{value:"past",children:"Past"}),a.jsx(qr,{value:"upcoming",children:"Upcoming"})]})]})]})})}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsx(Nt,{children:a.jsxs(jt,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(hs,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:e.length===0?"You don't have any appointments yet.":"No appointments match your current filters."})]})}):r.map(E=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(Nt,{children:a.jsxs(jt,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ds,{className:"h-12 w-12",children:[a.jsx(bs,{src:E.patient.profilePicture}),a.jsx(us,{children:E.patient.name.charAt(0)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:E.patient.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx($w,{className:"h-4 w-4"}),a.jsx("span",{children:E.patient.email})]})]})]}),a.jsxs("div",{className:"text-right",children:[w(E.status),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",g(E.createdAt)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g(E.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:y(E.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ia,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.appointmentType})]}),E.consultationFee&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",E.consultationFee]})})]}),E.notes&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Notes:"})," ",E.notes]})}),E.patient.medicalHistory&&a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Medical History:"})," ",E.patient.medicalHistory]})})]})})},E.id))})]})}function vH(){const e=ao(),t=Bs(l=>l.user),[r,n]=A.useState([]),[s,i]=A.useState(!0),c="undefined/api/patient";return A.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,e]),A.useEffect(()=>{async function l(){var d;try{i(!0);const o=await Ft.get(`${c}/view-prescriptions`,{withCredentials:!0});o.data.success&&n(o.data.data)}catch(o){Ft.isAxiosError(o)&&o.response?$t.error(((d=o.response.data)==null?void 0:d.message)||"Something went wrong"):$t.error("Unknown error occurred")}finally{i(!1)}}l()},[c]),s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Prescriptions"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"View and download your medical prescriptions"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Ur,{variant:"secondary",className:"text-sm",children:[r.length," Prescriptions"]})})]})}),a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:r.length>0?a.jsx("div",{className:"space-y-6",children:r.map((l,d)=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:d*.1},children:a.jsxs(Nt,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx(ig,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsxs(xn,{className:"text-lg",children:["Prescription #",l.id.slice(-8)]}),a.jsxs(Vn,{children:["Prescribed by Dr. ",l.doctorName]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{variant:"outline",className:"text-xs",children:l.speciality}),a.jsxs(tr,{size:"sm",variant:"outline",onClick:()=>window.open(`${c}/prescription-pdf/${l.id}`,"_blank"),children:[a.jsx(h3,{className:"h-4 w-4 mr-1"}),"Download PDF"]})]})]})}),a.jsxs(jt,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx(ds,{className:"w-10 h-10",children:a.jsx(us,{children:a.jsx(No,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Dr. ",l.doctorName]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:l.speciality}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(Ma,{className:"h-3 w-3"}),l.clinicLocation]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(hs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Prescribed on: ",new Date(l.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(Fs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Time: ",new Date(l.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[a.jsx(Ia,{className:"h-4 w-4"}),"Prescription Instructions"]}),a.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:l.prescriptionText})})]})]})]})},l.id))}):a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(ig,{className:"h-12 w-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Prescriptions Found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 max-w-md mx-auto",children:"You don't have any prescriptions yet. Your prescriptions will appear here after your appointments."}),a.jsx(tr,{onClick:()=>e("/doctors"),className:"bg-blue-600 hover:bg-blue-700",children:"Book an Appointment"})]})})]})}function cE(){const[e,t]=A.useState([]),[r,n]=A.useState(!0),[s,i]=A.useState(null);A.useEffect(()=>{c()},[]);const c=async()=>{try{const m=await Ft.get("undefined/api/user/notifications",{withCredentials:!0});m.data.success&&t(m.data.data.notifications)}catch(m){console.error("Error fetching notifications:",m),$t.error("Failed to fetch notifications")}finally{n(!1)}},l=async m=>{i(m);try{await Ft.put(`undefined/api/user/notifications/${m}/read`,{},{withCredentials:!0}),t(u=>u.map(b=>b.id===m?{...b,isRead:!0}:b)),$t.success("Notification marked as read")}catch(u){console.error("Error marking notification as read:",u),$t.error("Failed to mark notification as read")}finally{i(null)}},d=async()=>{try{await Ft.put("undefined/api/user/notifications/mark-all-read",{},{withCredentials:!0}),t(m=>m.map(u=>({...u,isRead:!0}))),$t.success("All notifications marked as read")}catch(m){console.error("Error marking all notifications as read:",m),$t.error("Failed to mark all notifications as read")}},o=m=>{switch(m){case"APPOINTMENT_ACCEPTED":case"APPOINTMENT_REJECTED":case"APPOINTMENT_REMINDER":return a.jsx(hs,{className:"h-5 w-5"});case"DOCTOR_MESSAGE":return a.jsx(Dh,{className:"h-5 w-5"});default:return a.jsx(sg,{className:"h-5 w-5"})}},p=m=>{switch(m){case"APPOINTMENT_ACCEPTED":return"text-green-600 bg-green-100 dark:bg-green-900/30";case"APPOINTMENT_REJECTED":return"text-red-600 bg-red-100 dark:bg-red-900/30";case"APPOINTMENT_REMINDER":return"text-blue-600 bg-blue-100 dark:bg-blue-900/30";case"DOCTOR_MESSAGE":return"text-purple-600 bg-purple-100 dark:bg-purple-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}},v=e.filter(m=>!m.isRead).length;return r?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Stay updated with your health appointments and messages"})]}),v>0&&a.jsxs(tr,{onClick:d,variant:"outline",className:"flex items-center gap-2",children:[a.jsx(l3,{className:"h-4 w-4"}),"Mark All as Read"]})]})}),a.jsx("div",{className:"space-y-4",children:e.length===0?a.jsx(Nt,{children:a.jsxs(jt,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(sg,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No notifications yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"You'll receive notifications about appointments, messages, and important updates here."})]})}):e.map(m=>a.jsx(Nt,{className:`transition-all duration-200 ${m.isRead?"opacity-75":"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10"}`,children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:`p-2 rounded-full ${p(m.type)}`,children:o(m.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m.title}),!m.isRead&&a.jsx(Ur,{variant:"destructive",className:"text-xs",children:"New"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:m.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:new Date(m.createdAt).toLocaleDateString()}),a.jsx("span",{children:new Date(m.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),!m.isRead&&a.jsx(tr,{variant:"ghost",size:"sm",onClick:()=>l(m.id),disabled:s===m.id,className:"ml-4",children:s===m.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):a.jsx(Bw,{className:"h-4 w-4"})})]})})},m.id))})]})}function yH(){const e=ao(),t=Bs(j=>j.user),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,l]=A.useState(null),[d,o]=A.useState(!1),[p,v]=A.useState(null),[m,u]=A.useState(""),[b,f]=A.useState(""),[w,g]=A.useState(!1),y="undefined/api/doctor";A.useEffect(()=>{(!t||t.role!=="DOCTOR")&&e("/auth/login")},[t,e]),A.useEffect(()=>{_()},[]);const _=async()=>{var j;try{i(!0);const R=await Ft.get(`${y}/pending-requests`,{withCredentials:!0});R.data.success&&n(R.data.data)}catch(R){Ft.isAxiosError(R)&&R.response?$t.error(((j=R.response.data)==null?void 0:j.message)||"Failed to fetch pending requests"):$t.error("Unknown error occurred")}finally{i(!1)}},x=(j,R)=>{l(j),v(R),o(!0)},E=async()=>{var j;if(!(!c||!p))try{g(!0);const R={action:p};p==="reject"&&(R.rejectionReason=m,b.trim()&&(R.alternativeSlots=b.split(",").map(T=>T.trim()))),(await Ft.patch(`${y}/appointment-requests/${c.id}/respond`,R,{withCredentials:!0})).data.success&&($t.success(`Appointment request ${p}ed successfully`),await _(),o(!1),l(null),v(null),u(""),f(""))}catch(R){Ft.isAxiosError(R)&&R.response?$t.error(((j=R.response.data)==null?void 0:j.message)||"Failed to process request"):$t.error("Unknown error occurred")}finally{g(!1)}};return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Pending Appointment Requests"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Review and respond to patient appointment requests"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Ur,{variant:"secondary",className:"text-sm",children:[r.length," Pending"]})})]})}),a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:r.length>0?a.jsx("div",{className:"space-y-6",children:r.map((j,R)=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:R*.1},children:a.jsxs(Nt,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{className:"w-12 h-12",children:[a.jsx(bs,{src:j.patient.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:j.patient.name.split(" ").map(C=>C[0]).join("")})]}),a.jsxs("div",{children:[a.jsx(xn,{className:"text-lg",children:j.patient.name}),a.jsx(Vn,{children:j.patient.email})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{variant:"outline",className:"text-xs",children:j.appointmentType}),a.jsx(Ur,{variant:"secondary",className:"text-xs",children:new Date(j.createdAt).toLocaleDateString()})]})]})}),a.jsxs(jt,{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(hs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Date: ",new Date(j.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(Fs,{className:"h-4 w-4"}),a.jsxs("span",{children:["Time: ",j.time]})]}),j.consultationFee&&a.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:a.jsxs("span",{children:["Fee: ",j.consultationFee]})})]}),a.jsx("div",{className:"space-y-2",children:j.patient.medicalHistory&&a.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1",children:"Medical History"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:j.patient.medicalHistory})]})})]}),j.notes&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[a.jsx(v3,{className:"h-4 w-4"}),"Patient Notes"]}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.notes})})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsxs(tr,{onClick:()=>x(j,"accept"),className:"bg-green-600 hover:bg-green-700 flex items-center gap-2",children:[a.jsx(Uw,{className:"h-4 w-4"}),"Accept Request"]}),a.jsxs(tr,{onClick:()=>x(j,"reject"),variant:"destructive",className:"flex items-center gap-2",children:[a.jsx(Vw,{className:"h-4 w-4"}),"Reject Request"]})]})]})]})},j.id))}):a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Fy,{className:"h-12 w-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Pending Requests"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-md mx-auto",children:"You don't have any pending appointment requests at the moment. New requests will appear here when patients book appointments."})]})}),a.jsx(Sg,{open:d,onOpenChange:o,children:a.jsxs(_h,{className:"sm:max-w-[425px]",children:[a.jsxs(Sh,{children:[a.jsx(Rh,{children:p==="accept"?"Accept Appointment Request":"Reject Appointment Request"}),a.jsx(Eg,{children:p==="accept"?"Are you sure you want to accept this appointment request? The patient will be notified.":"Please provide a reason for rejecting this appointment request. You can also suggest alternative time slots."})]}),c&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.patient.name}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[new Date(c.date).toLocaleDateString()," at ",c.time]})]}),p==="reject"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"rejectionReason",children:"Reason for rejection (optional)"}),a.jsx(nd,{id:"rejectionReason",placeholder:"e.g., Time slot not available, schedule conflict...",value:m,onChange:j=>u(j.target.value),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"alternativeSlots",children:"Alternative time slots (optional)"}),a.jsx(nd,{id:"alternativeSlots",placeholder:"e.g., Tomorrow 2:00 PM, Friday 10:00 AM",value:b,onChange:j=>f(j.target.value),className:"mt-1"})]})]})]}),a.jsxs(Eh,{children:[a.jsx(tr,{variant:"outline",onClick:()=>o(!1),disabled:w,children:"Cancel"}),a.jsx(tr,{onClick:E,disabled:w,className:p==="accept"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:w?"Processing...":p==="accept"?"Accept":"Reject"})]})]})})]})}function Ro(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function n_(e,t=[]){let r=[];function n(i,c){const l=A.createContext(c),d=r.length;r=[...r,c];const o=v=>{var g;const{scope:m,children:u,...b}=v,f=((g=m==null?void 0:m[e])==null?void 0:g[d])||l,w=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:w,children:u})};o.displayName=i+"Provider";function p(v,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[d])||l,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(l){const d=(l==null?void 0:l[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return s.scopeName=e,[n,bH(s,...t)]}function bH(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((l,{useScope:d,scopeName:o})=>{const v=d(i)[`__scope${o}`];return{...l,...v}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function lE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function zA(...e){return t=>{let r=!1;const n=e.map(s=>{const i=lE(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():lE(e[s],null)}}}}function Rg(...e){return A.useCallback(zA(...e),e)}function Ob(e){const t=wH(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,l=A.Children.toArray(i),d=l.find(_H);if(d){const o=d.props.children,p=l.map(v=>v===d?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:v);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function wH(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=EH(s),l=SH(i,s.props);return s.type!==A.Fragment&&(l.ref=n?zA(n,c):c),A.cloneElement(s,l)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xH=Symbol("radix.slottable");function _H(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xH}function SH(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function EH(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function RH(e){const t=e+"CollectionProvider",[r,n]=n_(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=f=>{const{scope:w,children:g}=f,y=pt.useRef(null),_=pt.useRef(new Map).current;return a.jsx(s,{scope:w,itemMap:_,collectionRef:y,children:g})};c.displayName=t;const l=e+"CollectionSlot",d=Ob(l),o=pt.forwardRef((f,w)=>{const{scope:g,children:y}=f,_=i(l,g),x=Rg(w,_.collectionRef);return a.jsx(d,{ref:x,children:y})});o.displayName=l;const p=e+"CollectionItemSlot",v="data-radix-collection-item",m=Ob(p),u=pt.forwardRef((f,w)=>{const{scope:g,children:y,..._}=f,x=pt.useRef(null),E=Rg(w,x),j=i(p,g);return pt.useEffect(()=>(j.itemMap.set(x,{ref:x,..._}),()=>void j.itemMap.delete(x))),a.jsx(m,{[v]:"",ref:E,children:y})});u.displayName=p;function b(f){const w=i(e+"CollectionConsumer",f);return pt.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const _=Array.from(y.querySelectorAll(`[${v}]`));return Array.from(w.itemMap.values()).sort((j,R)=>_.indexOf(j.ref.current)-_.indexOf(R.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:c,Slot:o,ItemSlot:u},b,n]}var kH=qc[" useId ".trim().toString()]||(()=>{}),CH=0;function HA(e){const[t,r]=A.useState(kH());return Wn(()=>{r(n=>n??String(CH++))},[e]),t?`radix-${t}`:""}var TH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bu=TH.reduce((e,t)=>{const r=Ob(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...l}=s,d=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),PH=qc[" useInsertionEffect ".trim().toString()]||Wn;function qA({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,c]=NH({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s;{const p=A.useRef(e!==void 0);A.useEffect(()=>{const v=p.current;v!==l&&console.warn(`${n} is changing from ${v?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,n])}const o=A.useCallback(p=>{var v;if(l){const m=AH(p)?p(e):p;m!==e&&((v=c.current)==null||v.call(c,m))}else i(p)},[l,e,i,c]);return[d,o]}function NH({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),s=A.useRef(r),i=A.useRef(t);return PH(()=>{i.current=t},[t]),A.useEffect(()=>{var c;s.current!==r&&((c=i.current)==null||c.call(i,r),s.current=r)},[r,s]),[r,n,i]}function AH(e){return typeof e=="function"}var jH=A.createContext(void 0);function KA(e){const t=A.useContext(jH);return e||t||"ltr"}var D0="rovingFocusGroup.onEntryFocus",OH={bubbles:!1,cancelable:!0},qh="RovingFocusGroup",[Db,GA,DH]=RH(qh),[IH,YA]=n_(qh,[DH]),[MH,LH]=IH(qh),JA=A.forwardRef((e,t)=>a.jsx(Db.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Db.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(FH,{...e,ref:t})})}));JA.displayName=qh;var FH=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:o,preventScrollOnEntryFocus:p=!1,...v}=e,m=A.useRef(null),u=Rg(t,m),b=KA(i),[f,w]=qA({prop:c,defaultProp:l??null,onChange:d,caller:qh}),[g,y]=A.useState(!1),_=Wi(o),x=GA(r),E=A.useRef(!1),[j,R]=A.useState(0);return A.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(D0,_),()=>C.removeEventListener(D0,_)},[_]),a.jsx(MH,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:f,onItemFocus:A.useCallback(C=>w(C),[w]),onItemShiftTab:A.useCallback(()=>y(!0),[]),onFocusableItemAdd:A.useCallback(()=>R(C=>C+1),[]),onFocusableItemRemove:A.useCallback(()=>R(C=>C-1),[]),children:a.jsx(Bu.div,{tabIndex:g||j===0?-1:0,"data-orientation":n,...v,ref:u,style:{outline:"none",...e.style},onMouseDown:Ro(e.onMouseDown,()=>{E.current=!0}),onFocus:Ro(e.onFocus,C=>{const T=!E.current;if(C.target===C.currentTarget&&T&&!g){const h=new CustomEvent(D0,OH);if(C.currentTarget.dispatchEvent(h),!h.defaultPrevented){const S=x().filter(D=>D.focusable),k=S.find(D=>D.active),P=S.find(D=>D.id===f),O=[k,P,...S].filter(Boolean).map(D=>D.ref.current);ZA(O,p)}}E.current=!1}),onBlur:Ro(e.onBlur,()=>y(!1))})})}),QA="RovingFocusGroupItem",XA=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:c,...l}=e,d=HA(),o=i||d,p=LH(QA,r),v=p.currentTabStopId===o,m=GA(r),{onFocusableItemAdd:u,onFocusableItemRemove:b,currentTabStopId:f}=p;return A.useEffect(()=>{if(n)return u(),()=>b()},[n,u,b]),a.jsx(Db.ItemSlot,{scope:r,id:o,focusable:n,active:s,children:a.jsx(Bu.span,{tabIndex:v?0:-1,"data-orientation":p.orientation,...l,ref:t,onMouseDown:Ro(e.onMouseDown,w=>{n?p.onItemFocus(o):w.preventDefault()}),onFocus:Ro(e.onFocus,()=>p.onItemFocus(o)),onKeyDown:Ro(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){p.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const g=VH(w,p.orientation,p.dir);if(g!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let _=m().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")_.reverse();else if(g==="prev"||g==="next"){g==="prev"&&_.reverse();const x=_.indexOf(w.currentTarget);_=p.loop?$H(_,x+1):_.slice(x+1)}setTimeout(()=>ZA(_))}}),children:typeof c=="function"?c({isCurrentTabStop:v,hasTabStop:f!=null}):c})})});XA.displayName=QA;var BH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function VH(e,t,r){const n=UH(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return BH[n]}function ZA(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function $H(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var WH=JA,zH=XA;function HH(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var e6=e=>{const{present:t,children:r}=e,n=qH(t),s=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=Rg(n.ref,KH(s));return typeof r=="function"||n.isPresent?A.cloneElement(s,{ref:i}):null};e6.displayName="Presence";function qH(e){const[t,r]=A.useState(),n=A.useRef(null),s=A.useRef(e),i=A.useRef("none"),c=e?"mounted":"unmounted",[l,d]=HH(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const o=Zf(n.current);i.current=l==="mounted"?o:"none"},[l]),Wn(()=>{const o=n.current,p=s.current;if(p!==e){const m=i.current,u=Zf(o);e?d("MOUNT"):u==="none"||(o==null?void 0:o.display)==="none"?d("UNMOUNT"):d(p&&m!==u?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,d]),Wn(()=>{if(t){let o;const p=t.ownerDocument.defaultView??window,v=u=>{const f=Zf(n.current).includes(u.animationName);if(u.target===t&&f&&(d("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",o=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=u=>{u.target===t&&(i.current=Zf(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{p.clearTimeout(o),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(o=>{n.current=o?getComputedStyle(o):null,r(o)},[])}}function Zf(e){return(e==null?void 0:e.animationName)||"none"}function KH(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var bv="Tabs",[GH,YK]=n_(bv,[YA]),t6=YA(),[YH,s_]=GH(bv),r6=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:c="horizontal",dir:l,activationMode:d="automatic",...o}=e,p=KA(l),[v,m]=qA({prop:n,onChange:s,defaultProp:i??"",caller:bv});return a.jsx(YH,{scope:r,baseId:HA(),value:v,onValueChange:m,orientation:c,dir:p,activationMode:d,children:a.jsx(Bu.div,{dir:p,"data-orientation":c,...o,ref:t})})});r6.displayName=bv;var n6="TabsList",s6=A.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=s_(n6,r),c=t6(r);return a.jsx(WH,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(Bu.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});s6.displayName=n6;var i6="TabsTrigger",a6=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,c=s_(i6,r),l=t6(r),d=l6(c.baseId,n),o=d6(c.baseId,n),p=n===c.value;return a.jsx(zH,{asChild:!0,...l,focusable:!s,active:p,children:a.jsx(Bu.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":o,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...i,ref:t,onMouseDown:Ro(e.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?c.onValueChange(n):v.preventDefault()}),onKeyDown:Ro(e.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(n)}),onFocus:Ro(e.onFocus,()=>{const v=c.activationMode!=="manual";!p&&!s&&v&&c.onValueChange(n)})})})});a6.displayName=i6;var o6="TabsContent",c6=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...c}=e,l=s_(o6,r),d=l6(l.baseId,n),o=d6(l.baseId,n),p=n===l.value,v=A.useRef(p);return A.useEffect(()=>{const m=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(e6,{present:s||p,children:({present:m})=>a.jsx(Bu.div,{"data-state":p?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!m,id:o,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:v.current?"0s":void 0},children:m&&i})})});c6.displayName=o6;function l6(e,t){return`${e}-trigger-${t}`}function d6(e,t){return`${e}-content-${t}`}var JH=r6,u6=s6,p6=a6,h6=c6;const kh=JH,Kh=A.forwardRef(({className:e,...t},r)=>a.jsx(u6,{ref:r,className:Vr("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Kh.displayName=u6.displayName;const bi=A.forwardRef(({className:e,...t},r)=>a.jsx(p6,{ref:r,className:Vr("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));bi.displayName=p6.displayName;const wi=A.forwardRef(({className:e,...t},r)=>a.jsx(h6,{ref:r,className:Vr("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));wi.displayName=h6.displayName;function QH(){const e=ao(),{user:t,isLoading:r}=bI(),[n,s]=A.useState(""),[i,c]=A.useState("all");A.useEffect(()=>{!r&&(!t||t.role!=="admin")&&e("/auth/login")},[t,r,e]);const l={totalUsers:1247,totalDoctors:89,totalAppointments:2456,activeChats:156,pendingRequests:12,monthlyGrowth:15.3,revenue:45600,satisfaction:4.8},d={appointmentsThisMonth:[{month:"Jan",appointments:180},{month:"Feb",appointments:220},{month:"Mar",appointments:280},{month:"Apr",appointments:320},{month:"May",appointments:380},{month:"Jun",appointments:420}],topSpecialties:[{specialty:"General Medicine",count:45,percentage:35},{specialty:"Cardiology",count:32,percentage:25},{specialty:"Dermatology",count:28,percentage:22},{specialty:"Neurology",count:23,percentage:18}]},o=[{id:1,name:"Dr. James Wilson",email:"j.wilson@email.com",specialty:"Cardiology",experience:"8 years",licenseNumber:"MD789012",location:"Boston, MA",education:"Harvard Medical School",submittedDate:"2024-01-14",status:"Pending",documents:["License","Degree","CV"],avatar:"/placeholder.svg"},{id:2,name:"Dr. Lisa Chen",email:"l.chen@email.com",specialty:"Pediatrics",experience:"6 years",licenseNumber:"MD345678",location:"San Francisco, CA",education:"UCSF School of Medicine",submittedDate:"2024-01-13",status:"Under Review",documents:["License","Degree","CV","References"],avatar:"/placeholder.svg"},{id:3,name:"Dr. Robert Kim",email:"r.kim@email.com",specialty:"Orthopedics",experience:"12 years",licenseNumber:"MD901234",location:"Seattle, WA",education:"Johns Hopkins University",submittedDate:"2024-01-12",status:"Approved",documents:["License","Degree","CV","References","Background Check"],avatar:"/placeholder.svg"}],p=[{id:1,patient:"John Smith",doctor:"Dr. Sarah Johnson",date:"2024-01-15",time:"10:00 AM",status:"Completed",type:"Video Call",revenue:150},{id:2,patient:"Emily Davis",doctor:"Dr. Michael Chen",date:"2024-01-15",time:"2:30 PM",status:"Confirmed",type:"In-person",revenue:120},{id:3,patient:"Robert Wilson",doctor:"Dr. Lisa Park",date:"2024-01-15",time:"4:00 PM",status:"Cancelled",type:"Video Call",revenue:0}],v=u=>{console.log("Approving doctor:",u),alert("Doctor approved successfully!")},m=u=>{console.log("Rejecting doctor:",u),alert("Doctor application rejected.")};return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(zw,{className:"h-8 w-8 text-red-600"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"})]}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome, ",(t==null?void 0:t.name)||"Admin","! Comprehensive platform management and analytics"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.totalUsers}),a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["+",l.monthlyGrowth,"% this month"]})]}),a.jsx(Pa,{className:"h-8 w-8 text-blue-600"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Active Doctors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.totalDoctors}),a.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:[l.pendingRequests," pending"]})]}),a.jsx(E3,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Appointments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.totalAppointments}),a.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[l.activeChats," active chats"]})]}),a.jsx(hs,{className:"h-8 w-8 text-purple-600"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Monthly Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",l.revenue.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Rating: ",l.satisfaction,"/5.0"]})]}),a.jsx(_3,{className:"h-8 w-8 text-orange-600"})]})})})]}),a.jsxs(kh,{defaultValue:"analytics",className:"space-y-6",children:[a.jsxs(Kh,{className:"grid w-full grid-cols-5 lg:w-auto lg:grid-cols-5",children:[a.jsxs(bi,{value:"analytics",className:"flex items-center gap-2",children:[a.jsx(B1,{className:"h-4 w-4"}),"Analytics"]}),a.jsxs(bi,{value:"doctor-requests",className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-4 w-4"}),"Doctor Requests"]}),a.jsxs(bi,{value:"appointments",className:"flex items-center gap-2",children:[a.jsx(hs,{className:"h-4 w-4"}),"Appointments"]}),a.jsxs(bi,{value:"users",className:"flex items-center gap-2",children:[a.jsx(Pa,{className:"h-4 w-4"}),"Users"]}),a.jsxs(bi,{value:"settings",className:"flex items-center gap-2",children:[a.jsx(sC,{className:"h-4 w-4"}),"Settings"]})]}),a.jsxs(wi,{value:"analytics",className:"space-y-6",children:[a.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(o3,{className:"h-5 w-5 text-blue-600"}),"Appointment Trends"]}),a.jsx(Vn,{children:"Monthly appointment statistics"})]}),a.jsx(jt,{children:a.jsx("div",{className:"space-y-4",children:d.appointmentsThisMonth.map((u,b)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:u.month}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${u.appointments/500*100}%`}})}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 w-12",children:u.appointments})]})]},b))})})]}),a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(B1,{className:"h-5 w-5 text-green-600"}),"Popular Specialties"]}),a.jsx(Vn,{children:"Most requested medical specialties"})]}),a.jsx(jt,{children:a.jsx("div",{className:"space-y-4",children:d.topSpecialties.map((u,b)=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:u.specialty}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[u.count," doctors"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${u.percentage}%`}})})]},b))})})]})]}),a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(xn,{children:"Recent Appointments"}),a.jsx(Vn,{children:"Latest appointment activity and revenue"})]}),a.jsx(jt,{children:a.jsx("div",{className:"space-y-4",children:p.map(u=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[u.patient,"  ",u.doctor]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[u.date," at ",u.time," "," ",u.type]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["$",u.revenue]}),a.jsx(Ur,{variant:u.status==="Completed"?"default":u.status==="Confirmed"?"secondary":"destructive",children:u.status})]})]},u.id))})})]})]}),a.jsx(wi,{value:"doctor-requests",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-5 w-5 text-orange-600"}),"Doctor Applications"]}),a.jsx(Vn,{children:"Review and approve new doctor registrations"})]}),a.jsx(jt,{children:a.jsx("div",{className:"space-y-6",children:o.map(u=>a.jsx(Nt,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsxs(ds,{className:"h-16 w-16",children:[a.jsx(bs,{src:u.avatar||"/placeholder.svg"}),a.jsx(us,{children:u.name.split(" ").map(b=>b[0]).join("")})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:u.name}),a.jsx(Ur,{variant:u.status==="Approved"?"default":u.status==="Under Review"?"secondary":"outline",children:u.status})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-300",children:[a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",u.email]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Specialty:"})," ",u.specialty]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Experience:"})," ",u.experience]})]}),a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"License:"})," ",u.licenseNumber]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Location:"})," ",u.location]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Education:"})," ",u.education]})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[a.jsx("strong",{children:"Submitted:"})," ",u.submittedDate]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.documents.map(b=>a.jsx(Ur,{variant:"outline",className:"text-xs",children:b},b))})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 lg:w-48",children:[a.jsxs(tr,{variant:"outline",size:"sm",className:"w-full",children:[a.jsx(By,{className:"h-4 w-4 mr-2"}),"View Details"]}),u.status==="Pending"&&a.jsxs(a.Fragment,{children:[a.jsxs(tr,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>v(u.id),children:[a.jsx(Uw,{className:"h-4 w-4 mr-2"}),"Approve"]}),a.jsxs(tr,{variant:"destructive",size:"sm",className:"w-full",onClick:()=>m(u.id),children:[a.jsx(Vw,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})},u.id))})})]})}),a.jsx(wi,{value:"appointments",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(xn,{children:"Appointment Management"}),a.jsx(Vn,{children:"Monitor and manage all appointments"})]}),a.jsx(jt,{children:a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Appointment management interface..."})})]})}),a.jsx(wi,{value:"users",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(xn,{children:"User Management"}),a.jsx(Vn,{children:"Manage all platform users"})]}),a.jsx(jt,{children:a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"User management interface..."})})]})}),a.jsx(wi,{value:"settings",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(xn,{children:"Platform Settings"}),a.jsx(Vn,{children:"Configure platform-wide settings"})]}),a.jsx(jt,{children:a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Settings interface..."})})]})})]})]})}const io=Object.create(null);io.open="0";io.close="1";io.ping="2";io.pong="3";io.message="4";io.upgrade="5";io.noop="6";const km=Object.create(null);Object.keys(io).forEach(e=>{km[io[e]]=e});const Ib={type:"error",data:"parser error"},f6=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",m6=typeof ArrayBuffer=="function",g6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,i_=({type:e,data:t},r,n)=>f6&&t instanceof Blob?r?n(t):dE(t,n):m6&&(t instanceof ArrayBuffer||g6(t))?r?n(t):dE(new Blob([t]),n):n(io[e]+(t||"")),dE=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function uE(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let I0;function XH(e,t){if(f6&&e.data instanceof Blob)return e.data.arrayBuffer().then(uE).then(t);if(m6&&(e.data instanceof ArrayBuffer||g6(e.data)))return t(uE(e.data));i_(e,!1,r=>{I0||(I0=new TextEncoder),t(I0.encode(r))})}const pE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ap=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<pE.length;e++)Ap[pE.charCodeAt(e)]=e;const ZH=e=>{let t=e.length*.75,r=e.length,n,s=0,i,c,l,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const o=new ArrayBuffer(t),p=new Uint8Array(o);for(n=0;n<r;n+=4)i=Ap[e.charCodeAt(n)],c=Ap[e.charCodeAt(n+1)],l=Ap[e.charCodeAt(n+2)],d=Ap[e.charCodeAt(n+3)],p[s++]=i<<2|c>>4,p[s++]=(c&15)<<4|l>>2,p[s++]=(l&3)<<6|d&63;return o},eq=typeof ArrayBuffer=="function",a_=(e,t)=>{if(typeof e!="string")return{type:"message",data:v6(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:tq(e.substring(1),t)}:km[r]?e.length>1?{type:km[r],data:e.substring(1)}:{type:km[r]}:Ib},tq=(e,t)=>{if(eq){const r=ZH(e);return v6(r,t)}else return{base64:!0,data:e}},v6=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},y6="",rq=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((i,c)=>{i_(i,!1,l=>{n[c]=l,++s===r&&t(n.join(y6))})})},nq=(e,t)=>{const r=e.split(y6),n=[];for(let s=0;s<r.length;s++){const i=a_(r[s],t);if(n.push(i),i.type==="error")break}return n};function sq(){return new TransformStream({transform(e,t){XH(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let M0;function em(e){return e.reduce((t,r)=>t+r.length,0)}function tm(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function iq(e,t){M0||(M0=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(c,l){for(r.push(c);;){if(n===0){if(em(r)<1)break;const d=tm(r,1);i=(d[0]&128)===128,s=d[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(em(r)<2)break;const d=tm(r,2);s=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(em(r)<8)break;const d=tm(r,8),o=new DataView(d.buffer,d.byteOffset,d.length),p=o.getUint32(0);if(p>Math.pow(2,21)-1){l.enqueue(Ib);break}s=p*Math.pow(2,32)+o.getUint32(4),n=3}else{if(em(r)<s)break;const d=tm(r,s);l.enqueue(a_(i?d:M0.decode(d),t)),n=0}if(s===0||s>e){l.enqueue(Ib);break}}}})}const b6=4;function Ds(e){if(e)return aq(e)}function aq(e){for(var t in Ds.prototype)e[t]=Ds.prototype[t];return e}Ds.prototype.on=Ds.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ds.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Ds.prototype.off=Ds.prototype.removeListener=Ds.prototype.removeAllListeners=Ds.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Ds.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};Ds.prototype.emitReserved=Ds.prototype.emit;Ds.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ds.prototype.hasListeners=function(e){return!!this.listeners(e).length};const wv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),pa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),oq="arraybuffer";function w6(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const cq=pa.setTimeout,lq=pa.clearTimeout;function xv(e,t){t.useNativeTimers?(e.setTimeoutFn=cq.bind(pa),e.clearTimeoutFn=lq.bind(pa)):(e.setTimeoutFn=pa.setTimeout.bind(pa),e.clearTimeoutFn=pa.clearTimeout.bind(pa))}const dq=1.33;function uq(e){return typeof e=="string"?pq(e):Math.ceil((e.byteLength||e.size)*dq)}function pq(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function x6(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function hq(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function fq(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class mq extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class o_ extends Ds{constructor(t){super(),this.writable=!1,xv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new mq(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=a_(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=hq(t);return r.length?"?"+r:""}}class gq extends o_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};nq(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,rq(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=x6()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let _6=!1;try{_6=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const vq=_6;function yq(){}class bq extends gq{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let du=class Cm extends Ds{constructor(t,r,n){super(),this.createRequest=t,xv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=w6(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Cm.requestsCount++,Cm.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=yq,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Cm.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};du.requestsCount=0;du.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hE);else if(typeof addEventListener=="function"){const e="onpagehide"in pa?"pagehide":"unload";addEventListener(e,hE,!1)}}function hE(){for(let e in du.requests)du.requests.hasOwnProperty(e)&&du.requests[e].abort()}const wq=function(){const e=S6({xdomain:!1});return e&&e.responseType!==null}();class xq extends bq{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=wq&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new du(S6,this.uri(),t)}}function S6(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||vq))return new XMLHttpRequest}catch{}if(!t)try{return new pa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const E6=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _q extends o_{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=E6?{}:w6(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;i_(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&wv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=x6()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const L0=pa.WebSocket||pa.MozWebSocket;class Sq extends _q{createSocket(t,r,n){return E6?new L0(t,r,n):r?new L0(t,r):new L0(t)}doWrite(t,r){this.ws.send(r)}}class Eq extends o_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=iq(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=sq();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:l,value:d})=>{l||(this.onPacket(d),i())}).catch(l=>{})};i();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&wv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Rq={websocket:Sq,webtransport:Eq,polling:xq},kq=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Cq=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Mb(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=kq.exec(e||""),i={},c=14;for(;c--;)i[Cq[c]]=s[c]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Tq(i,i.path),i.queryKey=Pq(i,i.query),i}function Tq(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Pq(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const Lb=typeof addEventListener=="function"&&typeof removeEventListener=="function",Tm=[];Lb&&addEventListener("offline",()=>{Tm.forEach(e=>e())},!1);class Lc extends Ds{constructor(t,r){if(super(),this.binaryType=oq,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Mb(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Mb(r.host).host);xv(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fq(this.opts.query)),Lb&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Tm.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=b6,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Lc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Lc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=uq(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,wv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Lc.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Lb&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Tm.indexOf(this._offlineEventListener);n!==-1&&Tm.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Lc.protocol=b6;class Nq extends Lc{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Lc.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",v=>{if(!n)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Lc.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(p(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function i(){n||(n=!0,p(),r.close(),r=null)}const c=v=>{const m=new Error("probe error: "+v);m.transport=r.name,i(),this.emitReserved("upgradeError",m)};function l(){c("transport closed")}function d(){c("socket closed")}function o(v){r&&v.name!==r.name&&i()}const p=()=>{r.removeListener("open",s),r.removeListener("error",c),r.removeListener("close",l),this.off("close",d),this.off("upgrading",o)};r.once("open",s),r.once("error",c),r.once("close",l),this.once("close",d),this.once("upgrading",o),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let Aq=class extends Nq{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>Rq[s]).filter(s=>!!s)),super(t,n)}};function jq(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Mb(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const Oq=typeof ArrayBuffer=="function",Dq=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,R6=Object.prototype.toString,Iq=typeof Blob=="function"||typeof Blob<"u"&&R6.call(Blob)==="[object BlobConstructor]",Mq=typeof File=="function"||typeof File<"u"&&R6.call(File)==="[object FileConstructor]";function c_(e){return Oq&&(e instanceof ArrayBuffer||Dq(e))||Iq&&e instanceof Blob||Mq&&e instanceof File}function Pm(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Pm(e[r]))return!0;return!1}if(c_(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Pm(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Pm(e[r]))return!0;return!1}function Lq(e){const t=[],r=e.data,n=e;return n.data=Fb(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Fb(e,t){if(!e)return e;if(c_(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Fb(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Fb(e[n],t));return r}return e}function Fq(e,t){return e.data=Bb(e.data,t),delete e.attachments,e}function Bb(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Bb(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Bb(e[r],t));return e}const Bq=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Uq=5;var rn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(rn||(rn={}));class Vq{constructor(t){this.replacer=t}encode(t){return(t.type===rn.EVENT||t.type===rn.ACK)&&Pm(t)?this.encodeAsBinary({type:t.type===rn.EVENT?rn.BINARY_EVENT:rn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===rn.BINARY_EVENT||t.type===rn.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Lq(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function fE(e){return Object.prototype.toString.call(e)==="[object Object]"}class l_ extends Ds{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===rn.BINARY_EVENT;n||r.type===rn.BINARY_ACK?(r.type=n?rn.EVENT:rn.ACK,this.reconstructor=new $q(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(c_(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(rn[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===rn.BINARY_EVENT||n.type===rn.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const c=t.substring(i,r);if(c!=Number(c)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const c=t.charAt(r);if(c==null||Number(c)!=c){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(l_.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case rn.CONNECT:return fE(r);case rn.DISCONNECT:return r===void 0;case rn.CONNECT_ERROR:return typeof r=="string"||fE(r);case rn.EVENT:case rn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Bq.indexOf(r[0])===-1);case rn.ACK:case rn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $q{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Fq(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Wq=Object.freeze(Object.defineProperty({__proto__:null,Decoder:l_,Encoder:Vq,get PacketType(){return rn},protocol:Uq},Symbol.toStringTag,{value:"Module"}));function Ca(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const zq=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class k6 extends Ds{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ca(t,"open",this.onopen.bind(this)),Ca(t,"packet",this.onpacket.bind(this)),Ca(t,"error",this.onerror.bind(this)),Ca(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,i;if(zq.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const c={type:rn.EVENT,data:r};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const p=this.ids++,v=r.pop();this._registerAckCallback(p,v),c.id=p}const l=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},s),c=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...r){return new Promise((n,s)=>{const i=(c,l)=>c?s(c):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:rn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case rn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rn.EVENT:case rn.BINARY_EVENT:this.onevent(t);break;case rn.ACK:case rn.BINARY_ACK:this.onack(t);break;case rn.DISCONNECT:this.ondisconnect();break;case rn.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:rn.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Uu(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Uu.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Uu.prototype.reset=function(){this.attempts=0};Uu.prototype.setMin=function(e){this.ms=e};Uu.prototype.setMax=function(e){this.max=e};Uu.prototype.setJitter=function(e){this.jitter=e};class Ub extends Ds{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,xv(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Uu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||Wq;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Aq(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Ca(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},c=Ca(r,"error",i);if(this._timeout!==!1){const l=this._timeout,d=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(s),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ca(t,"ping",this.onping.bind(this)),Ca(t,"data",this.ondata.bind(this)),Ca(t,"error",this.onerror.bind(this)),Ca(t,"close",this.onclose.bind(this)),Ca(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){wv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new k6(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Sp={};function Nm(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=jq(e,t.path||"/socket.io"),n=r.source,s=r.id,i=r.path,c=Sp[s]&&i in Sp[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let d;return l?d=new Ub(n,t):(Sp[s]||(Sp[s]=new Ub(n,t)),d=Sp[s]),r.query&&!t.query&&(t.query=r.queryKey),d.socket(r.path,t)}Object.assign(Nm,{Manager:Ub,Socket:k6,io:Nm,connect:Nm});const Hq=void 0,C6=void 0,Vu=Nm(Hq,{withCredentials:!0}),mE=e=>{Vu.emit("joinDmRoom",e)},gE=(e,t,r)=>{Vu.emit("joinRoom",{event:"joinRoom",data:{roomId:e,userId:t,username:r}})},qq=e=>{Vu.emit("dmMessage",{event:"dmMessage",data:e})},Kq=e=>{Vu.on("message",t=>{e(t)})},Gq=()=>{Vu.off("message")},Yq=e=>{Vu.emit("roomMessage",{event:"roomMessage",data:e})},vE=async(e,t=1,r=50)=>{try{return(await Ft.get(`${C6}/api/chat/one-on-one/${e}`,{params:{page:t,limit:r},withCredentials:!0})).data}catch(n){throw console.error("Error loading 1-on-1 chat history:",n),n}},Jq=async(e,t=1,r=50)=>{try{return(await Ft.get(`${C6}/api/chat/city/${encodeURIComponent(e)}`,{params:{page:t,limit:r},withCredentials:!0})).data}catch(n){throw console.error("Error loading city chat history:",n),n}};function Qq(){const[e,t]=A.useState(""),[r,n]=A.useState([]),[s,i]=A.useState("ai"),[c,l]=A.useState([]),[d,o]=A.useState([]),[p,v]=A.useState(!1),[m,u]=A.useState(!0),[b,f]=A.useState([]),[w,g]=A.useState(null),[y,_]=A.useState(!1),[x,E]=A.useState([]),[j,R]=A.useState(null),C=A.useRef(null),T="undefined/api",h=Bs(se=>se.user);A.useEffect(()=>{async function se(){var ue;try{const Ce=await Ft.get(`${T}/patient/fetchAllDoctors`,{withCredentials:!0});Ce.data.success&&n(Ce.data.data)}catch(Ce){Ft.isAxiosError(Ce)&&Ce.response?$t.error(((ue=Ce.response.data)==null?void 0:ue.message)||"Something went wrong"):$t.error("Unknown error occurred")}}se()},[T]),A.useEffect(()=>{async function se(){var ue;if(h)try{const Ce=h.role==="DOCTOR"?`${T}/doctor/city-rooms`:`${T}/patient/city-rooms`,$e=await Ft.get(Ce,{withCredentials:!0});if($e.data.success){const Wt=$e.data.data;o(Array.isArray(Wt)?Wt:[Wt])}}catch(Ce){Ft.isAxiosError(Ce)&&Ce.response?$t.error(((ue=Ce.response.data)==null?void 0:ue.message)||"Something went wrong"):$t.error("Unknown error ocurred")}}se()},[h]);const[S,k]=A.useState([]),[P,N]=A.useState(!1),[O,D]=A.useState(()=>localStorage.getItem("ai-chat-language")||"en"),L=[{code:"en",name:"English",flag:""},{code:"hi",name:"",flag:""},{code:"gu",name:"",flag:""},{code:"pa",name:"",flag:""},{code:"mr",name:"",flag:""},{code:"bn",name:"",flag:""},{code:"ta",name:"",flag:""},{code:"te",name:"",flag:""},{code:"kn",name:"",flag:""},{code:"ml",name:"",flag:""},{code:"or",name:"",flag:""}],M=se=>{D(se),localStorage.setItem("ai-chat-language",se)},I=se=>{const ue=se.toLowerCase();return ue.includes("severe")||ue.includes("grave")||ue.includes("severo")||ue.includes("svre")?"severe":ue.includes("moderate")||ue.includes("moderado")||ue.includes("modr")||ue.includes("moderato")?"moderate":"mild"};A.useEffect(()=>{(h==null?void 0:h.role)==="DOCTOR"&&xe()},[h]),A.useEffect(()=>{var se;if(m){u(!1);return}(c.length>0||S.length>0)&&C.current&&((se=C.current)==null||se.scrollIntoView({behavior:"auto"}))},[c,S,m]),A.useEffect(()=>{s==="ai"&&G()},[s]);const G=async()=>{try{const se=await Ft.get(`${T}/ai-chat/history`,{withCredentials:!0});if(se.data.success){const ue=se.data.data.chats||[];if(ue.length===0)k([{id:"welcome",type:"ai",message:"Hello! I'm CareXpert AI, your health assistant. Describe your symptoms and I'll help analyze them for you.",time:"Just now"}]);else{const Ce=ue.map($e=>[{id:`${$e.id}-user`,type:"user",message:$e.userMessage,time:new Date($e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},{id:`${$e.id}-ai`,type:"ai",message:de($e),time:new Date($e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),aiData:$e}]).flat();k(Ce)}}}catch(se){console.error("Error loading AI chat history:",se),k([{id:"welcome",type:"ai",message:"Hello! I'm CareXpert AI, your health assistant. Describe your symptoms and I'll help analyze them for you.",time:"Just now"}])}},de=se=>{const ue=se.probable_causes||se.probableCauses||[],{severity:Ce,recommendation:$e,disclaimer:Wt}=se;let er=`**Probable Causes:**
${ue.map(wt=>` ${wt}`).join(`
`)}

`;return er+=`**Recommendation:**
${$e}

`,er+=`**Disclaimer:**
${Wt}`,er},ee=async()=>{try{await Ft.delete(`${T}/ai-chat/history`,{withCredentials:!0}),k([{id:"welcome",type:"ai",message:"Chat cleared. Hello! I'm CareXpert AI. Describe your symptoms and I'll help analyze them for you.",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}]),$t.success("AI chat cleared")}catch{$t.error("Failed to clear AI chat")}},Q=async se=>{try{N(!0);const ue={id:`user-${Date.now()}`,type:"user",message:se,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};k($e=>[...$e,ue]),t("");const Ce=await Ft.post(`${T}/ai-chat/process`,{symptoms:se,language:O},{withCredentials:!0});if(Ce.data.success){const $e=Ce.data.data,Wt={id:`ai-${Date.now()}`,type:"ai",message:de($e),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),aiData:$e};k(er=>[...er,Wt])}}catch(ue){console.error("Error sending AI message:",ue),$t.error("Failed to get AI response. Please try again.");const Ce={id:`error-${Date.now()}`,type:"ai",message:"Sorry, I'm having trouble processing your request. Please try again.",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};k($e=>[...$e,Ce])}finally{N(!1)}};function ae(se,ue){return[se,ue].sort().join("_")}const xe=async()=>{try{const se=await Ft.get(`${T}/chat/doctor/conversations`,{withCredentials:!0});se.data.success&&E(se.data.data.conversations)}catch(se){console.error("Error fetching DM conversations:",se)}},Se=async se=>{R(se),i({type:"doctor",data:{id:se.otherUser.id,userId:se.otherUser.id,specialty:"Patient",clinicLocation:"",user:{name:se.otherUser.name,profilePicture:se.otherUser.profilePicture}}}),l([]);const ue=ae((h==null?void 0:h.id)||"",se.otherUser.id);mE(ue),await ie(se.otherUser.id)},ie=async se=>{try{const ue=await vE(se);if(ue.success){const Ce=ue.data.messages.map($e=>({roomId:ae((h==null?void 0:h.id)||"",se),senderId:$e.senderId,receiverId:$e.receiverId,username:$e.sender.name,text:$e.message,time:new Date($e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:$e.messageType,imageUrl:$e.imageUrl}));l(Ce)}}catch(ue){console.error("Error loading conversation history:",ue)}},We=async se=>{try{const ue=await Ft.get(`undefined/api/user/communities/${se}/members`,{withCredentials:!0});ue.data.success&&f(ue.data.data.members)}catch(ue){console.error("Error fetching community members:",ue)}};A.useEffect(()=>{(async()=>{var ue,Ce;if(console.log("ChatPage - User:",h),console.log("ChatPage - Selected Chat:",s),h&&typeof s=="object"&&s.type==="doctor"){const $e=ae(h.id,s.data.userId);mE($e);try{console.log("Loading chat history for doctor:",s.data.userId);const Wt=await vE(s.data.userId);if(console.log("Chat history response:",Wt),Wt.success){const er=Wt.data.messages.map(wt=>({roomId:$e,senderId:wt.senderId,receiverId:wt.receiverId,username:wt.sender.name,text:wt.message,time:new Date(wt.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:wt.messageType,imageUrl:wt.imageUrl}));l(er)}}catch(Wt){console.error("Error loading doctor chat history:",Wt),l([])}}else if(typeof s=="object"&&s.type==="room")try{const $e=await Jq(s.name);if($e.success){(Ce=(ue=$e.data)==null?void 0:ue.room)!=null&&Ce.id?(g($e.data.room.id),h&&gE($e.data.room.id,h.id,h.name)):(g(s.id),h&&gE(s.id,h.id,h.name));const Wt=$e.data.messages.map(er=>{var wt,Er;return{roomId:((Er=(wt=$e.data)==null?void 0:wt.room)==null?void 0:Er.id)||s.id,senderId:er.senderId,receiverId:null,username:er.sender.name,text:er.message,time:new Date(er.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:er.messageType,imageUrl:er.imageUrl}});l(Wt)}await We(s.id)}catch($e){console.error("Error loading city chat history:",$e),l([])}else s==="ai"&&l([])})()},[s,h]);const Oe=async()=>{if(!(!e.trim()||!s||!h)){if(typeof s=="object"&&s.type==="doctor"){const ue={roomId:ae(h.id,s.data.userId),senderId:h.id,receiverId:s.data.userId,username:h.name,text:e.trim(),messageType:"TEXT",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};qq(ue),l(Ce=>[...Ce,{...ue,type:"user"}]),t("")}else if(s==="ai")await Q(e.trim());else if(typeof s=="object"&&s.type==="room"){if(!w){$t.error("Connecting to room... please try again in a moment");return}const se={roomId:w,senderId:h.id,username:h.name,text:e.trim(),messageType:"TEXT",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};Yq(se),l(ue=>[...ue,{...se,type:"user"}]),t("")}}};return A.useEffect(()=>(Kq(ue=>{ue.senderId!==(h==null?void 0:h.id)&&(typeof s=="object"&&s.type==="doctor"&&ae((h==null?void 0:h.id)||"",s.data.userId)===ue.roomId?l(Ce=>[...Ce,ue]):typeof s=="object"&&s.type==="room"&&s.id===ue.roomId&&l(Ce=>[...Ce,ue]))}),()=>{Gq()}),[s,h]),a.jsxs("div",{className:"h-[calc(100%-1rem)] overflow-hidden flex flex-col mt-4",children:[a.jsx("div",{className:"lg:hidden p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Chat"}),a.jsx(tr,{variant:"outline",size:"sm",onClick:()=>v(!p),children:p?a.jsx(ag,{className:"h-4 w-4"}):a.jsx(Ww,{className:"h-4 w-4"})})]})}),a.jsxs("div",{className:"flex-1 flex overflow-hidden h-full",children:[p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>v(!1)}),a.jsxs("div",{className:`${p?"block":"hidden"} lg:block w-80 flex-shrink-0 lg:mr-6 lg:relative fixed lg:top-0 top-0 left-0 h-full z-50 lg:z-auto bg-white dark:bg-gray-900 lg:bg-transparent`,children:[a.jsx("div",{className:"lg:hidden flex justify-end p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx(tr,{variant:"ghost",size:"sm",onClick:()=>v(!1),children:a.jsx(ag,{className:"h-4 w-4"})})}),a.jsxs(kh,{defaultValue:"ai",className:"space-y-4 flex flex-col h-full",children:[a.jsxs(Kh,{className:`grid w-full ${(h==null?void 0:h.role)==="DOCTOR"?"grid-cols-4":"grid-cols-3"}`,children:[a.jsx(bi,{value:"ai",className:"text-xs",children:"AI"}),a.jsx(bi,{value:"doctors",className:"text-xs",children:"Doctors"}),(h==null?void 0:h.role)==="DOCTOR"&&a.jsx(bi,{value:"patients",className:"text-xs",children:"Patients"}),a.jsx(bi,{value:"community",className:"text-xs",children:"Community"})]}),a.jsx(wi,{value:"ai",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsx(En,{className:"pb-3",children:a.jsxs(xn,{className:"flex items-center gap-2 text-lg",children:[a.jsx(mm,{className:"h-5 w-5 text-purple-600"}),"CareXpert AI"]})}),a.jsx(jt,{className:"flex-1 overflow-y-auto scrollbar-hide",children:a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${s==="ai"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{i("ai"),v(!1)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:a.jsx(mm,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"AI Assistant"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Always available"})]})]})})})]})}),a.jsx(wi,{value:"doctors",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsx(En,{className:"pb-3",children:a.jsxs(xn,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Vc,{className:"h-5 w-5 text-blue-600"}),"Doctor Chats"]})}),a.jsx(jt,{className:"space-y-3 flex-1 overflow-y-auto scrollbar-hide",children:r.length>0?r.map(se=>a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${typeof s=="object"&&s.type==="doctor"&&s.data.id===se.id?"bg-blue-100 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{i({type:"doctor",data:se}),v(!1)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"relative",children:a.jsxs(ds,{className:"h-10 w-10",children:[a.jsx(bs,{src:se.user.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:se.user.name.split(" ").map(ue=>ue[0]).join("")})]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:se.user.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:se.specialty})]})]})},se.id)):a.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No doctors found."})})]})}),(h==null?void 0:h.role)==="DOCTOR"&&a.jsx(wi,{value:"patients",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsxs(En,{className:"pb-3",children:[a.jsxs(xn,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Pa,{className:"h-5 w-5 text-green-600"}),"Patient Messages"]}),a.jsx(Vn,{children:"Chat with your patients"})]}),a.jsx(jt,{className:"p-0",children:a.jsx("div",{className:"h-[500px] overflow-y-auto scrollbar-hide",children:x.length>0?x.map(se=>a.jsx("div",{className:`p-4 border-b cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${(j==null?void 0:j.otherUser.id)===se.otherUser.id?"bg-green-50 dark:bg-green-900/20 border-l-4 border-l-green-500":""}`,onClick:()=>{Se(se),v(!1)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{className:"h-10 w-10",children:[a.jsx(bs,{src:se.otherUser.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:se.otherUser.name.split(" ").map(ue=>ue[0]).join("")})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:se.otherUser.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:se.lastMessage.message}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(se.lastMessage.timestamp).toLocaleDateString()})]}),se.unreadCount>0&&a.jsx(Ur,{variant:"destructive",className:"text-xs",children:se.unreadCount})]})},se.otherUser.id)):a.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[a.jsx(Pa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No conversations yet"}),a.jsx("p",{className:"text-sm",children:"Patients will appear here when they message you"})]})})})]})}),a.jsx(wi,{value:"community",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsx(En,{className:"pb-3",children:a.jsxs(xn,{className:"flex items-center justify-between text-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pa,{className:"h-5 w-5 text-green-600"}),"City Rooms"]}),a.jsx("div",{children:a.jsx(Uy,{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-8 w-8 p-1"})})]})}),a.jsx(jt,{className:"space-y-3 flex-1 overflow-y-auto scrollbar-hide",children:d.length>0?d.map(se=>a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${typeof s=="object"&&s.type==="room"&&s.name===se.name?"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{i({type:"room",...se}),v(!1)},children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:se.name}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ma,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:se.name})]}),a.jsxs(Ur,{variant:"secondary",className:"text-xs",children:[se.members.length," members"]})]})},se.id)):a.jsx("p",{children:"Loading city rooms..."})})]})})]})]}),a.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsxs(En,{className:"border-b",children:[s==="ai"&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:a.jsx(mm,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx(xn,{className:"text-lg",children:"CareXpert AI Assistant"}),a.jsx(Vn,{children:"Your personal health companion"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(tr,{variant:"outline",size:"sm",onClick:ee,children:[a.jsx(iC,{className:"h-4 w-4 mr-2"}),"Clear Chat"]}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Language:"}),a.jsx("select",{value:O,onChange:se=>M(se.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:L.map(se=>a.jsxs("option",{value:se.code,children:[se.flag," ",se.name]},se.code))})]})]}),typeof s=="object"&&s.type==="doctor"&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{className:"h-10 w-10",children:[a.jsx(bs,{src:s.data.user.profilePicture}),a.jsx(us,{children:s.data.user.name.split(" ").map(se=>se[0]).join("")})]}),a.jsxs("div",{children:[a.jsx(xn,{className:"text-lg",children:s.data.user.name}),a.jsxs(Vn,{children:[s.data.specialty,"  Online"]})]})]}),typeof s=="object"&&s.type==="room"&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:a.jsx(Pa,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx(xn,{className:"text-lg",children:s.name}),a.jsxs(Vn,{children:[s.members.length," members "," ",s.name]})]})]}),a.jsxs(tr,{variant:"outline",size:"sm",onClick:()=>_(!y),className:"flex items-center gap-2",children:[a.jsx(Pa,{className:"h-4 w-4"}),y?"Hide Members":"Show Members"]})]})]}),a.jsx(jt,{className:"flex-1 p-4 overflow-y-auto scrollbar-hide",children:a.jsxs("div",{className:"h-full",children:[s==="ai"&&a.jsxs(a.Fragment,{children:[S.map(se=>a.jsx("div",{className:`flex mb-4 ${se.type==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${se.type==="user"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[se.type==="ai"?a.jsxs("div",{className:"text-sm",children:[se.aiData&&a.jsx("div",{className:"mb-3",children:a.jsxs(Ur,{variant:I(se.aiData.severity)==="severe"?"destructive":I(se.aiData.severity)==="moderate"?"default":"secondary",className:"mb-2",children:[se.aiData.severity.charAt(0).toUpperCase()+se.aiData.severity.slice(1)," ","Severity"]})}),se.message.split(`
`).map((ue,Ce)=>ue.startsWith("**")&&ue.endsWith("**")?a.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-2",children:ue.replace(/\*\*/g,"")},Ce):ue.startsWith("")?a.jsx("div",{className:"ml-4 mb-1",children:ue},Ce):ue.trim()===""?a.jsx("br",{},Ce):a.jsx("div",{className:"mb-2",children:ue},Ce))]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:se.message}),a.jsx("p",{className:`text-xs mt-1 ${se.type==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:se.time})]})},se.id)),P&&a.jsx("div",{className:"flex justify-start mb-4",children:a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white p-3 rounded-lg max-w-[80%]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}),a.jsx("span",{className:"text-sm",children:"AI is analyzing your symptoms..."})]})})})]}),typeof s=="object"&&(s.type==="doctor"||s.type==="room")&&(c.length>0?c.filter(se=>s.type==="room"?!se.roomId||se.roomId===(w||s.id):!0).map((se,ue)=>{var Ce,$e;return a.jsxs("div",{className:`flex mb-2 ${se.type==="user"||se.senderId===(h==null?void 0:h.id)?"justify-end":"justify-start"}`,children:[s.type==="room"&&!(se.type==="user"||se.senderId===(h==null?void 0:h.id))&&a.jsx("div",{className:"mr-2 mt-[2px]",children:a.jsxs(ds,{className:"h-6 w-6",children:[a.jsx(bs,{src:"/placeholder-user.jpg"}),a.jsx(us,{className:"text-[10px]",children:((Ce=se.username)==null?void 0:Ce.charAt(0))||"U"})]})}),a.jsxs("div",{className:`max-w-[80%] py-2 px-[10px] rounded-lg ${se.type==="user"||se.senderId===(h==null?void 0:h.id)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[se.messageType==="IMAGE"&&se.imageUrl?a.jsx("img",{src:se.imageUrl,alt:"sent-img",className:"rounded mb-1 max-w-full h-auto"}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:se.text}),a.jsx("p",{className:"text-xs mt-1 text-right text-gray-400",children:se.time})]}),s.type==="room"&&(se.type==="user"||se.senderId===(h==null?void 0:h.id))&&a.jsx("div",{className:"ml-2 mt-[2px]",children:a.jsxs(ds,{className:"h-6 w-6",children:[a.jsx(bs,{src:h==null?void 0:h.profilePicture}),a.jsx(us,{className:"text-[10px]",children:(($e=h==null?void 0:h.name)==null?void 0:$e.charAt(0))||"U"})]})})]},ue)}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s.type==="doctor"?"Start a conversation with your doctor":"Join the community discussion"})})),a.jsx("div",{ref:C})," "]})}),typeof s=="object"&&s.type==="room"&&y&&a.jsxs("div",{className:"border-t p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Community Members (",b.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-48 overflow-y-auto scrollbar-hide",children:b.map(se=>{var ue;return a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsxs(ds,{className:"h-8 w-8",children:[a.jsx(bs,{src:se.profilePicture}),a.jsx(us,{className:"bg-blue-600 text-white text-sm",children:((ue=se.name)==null?void 0:ue.charAt(0))||"U"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:se.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{variant:se.role==="DOCTOR"?"default":"secondary",className:"text-xs",children:se.role==="DOCTOR"?a.jsxs(a.Fragment,{children:[a.jsx(Dh,{className:"h-3 w-3 mr-1"}),"Doctor"]}):a.jsxs(a.Fragment,{children:[a.jsx(No,{className:"h-3 w-3 mr-1"}),"Patient"]})}),se.specialty&&a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:se.specialty})]}),se.location&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[" ",se.location]})]})]},se.id)})})]}),a.jsx("div",{className:"border-t p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(cs,{placeholder:"Type your message...",value:e,onChange:se=>t(se.target.value),onKeyPress:se=>se.key==="Enter"&&Oe(),className:"flex-1"}),a.jsx(tr,{onClick:Oe,className:"px-6",children:a.jsx(nC,{className:"h-4 w-4"})})]})})]})})]})]})}function F0(){const[e,t]=A.useState(!0),[r,n]=A.useState(!1),[s,i]=A.useState(!1),[c,l]=A.useState(null),[d,o]=A.useState({data:"",password:""}),[p,v]=A.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",specialty:"",clinicLocation:"",location:""}),m=ao(),{setUser:u}=Bs(),b=async g=>{var y,_;g.preventDefault(),i(!0);try{const x=await Ft.post("undefined/api/user/login",d,{withCredentials:!0});if(x.data.success){u(x.data.data),$t.success("Login successful!");const E=x.data.data.role;E==="DOCTOR"?m("/dashboard/doctor"):E==="PATIENT"?m("/dashboard/patient"):E==="ADMIN"&&m("/admin")}}catch(x){$t.error(((_=(y=x.response)==null?void 0:y.data)==null?void 0:_.message)||"Login failed")}finally{i(!1)}},f=async g=>{var y,_;if(g.preventDefault(),p.password!==p.confirmPassword){$t.error("Passwords do not match");return}if(!c){$t.error("Please select a role");return}i(!0);try{const x={firstName:p.firstName,lastName:p.lastName,email:p.email,password:p.password,role:c,...c==="DOCTOR"&&{specialty:p.specialty,clinicLocation:p.clinicLocation},...c==="PATIENT"&&{location:p.location}};(await Ft.post("undefined/api/user/signup",x)).data.success&&($t.success("Signup successful! Please login."),t(!0),v({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",specialty:"",clinicLocation:"",location:""}),l(null))}catch(x){$t.error(((_=(y=x.response)==null?void 0:y.data)==null?void 0:_.message)||"Signup failed")}finally{i(!1)}},w=g=>{l(g),v(y=>({...y,role:g}))};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center",children:a.jsx(Uc,{className:"h-8 w-8 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to CareXpert"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Your health companion for better care"})]}),a.jsxs(Nt,{className:"shadow-xl",children:[a.jsx(En,{children:a.jsx(kh,{value:e?"login":"signup",onValueChange:g=>t(g==="login"),children:a.jsxs(Kh,{className:"grid w-full grid-cols-2",children:[a.jsx(bi,{value:"login",children:"Login"}),a.jsx(bi,{value:"signup",children:"Sign Up"})]})})}),a.jsx(jt,{children:a.jsxs(kh,{value:e?"login":"signup",children:[a.jsx(wi,{value:"login",children:a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"login-data",children:"Email or Username"}),a.jsx(cs,{id:"login-data",type:"text",value:d.data,onChange:g=>o(y=>({...y,data:g.target.value})),placeholder:"Enter your email or username",required:!0})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"login-password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(cs,{id:"login-password",type:r?"text":"password",value:d.password,onChange:g=>o(y=>({...y,password:g.target.value})),placeholder:"Enter your password",required:!0}),a.jsx(tr,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!r),children:r?a.jsx(U1,{className:"h-4 w-4"}):a.jsx(By,{className:"h-4 w-4"})})]})]}),a.jsx(tr,{type:"submit",className:"w-full",disabled:s,children:s?"Signing in...":"Sign In"})]})}),a.jsx(wi,{value:"signup",children:a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(gn,{children:"I want to join as:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[a.jsxs(tr,{type:"button",variant:c==="PATIENT"?"default":"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",onClick:()=>w("PATIENT"),children:[a.jsx(No,{className:"h-6 w-6"}),a.jsx("span",{children:"Patient"})]}),a.jsxs(tr,{type:"button",variant:c==="DOCTOR"?"default":"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",onClick:()=>w("DOCTOR"),children:[a.jsx(Dh,{className:"h-6 w-6"}),a.jsx("span",{children:"Doctor"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"firstName",children:"First Name"}),a.jsx(cs,{id:"firstName",value:p.firstName,onChange:g=>v(y=>({...y,firstName:g.target.value})),placeholder:"John",required:!0})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"lastName",children:"Last Name"}),a.jsx(cs,{id:"lastName",value:p.lastName,onChange:g=>v(y=>({...y,lastName:g.target.value})),placeholder:"Doe",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"email",children:"Email"}),a.jsx(cs,{id:"email",type:"email",value:p.email,onChange:g=>v(y=>({...y,email:g.target.value})),placeholder:"john@example.com",required:!0})]}),c==="DOCTOR"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"specialty",children:"Specialty"}),a.jsxs(Ja,{value:p.specialty,onValueChange:g=>v(y=>({...y,specialty:g})),children:[a.jsx(Na,{children:a.jsx(Qa,{placeholder:"Select your specialty"})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"Cardiology",children:"Cardiology"}),a.jsx(qr,{value:"Dermatology",children:"Dermatology"}),a.jsx(qr,{value:"Neurology",children:"Neurology"}),a.jsx(qr,{value:"Orthopedics",children:"Orthopedics"}),a.jsx(qr,{value:"Pediatrics",children:"Pediatrics"}),a.jsx(qr,{value:"Psychiatry",children:"Psychiatry"}),a.jsx(qr,{value:"General Medicine",children:"General Medicine"}),a.jsx(qr,{value:"Other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"clinicLocation",children:"Clinic Location"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ma,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(cs,{id:"clinicLocation",value:p.clinicLocation,onChange:g=>v(y=>({...y,clinicLocation:g.target.value})),placeholder:"City, State, Country",className:"pl-10",required:!0})]})]})]}),c==="PATIENT"&&a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"location",children:"Location"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ma,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(cs,{id:"location",value:p.location,onChange:g=>v(y=>({...y,location:g.target.value})),placeholder:"City, State, Country",className:"pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(cs,{id:"password",type:r?"text":"password",value:p.password,onChange:g=>v(y=>({...y,password:g.target.value})),placeholder:"Create a password",required:!0}),a.jsx(tr,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!r),children:r?a.jsx(U1,{className:"h-4 w-4"}):a.jsx(By,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"confirmPassword",children:"Confirm Password"}),a.jsx(cs,{id:"confirmPassword",type:"password",value:p.confirmPassword,onChange:g=>v(y=>({...y,confirmPassword:g.target.value})),placeholder:"Confirm your password",required:!0})]}),a.jsx(tr,{type:"submit",className:"w-full",disabled:s||!c,children:s?"Creating account...":"Create Account"})]})})]})})]}),a.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:a.jsx("p",{children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})})}function Xq(){return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Ic,{}),a.jsx("div",{className:"container mx-auto px-4 py-8 pt-16",children:a.jsxs(Hk,{children:[a.jsx(Tr,{path:"login",element:a.jsx(F0,{})}),a.jsx(Tr,{path:"patient/signup",element:a.jsx(F0,{})}),a.jsx(Tr,{path:"doctor/signup",element:a.jsx(F0,{})})]})}),a.jsx(Kl,{})]})}function Zq(){const e=ao(),t=Bs(n=>n.user);return A.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,!1,e]),a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[a.jsxs("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome, ",a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:(t==null?void 0:t.name)||"Patient"}),"!"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your health journey with CareXpert"})]}),a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid md:grid-cols-2 gap-6 mb-8",children:[a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsx(Es,{to:"/chat",children:a.jsx(Nt,{className:"bg-gradient-to-r from-blue-600 to-blue-700 border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",children:a.jsx(jt,{className:"p-8 text-white",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(mm,{className:"h-8 w-8"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Start ChatBot"}),a.jsx("p",{className:"text-blue-100",children:"Get instant answers to your health questions"})]})]})})})})}),a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsx(Es,{to:"/upload-report",children:a.jsx(Nt,{className:"bg-gradient-to-r from-green-600 to-green-700 border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",children:a.jsx(jt,{className:"p-8 text-white",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Dh,{className:"h-8 w-8"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Analyze Report"}),a.jsx("p",{className:"text-green-100",children:"Schedule your next consultation"})]})]})})})})})]}),a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Es,{to:"/prescriptions",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(jt,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(ig,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"View Prescriptions"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Access all your medical prescriptions"})]})})})}),a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Es,{to:"/appointments",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(jt,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(hs,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"View Appointments"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Check your upcoming and past appointments"})]})})})}),a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Es,{to:"/chat",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(jt,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(Vc,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Chat with Bot"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Get quick answers to your health queries"})]})})})}),a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Es,{to:"/doctors",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(jt,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(R3,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Book Appointment"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Schedule a consultation with a doctor"})]})})})})]}),a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8",children:a.jsx(Nt,{className:"bg-gray-50 dark:bg-gray-800 border-0",children:a.jsx(jt,{className:"p-8 text-center",children:a.jsx("blockquote",{className:"text-lg text-gray-700 dark:text-gray-300 italic",children:'"The greatest wealth is health. Taking care of your health today gives you better hope for tomorrow."'})})})}),a.jsx(Qr.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},className:"fixed bottom-6 right-6 z-40",children:a.jsx(Es,{to:"/chat",children:a.jsx(tr,{size:"lg",className:"shadow-lg hover:shadow-xl transition-shadow bg-blue-600 hover:bg-blue-700 flex items-center justify-center",style:{borderRadius:"9999px",width:56,height:56,padding:0,minWidth:0},children:a.jsx(Vc,{className:"h-5 w-5"})})})})]})}function eK(){const e=ao(),t=Bs(m=>m.user),r=!1,[n,s]=A.useState(""),[i,c]=A.useState(""),[l,d]=A.useState([]),[o,p]=A.useState([]),v="undefined/api/doctor";return A.useEffect(()=>{(!t||t.role!=="DOCTOR")&&e("/auth/login")},[t,r,e]),A.useEffect(()=>{async function m(){var u;try{const b=await Ft.get(`${v}/all-appointments`,{withCredentials:!0});if(b.data.success){const f=b.data.data,w=new Date,g=new Date;g.setHours(0,0,0,0);const y=new Date(g);y.setDate(y.getDate()+1);const _=f.filter(E=>{const j=new Date(E.date);return j>=g&&j<y}),x=f.filter(E=>new Date(`${E.date}T${E.time}`)>=w);d(_),p(x)}}catch(b){Ft.isAxiosError(b)&&b.response?$t.error(((u=b.response.data)==null?void 0:u.message)||"Something went wrong"):$t.error("Unknown error occured")}}m()},[]),a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:["Welcome back, ",(t==null?void 0:t.name)||"Doctor","!"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your practice and help your patients"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Today's Appointments"}),a.jsx("p",{className:"text-2xl font-bold dark:text-white",children:l==null?void 0:l.length})]}),a.jsx(hs,{className:"h-8 w-8 text-blue-600"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Patients"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"247"})]}),a.jsx(Pa,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Unread Messages"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"3"})]}),a.jsx(Vc,{className:"h-8 w-8 text-purple-600"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"This Month"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"89"})]}),a.jsx(Ia,{className:"h-8 w-8 text-orange-600"})]})})})]}),a.jsxs(kh,{defaultValue:"appointments",className:"space-y-6",children:[a.jsxs(Kh,{className:"grid w-full grid-cols-3 lg:w-auto lg:grid-cols-3",children:[a.jsxs(bi,{value:"appointments",className:"flex items-center gap-2",children:[a.jsx(hs,{className:"h-4 w-4"}),"Appointments"]}),a.jsxs(bi,{value:"availability",className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-4 w-4"}),"Availability"]}),a.jsxs(bi,{value:"patients",className:"flex items-center gap-2",children:[a.jsx(Pa,{className:"h-4 w-4"}),"Patients"]})]}),a.jsx(wi,{value:"appointments",className:"space-y-6",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(hs,{className:"h-5 w-5 text-blue-600"}),"Today's Appointments"]}),a.jsx(Vn,{children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsx(jt,{className:"space-y-4",children:l.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{children:[a.jsx(bs,{src:m.patient.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:m.patient.name.split(" ").map(u=>u[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:m.patient.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(m.date).toLocaleDateString("en-US")," at ",m.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(Ur,{variant:m.appointmentType==="ONLINE"?"secondary":"default",children:m.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx(Ur,{variant:m.status==="PENDING"?"outline":m.status==="CONFIRMED"?"default":m.status==="COMPLETED"?"secondary":"destructive",children:m.status})]}),m.notes&&a.jsx(Ur,{className:"bg-gray-200 text-black dark:bg-gray-600 dark:text-white/90",children:m.notes})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(Ur,{variant:m.status==="COMPLETED"?"default":m.status==="PENDING"?"secondary":m.status==="CANCELLED"?"destructive":"outline",children:m.status}),a.jsxs(tr,{variant:"outline",size:"sm",children:[a.jsx(sC,{className:"h-4 w-4 mr-2"})," Manage"]})]})]},m.id))})]}),a.jsxs(Nt,{children:[a.jsx(En,{children:a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-5 w-5 text-green-600"}),"Upcoming Appointments"]})}),a.jsx(jt,{className:"space-y-4",children:o==null?void 0:o.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ds,{children:[a.jsx(bs,{src:m.patient.profilePicture||"/placeholder.svg"}),a.jsx(us,{children:m.patient.name.split(" ").map(u=>u[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:m.patient.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(m.date).toLocaleDateString("en-US")," at ",m.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx(Ur,{variant:m.appointmentType==="ONLINE"?"secondary":"default",children:m.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx(Ur,{variant:m.status==="PENDING"?"outline":m.status==="CONFIRMED"?"default":m.status==="COMPLETED"?"secondary":"destructive",children:m.status})]}),m.notes&&a.jsx(Ur,{className:"bg-gray-200 text-black dark:bg-gray-600 dark:text-white/90",children:m.notes})]})]}),a.jsx(Ur,{variant:m.status==="CONFIRMED"?"default":"secondary",children:m.status})]},m.id))})]})]})}),a.jsx(wi,{value:"availability",children:a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsx("p",{children:"Availability tab content placeholder"})})})}),a.jsx(wi,{value:"patients",children:a.jsx(Nt,{children:a.jsx(jt,{className:"p-6",children:a.jsx("p",{children:"Patients tab content placeholder"})})})})]})]})}var d_={exports:{}},uu=typeof Reflect=="object"?Reflect:null,yE=uu&&typeof uu.apply=="function"?uu.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Am;uu&&typeof uu.ownKeys=="function"?Am=uu.ownKeys:Object.getOwnPropertySymbols?Am=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Am=function(t){return Object.getOwnPropertyNames(t)};function tK(e){console&&console.warn&&console.warn(e)}var T6=Number.isNaN||function(t){return t!==t};function Dn(){Dn.init.call(this)}d_.exports=Dn;d_.exports.once=iK;Dn.EventEmitter=Dn;Dn.prototype._events=void 0;Dn.prototype._eventsCount=0;Dn.prototype._maxListeners=void 0;var bE=10;function _v(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Dn,"defaultMaxListeners",{enumerable:!0,get:function(){return bE},set:function(e){if(typeof e!="number"||e<0||T6(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");bE=e}});Dn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||T6(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function P6(e){return e._maxListeners===void 0?Dn.defaultMaxListeners:e._maxListeners}Dn.prototype.getMaxListeners=function(){return P6(this)};Dn.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var l=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw l.context=c,l}var d=i[t];if(d===void 0)return!1;if(typeof d=="function")yE(d,this,r);else for(var o=d.length,p=D6(d,o),n=0;n<o;++n)yE(p[n],this,r);return!0};function N6(e,t,r,n){var s,i,c;if(_v(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),c=i[t]),c===void 0)c=i[t]=r,++e._eventsCount;else if(typeof c=="function"?c=i[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),s=P6(e),s>0&&c.length>s&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,tK(l)}return e}Dn.prototype.addListener=function(t,r){return N6(this,t,r,!1)};Dn.prototype.on=Dn.prototype.addListener;Dn.prototype.prependListener=function(t,r){return N6(this,t,r,!0)};function rK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A6(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=rK.bind(n);return s.listener=r,n.wrapFn=s,s}Dn.prototype.once=function(t,r){return _v(r),this.on(t,A6(this,t,r)),this};Dn.prototype.prependOnceListener=function(t,r){return _v(r),this.prependListener(t,A6(this,t,r)),this};Dn.prototype.removeListener=function(t,r){var n,s,i,c,l;if(_v(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){l=n[c].listener,i=c;break}if(i<0)return this;i===0?n.shift():nK(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,l||r)}return this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),c;for(s=0;s<i.length;++s)c=i[s],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function j6(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?sK(s):D6(s,s.length)}Dn.prototype.listeners=function(t){return j6(this,t,!0)};Dn.prototype.rawListeners=function(t){return j6(this,t,!1)};Dn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):O6.call(e,t)};Dn.prototype.listenerCount=O6;function O6(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Dn.prototype.eventNames=function(){return this._eventsCount>0?Am(this._events):[]};function D6(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function nK(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function sK(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function iK(e,t){return new Promise(function(r,n){function s(c){e.removeListener(t,i),n(c)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}I6(e,t,i,{once:!0}),t!=="error"&&aK(e,s,{once:!0})})}function aK(e,t,r){typeof e.on=="function"&&I6(e,"error",t,r)}function I6(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var oK=d_.exports;const cK=Wb(oK);var M6={exports:{}};(function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(n,s){e.exports=s()})(self,()=>(()=>{var n={11:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Chrome74=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),w=o(4256),g=o(4893),y=o(521),_=o(1305),x=o(3303),E=new v.Logger("Chrome74"),j={OS:1024,MIS:1024};class R extends y.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new R}get name(){return"Chrome74"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{h.addTransceiver("audio"),h.addTransceiver("video");const S=await h.createOffer();try{h.close()}catch{}const k=p.parse(S.sdp),P=b.extractRtpCapabilities({sdpObject:k});return w.addNackSupportForOpus(P),P}catch(S){try{h.close()}catch{}throw S}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:j}}run({direction:h,iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N,iceServers:O,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){E.debug("run()"),this._direction=h,this._remoteSdp=new _.RemoteSdp({iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=h,this._pc.setConfiguration(S)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:S,codecOptions:k,codec:P}){this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),S&&S.length>1&&S.forEach((xe,Se)=>{xe.rid=`r${Se}`});const N=m.clone(this._sendingRtpParametersByKind[h.kind]);N.codecs=u.reduceCodecs(N.codecs,P);const O=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);O.codecs=u.reduceCodecs(O.codecs,P);const D=this._remoteSdp.getNextMediaSectionIdx(),L=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:S});let M,I=await this._pc.createOffer(),G=p.parse(I.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G});let de=!1;const ee=(0,x.parse)((S??[{}])[0].scalabilityMode);S&&S.length===1&&ee.spatialLayers>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(E.debug("send() | enabling legacy simulcast for VP9 SVC"),de=!0,G=p.parse(I.sdp),M=G.media[D.idx],f.addLegacySimulcast({offerMediaObject:M,numStreams:ee.spatialLayers}),I={type:"offer",sdp:p.write(G)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const Q=L.mid;if(N.mid=Q,G=p.parse(this._pc.localDescription.sdp),M=G.media[D.idx],N.rtcp.cname=b.getCname({offerMediaObject:M}),S)if(S.length===1){let xe=f.getRtpEncodings({offerMediaObject:M});Object.assign(xe[0],S[0]),de&&(xe=[xe[0]]),N.encodings=xe}else N.encodings=S;else N.encodings=f.getRtpEncodings({offerMediaObject:M});if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const xe of N.encodings)xe.scalabilityMode?xe.scalabilityMode=`L1T${ee.temporalLayers}`:xe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:M,reuseMid:D.reuseMid,offerRtpParameters:N,answerRtpParameters:O,codecOptions:k});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._mapMidTransceiver.set(Q,L),{localId:Q,rtpParameters:N,rtpSender:L.sender}}async stopSending(h){if(this.assertSendDirection(),E.debug("stopSending() [localId:%s]",h),this._closed)return;const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");if(S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.closeMediaSection(S.mid))try{S.stop()}catch{}const k=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(h);const k=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(this._remoteSdp.resumeSendingMediaSection(h),!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="sendonly";const k=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,S){this.assertNotClosed(),this.assertSendDirection(),S?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,S.id):E.debug("replaceTrack() [localId:%s, no track]",h);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");await k.sender.replaceTrack(S)}async setMaxSpatialLayer(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=S}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...S}}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:S,maxRetransmits:k,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:S,maxRetransmits:k,protocol:N};E.debug("sendDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(P,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%j.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const S=[],k=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);k.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);let N=await this._pc.createAnswer();const O=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=k.get(L),G=O.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=k.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),S.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return S}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:S,protocol:k}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D,protocol:k};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(S,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:S}){S||(S=p.parse(this._pc.localDescription.sdp));const k=b.extractDtlsParameters({sdpObject:S});k.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:k},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Chrome74=R},19:function(l,d,o){var p,v,m,u,b,f,w,g,y;l.exports=(y=o(9021),o(3009),o(1025),v=(p=y).lib,m=v.Base,u=v.WordArray,b=p.algo,f=b.SHA256,w=b.HMAC,g=b.PBKDF2=m.extend({cfg:m.extend({keySize:4,hasher:f,iterations:25e4}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,x){for(var E=this.cfg,j=w.create(E.hasher,_),R=u.create(),C=u.create([1]),T=R.words,h=C.words,S=E.keySize,k=E.iterations;T.length<S;){var P=j.update(x).finalize(C);j.reset();for(var N=P.words,O=N.length,D=P,L=1;L<k;L++){D=j.finalize(D),j.reset();for(var M=D.words,I=0;I<O;I++)N[I]^=M[I]}R.concat(P),h[0]++}return R.sigBytes=4*S,R}}),p.PBKDF2=function(_,x,E){return g.create(E).compute(_,x)},y.PBKDF2)},25:function(l,d,o){var p,v,m,u;l.exports=(u=o(9021),o(7165),v=(p=u).lib.CipherParams,m=p.enc.Hex,p.format.Hex={stringify:function(b){return b.ciphertext.toString(m)},parse:function(b){var f=m.parse(b);return v.create({ciphertext:f})}},u.format.Hex)},76:(l,d,o)=>{d.s$=d.pF=void 0,o(7833).default,o(8057);var p=o(6004);Object.defineProperty(d,"pF",{enumerable:!0,get:function(){return p.Device}});var v=o(3303);Object.defineProperty(d,"s$",{enumerable:!0,get:function(){return v.parse}}),o(8046),o(2731),o(5248)},182:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.version=d.validate=d.v7=d.v6ToV1=d.v6=d.v5=d.v4=d.v3=d.v1ToV6=d.v1=d.stringify=d.parse=d.NIL=d.MAX=void 0;var p=o(2196);Object.defineProperty(d,"MAX",{enumerable:!0,get:function(){return p.default}});var v=o(3465);Object.defineProperty(d,"NIL",{enumerable:!0,get:function(){return v.default}});var m=o(1797);Object.defineProperty(d,"parse",{enumerable:!0,get:function(){return m.default}});var u=o(6011);Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return u.default}});var b=o(1425);Object.defineProperty(d,"v1",{enumerable:!0,get:function(){return b.default}});var f=o(6568);Object.defineProperty(d,"v1ToV6",{enumerable:!0,get:function(){return f.default}});var w=o(591);Object.defineProperty(d,"v3",{enumerable:!0,get:function(){return w.default}});var g=o(8286);Object.defineProperty(d,"v4",{enumerable:!0,get:function(){return g.default}});var y=o(4557);Object.defineProperty(d,"v5",{enumerable:!0,get:function(){return y.default}});var _=o(6356);Object.defineProperty(d,"v6",{enumerable:!0,get:function(){return _.default}});var x=o(268);Object.defineProperty(d,"v6ToV1",{enumerable:!0,get:function(){return x.default}});var E=o(4299);Object.defineProperty(d,"v7",{enumerable:!0,get:function(){return E.default}});var j=o(9746);Object.defineProperty(d,"validate",{enumerable:!0,get:function(){return j.default}});var R=o(2770);Object.defineProperty(d,"version",{enumerable:!0,get:function(){return R.default}})},268:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(1797),v=o(6011);d.default=function(m){const u=function(b){return Uint8Array.of((15&b[3])<<4|b[4]>>4&15,(15&b[4])<<4|(240&b[5])>>4,(15&b[5])<<4|15&b[6],b[7],(15&b[1])<<4|(240&b[2])>>4,(15&b[2])<<4|(240&b[3])>>4,16|(240&b[0])>>4,(15&b[0])<<4|(240&b[1])>>4,b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}(typeof m=="string"?(0,p.default)(m):m);return typeof m=="string"?(0,v.unsafeStringify)(u):u}},296:(l,d,o)=>{o.d(d,{A:()=>v});var p=o(7800);function v(m,u){return function(b){if(Array.isArray(b))return b}(m)||function(b,f){var w=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(w!=null){var g,y,_,x,E=[],j=!0,R=!1;try{if(_=(w=w.call(b)).next,f===0){if(Object(w)!==w)return;j=!1}else for(;!(j=(g=_.call(w)).done)&&(E.push(g.value),E.length!==f);j=!0);}catch(C){R=!0,y=C}finally{try{if(!j&&w.return!=null&&(x=w.return(),Object(x)!==x))return}finally{if(R)throw y}}return E}}(m,u)||(0,p.A)(m,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(l,d,o)=>{o(8624),l.exports=self.fetch.bind(self)},338:(l,d)=>{function o(w){return 14+(w+64>>>9<<4)+1}function p(w,g){const y=(65535&w)+(65535&g);return(w>>16)+(g>>16)+(y>>16)<<16|65535&y}function v(w,g,y,_,x,E){return p((j=p(p(g,w),p(_,E)))<<(R=x)|j>>>32-R,y);var j,R}function m(w,g,y,_,x,E,j){return v(g&y|~g&_,w,g,x,E,j)}function u(w,g,y,_,x,E,j){return v(g&_|y&~_,w,g,x,E,j)}function b(w,g,y,_,x,E,j){return v(g^y^_,w,g,x,E,j)}function f(w,g,y,_,x,E,j){return v(y^(g|~_),w,g,x,E,j)}Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(w){return function(g){const y=new Uint8Array(4*g.length);for(let _=0;_<4*g.length;_++)y[_]=g[_>>2]>>>_%4*8&255;return y}(function(g,y){const _=new Uint32Array(o(y)).fill(0);_.set(g),_[y>>5]|=128<<y%32,_[_.length-1]=y,g=_;let x=1732584193,E=-271733879,j=-1732584194,R=271733878;for(let C=0;C<g.length;C+=16){const T=x,h=E,S=j,k=R;x=m(x,E,j,R,g[C],7,-680876936),R=m(R,x,E,j,g[C+1],12,-389564586),j=m(j,R,x,E,g[C+2],17,606105819),E=m(E,j,R,x,g[C+3],22,-1044525330),x=m(x,E,j,R,g[C+4],7,-176418897),R=m(R,x,E,j,g[C+5],12,1200080426),j=m(j,R,x,E,g[C+6],17,-1473231341),E=m(E,j,R,x,g[C+7],22,-45705983),x=m(x,E,j,R,g[C+8],7,1770035416),R=m(R,x,E,j,g[C+9],12,-1958414417),j=m(j,R,x,E,g[C+10],17,-42063),E=m(E,j,R,x,g[C+11],22,-1990404162),x=m(x,E,j,R,g[C+12],7,1804603682),R=m(R,x,E,j,g[C+13],12,-40341101),j=m(j,R,x,E,g[C+14],17,-1502002290),E=m(E,j,R,x,g[C+15],22,1236535329),x=u(x,E,j,R,g[C+1],5,-165796510),R=u(R,x,E,j,g[C+6],9,-1069501632),j=u(j,R,x,E,g[C+11],14,643717713),E=u(E,j,R,x,g[C],20,-373897302),x=u(x,E,j,R,g[C+5],5,-701558691),R=u(R,x,E,j,g[C+10],9,38016083),j=u(j,R,x,E,g[C+15],14,-660478335),E=u(E,j,R,x,g[C+4],20,-405537848),x=u(x,E,j,R,g[C+9],5,568446438),R=u(R,x,E,j,g[C+14],9,-1019803690),j=u(j,R,x,E,g[C+3],14,-187363961),E=u(E,j,R,x,g[C+8],20,1163531501),x=u(x,E,j,R,g[C+13],5,-1444681467),R=u(R,x,E,j,g[C+2],9,-51403784),j=u(j,R,x,E,g[C+7],14,1735328473),E=u(E,j,R,x,g[C+12],20,-1926607734),x=b(x,E,j,R,g[C+5],4,-378558),R=b(R,x,E,j,g[C+8],11,-2022574463),j=b(j,R,x,E,g[C+11],16,1839030562),E=b(E,j,R,x,g[C+14],23,-35309556),x=b(x,E,j,R,g[C+1],4,-1530992060),R=b(R,x,E,j,g[C+4],11,1272893353),j=b(j,R,x,E,g[C+7],16,-155497632),E=b(E,j,R,x,g[C+10],23,-1094730640),x=b(x,E,j,R,g[C+13],4,681279174),R=b(R,x,E,j,g[C],11,-358537222),j=b(j,R,x,E,g[C+3],16,-722521979),E=b(E,j,R,x,g[C+6],23,76029189),x=b(x,E,j,R,g[C+9],4,-640364487),R=b(R,x,E,j,g[C+12],11,-421815835),j=b(j,R,x,E,g[C+15],16,530742520),E=b(E,j,R,x,g[C+2],23,-995338651),x=f(x,E,j,R,g[C],6,-198630844),R=f(R,x,E,j,g[C+7],10,1126891415),j=f(j,R,x,E,g[C+14],15,-1416354905),E=f(E,j,R,x,g[C+5],21,-57434055),x=f(x,E,j,R,g[C+12],6,1700485571),R=f(R,x,E,j,g[C+3],10,-1894986606),j=f(j,R,x,E,g[C+10],15,-1051523),E=f(E,j,R,x,g[C+1],21,-2054922799),x=f(x,E,j,R,g[C+8],6,1873313359),R=f(R,x,E,j,g[C+15],10,-30611744),j=f(j,R,x,E,g[C+6],15,-1560198380),E=f(E,j,R,x,g[C+13],21,1309151649),x=f(x,E,j,R,g[C+4],6,-145523070),R=f(R,x,E,j,g[C+11],10,-1120210379),j=f(j,R,x,E,g[C+2],15,718787259),E=f(E,j,R,x,g[C+9],21,-343485551),x=p(x,T),E=p(E,h),j=p(j,S),R=p(R,k)}return Uint32Array.of(x,E,j,R)}(function(g){if(g.length===0)return new Uint32Array;const y=new Uint32Array(o(8*g.length)).fill(0);for(let _=0;_<g.length;_++)y[_>>2]|=(255&g[_])<<_%4*8;return y}(w),8*w.length))}},388:(l,d,o)=>{o.d(d,{A:()=>v});var p=o(2284);function v(m,u){if(u&&((0,p.A)(u)=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(m)}},467:(l,d,o)=>{function p(m,u,b,f,w,g,y){try{var _=m[g](y),x=_.value}catch(E){return void b(E)}_.done?u(x):Promise.resolve(x).then(f,w)}function v(m){return function(){var u=this,b=arguments;return new Promise(function(f,w){var g=m.apply(u,b);function y(x){p(g,f,w,y,_,"next",x)}function _(x){p(g,f,w,y,_,"throw",x)}y(void 0)})}}o.d(d,{A:()=>v})},477:()=>{},482:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.pad.Iso97971={pad:function(v,m){v.concat(p.lib.WordArray.create([2147483648],1)),p.pad.ZeroPadding.pad(v,m)},unpad:function(v){p.pad.ZeroPadding.unpad(v),v.sigBytes--}},p.pad.Iso97971)},521:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.HandlerInterface=void 0;const p=o(3953);class v extends p.EnhancedEventEmitter{constructor(){super()}}d.HandlerInterface=v},591:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.URL=d.DNS=void 0;const p=o(338),v=o(2988);var m=o(2988);function u(b,f,w,g){return(0,v.default)(48,p.default,b,f,w,g)}Object.defineProperty(d,"DNS",{enumerable:!0,get:function(){return m.DNS}}),Object.defineProperty(d,"URL",{enumerable:!0,get:function(){return m.URL}}),u.DNS=v.DNS,u.URL=v.URL,d.default=u},736:(l,d,o)=>{l.exports=function(p){function v(b){let f,w,g,y=null;function _(...x){if(!_.enabled)return;const E=_,j=Number(new Date),R=j-(f||j);E.diff=R,E.prev=f,E.curr=j,f=j,x[0]=v.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let C=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(T,h)=>{if(T==="%%")return"%";C++;const S=v.formatters[h];if(typeof S=="function"){const k=x[C];T=S.call(E,k),x.splice(C,1),C--}return T}),v.formatArgs.call(E,x),(E.log||v.log).apply(E,x)}return _.namespace=b,_.useColors=v.useColors(),_.color=v.selectColor(b),_.extend=m,_.destroy=v.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(w!==v.namespaces&&(w=v.namespaces,g=v.enabled(b)),g),set:x=>{y=x}}),typeof v.init=="function"&&v.init(_),_}function m(b,f){const w=v(this.namespace+(f===void 0?":":f)+b);return w.log=this.log,w}function u(b,f){let w=0,g=0,y=-1,_=0;for(;w<b.length;)if(g<f.length&&(f[g]===b[w]||f[g]==="*"))f[g]==="*"?(y=g,_=w,g++):(w++,g++);else{if(y===-1)return!1;g=y+1,_++,w=_}for(;g<f.length&&f[g]==="*";)g++;return g===f.length}return v.debug=v,v.default=v,v.coerce=function(b){return b instanceof Error?b.stack||b.message:b},v.disable=function(){const b=[...v.names,...v.skips.map(f=>"-"+f)].join(",");return v.enable(""),b},v.enable=function(b){v.save(b),v.namespaces=b,v.names=[],v.skips=[];const f=(typeof b=="string"?b:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const w of f)w[0]==="-"?v.skips.push(w.slice(1)):v.names.push(w)},v.enabled=function(b){for(const f of v.skips)if(u(b,f))return!1;for(const f of v.names)if(u(b,f))return!0;return!1},v.humanize=o(6585),v.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(p).forEach(b=>{v[b]=p[b]}),v.names=[],v.skips=[],v.formatters={},v.selectColor=function(b){let f=0;for(let w=0;w<b.length;w++)f=(f<<5)-f+b.charCodeAt(w),f|=0;return v.colors[Math.abs(f)%v.colors.length]},v.enable(v.load()),v}},754:function(l,d,o){var p;l.exports=(p=o(9021),function(){var v=p,m=v.lib.WordArray;function u(b,f,w){for(var g=[],y=0,_=0;_<f;_++)if(_%4){var x=w[b.charCodeAt(_-1)]<<_%4*2|w[b.charCodeAt(_)]>>>6-_%4*2;g[y>>>2]|=x<<24-y%4*8,y++}return m.create(g,y)}v.enc.Base64={stringify:function(b){var f=b.words,w=b.sigBytes,g=this._map;b.clamp();for(var y=[],_=0;_<w;_+=3)for(var x=(f[_>>>2]>>>24-_%4*8&255)<<16|(f[_+1>>>2]>>>24-(_+1)%4*8&255)<<8|f[_+2>>>2]>>>24-(_+2)%4*8&255,E=0;E<4&&_+.75*E<w;E++)y.push(g.charAt(x>>>6*(3-E)&63));var j=g.charAt(64);if(j)for(;y.length%4;)y.push(j);return y.join("")},parse:function(b){var f=b.length,w=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var y=0;y<w.length;y++)g[w.charCodeAt(y)]=y}var _=w.charAt(64);if(_){var x=b.indexOf(_);x!==-1&&(f=x)}return u(b,f,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),p.enc.Base64)},816:(l,d,o)=>{o.d(d,{A:()=>v});var p=o(2284);function v(m){var u=function(b,f){if((0,p.A)(b)!="object"||!b)return b;var w=b[Symbol.toPrimitive];if(w!==void 0){var g=w.call(b,f);if((0,p.A)(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(b)}(m,"string");return(0,p.A)(u)=="symbol"?u:u+""}},955:function(l,d,o){var p;l.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var v=p,m=v.lib.BlockCipher,u=v.algo,b=[],f=[],w=[],g=[],y=[],_=[],x=[],E=[],j=[],R=[];(function(){for(var h=[],S=0;S<256;S++)h[S]=S<128?S<<1:S<<1^283;var k=0,P=0;for(S=0;S<256;S++){var N=P^P<<1^P<<2^P<<3^P<<4;N=N>>>8^255&N^99,b[k]=N,f[N]=k;var O=h[k],D=h[O],L=h[D],M=257*h[N]^16843008*N;w[k]=M<<24|M>>>8,g[k]=M<<16|M>>>16,y[k]=M<<8|M>>>24,_[k]=M,M=16843009*L^65537*D^257*O^16843008*k,x[N]=M<<24|M>>>8,E[N]=M<<16|M>>>16,j[N]=M<<8|M>>>24,R[N]=M,k?(k=O^h[h[h[L^O]]],P^=h[h[P]]):k=P=1}})();var C=[0,1,2,4,8,16,32,64,128,27,54],T=u.AES=m.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var h=this._keyPriorReset=this._key,S=h.words,k=h.sigBytes/4,P=4*((this._nRounds=k+6)+1),N=this._keySchedule=[],O=0;O<P;O++)O<k?N[O]=S[O]:(M=N[O-1],O%k?k>6&&O%k==4&&(M=b[M>>>24]<<24|b[M>>>16&255]<<16|b[M>>>8&255]<<8|b[255&M]):(M=b[(M=M<<8|M>>>24)>>>24]<<24|b[M>>>16&255]<<16|b[M>>>8&255]<<8|b[255&M],M^=C[O/k|0]<<24),N[O]=N[O-k]^M);for(var D=this._invKeySchedule=[],L=0;L<P;L++){if(O=P-L,L%4)var M=N[O];else M=N[O-4];D[L]=L<4||O<=4?M:x[b[M>>>24]]^E[b[M>>>16&255]]^j[b[M>>>8&255]]^R[b[255&M]]}}},encryptBlock:function(h,S){this._doCryptBlock(h,S,this._keySchedule,w,g,y,_,b)},decryptBlock:function(h,S){var k=h[S+1];h[S+1]=h[S+3],h[S+3]=k,this._doCryptBlock(h,S,this._invKeySchedule,x,E,j,R,f),k=h[S+1],h[S+1]=h[S+3],h[S+3]=k},_doCryptBlock:function(h,S,k,P,N,O,D,L){for(var M=this._nRounds,I=h[S]^k[0],G=h[S+1]^k[1],de=h[S+2]^k[2],ee=h[S+3]^k[3],Q=4,ae=1;ae<M;ae++){var xe=P[I>>>24]^N[G>>>16&255]^O[de>>>8&255]^D[255&ee]^k[Q++],Se=P[G>>>24]^N[de>>>16&255]^O[ee>>>8&255]^D[255&I]^k[Q++],ie=P[de>>>24]^N[ee>>>16&255]^O[I>>>8&255]^D[255&G]^k[Q++],We=P[ee>>>24]^N[I>>>16&255]^O[G>>>8&255]^D[255&de]^k[Q++];I=xe,G=Se,de=ie,ee=We}xe=(L[I>>>24]<<24|L[G>>>16&255]<<16|L[de>>>8&255]<<8|L[255&ee])^k[Q++],Se=(L[G>>>24]<<24|L[de>>>16&255]<<16|L[ee>>>8&255]<<8|L[255&I])^k[Q++],ie=(L[de>>>24]<<24|L[ee>>>16&255]<<16|L[I>>>8&255]<<8|L[255&G])^k[Q++],We=(L[ee>>>24]<<24|L[I>>>16&255]<<16|L[G>>>8&255]<<8|L[255&de])^k[Q++],h[S]=xe,h[S+1]=Se,h[S+2]=ie,h[S+3]=We},keySize:8});v.AES=m._createHelper(T)}(),p.AES)},1025:function(l,d,o){var p,v,m,u;l.exports=(p=o(9021),m=(v=p).lib.Base,u=v.enc.Utf8,void(v.algo.HMAC=m.extend({init:function(b,f){b=this._hasher=new b.init,typeof f=="string"&&(f=u.parse(f));var w=b.blockSize,g=4*w;f.sigBytes>g&&(f=b.finalize(f)),f.clamp();for(var y=this._oKey=f.clone(),_=this._iKey=f.clone(),x=y.words,E=_.words,j=0;j<w;j++)x[j]^=1549556828,E[j]^=909522486;y.sigBytes=_.sigBytes=g,this.reset()},reset:function(){var b=this._hasher;b.reset(),b.update(this._iKey)},update:function(b){return this._hasher.update(b),this},finalize:function(b){var f=this._hasher,w=f.finalize(b);return f.reset(),f.finalize(this._oKey.clone().concat(w))}})))},1305:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.RemoteSdp=void 0;const p=o(7363),v=o(2994),m=o(3471),u=new v.Logger("RemoteSdp");d.RemoteSdp=class{constructor({iceParameters:b,iceCandidates:f,dtlsParameters:w,sctpParameters:g,plainRtpParameters:y,planB:_=!1}){we(this,"_iceParameters");we(this,"_iceCandidates");we(this,"_dtlsParameters");we(this,"_sctpParameters");we(this,"_plainRtpParameters");we(this,"_planB");we(this,"_mediaSections",[]);we(this,"_midToIndex",new Map);we(this,"_firstMid");we(this,"_sdpObject");if(this._iceParameters=b,this._iceCandidates=f,this._dtlsParameters=w,this._sctpParameters=g,this._plainRtpParameters=y,this._planB=_,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},b!=null&&b.iceLite&&(this._sdpObject.icelite="ice-lite"),w){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const x=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:w.fingerprints[x-1].algorithm,hash:w.fingerprints[x-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}y&&(this._sdpObject.origin.address=y.ip,this._sdpObject.origin.ipVer=y.ipVersion)}updateIceParameters(b){u.debug("updateIceParameters() [iceParameters:%o]",b),this._iceParameters=b,this._sdpObject.icelite=b.iceLite?"ice-lite":void 0;for(const f of this._mediaSections)f.setIceParameters(b)}updateDtlsRole(b){u.debug("updateDtlsRole() [role:%s]",b),this._dtlsParameters.role=b;for(const f of this._mediaSections)f.setDtlsRole(b)}setSessionExtmapAllowMixed(){u.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let b=0;b<this._mediaSections.length;++b){const f=this._mediaSections[b];if(f.closed)return{idx:b,reuseMid:f.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:b,reuseMid:f,offerRtpParameters:w,answerRtpParameters:g,codecOptions:y}){const _=new m.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:b,offerRtpParameters:w,answerRtpParameters:g,codecOptions:y});f?this._replaceMediaSection(_,f):this._midToIndex.has(_.mid)?this._replaceMediaSection(_):this._addMediaSection(_)}receive({mid:b,kind:f,offerRtpParameters:w,streamId:g,trackId:y}){const _=this._midToIndex.get(b);let x;if(_!==void 0&&(x=this._mediaSections[_]),this.setSessionExtmapAllowMixed(),x)x.planBReceive({offerRtpParameters:w,streamId:g,trackId:y}),this._replaceMediaSection(x);else{x=new m.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:b,kind:f,offerRtpParameters:w,streamId:g,trackId:y});const E=this._mediaSections.find(j=>j.closed);E?this._replaceMediaSection(x,E.mid):this._addMediaSection(x)}}pauseMediaSection(b){this._findMediaSection(b).pause()}resumeSendingMediaSection(b){this._findMediaSection(b).resume()}resumeReceivingMediaSection(b){this._findMediaSection(b).resume()}disableMediaSection(b){this._findMediaSection(b).disable()}closeMediaSection(b){const f=this._findMediaSection(b);return b===this._firstMid?(u.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",b),this.disableMediaSection(b),!1):(f.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(b,f){const w=this._findMediaSection(b);w.muxSimulcastStreams(f),this._replaceMediaSection(w)}planBStopReceiving({mid:b,offerRtpParameters:f}){const w=this._findMediaSection(b);w.planBStopReceiving({offerRtpParameters:f}),this._replaceMediaSection(w)}sendSctpAssociation({offerMediaObject:b}){const f=new m.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:b});this._addMediaSection(f)}receiveSctpAssociation({oldDataChannelSpec:b=!1}={}){const f=new m.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:b});this._addMediaSection(f)}getSdp(){return this._sdpObject.origin.sessionVersion++,p.write(this._sdpObject)}_addMediaSection(b){this._firstMid||(this._firstMid=b.mid),this._mediaSections.push(b),this._midToIndex.set(b.mid,this._mediaSections.length-1),this._sdpObject.media.push(b.getObject()),this._regenerateBundleMids()}_replaceMediaSection(b,f){if(typeof f=="string"){const w=this._midToIndex.get(f);if(w===void 0)throw new Error(`no media section found for reuseMid '${f}'`);const g=this._mediaSections[w];this._mediaSections[w]=b,this._midToIndex.delete(g.mid),this._midToIndex.set(b.mid,w),this._sdpObject.media[w]=b.getObject(),this._regenerateBundleMids()}else{const w=this._midToIndex.get(b.mid);if(w===void 0)throw new Error(`no media section found with mid '${b.mid}'`);this._mediaSections[w]=b,this._sdpObject.media[w]=b.getObject()}}_findMediaSection(b){const f=this._midToIndex.get(b);if(f===void 0)throw new Error(`no media section found with mid '${b}'`);return this._mediaSections[f]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(b=>!b.closed).map(b=>b.mid).join(" "))}}},1380:function(l,d,o){var p;l.exports=(p=o(9021),o(3240),function(){var v=p,m=v.lib.Hasher,u=v.x64,b=u.Word,f=u.WordArray,w=v.algo;function g(){return b.create.apply(b,arguments)}var y=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],_=[];(function(){for(var E=0;E<80;E++)_[E]=g()})();var x=w.SHA512=m.extend({_doReset:function(){this._hash=new f.init([new b.init(1779033703,4089235720),new b.init(3144134277,2227873595),new b.init(1013904242,4271175723),new b.init(2773480762,1595750129),new b.init(1359893119,2917565137),new b.init(2600822924,725511199),new b.init(528734635,4215389547),new b.init(1541459225,327033209)])},_doProcessBlock:function(E,j){for(var R=this._hash.words,C=R[0],T=R[1],h=R[2],S=R[3],k=R[4],P=R[5],N=R[6],O=R[7],D=C.high,L=C.low,M=T.high,I=T.low,G=h.high,de=h.low,ee=S.high,Q=S.low,ae=k.high,xe=k.low,Se=P.high,ie=P.low,We=N.high,Oe=N.low,se=O.high,ue=O.low,Ce=D,$e=L,Wt=M,er=I,wt=G,Er=de,yr=ee,Ot=Q,nn=ae,Dt=xe,Xt=Se,Gr=ie,dn=We,Mr=Oe,Yr=se,un=ue,Mt=0;Mt<80;Mt++){var pn,sn,zr=_[Mt];if(Mt<16)sn=zr.high=0|E[j+2*Mt],pn=zr.low=0|E[j+2*Mt+1];else{var Lr=_[Mt-15],_n=Lr.high,Xr=Lr.low,Pn=(_n>>>1|Xr<<31)^(_n>>>8|Xr<<24)^_n>>>7,Sn=(Xr>>>1|_n<<31)^(Xr>>>8|_n<<24)^(Xr>>>7|_n<<25),In=_[Mt-2],Nn=In.high,zt=In.low,Mn=(Nn>>>19|zt<<13)^(Nn<<3|zt>>>29)^Nn>>>6,ns=(zt>>>19|Nn<<13)^(zt<<3|Nn>>>29)^(zt>>>6|Nn<<26),hn=_[Mt-7],or=hn.high,Ye=hn.low,Me=_[Mt-16],ot=Me.high,Le=Me.low;sn=(sn=(sn=Pn+or+((pn=Sn+Ye)>>>0<Sn>>>0?1:0))+Mn+((pn+=ns)>>>0<ns>>>0?1:0))+ot+((pn+=Le)>>>0<Le>>>0?1:0),zr.high=sn,zr.low=pn}var lt,cr=nn&Xt^~nn&dn,De=Dt&Gr^~Dt&Mr,Zt=Ce&Wt^Ce&wt^Wt&wt,Vt=$e&er^$e&Er^er&Er,br=(Ce>>>28|$e<<4)^(Ce<<30|$e>>>2)^(Ce<<25|$e>>>7),hr=($e>>>28|Ce<<4)^($e<<30|Ce>>>2)^($e<<25|Ce>>>7),Pr=(nn>>>14|Dt<<18)^(nn>>>18|Dt<<14)^(nn<<23|Dt>>>9),Xe=(Dt>>>14|nn<<18)^(Dt>>>18|nn<<14)^(Dt<<23|nn>>>9),Kt=y[Mt],Tt=Kt.high,Ht=Kt.low,Fr=Yr+Pr+((lt=un+Xe)>>>0<un>>>0?1:0),Nr=hr+Vt;Yr=dn,un=Mr,dn=Xt,Mr=Gr,Xt=nn,Gr=Dt,nn=yr+(Fr=(Fr=(Fr=Fr+cr+((lt+=De)>>>0<De>>>0?1:0))+Tt+((lt+=Ht)>>>0<Ht>>>0?1:0))+sn+((lt+=pn)>>>0<pn>>>0?1:0))+((Dt=Ot+lt|0)>>>0<Ot>>>0?1:0)|0,yr=wt,Ot=Er,wt=Wt,Er=er,Wt=Ce,er=$e,Ce=Fr+(br+Zt+(Nr>>>0<hr>>>0?1:0))+(($e=lt+Nr|0)>>>0<lt>>>0?1:0)|0}L=C.low=L+$e,C.high=D+Ce+(L>>>0<$e>>>0?1:0),I=T.low=I+er,T.high=M+Wt+(I>>>0<er>>>0?1:0),de=h.low=de+Er,h.high=G+wt+(de>>>0<Er>>>0?1:0),Q=S.low=Q+Ot,S.high=ee+yr+(Q>>>0<Ot>>>0?1:0),xe=k.low=xe+Dt,k.high=ae+nn+(xe>>>0<Dt>>>0?1:0),ie=P.low=ie+Gr,P.high=Se+Xt+(ie>>>0<Gr>>>0?1:0),Oe=N.low=Oe+Mr,N.high=We+dn+(Oe>>>0<Mr>>>0?1:0),ue=O.low=ue+un,O.high=se+Yr+(ue>>>0<un>>>0?1:0)},_doFinalize:function(){var E=this._data,j=E.words,R=8*this._nDataBytes,C=8*E.sigBytes;return j[C>>>5]|=128<<24-C%32,j[30+(C+128>>>10<<5)]=Math.floor(R/4294967296),j[31+(C+128>>>10<<5)]=R,E.sigBytes=4*j.length,this._process(),this._hash.toX32()},clone:function(){var E=m.clone.call(this);return E._hash=this._hash.clone(),E},blockSize:32});v.SHA512=m._createHelper(x),v.HmacSHA512=m._createHmacHelper(x)}(),p.SHA512)},1396:function(l,d,o){var p;l.exports=(p=o(9021),o(3240),o(6440),o(5503),o(754),o(4725),o(4636),o(5471),o(3009),o(6308),o(1380),o(9557),o(5953),o(8056),o(1025),o(19),o(9506),o(7165),o(2169),o(6939),o(6372),o(3797),o(8454),o(2073),o(4905),o(482),o(2155),o(8124),o(25),o(955),o(7628),o(7193),o(6298),o(2696),o(3128),p)},1425:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.updateV1State=void 0;const p=o(2291),v=o(6011),m={};function u(f,w,g){return f.msecs??(f.msecs=-1/0),f.nsecs??(f.nsecs=0),w===f.msecs?(f.nsecs++,f.nsecs>=1e4&&(f.node=void 0,f.nsecs=0)):w>f.msecs?f.nsecs=0:w<f.msecs&&(f.node=void 0),f.node||(f.node=g.slice(10,16),f.node[0]|=1,f.clockseq=16383&(g[8]<<8|g[9])),f.msecs=w,f}function b(f,w,g,y,_,x,E=0){if(f.length<16)throw new Error("Random bytes length must be >= 16");if(x){if(E<0||E+16>x.length)throw new RangeError(`UUID byte range ${E}:${E+15} is out of buffer bounds`)}else x=new Uint8Array(16),E=0;w??(w=Date.now()),g??(g=0),y??(y=16383&(f[8]<<8|f[9])),_??(_=f.slice(10,16));const j=(1e4*(268435455&(w+=122192928e5))+g)%4294967296;x[E++]=j>>>24&255,x[E++]=j>>>16&255,x[E++]=j>>>8&255,x[E++]=255&j;const R=w/4294967296*1e4&268435455;x[E++]=R>>>8&255,x[E++]=255&R,x[E++]=R>>>24&15|16,x[E++]=R>>>16&255,x[E++]=y>>>8|128,x[E++]=255&y;for(let C=0;C<6;++C)x[E++]=_[C];return x}d.updateV1State=u,d.default=function(f,w,g){var x;let y;const _=(f==null?void 0:f._v6)??!1;if(f){const E=Object.keys(f);E.length===1&&E[0]==="_v6"&&(f=void 0)}if(f)y=b(f.random??((x=f.rng)==null?void 0:x.call(f))??(0,p.default)(),f.msecs,f.nsecs,f.clockseq,f.node,w,g);else{const E=Date.now(),j=(0,p.default)();u(m,E,j),y=b(j,m.msecs,m.nsecs,_?void 0:m.clockseq,_?void 0:m.node,w,g)}return w??(0,v.unsafeStringify)(y)}},1765:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.clone=function(o){return o===void 0?void 0:Number.isNaN(o)?NaN:typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))},d.generateRandomNumber=function(){return Math.round(1e7*Math.random())},d.deepFreeze=function o(p){const v=Reflect.ownKeys(p);for(const m of v){const u=p[m];(u&&typeof u=="object"||typeof u=="function")&&o(u)}return Object.freeze(p)}},1767:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Firefox60=void 0;const p=o(7363),v=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),w=o(5938),g=o(521),y=o(1305),_=o(3303),x=new v.Logger("Firefox60"),E={OS:16,MIS:2048};class j extends g.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new j}get name(){return"Firefox60"}close(){if(x.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),h=document.createElement("canvas");h.getContext("2d");const S=h.captureStream().getVideoTracks()[0];try{T.addTransceiver("audio",{direction:"sendrecv"});const k=T.addTransceiver(S,{direction:"sendrecv"}),P=k.sender.getParameters(),N=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];P.encodings=N,await k.sender.setParameters(P);const O=await T.createOffer();try{h.remove()}catch{}try{S.stop()}catch{}try{T.close()}catch{}const D=p.parse(O.sdp);return f.extractRtpCapabilities({sdpObject:D})}catch(k){try{h.remove()}catch{}try{S.stop()}catch{}try{T.close()}catch{}throw k}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:E}}run({direction:T,iceParameters:h,iceCandidates:S,dtlsParameters:k,sctpParameters:P,iceServers:N,iceTransportPolicy:O,additionalSettings:D,proprietaryConstraints:L,extendedRtpCapabilities:M}){this.assertNotClosed(),x.debug("run()"),this._direction=T,this._remoteSdp=new y.RemoteSdp({iceParameters:h,iceCandidates:S,dtlsParameters:k,sctpParameters:P}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",M),video:b.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",M),video:b.getSendingRemoteRtpParameters("video",M)},this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...D},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",I=>{this.emit("@icecandidateerror",I)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(T){throw this.assertNotClosed(),new m.UnsupportedError("not supported")}async restartIce(T){if(this.assertNotClosed(),x.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const S={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:T,encodings:h,codecOptions:S,codec:k}){this.assertNotClosed(),this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),h&&((h=u.clone(h)).forEach((ee,Q)=>{ee.rid=`r${Q}`}),h.reverse());const P=u.clone(this._sendingRtpParametersByKind[T.kind]);P.codecs=b.reduceCodecs(P.codecs,k);const N=u.clone(this._sendingRemoteRtpParametersByKind[T.kind]);N.codecs=b.reduceCodecs(N.codecs,k);const O=this._pc.addTransceiver(T,{direction:"sendonly",streams:[this._sendStream]});if(h){const ee=O.sender.getParameters();ee.encodings=h,await O.sender.setParameters(ee)}const D=await this._pc.createOffer();let L=p.parse(D.sdp);L.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L});const M=(0,_.parse)((h??[{}])[0].scalabilityMode);x.debug("send() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const I=O.mid;P.mid=I,L=p.parse(this._pc.localDescription.sdp);const G=L.media[L.media.length-1];if(P.rtcp.cname=f.getCname({offerMediaObject:G}),h)if(h.length===1){const ee=w.getRtpEncodings({offerMediaObject:G});Object.assign(ee[0],h[0]),P.encodings=ee}else P.encodings=h.reverse();else P.encodings=w.getRtpEncodings({offerMediaObject:G});if(P.encodings.length>1&&(P.codecs[0].mimeType.toLowerCase()==="video/vp8"||P.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ee of P.encodings)ee.scalabilityMode?ee.scalabilityMode=`L1T${M.temporalLayers}`:ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:G,offerRtpParameters:P,answerRtpParameters:N,codecOptions:S});const de={type:"answer",sdp:this._remoteSdp.getSdp()};return x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",de),await this._pc.setRemoteDescription(de),this._mapMidTransceiver.set(I,O),{localId:I,rtpParameters:P,rtpSender:O.sender}}async stopSending(T){if(this.assertSendDirection(),x.debug("stopSending() [localId:%s]",T),this._closed)return;const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated transceiver not found");h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.disableMediaSection(h.mid);const S=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.delete(T)}async pauseSending(T){this.assertNotClosed(),this.assertSendDirection(),x.debug("pauseSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="inactive",this._remoteSdp.pauseMediaSection(T);const S=await this._pc.createOffer();x.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async resumeSending(T){this.assertNotClosed(),this.assertSendDirection(),x.debug("resumeSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(T);const S=await this._pc.createOffer();x.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async replaceTrack(T,h){this.assertNotClosed(),this.assertSendDirection(),h?x.debug("replaceTrack() [localId:%s, track.id:%s]",T,h.id):x.debug("replaceTrack() [localId:%s, no track]",T);const S=this._mapMidTransceiver.get(T);if(!S)throw new Error("associated RTCRtpTransceiver not found");await S.sender.replaceTrack(h)}async setMaxSpatialLayer(T,h){this.assertNotClosed(),this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,h);const S=this._mapMidTransceiver.get(T);if(!S)throw new Error("associated transceiver not found");const k=S.sender.getParameters();h=k.encodings.length-1-h,k.encodings.forEach((O,D)=>{O.active=D>=h}),await S.sender.setParameters(k),this._remoteSdp.muxMediaSectionSimulcast(T,k.encodings);const P=await this._pc.createOffer();x.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(T,h){this.assertNotClosed(),this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,h);const S=this._mapMidTransceiver.get(T);if(!S)throw new Error("associated RTCRtpTransceiver not found");const k=S.sender.getParameters();k.encodings.forEach((O,D)=>{k.encodings[D]={...O,...h}}),await S.sender.setParameters(k),this._remoteSdp.muxMediaSectionSimulcast(T,k.encodings);const P=await this._pc.createOffer();x.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(T){this.assertNotClosed(),this.assertSendDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:h,maxRetransmits:S,label:k,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:h,maxRetransmits:S,protocol:P};x.debug("sendDataChannel() [options:%o]",N);const O=this._pc.createDataChannel(k,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%E.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),L=p.parse(D.sdp),M=L.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const I={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(T){this.assertNotClosed(),this.assertRecvDirection();const h=[],S=new Map;for(const O of T){const{trackId:D,kind:L,rtpParameters:M,streamId:I}=O;x.debug("receive() [trackId:%s, kind:%s]",D,L);const G=M.mid??String(this._mapMidTransceiver.size);S.set(D,G),this._remoteSdp.receive({mid:G,kind:L,offerRtpParameters:M,streamId:I??M.rtcp.cname,trackId:D})}const k={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);let P=await this._pc.createAnswer();const N=p.parse(P.sdp);for(const O of T){const{trackId:D,rtpParameters:L}=O,M=S.get(D),I=N.media.find(G=>String(G.mid)===M);f.applyCodecParameters({offerRtpParameters:L,answerMediaObject:I}),P={type:"answer",sdp:p.write(N)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const O of T){const{trackId:D}=O,L=S.get(D),M=this._pc.getTransceivers().find(I=>I.mid===L);if(!M)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,M),h.push({localId:L,track:M.receiver.track,rtpReceiver:M.receiver})}return h}async stopReceiving(T){if(this.assertRecvDirection(),this._closed)return;for(const k of T){x.debug("stopReceiving() [localId:%s]",k);const P=this._mapMidTransceiver.get(k);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const k of T)this._mapMidTransceiver.delete(k)}async pauseReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const k of T){x.debug("pauseReceiving() [localId:%s]",k);const P=this._mapMidTransceiver.get(k);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(k)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async resumeReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const k of T){x.debug("resumeReceiving() [localId:%s]",k);const P=this._mapMidTransceiver.get(k);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(k)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async getReceiverStats(T){this.assertRecvDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:T,label:h,protocol:S}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:k,ordered:P,maxPacketLifeTime:N,maxRetransmits:O}=T,D={negotiated:!0,id:k,ordered:P,maxPacketLifeTime:N,maxRetransmits:O,protocol:S};x.debug("receiveDataChannel() [options:%o]",D);const L=this._pc.createDataChannel(h,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const M={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const I=await this._pc.createAnswer();if(!this._transportReady){const G=p.parse(I.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:G})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setLocalDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:T,localSdpObject:h}){h||(h=p.parse(this._pc.localDescription.sdp));const S=f.extractDtlsParameters({sdpObject:h});S.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((k,P)=>{this.safeEmit("@connect",{dtlsParameters:S},k,P)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new m.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Firefox60=j},1797:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(9746);d.default=function(v){if(!(0,p.default)(v))throw TypeError("Invalid UUID");let m;return Uint8Array.of((m=parseInt(v.slice(0,8),16))>>>24,m>>>16&255,m>>>8&255,255&m,(m=parseInt(v.slice(9,13),16))>>>8,255&m,(m=parseInt(v.slice(14,18),16))>>>8,255&m,(m=parseInt(v.slice(19,23),16))>>>8,255&m,(m=parseInt(v.slice(24,36),16))/1099511627776&255,m/4294967296&255,m>>>24&255,m>>>16&255,m>>>8&255,255&m)}},1803:(l,d,o)=>{o.d(d,{ed:()=>k,sg:()=>P,v7:()=>T});var p=o(4467),v=o(296),m=o(9027);function u(N,O){var D=Object.keys(N);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(N);O&&(L=L.filter(function(M){return Object.getOwnPropertyDescriptor(N,M).enumerable})),D.push.apply(D,L)}return D}var b={},f={},w={};for(var g in m.$.videoProfiles)m.$.videoProfiles[g].aspectRatio=="oneSixNine"&&(b[g]=m.$.videoProfiles[g],b[g].encoding={maxBitrate:b[g].bitRate,maxFramerate:b[g].frameRate}),m.$.videoProfiles[g].aspectRatio=="fourThree"&&(f[g]=m.$.videoProfiles[g],f[g].encoding={maxBitrate:f[g].bitRate,maxFramerate:f[g].frameRate});for(var g in m.$.screenShareProfiles)w[g]=m.$.screenShareProfiles[g],w[g].encoding={maxBitrate:w[g].bitRate,maxFramerate:w[g].frameRate};var y=Object.values(b),_=Object.values(f),x=Object.values(w),E=[b.h180p_w320p,b.h360p_w640p],j=[f.h180p_w240p,f.h360p_w480p],R=function(N){return[{scaleResolutionDownBy:2,fps:3}].map(function(O){var D;return{width:Math.floor(N.width/O.scaleResolutionDownBy),height:Math.floor(N.height/O.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(N.encoding.maxBitrate/(Math.pow(O.scaleResolutionDownBy,2)*(((D=N.encoding.maxFramerate)!==null&&D!==void 0?D:30)/O.fps)))),maxFramerate:O.fps}}})},C=["q","h","f"];function T(N,O,D,L,M){var I=L&&L.videoEncoding;N&&(I=L&&L.screenShareEncoding);var G=L==null?void 0:L.simulcast;if(I||(I=function(ie,We,Oe){for(var se=function(er,wt,Er){if(er)return x;var yr=wt>Er?wt/Er:Er/wt;return Math.abs(yr-1.7777777777777777)<Math.abs(yr-1.3333333333333333)?y:_}(ie,We,Oe),ue=se[0].encoding,Ce=Math.max(We,Oe),$e=0;$e<se.length;$e+=1){var Wt=se[$e];if(ue=Wt.encoding,Wt.width>=Ce)break}return ue}(N,O,D)),!G)return[I];var de,ee={width:O,height:D,encoding:{maxBitrate:I.maxBitrate,maxFramerate:I.maxFramerate}},Q=[],ae=(Q=h(N,ee))[0];if(Q.length>1){var xe=Q;de=(0,v.A)(xe,2)[1]}var Se=Math.max(O,D);return S(O,D,Se>=960&&de?[ae,de,ee]:Se>=480?[ae,ee]:[ee],M)}function h(N,O){N&&R(O);var D=O.width,L=O.height,M=D>L?D/L:L/D;return Math.abs(M-1.7777777777777777)<Math.abs(M-1.3333333333333333)?E:j}function S(N,O,D,L){var M=[];return D.forEach(function(I,G){if(!(G>=C.length)){var de=L?null:{maxFramerate:I.encoding.maxFramerate},ee=Math.min(N,O),Q=function(ae){for(var xe=1;xe<arguments.length;xe++){var Se=arguments[xe]!=null?arguments[xe]:{};xe%2?u(Object(Se),!0).forEach(function(ie){(0,p.A)(ae,ie,Se[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(Se)):u(Object(Se)).forEach(function(ie){Object.defineProperty(ae,ie,Object.getOwnPropertyDescriptor(Se,ie))})}return ae}({rid:C[G],scaleResolutionDownBy:ee/Math.min(I.width,I.height),maxBitrate:I.encoding.maxBitrate},de);M.push(Q)}}),M}function k(N,O,D){if(!N)return{};var L=N.id,M=N.appData,I=M.width,G=M.height,de=M.encodings;try{var ee=function(We){var Oe=[];if(We&&We.length!=0){if(We.length===1){for(var se=0;se<3;se++)Oe.push(Math.pow(2,3-se-1));return Oe}var ue=!1;return We.forEach(function(Ce){Ce.scaleResolutionDownBy!==void 0?(ue=!0,Oe.push(Math.max(1,Ce.scaleResolutionDownBy))):Oe.push(1)}),ue||We.forEach(function(Ce,$e){Oe[$e]=Math.pow(2,We.length-$e-1)}),Oe}}(de);if(!ee)return{};var Q=ee.map(function(We){return{width:I/We,height:G/We}}).sort(function(We,Oe){return We.width-Oe.width}),ae=Q.findIndex(function(We){return We.width>=O&&We.height>=D});ae===-1&&(ae=Q.length-1);var xe=N.temporalLayers?N.temporalLayers:2;if(ae===0&&xe>0){var Se=I/ee[0],ie=G/ee[0];O<.5*Se&&D<.5*ie&&(xe-=1),xe>0&&O<.25*Se&&D<.25*ie&&(xe-=1)}return{consumerId:L,newPreferredSpatialLayer:Math.max(0,ae),newPreferredTemporalLayer:Math.max(0,xe)}}catch{return{}}}function P(N,O){var D;return function(){for(var L=this,M=arguments.length,I=new Array(M),G=0;G<M;G++)I[G]=arguments[G];clearTimeout(D),D=setTimeout(function(){return N.apply(L,I)},O)}}},1806:(l,d,o)=>{o.d(d,{$Q:()=>p,T4:()=>v,Ts:()=>u,ue:()=>m});var p="vk_e2ee",v={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},m=["vp8","vp9","h264","av1"],u=["opus"]},1919:(l,d,o)=>{o.r(d),o.d(d,{default:()=>ai});var p={};o.r(p),o.d(p,{Decoder:()=>De,Encoder:()=>lt,PacketType:()=>Le,protocol:()=>ot});var v=o(296),m=o(2284),u=o(467),b=o(3029),f=o(2901),w=o(4467),g=o(4756),y=o.n(g);const _=Object.create(null);_.open="0",_.close="1",_.ping="2",_.pong="3",_.message="4",_.upgrade="5",_.noop="6";const x=Object.create(null);Object.keys(_).forEach(q=>{x[_[q]]=q});const E={type:"error",data:"parser error"},j=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",R=typeof ArrayBuffer=="function",C=q=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(q):q&&q.buffer instanceof ArrayBuffer,T=({type:q,data:B},V,Y)=>j&&B instanceof Blob?V?Y(B):h(B,Y):R&&(B instanceof ArrayBuffer||C(B))?V?Y(B):h(new Blob([B]),Y):Y(_[q]+(B||"")),h=(q,B)=>{const V=new FileReader;return V.onload=function(){const Y=V.result.split(",")[1];B("b"+(Y||""))},V.readAsDataURL(q)};function S(q){return q instanceof Uint8Array?q:q instanceof ArrayBuffer?new Uint8Array(q):new Uint8Array(q.buffer,q.byteOffset,q.byteLength)}let k;const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let q=0;q<64;q++)N[P.charCodeAt(q)]=q;const O=typeof ArrayBuffer=="function",D=(q,B)=>{if(typeof q!="string")return{type:"message",data:M(q,B)};const V=q.charAt(0);return V==="b"?{type:"message",data:L(q.substring(1),B)}:x[V]?q.length>1?{type:x[V],data:q.substring(1)}:{type:x[V]}:E},L=(q,B)=>{if(O){const V=(Y=>{let ge,Te,rt,dt,qe,Yt=.75*Y.length,ct=Y.length,Pt=0;Y[Y.length-1]==="="&&(Yt--,Y[Y.length-2]==="="&&Yt--);const ar=new ArrayBuffer(Yt),wn=new Uint8Array(ar);for(ge=0;ge<ct;ge+=4)Te=N[Y.charCodeAt(ge)],rt=N[Y.charCodeAt(ge+1)],dt=N[Y.charCodeAt(ge+2)],qe=N[Y.charCodeAt(ge+3)],wn[Pt++]=Te<<2|rt>>4,wn[Pt++]=(15&rt)<<4|dt>>2,wn[Pt++]=(3&dt)<<6|63&qe;return ar})(q);return M(V,B)}return{base64:!0,data:q}},M=(q,B)=>B==="blob"?q instanceof Blob?q:new Blob([q]):q instanceof ArrayBuffer?q:q.buffer,I="";function G(){return new TransformStream({transform(q,B){(function(V,Y){j&&V.data instanceof Blob?V.data.arrayBuffer().then(S).then(Y):R&&(V.data instanceof ArrayBuffer||C(V.data))?Y(S(V.data)):T(V,!1,ge=>{k||(k=new TextEncoder),Y(k.encode(ge))})})(q,V=>{const Y=V.length;let ge;if(Y<126)ge=new Uint8Array(1),new DataView(ge.buffer).setUint8(0,Y);else if(Y<65536){ge=new Uint8Array(3);const Te=new DataView(ge.buffer);Te.setUint8(0,126),Te.setUint16(1,Y)}else{ge=new Uint8Array(9);const Te=new DataView(ge.buffer);Te.setUint8(0,127),Te.setBigUint64(1,BigInt(Y))}q.data&&typeof q.data!="string"&&(ge[0]|=128),B.enqueue(ge),B.enqueue(V)})}})}let de;function ee(q){return q.reduce((B,V)=>B+V.length,0)}function Q(q,B){if(q[0].length===B)return q.shift();const V=new Uint8Array(B);let Y=0;for(let ge=0;ge<B;ge++)V[ge]=q[0][Y++],Y===q[0].length&&(q.shift(),Y=0);return q.length&&Y<q[0].length&&(q[0]=q[0].slice(Y)),V}function ae(q){if(q)return function(B){for(var V in ae.prototype)B[V]=ae.prototype[V];return B}(q)}ae.prototype.on=ae.prototype.addEventListener=function(q,B){return this._callbacks=this._callbacks||{},(this._callbacks["$"+q]=this._callbacks["$"+q]||[]).push(B),this},ae.prototype.once=function(q,B){function V(){this.off(q,V),B.apply(this,arguments)}return V.fn=B,this.on(q,V),this},ae.prototype.off=ae.prototype.removeListener=ae.prototype.removeAllListeners=ae.prototype.removeEventListener=function(q,B){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var V,Y=this._callbacks["$"+q];if(!Y)return this;if(arguments.length==1)return delete this._callbacks["$"+q],this;for(var ge=0;ge<Y.length;ge++)if((V=Y[ge])===B||V.fn===B){Y.splice(ge,1);break}return Y.length===0&&delete this._callbacks["$"+q],this},ae.prototype.emit=function(q){this._callbacks=this._callbacks||{};for(var B=new Array(arguments.length-1),V=this._callbacks["$"+q],Y=1;Y<arguments.length;Y++)B[Y-1]=arguments[Y];if(V){Y=0;for(var ge=(V=V.slice(0)).length;Y<ge;++Y)V[Y].apply(this,B)}return this},ae.prototype.emitReserved=ae.prototype.emit,ae.prototype.listeners=function(q){return this._callbacks=this._callbacks||{},this._callbacks["$"+q]||[]},ae.prototype.hasListeners=function(q){return!!this.listeners(q).length};const xe=typeof Promise=="function"&&typeof Promise.resolve=="function"?q=>Promise.resolve().then(q):(q,B)=>B(q,0),Se=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function ie(q,...B){return B.reduce((V,Y)=>(q.hasOwnProperty(Y)&&(V[Y]=q[Y]),V),{})}const We=Se.setTimeout,Oe=Se.clearTimeout;function se(q,B){B.useNativeTimers?(q.setTimeoutFn=We.bind(Se),q.clearTimeoutFn=Oe.bind(Se)):(q.setTimeoutFn=Se.setTimeout.bind(Se),q.clearTimeoutFn=Se.clearTimeout.bind(Se))}function ue(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Ce extends Error{constructor(B,V,Y){super(B),this.description=V,this.context=Y,this.type="TransportError"}}class $e extends ae{constructor(B){super(),this.writable=!1,se(this,B),this.opts=B,this.query=B.query,this.socket=B.socket,this.supportsBinary=!B.forceBase64}onError(B,V,Y){return super.emitReserved("error",new Ce(B,V,Y)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(B){this.readyState==="open"&&this.write(B)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(B){const V=D(B,this.socket.binaryType);this.onPacket(V)}onPacket(B){super.emitReserved("packet",B)}onClose(B){this.readyState="closed",super.emitReserved("close",B)}pause(B){}createUri(B,V={}){return B+"://"+this._hostname()+this._port()+this.opts.path+this._query(V)}_hostname(){const B=this.opts.hostname;return B.indexOf(":")===-1?B:"["+B+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(B){const V=function(Y){let ge="";for(let Te in Y)Y.hasOwnProperty(Te)&&(ge.length&&(ge+="&"),ge+=encodeURIComponent(Te)+"="+encodeURIComponent(Y[Te]));return ge}(B);return V.length?"?"+V:""}}class Wt extends $e{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(B){this.readyState="pausing";const V=()=>{this.readyState="paused",B()};if(this._polling||!this.writable){let Y=0;this._polling&&(Y++,this.once("pollComplete",function(){--Y||V()})),this.writable||(Y++,this.once("drain",function(){--Y||V()}))}else V()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(B){((V,Y)=>{const ge=V.split(I),Te=[];for(let rt=0;rt<ge.length;rt++){const dt=D(ge[rt],Y);if(Te.push(dt),dt.type==="error")break}return Te})(B,this.socket.binaryType).forEach(V=>{if(this.readyState==="opening"&&V.type==="open"&&this.onOpen(),V.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(V)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const B=()=>{this.write([{type:"close"}])};this.readyState==="open"?B():this.once("open",B)}write(B){this.writable=!1,((V,Y)=>{const ge=V.length,Te=new Array(ge);let rt=0;V.forEach((dt,qe)=>{T(dt,!1,Yt=>{Te[qe]=Yt,++rt===ge&&Y(Te.join(I))})})})(B,V=>{this.doWrite(V,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const B=this.opts.secure?"https":"http",V=this.query||{};return this.opts.timestampRequests!==!1&&(V[this.opts.timestampParam]=ue()),this.supportsBinary||V.sid||(V.b64=1),this.createUri(B,V)}}let er=!1;try{er=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wt=er;function Er(){}class yr extends Wt{constructor(B){if(super(B),typeof location<"u"){const V=location.protocol==="https:";let Y=location.port;Y||(Y=V?"443":"80"),this.xd=typeof location<"u"&&B.hostname!==location.hostname||Y!==B.port}}doWrite(B,V){const Y=this.request({method:"POST",data:B});Y.on("success",V),Y.on("error",(ge,Te)=>{this.onError("xhr post error",ge,Te)})}doPoll(){const B=this.request();B.on("data",this.onData.bind(this)),B.on("error",(V,Y)=>{this.onError("xhr poll error",V,Y)}),this.pollXhr=B}}class Ot extends ae{constructor(B,V,Y){super(),this.createRequest=B,se(this,Y),this._opts=Y,this._method=Y.method||"GET",this._uri=V,this._data=Y.data!==void 0?Y.data:null,this._create()}_create(){var B;const V=ie(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");V.xdomain=!!this._opts.xd;const Y=this._xhr=this.createRequest(V);try{Y.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){Y.setDisableHeaderCheck&&Y.setDisableHeaderCheck(!0);for(let ge in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(ge)&&Y.setRequestHeader(ge,this._opts.extraHeaders[ge])}}catch{}if(this._method==="POST")try{Y.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{Y.setRequestHeader("Accept","*/*")}catch{}(B=this._opts.cookieJar)===null||B===void 0||B.addCookies(Y),"withCredentials"in Y&&(Y.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(Y.timeout=this._opts.requestTimeout),Y.onreadystatechange=()=>{var ge;Y.readyState===3&&((ge=this._opts.cookieJar)===null||ge===void 0||ge.parseCookies(Y.getResponseHeader("set-cookie"))),Y.readyState===4&&(Y.status===200||Y.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof Y.status=="number"?Y.status:0)},0))},Y.send(this._data)}catch(ge){return void this.setTimeoutFn(()=>{this._onError(ge)},0)}typeof document<"u"&&(this._index=Ot.requestsCount++,Ot.requests[this._index]=this)}_onError(B){this.emitReserved("error",B,this._xhr),this._cleanup(!0)}_cleanup(B){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=Er,B)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ot.requests[this._index],this._xhr=null}}_onLoad(){const B=this._xhr.responseText;B!==null&&(this.emitReserved("data",B),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ot.requestsCount=0,Ot.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",nn):typeof addEventListener=="function"&&addEventListener("onpagehide"in Se?"pagehide":"unload",nn,!1));function nn(){for(let q in Ot.requests)Ot.requests.hasOwnProperty(q)&&Ot.requests[q].abort()}const Dt=function(){const q=Xt({xdomain:!1});return q&&q.responseType!==null}();function Xt(q){const B=q.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!B||wt))return new XMLHttpRequest}catch{}if(!B)try{return new Se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Gr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class dn extends $e{get name(){return"websocket"}doOpen(){const B=this.uri(),V=this.opts.protocols,Y=Gr?{}:ie(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(Y.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(B,V,Y)}catch(ge){return this.emitReserved("error",ge)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=B=>this.onClose({description:"websocket connection closed",context:B}),this.ws.onmessage=B=>this.onData(B.data),this.ws.onerror=B=>this.onError("websocket error",B)}write(B){this.writable=!1;for(let V=0;V<B.length;V++){const Y=B[V],ge=V===B.length-1;T(Y,this.supportsBinary,Te=>{try{this.doWrite(Y,Te)}catch{}ge&&xe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const B=this.opts.secure?"wss":"ws",V=this.query||{};return this.opts.timestampRequests&&(V[this.opts.timestampParam]=ue()),this.supportsBinary||(V.b64=1),this.createUri(B,V)}}const Mr=Se.WebSocket||Se.MozWebSocket,Yr={websocket:class extends dn{createSocket(q,B,V){return Gr?new Mr(q,B,V):B?new Mr(q,B):new Mr(q)}doWrite(q,B){this.ws.send(B)}},webtransport:class extends $e{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(q){return this.emitReserved("error",q)}this._transport.closed.then(()=>{this.onClose()}).catch(q=>{this.onError("webtransport error",q)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(q=>{const B=function(rt,dt){de||(de=new TextDecoder);const qe=[];let Yt=0,ct=-1,Pt=!1;return new TransformStream({transform(ar,wn){for(qe.push(ar);;){if(Yt===0){if(ee(qe)<1)break;const on=Q(qe,1);Pt=!(128&~on[0]),ct=127&on[0],Yt=ct<126?3:ct===126?1:2}else if(Yt===1){if(ee(qe)<2)break;const on=Q(qe,2);ct=new DataView(on.buffer,on.byteOffset,on.length).getUint16(0),Yt=3}else if(Yt===2){if(ee(qe)<8)break;const on=Q(qe,8),gs=new DataView(on.buffer,on.byteOffset,on.length),Re=gs.getUint32(0);if(Re>Math.pow(2,21)-1){wn.enqueue(E);break}ct=Re*Math.pow(2,32)+gs.getUint32(4),Yt=3}else{if(ee(qe)<ct)break;const on=Q(qe,ct);wn.enqueue(D(Pt?on:de.decode(on),dt)),Yt=0}if(ct===0||ct>rt){wn.enqueue(E);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),V=q.readable.pipeThrough(B).getReader(),Y=G();Y.readable.pipeTo(q.writable),this._writer=Y.writable.getWriter();const ge=()=>{V.read().then(({done:rt,value:dt})=>{rt||(this.onPacket(dt),ge())}).catch(rt=>{})};ge();const Te={type:"open"};this.query.sid&&(Te.data=`{"sid":"${this.query.sid}"}`),this._writer.write(Te).then(()=>this.onOpen())})})}write(q){this.writable=!1;for(let B=0;B<q.length;B++){const V=q[B],Y=B===q.length-1;this._writer.write(V).then(()=>{Y&&xe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var q;(q=this._transport)===null||q===void 0||q.close()}},polling:class extends yr{constructor(q){super(q);const B=q&&q.forceBase64;this.supportsBinary=Dt&&!B}request(q={}){return Object.assign(q,{xd:this.xd},this.opts),new Ot(Xt,this.uri(),q)}}},un=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Mt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pn(q){if(q.length>8e3)throw"URI too long";const B=q,V=q.indexOf("["),Y=q.indexOf("]");V!=-1&&Y!=-1&&(q=q.substring(0,V)+q.substring(V,Y).replace(/:/g,";")+q.substring(Y,q.length));let ge=un.exec(q||""),Te={},rt=14;for(;rt--;)Te[Mt[rt]]=ge[rt]||"";return V!=-1&&Y!=-1&&(Te.source=B,Te.host=Te.host.substring(1,Te.host.length-1).replace(/;/g,":"),Te.authority=Te.authority.replace("[","").replace("]","").replace(/;/g,":"),Te.ipv6uri=!0),Te.pathNames=function(dt,qe){const Yt=/\/{2,9}/g,ct=qe.replace(Yt,"/").split("/");return qe.slice(0,1)!="/"&&qe.length!==0||ct.splice(0,1),qe.slice(-1)=="/"&&ct.splice(ct.length-1,1),ct}(0,Te.path),Te.queryKey=function(dt,qe){const Yt={};return qe.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(ct,Pt,ar){Pt&&(Yt[Pt]=ar)}),Yt}(0,Te.query),Te}const sn=typeof addEventListener=="function"&&typeof removeEventListener=="function",zr=[];sn&&addEventListener("offline",()=>{zr.forEach(q=>q())},!1);class Lr extends ae{constructor(B,V){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,B&&typeof B=="object"&&(V=B,B=null),B){const Y=pn(B);V.hostname=Y.host,V.secure=Y.protocol==="https"||Y.protocol==="wss",V.port=Y.port,Y.query&&(V.query=Y.query)}else V.host&&(V.hostname=pn(V.host).host);se(this,V),this.secure=V.secure!=null?V.secure:typeof location<"u"&&location.protocol==="https:",V.hostname&&!V.port&&(V.port=this.secure?"443":"80"),this.hostname=V.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=V.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},V.transports.forEach(Y=>{const ge=Y.prototype.name;this.transports.push(ge),this._transportsByName[ge]=Y}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},V),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(Y){let ge={},Te=Y.split("&");for(let rt=0,dt=Te.length;rt<dt;rt++){let qe=Te[rt].split("=");ge[decodeURIComponent(qe[0])]=decodeURIComponent(qe[1])}return ge}(this.opts.query)),sn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(B){const V=Object.assign({},this.opts.query);V.EIO=4,V.transport=B,this.id&&(V.sid=this.id);const Y=Object.assign({},this.opts,{query:V,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[B]);return new this._transportsByName[B](Y)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const B=this.opts.rememberUpgrade&&Lr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const V=this.createTransport(B);V.open(),this.setTransport(V)}setTransport(B){this.transport&&this.transport.removeAllListeners(),this.transport=B,B.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",V=>this._onClose("transport close",V))}onOpen(){this.readyState="open",Lr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(B){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",B),this.emitReserved("heartbeat"),B.type){case"open":this.onHandshake(JSON.parse(B.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const V=new Error("server error");V.code=B.data,this._onError(V);break;case"message":this.emitReserved("data",B.data),this.emitReserved("message",B.data)}}onHandshake(B){this.emitReserved("handshake",B),this.id=B.sid,this.transport.query.sid=B.sid,this._pingInterval=B.pingInterval,this._pingTimeout=B.pingTimeout,this._maxPayload=B.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const B=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+B,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},B),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const B=this._getWritablePackets();this.transport.send(B),this._prevBufferLen=B.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let B=1;for(let Y=0;Y<this.writeBuffer.length;Y++){const ge=this.writeBuffer[Y].data;if(ge&&(B+=typeof(V=ge)=="string"?function(Te){let rt=0,dt=0;for(let qe=0,Yt=Te.length;qe<Yt;qe++)rt=Te.charCodeAt(qe),rt<128?dt+=1:rt<2048?dt+=2:rt<55296||rt>=57344?dt+=3:(qe++,dt+=4);return dt}(V):Math.ceil(1.33*(V.byteLength||V.size))),Y>0&&B>this._maxPayload)return this.writeBuffer.slice(0,Y);B+=2}var V;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const B=Date.now()>this._pingTimeoutTime;return B&&(this._pingTimeoutTime=0,xe(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),B}write(B,V,Y){return this._sendPacket("message",B,V,Y),this}send(B,V,Y){return this._sendPacket("message",B,V,Y),this}_sendPacket(B,V,Y,ge){if(typeof V=="function"&&(ge=V,V=void 0),typeof Y=="function"&&(ge=Y,Y=null),this.readyState==="closing"||this.readyState==="closed")return;(Y=Y||{}).compress=Y.compress!==!1;const Te={type:B,data:V,options:Y};this.emitReserved("packetCreate",Te),this.writeBuffer.push(Te),ge&&this.once("flush",ge),this.flush()}close(){const B=()=>{this._onClose("forced close"),this.transport.close()},V=()=>{this.off("upgrade",V),this.off("upgradeError",V),B()},Y=()=>{this.once("upgrade",V),this.once("upgradeError",V)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?Y():B()}):this.upgrading?Y():B()),this}_onError(B){if(Lr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",B),this._onClose("transport error",B)}_onClose(B,V){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),sn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const Y=zr.indexOf(this._offlineEventListener);Y!==-1&&zr.splice(Y,1)}this.readyState="closed",this.id=null,this.emitReserved("close",B,V),this.writeBuffer=[],this._prevBufferLen=0}}}Lr.protocol=4;class _n extends Lr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let B=0;B<this._upgrades.length;B++)this._probe(this._upgrades[B])}_probe(B){let V=this.createTransport(B),Y=!1;Lr.priorWebsocketSuccess=!1;const ge=()=>{Y||(V.send([{type:"ping",data:"probe"}]),V.once("packet",Pt=>{if(!Y)if(Pt.type==="pong"&&Pt.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",V),!V)return;Lr.priorWebsocketSuccess=V.name==="websocket",this.transport.pause(()=>{Y||this.readyState!=="closed"&&(ct(),this.setTransport(V),V.send([{type:"upgrade"}]),this.emitReserved("upgrade",V),V=null,this.upgrading=!1,this.flush())})}else{const ar=new Error("probe error");ar.transport=V.name,this.emitReserved("upgradeError",ar)}}))};function Te(){Y||(Y=!0,ct(),V.close(),V=null)}const rt=Pt=>{const ar=new Error("probe error: "+Pt);ar.transport=V.name,Te(),this.emitReserved("upgradeError",ar)};function dt(){rt("transport closed")}function qe(){rt("socket closed")}function Yt(Pt){V&&Pt.name!==V.name&&Te()}const ct=()=>{V.removeListener("open",ge),V.removeListener("error",rt),V.removeListener("close",dt),this.off("close",qe),this.off("upgrading",Yt)};V.once("open",ge),V.once("error",rt),V.once("close",dt),this.once("close",qe),this.once("upgrading",Yt),this._upgrades.indexOf("webtransport")!==-1&&B!=="webtransport"?this.setTimeoutFn(()=>{Y||V.open()},200):V.open()}onHandshake(B){this._upgrades=this._filterUpgrades(B.upgrades),super.onHandshake(B)}_filterUpgrades(B){const V=[];for(let Y=0;Y<B.length;Y++)~this.transports.indexOf(B[Y])&&V.push(B[Y]);return V}}class Xr extends _n{constructor(B,V={}){const Y=typeof B=="object"?B:V;(!Y.transports||Y.transports&&typeof Y.transports[0]=="string")&&(Y.transports=(Y.transports||["polling","websocket","webtransport"]).map(ge=>Yr[ge]).filter(ge=>!!ge)),super(B,Y)}}const Pn=typeof ArrayBuffer=="function",Sn=Object.prototype.toString,In=typeof Blob=="function"||typeof Blob<"u"&&Sn.call(Blob)==="[object BlobConstructor]",Nn=typeof File=="function"||typeof File<"u"&&Sn.call(File)==="[object FileConstructor]";function zt(q){return Pn&&(q instanceof ArrayBuffer||(B=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(B):B.buffer instanceof ArrayBuffer)(q))||In&&q instanceof Blob||Nn&&q instanceof File}function Mn(q,B){if(!q||typeof q!="object")return!1;if(Array.isArray(q)){for(let V=0,Y=q.length;V<Y;V++)if(Mn(q[V]))return!0;return!1}if(zt(q))return!0;if(q.toJSON&&typeof q.toJSON=="function"&&arguments.length===1)return Mn(q.toJSON(),!0);for(const V in q)if(Object.prototype.hasOwnProperty.call(q,V)&&Mn(q[V]))return!0;return!1}function ns(q){const B=[],V=q.data,Y=q;return Y.data=hn(V,B),Y.attachments=B.length,{packet:Y,buffers:B}}function hn(q,B){if(!q)return q;if(zt(q)){const V={_placeholder:!0,num:B.length};return B.push(q),V}if(Array.isArray(q)){const V=new Array(q.length);for(let Y=0;Y<q.length;Y++)V[Y]=hn(q[Y],B);return V}if(typeof q=="object"&&!(q instanceof Date)){const V={};for(const Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&(V[Y]=hn(q[Y],B));return V}return q}function or(q,B){return q.data=Ye(q.data,B),delete q.attachments,q}function Ye(q,B){if(!q)return q;if(q&&q._placeholder===!0){if(typeof q.num=="number"&&q.num>=0&&q.num<B.length)return B[q.num];throw new Error("illegal attachments")}if(Array.isArray(q))for(let V=0;V<q.length;V++)q[V]=Ye(q[V],B);else if(typeof q=="object")for(const V in q)Object.prototype.hasOwnProperty.call(q,V)&&(q[V]=Ye(q[V],B));return q}const Me=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ot=5;var Le;(function(q){q[q.CONNECT=0]="CONNECT",q[q.DISCONNECT=1]="DISCONNECT",q[q.EVENT=2]="EVENT",q[q.ACK=3]="ACK",q[q.CONNECT_ERROR=4]="CONNECT_ERROR",q[q.BINARY_EVENT=5]="BINARY_EVENT",q[q.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class lt{constructor(B){this.replacer=B}encode(B){return B.type!==Le.EVENT&&B.type!==Le.ACK||!Mn(B)?[this.encodeAsString(B)]:this.encodeAsBinary({type:B.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:B.nsp,data:B.data,id:B.id})}encodeAsString(B){let V=""+B.type;return B.type!==Le.BINARY_EVENT&&B.type!==Le.BINARY_ACK||(V+=B.attachments+"-"),B.nsp&&B.nsp!=="/"&&(V+=B.nsp+","),B.id!=null&&(V+=B.id),B.data!=null&&(V+=JSON.stringify(B.data,this.replacer)),V}encodeAsBinary(B){const V=ns(B),Y=this.encodeAsString(V.packet),ge=V.buffers;return ge.unshift(Y),ge}}function cr(q){return Object.prototype.toString.call(q)==="[object Object]"}class De extends ae{constructor(B){super(),this.reviver=B}add(B){let V;if(typeof B=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");V=this.decodeString(B);const Y=V.type===Le.BINARY_EVENT;Y||V.type===Le.BINARY_ACK?(V.type=Y?Le.EVENT:Le.ACK,this.reconstructor=new Zt(V),V.attachments===0&&super.emitReserved("decoded",V)):super.emitReserved("decoded",V)}else{if(!zt(B)&&!B.base64)throw new Error("Unknown type: "+B);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");V=this.reconstructor.takeBinaryData(B),V&&(this.reconstructor=null,super.emitReserved("decoded",V))}}decodeString(B){let V=0;const Y={type:Number(B.charAt(0))};if(Le[Y.type]===void 0)throw new Error("unknown packet type "+Y.type);if(Y.type===Le.BINARY_EVENT||Y.type===Le.BINARY_ACK){const Te=V+1;for(;B.charAt(++V)!=="-"&&V!=B.length;);const rt=B.substring(Te,V);if(rt!=Number(rt)||B.charAt(V)!=="-")throw new Error("Illegal attachments");Y.attachments=Number(rt)}if(B.charAt(V+1)==="/"){const Te=V+1;for(;++V&&!(B.charAt(V)===","||V===B.length););Y.nsp=B.substring(Te,V)}else Y.nsp="/";const ge=B.charAt(V+1);if(ge!==""&&Number(ge)==ge){const Te=V+1;for(;++V;){const rt=B.charAt(V);if(rt==null||Number(rt)!=rt){--V;break}if(V===B.length)break}Y.id=Number(B.substring(Te,V+1))}if(B.charAt(++V)){const Te=this.tryParse(B.substr(V));if(!De.isPayloadValid(Y.type,Te))throw new Error("invalid payload");Y.data=Te}return Y}tryParse(B){try{return JSON.parse(B,this.reviver)}catch{return!1}}static isPayloadValid(B,V){switch(B){case Le.CONNECT:return cr(V);case Le.DISCONNECT:return V===void 0;case Le.CONNECT_ERROR:return typeof V=="string"||cr(V);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(V)&&(typeof V[0]=="number"||typeof V[0]=="string"&&Me.indexOf(V[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(V)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zt{constructor(B){this.packet=B,this.buffers=[],this.reconPack=B}takeBinaryData(B){if(this.buffers.push(B),this.buffers.length===this.reconPack.attachments){const V=or(this.reconPack,this.buffers);return this.finishedReconstruction(),V}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Vt(q,B,V){return q.on(B,V),function(){q.off(B,V)}}const br=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class hr extends ae{constructor(B,V,Y){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=B,this.nsp=V,Y&&Y.auth&&(this.auth=Y.auth),this._opts=Object.assign({},Y),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const B=this.io;this.subs=[Vt(B,"open",this.onopen.bind(this)),Vt(B,"packet",this.onpacket.bind(this)),Vt(B,"error",this.onerror.bind(this)),Vt(B,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...B){return B.unshift("message"),this.emit.apply(this,B),this}emit(B,...V){var Y,ge,Te;if(br.hasOwnProperty(B))throw new Error('"'+B.toString()+'" is a reserved event name');if(V.unshift(B),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(V),this;const rt={type:Le.EVENT,data:V,options:{}};if(rt.options.compress=this.flags.compress!==!1,typeof V[V.length-1]=="function"){const Yt=this.ids++,ct=V.pop();this._registerAckCallback(Yt,ct),rt.id=Yt}const dt=(ge=(Y=this.io.engine)===null||Y===void 0?void 0:Y.transport)===null||ge===void 0?void 0:ge.writable,qe=this.connected&&!(!((Te=this.io.engine)===null||Te===void 0)&&Te._hasPingExpired());return this.flags.volatile&&!dt||(qe?(this.notifyOutgoingListeners(rt),this.packet(rt)):this.sendBuffer.push(rt)),this.flags={},this}_registerAckCallback(B,V){var Y;const ge=(Y=this.flags.timeout)!==null&&Y!==void 0?Y:this._opts.ackTimeout;if(ge===void 0)return void(this.acks[B]=V);const Te=this.io.setTimeoutFn(()=>{delete this.acks[B];for(let dt=0;dt<this.sendBuffer.length;dt++)this.sendBuffer[dt].id===B&&this.sendBuffer.splice(dt,1);V.call(this,new Error("operation has timed out"))},ge),rt=(...dt)=>{this.io.clearTimeoutFn(Te),V.apply(this,dt)};rt.withError=!0,this.acks[B]=rt}emitWithAck(B,...V){return new Promise((Y,ge)=>{const Te=(rt,dt)=>rt?ge(rt):Y(dt);Te.withError=!0,V.push(Te),this.emit(B,...V)})}_addToQueue(B){let V;typeof B[B.length-1]=="function"&&(V=B.pop());const Y={id:this._queueSeq++,tryCount:0,pending:!1,args:B,flags:Object.assign({fromQueue:!0},this.flags)};B.push((ge,...Te)=>{if(Y===this._queue[0])return ge!==null?Y.tryCount>this._opts.retries&&(this._queue.shift(),V&&V(ge)):(this._queue.shift(),V&&V(null,...Te)),Y.pending=!1,this._drainQueue()}),this._queue.push(Y),this._drainQueue()}_drainQueue(B=!1){if(!this.connected||this._queue.length===0)return;const V=this._queue[0];V.pending&&!B||(V.pending=!0,V.tryCount++,this.flags=V.flags,this.emit.apply(this,V.args))}packet(B){B.nsp=this.nsp,this.io._packet(B)}onopen(){typeof this.auth=="function"?this.auth(B=>{this._sendConnectPacket(B)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(B){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},B):B})}onerror(B){this.connected||this.emitReserved("connect_error",B)}onclose(B,V){this.connected=!1,delete this.id,this.emitReserved("disconnect",B,V),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(B=>{if(!this.sendBuffer.some(V=>String(V.id)===B)){const V=this.acks[B];delete this.acks[B],V.withError&&V.call(this,new Error("socket has been disconnected"))}})}onpacket(B){if(B.nsp===this.nsp)switch(B.type){case Le.CONNECT:B.data&&B.data.sid?this.onconnect(B.data.sid,B.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(B);break;case Le.ACK:case Le.BINARY_ACK:this.onack(B);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const V=new Error(B.data.message);V.data=B.data.data,this.emitReserved("connect_error",V)}}onevent(B){const V=B.data||[];B.id!=null&&V.push(this.ack(B.id)),this.connected?this.emitEvent(V):this.receiveBuffer.push(Object.freeze(V))}emitEvent(B){if(this._anyListeners&&this._anyListeners.length){const V=this._anyListeners.slice();for(const Y of V)Y.apply(this,B)}super.emit.apply(this,B),this._pid&&B.length&&typeof B[B.length-1]=="string"&&(this._lastOffset=B[B.length-1])}ack(B){const V=this;let Y=!1;return function(...ge){Y||(Y=!0,V.packet({type:Le.ACK,id:B,data:ge}))}}onack(B){const V=this.acks[B.id];typeof V=="function"&&(delete this.acks[B.id],V.withError&&B.data.unshift(null),V.apply(this,B.data))}onconnect(B,V){this.id=B,this.recovered=V&&this._pid===V,this._pid=V,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(B=>this.emitEvent(B)),this.receiveBuffer=[],this.sendBuffer.forEach(B=>{this.notifyOutgoingListeners(B),this.packet(B)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(B=>B()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(B){return this.flags.compress=B,this}get volatile(){return this.flags.volatile=!0,this}timeout(B){return this.flags.timeout=B,this}onAny(B){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(B),this}prependAny(B){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(B),this}offAny(B){if(!this._anyListeners)return this;if(B){const V=this._anyListeners;for(let Y=0;Y<V.length;Y++)if(B===V[Y])return V.splice(Y,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(B){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(B),this}prependAnyOutgoing(B){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(B),this}offAnyOutgoing(B){if(!this._anyOutgoingListeners)return this;if(B){const V=this._anyOutgoingListeners;for(let Y=0;Y<V.length;Y++)if(B===V[Y])return V.splice(Y,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(B){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const V=this._anyOutgoingListeners.slice();for(const Y of V)Y.apply(this,B.data)}}}function Pr(q){q=q||{},this.ms=q.min||100,this.max=q.max||1e4,this.factor=q.factor||2,this.jitter=q.jitter>0&&q.jitter<=1?q.jitter:0,this.attempts=0}Pr.prototype.duration=function(){var q=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var B=Math.random(),V=Math.floor(B*this.jitter*q);q=1&Math.floor(10*B)?q+V:q-V}return 0|Math.min(q,this.max)},Pr.prototype.reset=function(){this.attempts=0},Pr.prototype.setMin=function(q){this.ms=q},Pr.prototype.setMax=function(q){this.max=q},Pr.prototype.setJitter=function(q){this.jitter=q};class Xe extends ae{constructor(B,V){var Y;super(),this.nsps={},this.subs=[],B&&typeof B=="object"&&(V=B,B=void 0),(V=V||{}).path=V.path||"/socket.io",this.opts=V,se(this,V),this.reconnection(V.reconnection!==!1),this.reconnectionAttempts(V.reconnectionAttempts||1/0),this.reconnectionDelay(V.reconnectionDelay||1e3),this.reconnectionDelayMax(V.reconnectionDelayMax||5e3),this.randomizationFactor((Y=V.randomizationFactor)!==null&&Y!==void 0?Y:.5),this.backoff=new Pr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(V.timeout==null?2e4:V.timeout),this._readyState="closed",this.uri=B;const ge=V.parser||p;this.encoder=new ge.Encoder,this.decoder=new ge.Decoder,this._autoConnect=V.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(B){return arguments.length?(this._reconnection=!!B,B||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(B){return B===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=B,this)}reconnectionDelay(B){var V;return B===void 0?this._reconnectionDelay:(this._reconnectionDelay=B,(V=this.backoff)===null||V===void 0||V.setMin(B),this)}randomizationFactor(B){var V;return B===void 0?this._randomizationFactor:(this._randomizationFactor=B,(V=this.backoff)===null||V===void 0||V.setJitter(B),this)}reconnectionDelayMax(B){var V;return B===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=B,(V=this.backoff)===null||V===void 0||V.setMax(B),this)}timeout(B){return arguments.length?(this._timeout=B,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(B){if(~this._readyState.indexOf("open"))return this;this.engine=new Xr(this.uri,this.opts);const V=this.engine,Y=this;this._readyState="opening",this.skipReconnect=!1;const ge=Vt(V,"open",function(){Y.onopen(),B&&B()}),Te=dt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",dt),B?B(dt):this.maybeReconnectOnOpen()},rt=Vt(V,"error",Te);if(this._timeout!==!1){const dt=this._timeout,qe=this.setTimeoutFn(()=>{ge(),Te(new Error("timeout")),V.close()},dt);this.opts.autoUnref&&qe.unref(),this.subs.push(()=>{this.clearTimeoutFn(qe)})}return this.subs.push(ge),this.subs.push(rt),this}connect(B){return this.open(B)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const B=this.engine;this.subs.push(Vt(B,"ping",this.onping.bind(this)),Vt(B,"data",this.ondata.bind(this)),Vt(B,"error",this.onerror.bind(this)),Vt(B,"close",this.onclose.bind(this)),Vt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(B){try{this.decoder.add(B)}catch(V){this.onclose("parse error",V)}}ondecoded(B){xe(()=>{this.emitReserved("packet",B)},this.setTimeoutFn)}onerror(B){this.emitReserved("error",B)}socket(B,V){let Y=this.nsps[B];return Y?this._autoConnect&&!Y.active&&Y.connect():(Y=new hr(this,B,V),this.nsps[B]=Y),Y}_destroy(B){const V=Object.keys(this.nsps);for(const Y of V)if(this.nsps[Y].active)return;this._close()}_packet(B){const V=this.encoder.encode(B);for(let Y=0;Y<V.length;Y++)this.engine.write(V[Y],B.options)}cleanup(){this.subs.forEach(B=>B()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(B,V){var Y;this.cleanup(),(Y=this.engine)===null||Y===void 0||Y.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",B,V),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const B=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const V=this.backoff.duration();this._reconnecting=!0;const Y=this.setTimeoutFn(()=>{B.skipReconnect||(this.emitReserved("reconnect_attempt",B.backoff.attempts),B.skipReconnect||B.open(ge=>{ge?(B._reconnecting=!1,B.reconnect(),this.emitReserved("reconnect_error",ge)):B.onreconnect()}))},V);this.opts.autoUnref&&Y.unref(),this.subs.push(()=>{this.clearTimeoutFn(Y)})}}onreconnect(){const B=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",B)}}const Kt={};function Tt(q,B){typeof q=="object"&&(B=q,q=void 0);const V=function(qe,Yt="",ct){let Pt=qe;ct=ct||typeof location<"u"&&location,qe==null&&(qe=ct.protocol+"//"+ct.host),typeof qe=="string"&&(qe.charAt(0)==="/"&&(qe=qe.charAt(1)==="/"?ct.protocol+qe:ct.host+qe),/^(https?|wss?):\/\//.test(qe)||(qe=ct!==void 0?ct.protocol+"//"+qe:"https://"+qe),Pt=pn(qe)),Pt.port||(/^(http|ws)$/.test(Pt.protocol)?Pt.port="80":/^(http|ws)s$/.test(Pt.protocol)&&(Pt.port="443")),Pt.path=Pt.path||"/";const ar=Pt.host.indexOf(":")!==-1?"["+Pt.host+"]":Pt.host;return Pt.id=Pt.protocol+"://"+ar+":"+Pt.port+Yt,Pt.href=Pt.protocol+"://"+ar+(ct&&ct.port===Pt.port?"":":"+Pt.port),Pt}(q,(B=B||{}).path||"/socket.io"),Y=V.source,ge=V.id,Te=V.path,rt=Kt[ge]&&Te in Kt[ge].nsps;let dt;return B.forceNew||B["force new connection"]||B.multiplex===!1||rt?dt=new Xe(Y,B):(Kt[ge]||(Kt[ge]=new Xe(Y,B)),dt=Kt[ge]),V.query&&!B.query&&(B.query=V.queryKey),dt.socket(V.path,B)}Object.assign(Tt,{Manager:Xe,Socket:hr,io:Tt,connect:Tt});var Ht=o(76),Fr=o(7833),Nr=o.n(Fr),$r="mediasoup-demo",Sr=function(){return(0,f.A)(function q(B){(0,b.A)(this,q),B?(this._debug=Nr()("".concat($r,":").concat(B)),this._warn=Nr()("".concat($r,":WARN:").concat(B)),this._error=Nr()("".concat($r,":ERROR:").concat(B))):(this._debug=Nr()($r),this._warn=Nr()("".concat($r,":WARN")),this._error=Nr()("".concat($r,":ERROR"))),Nr().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}(),wr=o(1396),Jr=wr.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),Jn=wr.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function ss(q){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,u.A)(y().mark(function q(B){var V,Y,ge,Te,rt,dt,qe,Yt,ct,Pt,ar,wn,on,gs,Re;return y().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return V=B.roomId,Y=B.secret,ge=B.signalingBaseUrl,Te="call-api.videosdk.live",rt=[],dt=null,qe={},Yt={},ct={},Pt=null,ar=null,wn=null,Lt.next=12,fetch("https://".concat(ge,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:Y,"Content-Type":"application/json"},body:JSON.stringify({roomId:V})}).then(function(ec){return ec.json()}).catch(function(ec){return{}});case 12:return on=Lt.sent,(gs=on.data)&&(Te=gs.baseUrl,Re=gs.observability,rt=Ys(gs.iceServers),dt=Re.jwt,qe=Re.traces,Yt=Re.logs,ct=Re.metaData,Pt=gs.signalingUrl,wn=gs.socketPath,ar=gs.socketUrl),Lt.abrupt("return",{baseUrl:Te,iceServers:rt,observabilityJwt:dt,traces:qe,logs:Yt,metaData:ct,signalingUrl:Pt,socketPath:wn,socketUrl:ar});case 16:case"end":return Lt.stop()}},q)}))).apply(this,arguments)}function Ys(q){try{var B=wr.AES.decrypt(q,Jr,{iv:Jn,mode:wr.mode.CBC,padding:wr.pad.ZeroPadding}).toString(wr.enc.Utf8);return JSON.parse(B)}catch{return[]}}var mi=o(2215),Ci=o.n(mi),gi="mediasoup-demo.user",is="mediasoup-demo.devices";function as(q){var B=q.displayName;Ci().set(gi,{displayName:B})}function zi(){return Ci().getJSON(is)}var kt=o(2211),ir=o.n(kt),Gt=function(q){return{type:"SET_ROOM_STATE",payload:{state:q}}},Rn=function(q){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:q}}},dr=function(q){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:q}}},xr=function(q){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:q.canSendMic,canSendWebcam:q.canSendWebcam}}},fn=function(q){return{type:"SET_DISPLAY_NAME",payload:{displayName:q}}},Cr=function(q){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:q}}},Rr=function(q){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:q}}},an=function(q){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:q}}},Cs=function(q){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:q}}},An=function(q){return{type:"ADD_PRODUCER",payload:{producer:q}}},Ln=function(q){return{type:"REMOVE_PRODUCER",payload:{producerId:q}}},Js=function(q,B){return{type:"SET_PRODUCER_TRACK",payload:{producerId:q,track:B}}},xs=function(q,B){return{type:"SET_PRODUCER_SCORE",payload:{producerId:q,score:B}}},Hi=function(q){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:q}}},Qs=function(q){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:q}}},ba=function(q){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:q}}},ii=function(q){return{type:"ADD_PEER",payload:{peer:q}}},Va=function(q){return{type:"REMOVE_PEER",payload:{peerId:q}}},co=function(q,B){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:q,peerId:B}}},Fo=function(q,B){return{type:"ADD_CONSUMER",payload:{consumer:q,peerId:B}}},Bo=function(q,B){return{type:"REMOVE_CONSUMER",payload:{consumerId:q,peerId:B}}},qi=function(q,B){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:q,originator:B}}},Uo=function(q,B){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:q,originator:B}}},tl=function(q,B,V){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:q,spatialLayer:B,temporalLayer:V}}},rl=function(q,B,V){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:q,spatialLayer:B,temporalLayer:V}}},Vo=function(q,B){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:q,priority:B}}},$o=function(q,B){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:q,score:B}}},nl=function(q,B){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:q,peerId:B}}},Wo=function(q,B){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:q,peerId:B}}},lr=function(q){var B=q.type,V=B===void 0?"info":B,Y=q.text,ge=q.title,Te=q.timeout;if(!Te)switch(V){case"info":Te=3e3;break;case"error":Te=5e3}var rt={id:ir()({length:6}).toLowerCase(),type:V,title:ge,text:Y,timeout:Te};return function(dt){dt(function(qe){return{type:"ADD_NOTIFICATION",payload:{notification:qe}}}(rt)),setTimeout(function(){dt({type:"REMOVE_NOTIFICATION",payload:{notificationId:rt.id}})},Te)}},zo=o(7007),Ho=o(1803),ta=o(9027),mr=o(7080),sl="CONNECTING",qo="CONNECTED",il="RECONNECTING",al="DISCONNECTED",ol=o(5414),Us=o(2107),cl=o(5071),Ko=o(5458),Ti=Array(32);function lo(){for(var q=0;q<16;q++)Ti[q]=Math.floor(16*Math.random())+48,Ti[q]>=58&&(Ti[q]+=39);return String.fromCharCode.apply(null,Ti.slice(0,16))}function ra(){var q=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(q)}function Go(q,B){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);B&&(Y=Y.filter(function(ge){return Object.getOwnPropertyDescriptor(q,ge).enumerable})),V.push.apply(V,Y)}return V}function Yo(q){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Go(Object(V),!0).forEach(function(Y){(0,w.A)(q,Y,V[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):Go(Object(V)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(V,Y))})}return q}var ll=function(){return(0,f.A)(function q(B){var V=this,Y=B.roomId,ge=B.peerId,Te=B.sdkName,rt=B.observabilityJwt,dt=B.metaData,qe=B.traces;(0,b.A)(this,q),this._traceId=function(){for(var ct=0;ct<32;ct++)Ti[ct]=Math.floor(16*Math.random())+48,Ti[ct]>=58&&(Ti[ct]+=39);return String.fromCharCode.apply(null,Ti.slice(0,32))}(),this._rootSpanId=lo(),this._observabilityJwt=rt,this._tracesEnabled=qe.enabled,this._tracesEndpoint=qe.endPoint;var Yt=function(ct){for(var Pt="0123456789abcdefghijklmnopqrstuvwxyz",ar="",wn=ct;wn>0;wn--)ar+=Pt[Math.floor(36*Math.random())];return ar}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.9"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:Yt},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(Y,ge,Te,dt),setInterval(function(){V.processQueue()},4e3))},[{key:"addRootSpan",value:function(q,B,V,Y){var ge={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(q,"_peer_").concat(B,"_sdk_").concat(V),kind:1,startTimeUnixNano:ra(),endTimeUnixNano:ra(),attributes:[{key:"roomId",value:{stringValue:q}},{key:"peerId",value:{stringValue:B}},{key:"sdkName",value:{stringValue:V}},{key:"userId",value:{stringValue:Y.userId}},{key:"email",value:{stringValue:Y.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(ge)}},{key:"addSpanToTrace",value:function(q){this._spans.push(q)}},{key:"trace",value:function(q){var B=q.spanName,V=q.attributes,Y=V===void 0?{}:V,ge=q.span,Te=ge===void 0?void 0:ge;if(this._tracesEnabled){var rt=lo(),dt=ra(),qe={traceId:this._traceId,spanId:rt,parentSpanId:Te||this._rootSpanId,name:B,kind:1,startTimeUnixNano:dt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(Y).length>0&&(qe.attributes=Object.entries(Y).map(function(Yt){var ct=(0,v.A)(Yt,2);return{key:ct[0],value:{stringValue:ct[1]}}})),this.addSpanToTrace(qe),rt}}},{key:"traceAutoComplete",value:function(q){var B=q.spanName,V=q.attributes,Y=V===void 0?{}:V,ge=q.status,Te=ge===void 0?1:ge,rt=q.span,dt=rt===void 0?void 0:rt,qe=q.message,Yt=qe===void 0?"SUCCESS":qe;if(this._tracesEnabled){var ct=lo(),Pt=ra(),ar=ra(),wn={traceId:this._traceId,spanId:ct,parentSpanId:dt||this._rootSpanId,name:B,kind:1,startTimeUnixNano:Pt,endTimeUnixNano:ar,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:Te,message:Yt}};Object.keys(Y).length>0&&(wn.attributes=Object.entries(Y).map(function(on){var gs=(0,v.A)(on,2);return{key:gs[0],value:{stringValue:gs[1]}}})),this.addSpanToTrace(wn)}}},{key:"completeSpan",value:function(q){var B=q.span,V=q.status,Y=q.message,ge=q.attributes,Te=ge===void 0?{}:ge;if(this._tracesEnabled){var rt=ra();this._spans=this._spans.map(function(dt){if(dt.spanId!==B)return dt;var qe=Object.entries(Te).map(function(Yt){var ct=(0,v.A)(Yt,2);return{key:ct[0],value:{stringValue:ct[1]}}});return dt.attributes=dt.attributes?[].concat((0,Ko.A)(dt.attributes),(0,Ko.A)(qe)):qe,Yo(Yo({},dt),{},{status:{code:V,message:Y},endTimeUnixNano:rt})})}}},{key:"processQueue",value:function(){var q=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var B={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,B).then(function(){var V=(0,u.A)(y().mark(function Y(ge){return y().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return q._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],Te.next=3,ge.text();case 3:return Te.abrupt("return",Te.sent);case 4:case"end":return Te.stop()}},Y)}));return function(Y){return V.apply(this,arguments)}}()).then(function(V){}).catch(function(V){q._spans=q._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",V)})}}}])}();function Jo(q,B){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);B&&(Y=Y.filter(function(ge){return Object.getOwnPropertyDescriptor(q,ge).enumerable})),V.push.apply(V,Y)}return V}function uo(q){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Jo(Object(V),!0).forEach(function(Y){(0,w.A)(q,Y,V[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):Jo(Object(V)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(V,Y))})}return q}var dl=function(){return(0,f.A)(function B(V){var Y=V.roomId,ge=V.peerId,Te=V.logs,rt=V.observabilityJwt,dt=V.deviceInfo,qe=V.sessionId,Yt=V.debugMode;(0,b.A)(this,B);var ct=dt.browserUserAgent,Pt=dt.deviceUserAgent,ar=dt.platform;this._peerId=ge,this._roomId=Y,this._logs=Te,this._observabilityJwt=rt,this._deviceInfo=dt,this._sessionId=qe,this._debugMode=Yt,this.browserOrDeviceInfo=ct?{browserName:ct.browser.name,browserVersion:ct.browser.version,osName:ct.os.name,osVersion:ct.os.version,platform:ar}:Pt?uo({platform:ar},Pt):null},[{key:"pushLogs",value:(q=(0,u.A)(y().mark(function B(V){var Y,ge,Te,rt,dt,qe,Yt,ct;return y().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Y=V.logType,ge=V.logText,Te=V.attributes,rt=V.dashboardLog,dt=rt!==void 0&&rt,qe=this._logs,Yt=qe.enabled,ct=qe.endPoint,!Yt){Pt.next=8;break}return Pt.next=5,fetch(ct,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:Y,logText:ge,attributes:uo(uo({},Te),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:dt})}).then(function(ar){return ar.json()}).catch(function(ar){return console.log("error",ar),{}});case 5:return Pt.abrupt("return",Pt.sent);case 8:return Pt.abrupt("return",null);case 9:case"end":return Pt.stop()}},B,this)})),function(B){return q.apply(this,arguments)})}]);var q}(),ul=o(4973),po=o(388),na=o(3954),ho=o(5501),Qo=o(3662);function Xo(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xo=function(){return!!q})()}function $a(q){var B=typeof Map=="function"?new Map:void 0;return $a=function(V){if(V===null||!function(ge){try{return Function.toString.call(ge).indexOf("[native code]")!==-1}catch{return typeof ge=="function"}}(V))return V;if(typeof V!="function")throw new TypeError("Super expression must either be null or a function");if(B!==void 0){if(B.has(V))return B.get(V);B.set(V,Y)}function Y(){return function(ge,Te,rt){if(Xo())return Reflect.construct.apply(null,arguments);var dt=[null];dt.push.apply(dt,Te);var qe=new(ge.bind.apply(ge,dt));return rt&&(0,Qo.A)(qe,rt.prototype),qe}(V,arguments,(0,na.A)(this).constructor)}return Y.prototype=Object.create(V.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),(0,Qo.A)(Y,V)},$a(q)}function St(q,B,V){return B=(0,na.A)(B),(0,po.A)(q,te()?Reflect.construct(B,V||[],(0,na.A)(q).constructor):B.apply(q,V))}function te(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(te=function(){return!!q})()}var at,ur=function(q){function B(V,Y){var ge;return(0,b.A)(this,B),ge=St(this,B,[Y||"an error has occured"]),(0,w.A)(ge,"code",void 0),ge.name="VideoSdkError",ge.code=V,ge}return(0,ho.A)(B,q),(0,f.A)(B)}($a(Error));(function(q){q[q.InvalidKey=0]="InvalidKey",q[q.MissingKey=1]="MissingKey",q[q.InternalError=2]="InternalError"})(at||(at={}));var Qn=function(q){function B(V){var Y;return(0,b.A)(this,B),(Y=St(this,B,[21,V??"device is unsupported"])).name="DeviceUnsupportedError",Y}return(0,ho.A)(B,q),(0,f.A)(B)}(ur),Fn=o(1806),gr=o(6746),$u=o(8278);function dd(q,B){return q?B=="audio"?"shareAudio":"share":B}function Zo(q,B){var V=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!V){if(Array.isArray(q)||(V=function(qe,Yt){if(qe){if(typeof qe=="string")return pl(qe,Yt);var ct={}.toString.call(qe).slice(8,-1);return ct==="Object"&&qe.constructor&&(ct=qe.constructor.name),ct==="Map"||ct==="Set"?Array.from(qe):ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct)?pl(qe,Yt):void 0}}(q))||B){V&&(q=V);var Y=0,ge=function(){};return{s:ge,n:function(){return Y>=q.length?{done:!0}:{done:!1,value:q[Y++]}},e:function(qe){throw qe},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,rt=!0,dt=!1;return{s:function(){V=V.call(q)},n:function(){var qe=V.next();return rt=qe.done,qe},e:function(qe){dt=!0,Te=qe},f:function(){try{rt||V.return==null||V.return()}finally{if(dt)throw Te}}}}function pl(q,B){(B==null||B>q.length)&&(B=q.length);for(var V=0,Y=Array(B);V<B;V++)Y[V]=q[V];return Y}function Wu(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wu=function(){return!!q})()}var hl=function(q){function B(Y){var ge,Te,rt,dt;return(0,b.A)(this,B),Te=this,rt=B,rt=(0,na.A)(rt),(ge=(0,po.A)(Te,Wu()?Reflect.construct(rt,[],(0,na.A)(Te).constructor):rt.apply(Te,dt))).onWorkerMessage=function(qe){var Yt,ct=qe.data,Pt=ct.kind,ar=ct.data;switch(Pt){case"error":console.error(ar.error.message),ge.emit(gr.KS.EncryptionError,ar.error);break;case"initAck":ar.enabled&&ge.keyProvider.getKeys().forEach(function(on){ge.postKey(on)});break;case"enable":if(ar.enabled&&ge.keyProvider.getKeys().forEach(function(on){ge.postKey(on)}),ge.encryptionEnabled!==ar.enabled&&ar.participantIdentity===ge.room._peerId)ge.emit(gr.KS.ParticipantEncryptionStatusChanged,ar.enabled,ge.room.localParticipant),ge.encryptionEnabled=ar.enabled;else if(ar.participantIdentity){var wn=(Yt=ge.room)===null||Yt===void 0?void 0:Yt.getParticipantByIdentity(ar.participantIdentity);if(!wn)throw TypeError("couldn't set encryption status, participant not found".concat(ar.participantIdentity));ge.emit(gr.KS.ParticipantEncryptionStatusChanged,ar.enabled,wn)}break;case"ratchetKey":ge.keyProvider.emit(gr.fo.KeyRatcheted,ar.material,ar.keyIndex);break;case"e2eeStateChange":ge.emit(gr.KS.E2EEStateChange,ar);break;default:console.log("unknown message kind",qe)}},ge.onWorkerError=function(qe){var Yt;console.error("Worker encountered an error:",qe),console.error("Error message:",qe.message),console.error("Error filename:",qe.filename),console.error("Error line number:",qe.lineno),console.error("Error stack:",(Yt=qe.error)===null||Yt===void 0?void 0:Yt.stack)},ge.keyProvider=Y.keyProvider,ge.worker=Y.worker,ge.encryptionEnabled=!1,ge}return(0,ho.A)(B,q),(0,f.A)(B,[{key:"setup",value:function(Y){if(!(0,$u.Ag)())throw new Qn("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),Y!==this.room){this.room=Y,this.setupEventListeners(Y,this.keyProvider),this.handleE2EEManagerEvents();var ge={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",ge),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(ge))}}},{key:"setParticipantCryptorEnabled",value:function(Y,ge){console.debug("set e2ee to ".concat(Y," for participant ").concat(ge)),this.postEnable(Y,ge)}},{key:"setSifTrailer",value:function(Y){Y&&Y.length!==0?this.postSifTrailer(Y):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(Y,ge){var Te=this;ge.on(gr.fo.SetKey,function(rt){console.log("### keyInfo",rt),Te.postKey(rt)}).on(gr.fo.RatchetRequest,function(rt,dt){return Te.postRatchetRequest(rt,dt)})}},{key:"postRatchetRequest",value:function(Y,ge){if(!this.worker)throw Error("could not ratchet key, worker is missing");var Te={kind:"ratchetRequest",data:{participantIdentity:Y,keyIndex:ge}};this.worker.postMessage(Te)}},{key:"postKey",value:function(Y){var ge=Y.key,Te=Y.participantIdentity,rt=Y.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var dt={kind:"setKey",data:{participantIdentity:Te,isPublisher:Te===this.room._peerId,key:ge,keyIndex:rt}};this.worker.postMessage(dt)}},{key:"postEnable",value:function(Y,ge){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var Te={kind:"enable",data:{enabled:Y,participantIdentity:ge}};this.worker.postMessage(Te)}},{key:"postRTPMap",value:function(Y){var ge;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((ge=this.room)===null||ge===void 0)&&ge._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var Te={kind:"setRTPMap",data:{map:Y,participantIdentity:this.room._peerId}};this.worker.postMessage(Te)}},{key:"postSifTrailer",value:function(Y){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var ge={kind:"setSifTrailer",data:{trailer:Y}};this.worker.postMessage(ge)}},{key:"setupE2EEReceiver",value:function(Y,ge){var Te;this.handleReceiver(Y,Y.rtpReceiver,Y.track.id,ge,this.extractCodec(Y.rtpParameters.codecs),dd((Te=Y.appData)===null||Te===void 0?void 0:Te.share,Y.kind))}},{key:"setupE2EESender",value:function(Y){var ge;Y?this.handleSender(Y.rtpSender,Y.track.id,this.extractCodec(Y.rtpParameters.codecs),dd((ge=Y.appData)===null||ge===void 0?void 0:ge.share,Y.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:(V=(0,u.A)(y().mark(function Y(ge,Te,rt,dt,qe,Yt){var ct,Pt,ar,wn,on,gs;return y().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(this.worker){Re.next=2;break}return Re.abrupt("return");case 2:if(!(0,$u.Wm)()){Re.next=7;break}ct={kind:"decode",participantIdentity:dt,trackId:ge.track.id,codec:qe},Te.transform=new RTCRtpScriptTransform(this.worker,ct),Re.next=18;break;case 7:if(!(Fn.$Q in Te)||!qe){Re.next=11;break}return ar={kind:"updateCodec",data:{trackId:rt,codec:qe,participantIdentity:dt}},this.worker.postMessage(ar),Re.abrupt("return");case 11:if(wn=Te.writableStream,on=Te.readableStream,wn&&on){Re.next=16;break}return console.error("no writable or readable stream"),Re.abrupt("return");case 16:gs={kind:"decode",data:{readableStream:on,writableStream:wn,trackId:rt,codec:qe,participantIdentity:dt,mediaKind:Yt,peerId:(Pt=ge.appData)===null||Pt===void 0?void 0:Pt.peerId}},this.worker.postMessage(gs,[on,wn]);case 18:Te[Fn.$Q]=!0;case 19:case"end":return Re.stop()}},Y,this)})),function(Y,ge,Te,rt,dt,qe){return V.apply(this,arguments)})},{key:"handleSender",value:function(Y,ge,Te,rt,dt){var qe;if(!(Fn.$Q in Y)&&this.worker){if(!(!((qe=this.room)===null||qe===void 0)&&qe._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,$u.Wm)()){console.info("### initialize script transform");var Yt={kind:"encode",participantIdentity:this.room._peerId,trackId:ge,codec:Te,mediaKind:rt,peerId:dt};Y.transform=new RTCRtpScriptTransform(this.worker,Yt)}else try{var ct=Y.senderStreams;if(ct){var Pt={kind:"encode",data:{readableStream:ct.readable,writableStream:ct.writable,codec:Te,trackId:ge,participantIdentity:this.room._peerId,mediaKind:rt,peerId:dt}};this.worker.postMessage(Pt,[ct.readable,ct.writable])}else console.error("Error no sender streams found")}catch(ar){console.log("Error in handle sender ",ar)}Y[Fn.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var Y=this;this.on("NEW_CONSUMER",function(ge){var Te=ge.consumer,rt=ge.peerId;console.log("NEW_CONSUMER",Te),Y.setupE2EEReceiver(Te,rt)}),this.on("NEW_PRODUCER",function(ge){Y.setupE2EESender(ge)})}},{key:"extractCodec",value:function(Y){var ge,Te=Zo(Y);try{for(Te.s();!(ge=Te.n()).done;){var rt=ge.value,dt=rt.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(Fn.Ts.includes(dt)){rt=dt;break}}else if(Fn.ue.includes(dt)){rt=dt;break}}}catch(qe){Te.e(qe)}finally{Te.f()}return""}}]);var V}(zo.EventEmitter);function zu(){return ud.apply(this,arguments)}function ud(){return(ud=(0,u.A)(y().mark(function q(){var B,V,Y,ge;return y().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 2:if((B=Te.sent).ok){Te.next=5;break}throw new Error("Failed to load worker script: ".concat(B.statusText));case 5:return Te.next=7,B.text();case 7:return V=Te.sent,Y=new Blob([V],{type:"application/javascript"}),ge=URL.createObjectURL(Y),Te.abrupt("return",new Worker(ge));case 11:case"end":return Te.stop()}},q)}))).apply(this,arguments)}var Gh=o(9633);function Vs(q,B){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);B&&(Y=Y.filter(function(ge){return Object.getOwnPropertyDescriptor(q,ge).enumerable})),V.push.apply(V,Y)}return V}function os(q){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Vs(Object(V),!0).forEach(function(Y){(0,w.A)(q,Y,V[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):Vs(Object(V)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(V,Y))})}return q}function Pi(q,B){var V=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!V){if(Array.isArray(q)||(V=function(qe,Yt){if(qe){if(typeof qe=="string")return Yh(qe,Yt);var ct={}.toString.call(qe).slice(8,-1);return ct==="Object"&&qe.constructor&&(ct=qe.constructor.name),ct==="Map"||ct==="Set"?Array.from(qe):ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct)?Yh(qe,Yt):void 0}}(q))||B){V&&(q=V);var Y=0,ge=function(){};return{s:ge,n:function(){return Y>=q.length?{done:!0}:{done:!1,value:q[Y++]}},e:function(qe){throw qe},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,rt=!0,dt=!1;return{s:function(){V=V.call(q)},n:function(){var qe=V.next();return rt=qe.done,qe},e:function(qe){dt=!0,Te=qe},f:function(){try{rt||V.return==null||V.return()}finally{if(dt)throw Te}}}}function Yh(q,B){(B==null||B>q.length)&&(B=q.length);for(var V=0,Y=Array(B);V<B;V++)Y[V]=q[V];return Y}function Jh(q,B){(function(V,Y){if(Y.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")})(q,B),B.add(q)}var Ke,Hu={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},qu={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Sv={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Qh=[{scalabilityMode:"S3T3_KEY"}],sa=[{dtx:!0,maxFramerate:30}],Ve=new Sr("RoomClient"),Ni=new WeakSet,ai=function(){return(0,f.A)(function re($){var z,H,K=$.roomId,oe=$.peerId,fe=$.secret,Pe=$.displayName,Ne=$.device,ft=$.handlerName,Ze=$.useSimulcast,ht=$.forceTcp,mt=$.mode,pe=$.forceH264,gt=$.forceVP9,it=$.svc,ze=$.datachannel,Ue=$.externalVideo,Be=$.micEnabled,vt=$.webcamEnabled,Je=$.maxResolution,yt=$.useSpartialLayerAnalytics,Ct=$._deviceInfo,It=$.customCameraVideoTrack,Rt=$.customMicrophoneAudioTrack,bt=$.autoConsume,sr=$.preferredProtocol,Bt=$.signalingBaseUrl,Ut=$.metaData,Ar=$.defaultCameraIndex,kn=$.debugMode,Zr=$.keyProvider;switch((0,b.A)(this,re),Jh(this,Ni),(0,w.A)(this,"e2eeManager",null),Ve.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',K,oe,Pe,Ne.flag),this.useSpartialLayerAnalytics=yt||!1,this._deviceInfo=Ct,this._eventEmitter=new zo.EventEmitter,this._closed=!1,this._displayName=Pe,this._device=Ne,this._forceTcp=ht,this._preferredProtocol=sr,mt){case Us.nI.CONFERENCE:case Us.nI.SEND_AND_RECV:z=!0,H=!0;break;case Us.nI.RECV_ONLY:z=!1,H=!0;break;default:z=!1,H=!1}if(this._mode=mt,this._produce=z,this._consume=H,this._useDataChannel=ze,this._forceH264=!!pe,this._forceVP9=!!gt,this._micEnabled=!!Be,this._webcamEnabled=!!vt,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,Ue&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=Ue,this._externalVideo.play().catch(function(Wr){return Ve.warn("externalVideo.play() failed:%o",Wr)})),this._handlerName=ft,this._useSimulcast=Ze,this._socketUrl="",this._secret=fe,this._peerId=oe,this._roomId=K,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Je||"hd"},this._pinnedParticipants=new Map,it&&(Qh[0].scalabilityMode="".concat(it,"_KEY")),this.customCameraVideoTrack=It,this.customMicrophoneAudioTrack=Rt,this._autoConsume=bt,this._iceServers=[],this._metrics=new ol.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Bt||"api.videosdk.live",this._metaData=Ut,this._defaultCameraIndex=Ar,this._debugMode=!!kn,this._meetingConnectionState=null,Zr){if(!(Zr instanceof Gh.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(Wr,jn,Bn){if(typeof Wr=="function"?Wr===jn:Wr.has(jn))return arguments.length<3?jn:Bn;throw new TypeError("Private element is not present on this object")})(Ni,this,Ev).call(this,Zr)}},[{key:"on",value:function(re,$){this._eventEmitter.on(re,$)}},{key:"softClose",value:function(){var re,$=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"softClose() Start "});try{var z,H,K;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var oe,fe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({name:"Consumer Cleanup",parentSpan:$,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),Pe=Pi(this._consumers.values());try{for(Pe.s();!(oe=Pe.n()).done;)oe.value.close()}catch(ft){Pe.e(ft)}finally{Pe.f()}(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:fe,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:$,status:1,message:"Soft close completed successfully"})}catch(ft){var Ne;(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:$,status:2,message:"Soft close failed: ".concat(ft.message)}),console.error(ft)}}},{key:"close",value:function(re){var $,z,H,K,oe,fe=re.sendLeft,Pe=fe===void 0||fe;if(Pe&&((oe=this._openTelemetry)===null||oe===void 0||oe.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),Ve.debug("close()");var Ne=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:Ne,status:1,message:"Closed Trasnport"}),Ke.dispatch(Gt("closed")),Pe&&this.emitMeetingStateChange(al),(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),Pe&&this._eventEmitter.emit("MEETING_LEFT"),(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(xf=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe=this;return y().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,ss({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:H=gt.sent,K=H.baseUrl,oe=H.iceServers,fe=H.logs,Pe=H.observabilityJwt,Ne=H.traces,ft=H.metaData,Ze=H.signalingUrl,ht=H.socketPath,mt=H.socketUrl,this._baseUrl=K,this._socketUrl="wss://".concat(mt||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=oe,this._tracesEnabled=Ne.enabled,this._openTelemetry=new ll((0,w.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Ne,logs:fe,observabilityJwt:Pe,metaData:ft},"traces",Ne)),this._joinSpan=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:Ze||"signalingUrl not specify"}}),this._webSocket=Tt(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(ht??"","/socket.io")}),this.emitMeetingStateChange(sl),Ke.dispatch(Gt("connecting")),(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var it;pe._isWebsocketAlive=!0,pe._closed=!1,pe._mode===(Us.nI.RECV_ONLY||Us.nI.SIGNALLING_ONLY)&&pe.emitMeetingStateChange(qo),(it=pe._openTelemetry)===null||it===void 0||it.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:pe._joinSpan,status:1}),pe.requestEntry()}),this._webSocket.on("disconnect",function(it){}),this._webSocket.io.on("reconnect_failed",function(){pe._closed||pe.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(it){var ze,Ue,Be,vt,Je;pe._webSocket.active&&pe._webSocket.io._reconnecting?((ze=pe._openTelemetry)===null||ze===void 0||ze.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:pe._joinSpan,status:1}),Ke.dispatch(lr({type:"error",text:"WebSocket Reconnecting"})),pe.emitMeetingStateChange(il),pe._sendTransport&&((vt=pe._sendTransport)===null||vt===void 0||vt.close(),pe._sendTransport=null),pe._recvTransport&&((Je=pe._recvTransport)===null||Je===void 0||Je.close(),pe._recvTransport=null),(Ue=pe.customMicrophoneAudioTrack)===null||Ue===void 0||Ue.getTracks().forEach(function(yt){yt.stop()}),pe.customMicrophoneAudioTrack=null,(Be=pe.customCameraVideoTrack)===null||Be===void 0||Be.getTracks().forEach(function(yt){yt.stop()}),pe.customCameraVideoTrack=null):console.log("Error while trying to reconnect",it.message)}),this._webSocket.on("close",function(){pe._closed||pe.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt,Ct,It,Rt,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,jn,Bn,Xn,jr,On,zn,Zn,en,_s,Un,rr,es;return y().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:if(yt=(vt=pe._openTelemetry)===null||vt===void 0?void 0:vt.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(Ue)}}),pe._consume){Et.next=5;break}return Be({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(Ct=pe._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:yt,status:2,message:"I do not want to consume"}),Et.abrupt("return");case 5:return It=Ue.peerId,Rt=Ue.producerId,bt=Ue.id,sr=Ue.kind,Bt=Ue.rtpParameters,Ut=Ue.type,Ar=Ue.appData,kn=Ue.producerPaused,Zr=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Creating Consumer",span:yt}),Et.prev=7,Et.next=10,pe._recvTransport.consume({id:bt,producerId:Rt,kind:sr,rtpParameters:Bt,appData:os(os({},Ar),{},{peerId:It}),onRtpReceiver:function(fr){if(pe.e2eeManager){var yn=fr.writableStream,mn=fr.readableStream;if(!yn||!mn){var bn=fr.createEncodedStreams();fr.writableStream=bn.writable,yn=bn.writable,fr.readableStream=bn.readable,mn=bn.readable}}}});case 10:jr=Et.sent,On=Ht.s$(jr.rtpParameters.encodings[0].scalabilityMode),zn=On.spatialLayers,Zn=On.temporalLayers,jr.spatialLayers=zn,jr.temporalLayers=Zn,jr.currentSpatialLayers=zn-1,jr.currentTemporalLayers=Zn-1,pe._consumers.set(jr.id,jr),jr.on("transportclose",function(){pe._consumers.delete(jr.id);var fr=Bo(jr.id,It);Ke.dispatch(fr),pe._eventEmitter.emit(fr.type,fr.payload)}),(Wr=pe._openTelemetry)===null||Wr===void 0||Wr.completeSpan({span:Zr,status:1,message:"Consumer Created"}),Zr=(jn=pe._openTelemetry)===null||jn===void 0?void 0:jn.trace({spanName:"Sending Stream Enabled Event",span:yt}),en=Fo({id:jr.id,type:Ut,locallyPaused:!1,remotelyPaused:kn,rtpParameters:jr.rtpParameters,spatialLayers:zn,temporalLayers:Zn,currentSpatialLayer:zn-1,currentTemporalLayer:Zn-1,preferredSpatialLayer:zn-1,preferredTemporalLayer:Zn-1,priority:1,codec:jr.rtpParameters.codecs[0].mimeType.split("/")[1],track:jr.track,appData:Ar,instance:jr},It),Ke.dispatch(en),pe._eventEmitter.emit(en.type,en.payload),Be(),jr.kind==="video"&&Ke.getState().me.audioOnly&&pe._pauseConsumer(jr),(Bn=pe._openTelemetry)===null||Bn===void 0||Bn.completeSpan({span:Zr,status:1,message:"Event Send Successfully"}),(Xn=pe._openTelemetry)===null||Xn===void 0||Xn.completeSpan({span:yt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":jr.id}}),jr.kind=="video"&&jr.appData.share&&((_s=pe._openTelemetry)===null||_s===void 0||_s.traceAutoComplete({spanName:"Presenter Changed",span:yt,attributes:{"peer.id":It}})),pe.e2eeManager&&pe.e2eeManager.emit("NEW_CONSUMER",{consumer:jr,peerId:pe._peerId}),Et.next=38;break;case 31:throw Et.prev=31,Et.t0=Et.catch(7),(Un=pe._openTelemetry)===null||Un===void 0||Un.completeSpan({span:Zr,status:2,message:"Error creating a Consumer: ".concat(Et.t0)}),(rr=pe._openTelemetry)===null||rr===void 0||rr.completeSpan({span:yt,status:2,message:"Error creating a Consumer: ".concat(Et.t0)}),Ke.dispatch(lr({type:"error",text:"Error creating a Consumer: ".concat(Et.t0)})),(es=pe._videosdkLogs)===null||es===void 0||es.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:Et.t0.message}}),Et.t0;case 38:case"end":return Et.stop()}},ze,null,[[7,31]])}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt,Ct,It,Rt,bt,sr;return y().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(pe._consume){Bt.next=3;break}return Be({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),Bt.abrupt("return");case 3:if(pe._useDataChannel){Bt.next=6;break}return Be({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),Bt.abrupt("return");case 6:return vt=Ue.peerId,Je=Ue.dataProducerId,yt=Ue.id,Ct=Ue.sctpStreamParameters,It=Ue.label,Rt=Ue.protocol,bt=Ue.appData,Bt.prev=7,Bt.next=10,pe._recvTransport.consumeData({id:yt,dataProducerId:Je,sctpStreamParameters:Ct,label:It,protocol:Rt,appData:os(os({},bt),{},{peerId:vt})});case 10:sr=Bt.sent,pe._dataConsumers.set(sr.id,sr),sr.on("transportclose",function(){pe._dataConsumers.delete(sr.id)}),sr.on("open",function(){Ve.debug('DataConsumer "open" event')}),sr.on("close",function(){Ve.warn('DataConsumer "close" event'),pe._dataConsumers.delete(sr.id),Ke.dispatch(lr({type:"error",text:"DataConsumer closed"}))}),sr.on("error",function(Ut){Ve.error('DataConsumer "error" event:%o',Ut),Ke.dispatch(lr({type:"error",text:"DataConsumer error: ".concat(Ut)}))}),sr.on("message",function(Ut){if(Ve.debug('DataConsumer "message" event [streamId:%d]',sr.sctpStreamParameters.streamId),window.DC_MESSAGE=Ut,Ut instanceof ArrayBuffer){var Ar=new DataView(Ut).getUint32();return Ar==Math.pow(2,32)-1?(Ve.warn("dataChannelTest finished!"),void(pe._nextDataChannelTestNumber=0)):(Ar>pe._nextDataChannelTestNumber&&Ve.warn("dataChannelTest: %s packets missing",Ar-pe._nextDataChannelTestNumber),void(pe._nextDataChannelTestNumber=Ar+1))}if(typeof Ut=="string")switch(sr.label){case"chat":var kn=Ke.getState().peers,Zr=Object.keys(kn).map(function(Wr){return kn[Wr]}).find(function(Wr){return Wr.dataConsumers.includes(sr.id)});if(!Zr){Ve.warn('DataConsumer "message" from unknown peer');break}Ke.dispatch(lr({title:"".concat(Zr.displayName," says:"),text:Ut,timeout:5e3})),pe._eventEmitter.emit("CHAT_MESSAGE",{text:Ut,senderId:Zr.id,timestamp:new Date().getTime()});break;case"bot":Ke.dispatch(lr({title:"Message from Bot:",text:Ut,timeout:5e3}))}else Ve.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=sr,Ke.dispatch(nl({id:sr.id,sctpStreamParameters:sr.sctpStreamParameters,label:sr.label,protocol:sr.protocol},vt)),Be(),Bt.next=26;break;case 22:Bt.prev=22,Bt.t0=Bt.catch(7),Ve.error('"newDataConsumer" request failed:%o',Bt.t0),Ke.dispatch(lr({type:"error",text:"Error creating a DataConsumer: ".concat(Bt.t0)}));case 26:case"end":return Bt.stop()}},ze,null,[[7,22]])}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt;return y().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:try{Je=Ue.peerId,(vt=pe._openTelemetry)===null||vt===void 0||vt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(Je),status:1}),pe._eventEmitter.emit("MIC_REQUESTED",{peerId:Je}),Be()}catch(It){Ve.error('"enableMic" request failed:%o',It),(yt=pe._videosdkLogs)===null||yt===void 0||yt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:It.message}}),pe._emitError({code:3027,message:It.message})}case 1:case"end":return Ct.stop()}},ze)}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt,Ct,It;return y().wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.prev=0,vt=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Websocket REQ: disableMic"}),Rt.next=4,pe.disableMic(!1,vt);case 4:(yt=pe._openTelemetry)===null||yt===void 0||yt.completeSpan({span:vt,status:1,message:"Request Completed"}),Be(),Rt.next=13;break;case 8:Rt.prev=8,Rt.t0=Rt.catch(0),(Ct=pe._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:vt,status:2,message:"disableMic request failed ".concat(Rt.t0)}),(It=pe._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Rt.t0.message}}),pe._emitError({code:3028,message:Rt.t0.message});case 13:case"end":return Rt.stop()}},ze,null,[[0,8]])}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt;return y().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:try{Je=Ue.peerId,(vt=pe._openTelemetry)===null||vt===void 0||vt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(Je),status:1}),pe._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Je}),Be()}catch(It){Ve.error('"enableWebcam" request failed:%o',It),(yt=pe._videosdkLogs)===null||yt===void 0||yt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:It.message}}),pe._emitError({code:3029,message:It.message})}case 1:case"end":return Ct.stop()}},ze)}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt,Ct,It;return y().wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.prev=0,vt=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Websocket REQ: disableWebcam"}),Rt.next=4,pe.disableWebcam(vt);case 4:(yt=pe._openTelemetry)===null||yt===void 0||yt.completeSpan({span:vt,status:1,message:"Request Completed"}),Be(),Rt.next=13;break;case 8:Rt.prev=8,Rt.t0=Rt.catch(0),(Ct=pe._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:vt,status:2,message:"disableWebcam request failed ".concat(Rt.t0)}),(It=pe._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Rt.t0.message}}),pe._emitError({code:3030,message:Rt.t0.message});case 13:case"end":return Rt.stop()}},ze,null,[[0,8]])}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){var vt,Je,yt,Ct,It,Rt,bt,sr,Bt;return y().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:Ut.prev=0,Ct=Ue.peerId,It=Ue.state,Rt=Ue.pinnedBy,vt=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:Ct,state:It,pinnedBy:Rt})}}),pe._pinnedParticipants.has(Ct)||pe._pinnedParticipants.set(Ct,{cam:!1,share:!1}),bt=pe._pinnedParticipants.get(Ct),It.cam!=null&&(bt.cam=It.cam),It.share!=null&&(bt.share=It.share),pe._pinnedParticipants.set(Ct,bt),pe._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:Ct,state:It,pinnedBy:Rt}),bt.share==0&&bt.cam==0&&pe._pinnedParticipants.delete(Ct),(yt=pe._openTelemetry)===null||yt===void 0||yt.completeSpan({span:vt,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(pe._pinnedParticipants)}}),Be(),Ut.next=19;break;case 14:throw Ut.prev=14,Ut.t0=Ut.catch(0),(sr=pe._openTelemetry)===null||sr===void 0||sr.completeSpan({span:vt,status:2,message:"pinStateChanged request failed"}),(Bt=pe._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:Ut.t0.message}}),Ut.t0;case 19:case"end":return Ut.stop()}},ze,null,[[0,14]])}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){return y().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:pe._eventEmitter.emit("SWITCH_ROOM",Ue),Be();case 2:case"end":return vt.stop()}},ze)}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var it=(0,u.A)(y().mark(function ze(Ue,Be){return y().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:Be({peerId:pe._peerId,statsData:pe._stats}),pe._stats={};case 2:case"end":return vt.stop()}},ze)}));return function(ze,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var it=(0,u.A)(y().mark(function ze(Ue){var Be,vt,Je,yt,Ct,It,Rt,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,jn,Bn,Xn,jr,On,zn,Zn,en,_s,Un,rr,es,Et,fr,yn,mn,bn,Hn,vi,wa,Ai,aa,oa,Ws,Ps,ci,zs,ji,F,U,W,Z,le,ne,me,ye,be,ke,Ae,ce,_e,ve,J,X,he,je,Ie,xt,ut,et,Qt,Fe,Ee,Qe,He,qt,vr,At,Hr,Cn,tn,Is,cn,Ns,uc,Nl,cp,_f,lp,Sf,u_,p_,h_,f_;return y().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:Be=Ue,Ve.debug('proto "notification" event [method:%s, data:%o]',Ue.method,Be),nt.t0=Ue.method,nt.next=nt.t0==="error"?5:nt.t0==="participantMediaStateChanged"?10:nt.t0==="producerScore"?11:nt.t0==="entryRequested"?14:nt.t0==="entryResponded"?18:nt.t0==="newPeer"?34:nt.t0==="peerClosed"?41:nt.t0==="peerDisplayNameChanged"?47:nt.t0==="consumerClosed"?51:nt.t0==="consumerPaused"?63:nt.t0==="consumerResumed"?71:nt.t0==="consumerLayersChanged"?79:nt.t0==="consumerScore"?90:nt.t0==="dataConsumerClosed"?93:nt.t0==="activeSpeaker"?102:nt.t0==="consumerResumedSubManager"?107:nt.t0==="consumerPausedSubManager"?109:nt.t0==="transcriptionStateChanged"?111:nt.t0==="transcriptionText"?114:nt.t0==="recordingStateChanged"?116:nt.t0==="recordingStarted"?119:nt.t0==="recordingStopped"?121:nt.t0==="livestreamStateChanged"?123:nt.t0==="livestreamStarted"?126:nt.t0==="livestreamStopped"?128:nt.t0==="hlsStateChanged"?130:nt.t0==="hlsPlayableStateChanged"?133:nt.t0==="hlsStarted"?135:nt.t0==="hlsStopped"?138:nt.t0==="whiteboardStarted"?140:nt.t0==="whiteboardStopped"?143:nt.t0==="addCharacter"?145:nt.t0==="removeCharacter"?151:nt.t0==="characterStateChanged"?157:nt.t0==="characterMessage"?160:nt.t0==="userMessage"?162:nt.t0==="characterData"?164:nt.t0==="characterError"?166:nt.t0==="videoStatusChanged"?168:nt.t0==="videoSeeked"?170:nt.t0==="connectionOpen"?173:nt.t0==="connectionClose"?175:nt.t0==="connectionChatMessage"?177:nt.t0==="connectionParticipantJoined"?179:nt.t0==="connectionParticipantLeft"?181:nt.t0==="pubsubMessage"?183:nt.t0==="peerModeChanged"?185:nt.t0==="restartIce"?188:nt.t0==="mediaRelayStarted"?192:nt.t0==="mediaRelayStopped"?195:nt.t0==="mediaRelayError"?198:nt.t0==="mediaRelayRequestResponse"?201:nt.t0==="mediaRelayRequestReceived"?204:207;break;case 5:return yt=Be,pe._eventEmitter.emit("ERROR",yt),(vt=pe._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:yt.message}}),(Je=pe._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:yt.message},status:2}),nt.abrupt("break",208);case 10:try{Ct=Be.peerId,It=Be.kind,Rt=Be.newState,pe._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:Ct,kind:It,newState:Rt}),It=="video"&&((bt=pe._openTelemetry)===null||bt===void 0||bt.traceAutoComplete({spanName:"".concat(Ct," has ").concat(Rt?"enable":"disable"," ").concat(It),status:1}))}catch(dp){Ve.error('"newProducer" request failed:%o',dp),(sr=pe._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:dp.message}})}case 11:return Bt=Be.producerId,Ut=Be.score,Ke.dispatch(xs(Bt,Ut)),nt.abrupt("break",208);case 14:return kn=Be.id,Zr=Be.name,Wr=(Ar=pe._openTelemetry)===null||Ar===void 0?void 0:Ar.trace({spanName:"Websocket Noti: entryRequested",span:pe._joinSpan,attributes:{data:JSON.stringify({id:kn,name:Zr})}}),kn!==pe._peerId?(pe._eventEmitter.emit("ENTRY_REQUESTED",{id:kn,name:Zr}),(jn=pe._openTelemetry)===null||jn===void 0||jn.completeSpan({span:Wr,status:1,message:"EntryResponded Recieved"})):(Bn=pe._openTelemetry)===null||Bn===void 0||Bn.completeSpan({span:Wr,status:2,message:"Entry Request Failed"}),nt.abrupt("break",208);case 18:if(On=Be.id,zn=Be.decision,Zn=Be.sessionId,en=Be.switchingRoomId,_s=(Xn=pe._openTelemetry)===null||Xn===void 0?void 0:Xn.trace({name:"Entry Response Handling",attributes:{"peer.id":On,"entry.decision":zn,switching_room:!!en}}),On===pe._peerId&&zn==="allowed"){nt.next=24;break}return(Un=pe._openTelemetry)===null||Un===void 0||Un.completeSpan({span:pe._joinSpan,status:2,message:"Join Request Denied"}),(rr=pe._openTelemetry)===null||rr===void 0||rr.completeSpan({span:_s,status:2,message:"Entry denied for peer"}),nt.abrupt("break",208);case 24:if(pe._eventEmitter.emit("ENTRY_RESPONDED",{id:On,decision:zn}),!en){nt.next=30;break}return(es=pe._openTelemetry)===null||es===void 0||es.completeSpan({span:_s,status:1,message:"Switching room initiated"}),pe.softClose(),pe.switchingRoom(en),nt.abrupt("break",208);case 30:return pe._videosdkLogs=new dl({roomId:pe._roomId,peerId:pe._peerId,logs:fe,observabilityJwt:Pe,deviceInfo:pe._deviceInfo,sessionId:Zn,debugMode:pe._debugMode}),pe.joinRoom(),(jr=pe._openTelemetry)===null||jr===void 0||jr.completeSpan({span:_s,status:1,message:"Entry response handled successfully"}),nt.abrupt("break",208);case 34:fr=ii(os(os({},Et=Be),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(fr),pe._eventEmitter.emit(fr.type,fr.payload),Ke.dispatch(lr({text:"".concat(Et.displayName," has joined the room")}));try{(yn=pe._openTelemetry)===null||yn===void 0||yn.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(Et.displayName),attributes:{peerData:JSON.stringify(Et)}})}catch(dp){(mn=pe._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:dp.message}}),console.error(dp)}return nt.abrupt("break",208);case 41:return Hn=Be.peerId,vi=Va(Hn),Ke.dispatch(vi),pe._eventEmitter.emit(vi.type,vi.payload),(bn=pe._openTelemetry)===null||bn===void 0||bn.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(Hn)}),nt.abrupt("break",208);case 47:return wa=Be.peerId,Ai=Be.displayName,aa=Be.oldDisplayName,Ke.dispatch(co(Ai,wa)),Ke.dispatch(lr({text:"".concat(aa," is now ").concat(Ai)})),nt.abrupt("break",208);case 51:if(Ws=Be.consumerId,Ps=pe._consumers.get(Ws)){nt.next=55;break}return nt.abrupt("break",208);case 55:return Ps.close(),pe._consumers.delete(Ws),ci=Ps.appData.peerId,zs=Bo(Ws,ci),Ke.dispatch(zs),pe._eventEmitter.emit(zs.type,zs.payload),(oa=pe._openTelemetry)===null||oa===void 0||oa.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat(Ws),attributes:{consumerData:JSON.stringify(Ps)}}),nt.abrupt("break",208);case 63:if(ji=Be.consumerId,F=pe._consumers.get(ji)){nt.next=67;break}return nt.abrupt("break",208);case 67:return F.pause(),Ke.dispatch(qi(ji,"remote")),pe._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:ji,peerId:F.appData.peerId}),nt.abrupt("break",208);case 71:if(U=Be.consumerId,W=pe._consumers.get(U)){nt.next=75;break}return nt.abrupt("break",208);case 75:return W.resume(),Ke.dispatch(Uo(U,"remote")),pe._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:U,peerId:W.appData.peerId}),nt.abrupt("break",208);case 79:if(le=Be.consumerId,ne=Be.spatialLayer,me=Be.temporalLayer,(ye=pe._consumers.get(le)).currentSpatialLayer=ne,ye.currentTemporalLayer=me,ye){nt.next=85;break}return nt.abrupt("break",208);case 85:return((Z=ye.appData)===null||Z===void 0||(Z=Z.encodings)===null||Z===void 0?void 0:Z.length)>1&&pe._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:ye.appData.peerId,prevQuality:ye.spatialLayers-1-ye.currentSpatialLayer==0?"HIGH":ye.spatialLayers-1-ye.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:ye.spatialLayers-1-ne==0?"HIGH":ye.spatialLayers-1-ne==1?"MEDIUM":"LOW"}),ye.currentSpatialLayer=ne,ye.currentTemporalLayer=me,Ke.dispatch(tl(le,ne,me)),nt.abrupt("break",208);case 90:return be=Be.consumerId,ke=Be.score,Ke.dispatch($o(be,ke)),nt.abrupt("break",208);case 93:if(Ae=Be.dataConsumerId,ce=pe._dataConsumers.get(Ae)){nt.next=97;break}return nt.abrupt("break",208);case 97:return ce.close(),pe._dataConsumers.delete(Ae),_e=ce.appData.peerId,Ke.dispatch(Wo(Ae,_e)),nt.abrupt("break",208);case 102:return ve=Be.peerId,J=Rn(ve),Ke.dispatch(J),pe._eventEmitter.emit(J.type,J.payload),nt.abrupt("break",208);case 107:return pe._eventEmitter.emit("SUB_MANAGER_RESUMED",Be),nt.abrupt("break",208);case 109:return pe._eventEmitter.emit("SUB_MANAGER_PAUSED",Be),nt.abrupt("break",208);case 111:return pe._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Be),(X=pe._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 114:return pe._eventEmitter.emit("TRANSCRIPTION_TEXT",Be),nt.abrupt("break",208);case 116:return pe._eventEmitter.emit("RECORDING_STATE_CHANGED",Be),(he=pe._openTelemetry)===null||he===void 0||he.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 119:return pe._eventEmitter.emit("RECORDING_STARTED",{}),nt.abrupt("break",208);case 121:return pe._eventEmitter.emit("RECORDING_STOPPED",{}),nt.abrupt("break",208);case 123:return pe._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Be),(je=pe._openTelemetry)===null||je===void 0||je.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 126:return pe._eventEmitter.emit("LIVESTREAM_STARTED",{}),nt.abrupt("break",208);case 128:return pe._eventEmitter.emit("LIVESTREAM_STOPPED",{}),nt.abrupt("break",208);case 130:return pe._eventEmitter.emit("HLS_STATE_CHANGED",Be),(Ie=pe._openTelemetry)===null||Ie===void 0||Ie.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 133:return Be.isPlayable&&(pe._eventEmitter.emit("HLS_STATE_CHANGED",os(os({},Be),{},{status:cl.V.HLS_PLAYABLE})),(xt=pe._openTelemetry)===null||xt===void 0||xt.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),nt.abrupt("break",208);case 135:return ut=Be.downstreamUrl,pe._eventEmitter.emit("HLS_STARTED",ut),nt.abrupt("break",208);case 138:return pe._eventEmitter.emit("HLS_STOPPED",{}),nt.abrupt("break",208);case 140:return et=Be.state,Qt=Be.url,et?pe._eventEmitter.emit("WHITEBOARD_STARTED",{state:et}):Qt&&pe._eventEmitter.emit("WHITEBOARD_STARTED",{url:Qt}),nt.abrupt("break",208);case 143:return pe._eventEmitter.emit("WHITEBOARD_STOPPED",{}),nt.abrupt("break",208);case 145:return Ee=ii(os(os({},Be),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(Ee),pe._eventEmitter.emit("ADD_CHARACTER",Be),(Fe=pe._openTelemetry)===null||Fe===void 0||Fe.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Be),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 151:return He=Be.id,qt=Va(He),Ke.dispatch(qt),pe._eventEmitter.emit("REMOVE_CHARACTER",Be),(Qe=pe._openTelemetry)===null||Qe===void 0||Qe.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Be),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 157:return pe._eventEmitter.emit("CHARACTER_STATE_CHANGED",Be),(vr=pe._openTelemetry)===null||vr===void 0||vr.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 160:return pe._eventEmitter.emit("CHARACTER_MESSAGE",Be),nt.abrupt("break",208);case 162:return pe._eventEmitter.emit("USER_MESSAGE",Be),nt.abrupt("break",208);case 164:return pe._eventEmitter.emit("CHARACTER_DATA",Be),nt.abrupt("break",208);case 166:return pe._eventEmitter.emit("CHARACTER_ERROR",Be),nt.abrupt("break",208);case 168:return pe._eventEmitter.emit("VIDEO_STATE_CHANGED",Be),nt.abrupt("break",208);case 170:return At=Be.currentTime,pe._eventEmitter.emit("VIDEO_SEEKED",{currentTime:At}),nt.abrupt("break",208);case 173:return pe._eventEmitter.emit("CONNECTION_OPEN",Be),nt.abrupt("break",208);case 175:return pe._eventEmitter.emit("CONNECTION_CLOSE",Be),nt.abrupt("break",208);case 177:return pe._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Be),nt.abrupt("break",208);case 179:return pe._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Be),nt.abrupt("break",208);case 181:return pe._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Be),nt.abrupt("break",208);case 183:return pe._eventEmitter.emit("PUBSUB_MESSAGE",Be),nt.abrupt("break",208);case 185:return pe._eventEmitter.emit("PEER_MODE_CHANGED",Be),(Hr=pe._openTelemetry)===null||Hr===void 0||Hr.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 188:return tn=Be.transportId,Is=Be.iceParameters,cn=(Cn=pe._openTelemetry)===null||Cn===void 0?void 0:Cn.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(tn),attributes:{iceParameters:JSON.stringify(Is)}}),pe.handleRemoteRestartIce({transportId:tn,iceParameters:Is,internalSpan:cn}),nt.abrupt("break",208);case 192:return Ns=Ue.meetingId,pe._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:Ns}),nt.abrupt("break",208);case 195:return uc=Ue.meetingId,Nl=Ue.reason,pe._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:uc,reason:Nl}),nt.abrupt("break",208);case 198:return cp=Ue.meetingId,_f=Ue.reason,pe._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:cp,reason:_f}),nt.abrupt("break",208);case 201:return lp=Ue.decision,Sf=Ue.decidedBy,u_=Ue.meetingId,pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:lp,decidedBy:Sf,meetingId:u_}),nt.abrupt("break",208);case 204:return p_=Ue.peerId,h_=Ue.meetingId,f_=Ue.displayName,pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:p_,meetingId:h_,displayName:f_}),nt.abrupt("break",208);case 207:Ve.error('unknown Websocket notification.method "%s"',Ue.method);case 208:case"end":return nt.stop()}},ze)}));return function(ze){return it.apply(this,arguments)}}());case 38:case"end":return gt.stop()}},re,this)})),function(){return xf.apply(this,arguments)})},{key:"requestEntry",value:(wf=(0,u.A)(y().mark(function re(){var $,z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Requesting Entry",span:this._joinSpan}),K.next=3,this._socketRequest("requestEntry",{name:this._displayName});case 3:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"Entry Requested Successfully"});case 4:case"end":return K.stop()}},re,this)})),function(){return wf.apply(this,arguments)})},{key:"respondEntry",value:(Pl=(0,u.A)(y().mark(function re($,z){var H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return oe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Responding Entry",attributes:{peerId:$,decision:z},span:this._joinSpan}),fe.next=3,this._socketRequest("respondEntry",{id:$,decision:z});case 3:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Entry Responded Successfully",span:oe,status:1});case 4:case"end":return fe.stop()}},re,this)})),function(re,$){return Pl.apply(this,arguments)})},{key:"startTranscription",value:(Wa=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe;return y().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ve.debug("startTranscription()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startTranscription() Start",attributes:{config:$?JSON.stringify($):"config Not Specify"}}),Pe.prev=2,Pe.next=5,this._socketRequest("startTranscription",{config:$});case 5:Pe.next=13;break;case 7:Pe.prev=7,Pe.t0=Pe.catch(2),Ve.error("startTranscription() | failed:%o",Pe.t0),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"startTranscription() failed"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Pe.t0.message}}),this._emitError({code:4031,message:Pe.t0.message});case 13:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"startTranscription() End"});case 14:case"end":return Pe.stop()}},re,this,[[2,7]])})),function(re){return Wa.apply(this,arguments)})},{key:"stopTranscription",value:(op=(0,u.A)(y().mark(function re(){var $,z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("stopTranscription()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopTranscription() Start"}),fe.prev=2,fe.next=5,this._socketRequest("stopTranscription",{});case 5:fe.next=12;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"stopTranscription() failed"}),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),this._emitError({code:4032,message:fe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopTranscription() End"});case 13:case"end":return fe.stop()}},re,this,[[2,7]])})),function(){return op.apply(this,arguments)})},{key:"pauseAllConsumers",value:(jd=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht;return y().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:$||"Kind not specified"}}),mt.prev=1,mt.next=4,this._socketRequest("pauseAllConsumers",{kind:$===void 0?"all":$});case 4:if(fe=mt.sent,Pe=!1,!((fe==null||(oe=fe.consumersWithIssues)===null||oe===void 0?void 0:oe.length)>0)){mt.next=13;break}return mt.next=9,this._socketRequest("pauseAllConsumers",{kind:$===void 0?"all":$});case 9:((ft=mt.sent)==null||(Ne=ft.consumersWithIssues)===null||Ne===void 0?void 0:Ne.length)===0&&(Pe=!0),mt.next=14;break;case 13:Pe=!0;case 14:Pe&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:$}),mt.next=22;break;case 17:mt.prev=17,mt.t0=mt.catch(1),Ve.error("pauseAllConsumers() | failed:%o",mt.t0),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:K,status:2,message:"pauseAllConsumers() failed"}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:mt.t0.message}});case 22:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"pauseAllConsumers() End"});case 23:case"end":return mt.stop()}},re,this,[[1,17]])})),function(re){return jd.apply(this,arguments)})},{key:"resumeAllConsumers",value:(bf=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht;return y().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:$||"Kind not specified"}}),mt.prev=1,mt.next=4,this._socketRequest("resumeAllConsumers",{kind:$===void 0?"all":$});case 4:if(fe=mt.sent,Pe=!1,!((fe==null||(oe=fe.consumersWithIssues)===null||oe===void 0?void 0:oe.length)>0)){mt.next=13;break}return mt.next=9,this._socketRequest("resumeAllConsumers",{kind:$===void 0?"all":$});case 9:((ft=mt.sent)==null||(Ne=ft.consumersWithIssues)===null||Ne===void 0?void 0:Ne.length)===0&&(Pe=!0),mt.next=14;break;case 13:Pe=!0;case 14:Pe&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:$}),mt.next=22;break;case 17:mt.prev=17,mt.t0=mt.catch(1),Ve.error("resumeAllConsumers() | failed:%o",mt.t0),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:K,status:2,message:"resumeAllConsumers() failed"}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:mt.t0.message}});case 22:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"resumeAllConsumers() End"});case 23:case"end":return mt.stop()}},re,this,[[1,17]])})),function(re){return bf.apply(this,arguments)})},{key:"startRecording",value:(yf=(0,u.A)(y().mark(function re($,z,H,K){var oe,fe,Pe,Ne,ft;return y().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ve.debug("startRecording()"),Pe=(oe=this._openTelemetry)===null||oe===void 0?void 0:oe.trace({spanName:"startRecording() Start",attributes:{webhookUrl:$||"webhookUrl Not Specify",awsDirPath:z||"awsDirPath Not Specify",config:H?JSON.stringify(H):"config Not Specify",transcription:K?JSON.stringify(K):"transcription Not Specify"}}),Ze.prev=2,Ze.next=5,this._socketRequest("startRecording",{webhookUrl:$,awsDirPath:z,config:H,transcription:K});case 5:Ze.next=13;break;case 7:Ze.prev=7,Ze.t0=Ze.catch(2),Ve.error("startRecording() | failed:%o",Ze.t0),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:Pe,status:2,message:"startRecording() failed"}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Ze.t0.message}}),this._emitError({code:4011,message:Ze.t0.message});case 13:(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:Pe,status:1,message:"startRecording() End"});case 14:case"end":return Ze.stop()}},re,this,[[2,7]])})),function(re,$,z,H){return yf.apply(this,arguments)})},{key:"stopRecording",value:(oi=(0,u.A)(y().mark(function re(){var $,z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!this._closed){fe.next=2;break}return fe.abrupt("return");case 2:return Ve.debug("stopRecording()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopRecording() Start"}),fe.prev=4,fe.next=7,this._socketRequest("stopRecording",{});case 7:fe.next=14;break;case 9:fe.prev=9,fe.t0=fe.catch(4),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"stopRecording() failed"}),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),this._emitError({code:4012,message:fe.t0.message});case 14:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopRecording() End"});case 15:case"end":return fe.stop()}},re,this,[[4,9]])})),function(){return oi.apply(this,arguments)})},{key:"startLivestream",value:(vf=(0,u.A)(y().mark(function re($,z){var H,K,oe,fe,Pe;return y().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ve.debug("startLivestream()"),oe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"startLivestream() Start",attributes:{outputs:$?JSON.stringify($):"outputs Not Specify",config:z?JSON.stringify(z):"config Not Specify"}}),Ne.prev=2,Ne.next=5,this._socketRequest("startLivestream",{outputs:$,config:z});case 5:Ne.next=12;break;case 7:Ne.prev=7,Ne.t0=Ne.catch(2),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:oe,status:1,message:"startLivestream() End"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Ne.t0.message}}),this._emitError({code:4013,message:Ne.t0.message});case 12:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:oe,status:1,message:"startLivestream() End"});case 13:case"end":return Ne.stop()}},re,this,[[2,7]])})),function(re,$){return vf.apply(this,arguments)})},{key:"stopLivestream",value:(gf=(0,u.A)(y().mark(function re(){var $,z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("stopLivestream()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopLivestream() Start"}),fe.prev=2,fe.next=5,this._socketRequest("stopLivestream",{});case 5:fe.next=12;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:fe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopLivestream() End"});case 13:case"end":return fe.stop()}},re,this,[[2,7]])})),function(){return gf.apply(this,arguments)})},{key:"startHls",value:(Ad=(0,u.A)(y().mark(function re($,z){var H,K,oe,fe,Pe;return y().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return $=$||{},z=z||{},Ve.debug("startHls()"),oe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"startHls() Start",attributes:{config:$?JSON.stringify($):"config Not Specify",transcription:z?JSON.stringify(z):"transcription Not Specify"}}),Ne.prev=4,Ne.next=7,this._socketRequest("startHls",{config:$,transcription:z});case 7:Ne.next=15;break;case 9:Ne.prev=9,Ne.t0=Ne.catch(4),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Ne.t0.message}}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:oe,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Ne.t0.message}),Ve.error("startHls() | failed:%o",Ne.t0);case 15:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:oe,status:1,message:"startHlsSpan() End"});case 16:case"end":return Ne.stop()}},re,this,[[4,9]])})),function(re,$){return Ad.apply(this,arguments)})},{key:"stopHls",value:(ap=(0,u.A)(y().mark(function re(){var $,z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("stopHls()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopHls() Start"}),fe.prev=2,fe.next=5,this._socketRequest("stopHls",{});case 5:fe.next=12;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:fe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopHls() End"});case 13:case"end":return fe.stop()}},re,this,[[2,7]])})),function(){return ap.apply(this,arguments)})},{key:"startWhiteboard",value:(yo=(0,u.A)(y().mark(function re(){var $,z,H,K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return Ve.debug("startWhiteboard()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"startWhiteboard() Start"}),oe.prev=2,oe.next=5,this._socketRequest("startWhiteboard",{version:"v2"});case 5:oe.next=12;break;case 7:oe.prev=7,oe.t0=oe.catch(2),Ve.error("startWhiteboard() | failed:%o",oe.t0),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:oe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"startWhiteboard() End"});case 13:case"end":return oe.stop()}},re,this,[[2,7]])})),function(){return yo.apply(this,arguments)})},{key:"stopWhiteboard",value:(Nd=(0,u.A)(y().mark(function re(){var $,z,H,K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return Ve.debug("stopWhiteboard()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopWhiteboard() Start"}),oe.prev=2,oe.next=5,this._socketRequest("stopWhiteboard",{});case 5:oe.next=12;break;case 7:oe.prev=7,oe.t0=oe.catch(2),Ve.error("stopWhiteboard() | failed:%o",oe.t0),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:oe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopWhiteboard() End"});case 13:case"end":return oe.stop()}},re,this,[[2,7]])})),function(){return Nd.apply(this,arguments)})},{key:"joinCharacter",value:(Tl=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe;return y().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ve.debug("joinCharacter()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"joinCharacter() Start",attributes:{config:$?JSON.stringify($):"config Not Specify"}}),Pe.prev=2,Pe.next=5,this._socketRequest("joinCharacter",{config:$});case 5:return Pe.abrupt("return",Pe.sent);case 8:Pe.prev=8,Pe.t0=Pe.catch(2),Ve.error("joinCharacter() | failed:%o",Pe.t0),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"joinCharacter() failed"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Pe.t0.message}}),this._emitError({code:4033,message:Pe.t0.message});case 14:return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"joinCharacter() End"}),Pe.abrupt("return",!1);case 16:case"end":return Pe.stop()}},re,this,[[2,8]])})),function(re){return Tl.apply(this,arguments)})},{key:"switchTo",value:(Pd=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft;return y().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return H=$.meetingId,K=$.participantId,oe=$.token,fe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"switchTo() Start",attributes:{"peer.id":K,meetingId:H}}),Ze.prev=2,Ze.next=5,this._socketRequest("switchToMeeting",{meetingId:H,participantId:K,secret:oe||this._secret});case 5:(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:fe,status:1,message:"switchTo() Success"}),Ze.next=12;break;case 8:Ze.prev=8,Ze.t0=Ze.catch(2),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:fe,status:2,message:"switchTo() failed"}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:Ze.t0.message}});case 12:case"end":return Ze.stop()}},re,this,[[2,8]])})),function(re){return Pd.apply(this,arguments)})},{key:"removeCharacter",value:(mf=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe;return y().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ve.debug("removeCharacter()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"removeCharacter() Start"}),Pe.prev=2,Pe.next=5,this._socketRequest("leaveCharacter",{config:$});case 5:Pe.next=14;break;case 7:return Pe.prev=7,Pe.t0=Pe.catch(2),Ve.error("removeCharacter() | failed:%o",Pe.t0),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"removeCharacter() failed"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Pe.t0.message}}),this._emitError({code:4034,message:Pe.t0.message}),Pe.abrupt("return",!1);case 14:return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"removeCharacter() End"}),Pe.abrupt("return",!0);case 16:case"end":return Pe.stop()}},re,this,[[2,7]])})),function(re){return mf.apply(this,arguments)})},{key:"sendCharacterMessage",value:(Cl=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=$.interactionId,H=$.text,Ve.debug("sendCharacterMessage()"),K.prev=2,K.next=5,this._socketRequest("sendCharacterMessage",{interactionId:z,text:H});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),Ve.error("sendCharacterMessage() | failed:%o",K.t0),this._emitError({code:4035,message:K.t0.message});case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Cl.apply(this,arguments)})},{key:"interruptCharacter",value:(dc=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=$.interactionId,Ve.debug("interruptCharacter()"),H.prev=2,H.next=5,this._socketRequest("interruptCharacter",{interactionId:z});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),Ve.error("interruptCharacter() | failed:%o",H.t0),this._emitError({code:4036,message:H.t0.message});case 11:case"end":return H.stop()}},re,this,[[2,7]])})),function(re){return dc.apply(this,arguments)})},{key:"pinStateChange",value:(kl=(0,u.A)(y().mark(function re($){var z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return H=$.peerId,K=$.state,(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Pin state Change for ".concat(H),attributes:{state:K?JSON.stringify(K):null},status:1}),fe.prev=2,fe.next=5,this._socketRequest("pinStateChanged",{peerId:H,state:K});case 5:fe.next=11;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),Ve.error("pinStateChange() | failed");case 11:case"end":return fe.stop()}},re,this,[[2,7]])})),function(re){return kl.apply(this,arguments)})},{key:"startVideo",value:(Rl=(0,u.A)(y().mark(function re($){var z,H,K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return H=$.link,Ve.debug("startVideo()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),oe.prev=3,oe.next=6,this._socketRequest("startVideo",{link:H});case 6:oe.next=13;break;case 8:oe.prev=8,oe.t0=oe.catch(3),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:oe.t0.message}}),Ve.error("startVideo() | failed:%o",oe.t0),this._emitError({code:3023,message:oe.t0.message});case 13:case"end":return oe.stop()}},re,this,[[3,8]])})),function(re){return Rl.apply(this,arguments)})},{key:"stopVideo",value:(lc=(0,u.A)(y().mark(function re(){var $,z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Ve.debug("stopVideo()"),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),H.prev=2,H.next=5,this._socketRequest("stopVideo",{});case 5:H.next=12;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Ve.error("stopVideo() | failed:%o",H.t0),this._emitError({code:3024,message:H.t0.message});case 12:case"end":return H.stop()}},re,this,[[2,7]])})),function(){return lc.apply(this,arguments)})},{key:"pauseVideo",value:(ff=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("pauseVideo()"),z.prev=1,z.next=4,this._socketRequest("pauseVideo",{currentTime:$});case 4:z.next=10;break;case 6:z.prev=6,z.t0=z.catch(1),Ve.error("pauseVideo() | failed:%o",z.t0),this._emitError({code:3025,message:z.t0.message});case 10:case"end":return z.stop()}},re,this,[[1,6]])})),function(re){return ff.apply(this,arguments)})},{key:"resumeVideo",value:(hf=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:return Ve.debug("resumeVideo()"),$.prev=1,$.next=4,this._socketRequest("resumeVideo",{});case 4:$.next=10;break;case 6:$.prev=6,$.t0=$.catch(1),Ve.error("resumeVideo() | failed:%o",$.t0),this._emitError({code:3026,message:$.t0.message});case 10:case"end":return $.stop()}},re,this,[[1,6]])})),function(){return hf.apply(this,arguments)})},{key:"seekVideo",value:(cc=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("seekVideo()"),z.prev=1,z.next=4,this._socketRequest("seekVideo",{currentTime:$});case 4:z.next=10;break;case 6:z.prev=6,z.t0=z.catch(1),Ve.error("seekVideo() | failed:%o",z.t0),this._emitError({code:3031,message:z.t0.message});case 10:case"end":return z.stop()}},re,this,[[1,6]])})),function(re){return cc.apply(this,arguments)})},{key:"enablePeerMic",value:(pf=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Enabling peer ".concat($," Mic"),status:1}),Ve.debug("enablePeerMic()"),K.prev=2,K.next=5,this._socketRequest("enablePeerMic",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("enablePeerMic() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return pf.apply(this,arguments)})},{key:"requestMediaRelay",value:(ip=(0,u.A)(y().mark(function re($,z,H){var K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,oe.next=3,this._socketRequest("mediaRelayRequestSent",{meetingId:$,secret:z??this._secret,kinds:H??["audio","video","share","share_audio"]});case 3:oe.next=8;break;case 5:oe.prev=5,oe.t0=oe.catch(0),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:oe.t0.message}});case 8:case"end":return oe.stop()}},re,this,[[0,5]])})),function(re,$,z){return ip.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(sp=(0,u.A)(y().mark(function re($){var z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return z=$.decision,H=$.peerId,K=$.meetingId,fe.prev=1,fe.next=4,this._socketRequest("respondToMediaRelayRequest",{decision:z,decidedBy:this._peerId,peerId:H,meetingId:K});case 4:fe.next=9;break;case 6:fe.prev=6,fe.t0=fe.catch(1),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:fe.t0.message}});case 9:case"end":return fe.stop()}},re,this,[[1,6]])})),function(re){return sp.apply(this,arguments)})},{key:"stopMediaRelay",value:(uf=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,this._socketRequest("mediaRelayRequestStop",{meetingId:$});case 3:H.next=8;break;case 5:H.prev=5,H.t0=H.catch(0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:H.t0.message}});case 8:case"end":return H.stop()}},re,this,[[0,5]])})),function(re){return uf.apply(this,arguments)})},{key:"enableRelayMedia",value:(np=(0,u.A)(y().mark(function re($,z){var H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this._socketRequest("enableRelayMedia",{meetingId:$,kind:z});case 3:K.next=8;break;case 5:K.prev=5,K.t0=K.catch(0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:K.t0.message}});case 8:case"end":return K.stop()}},re,this,[[0,5]])})),function(re,$){return np.apply(this,arguments)})},{key:"disableRelayMedia",value:(Td=(0,u.A)(y().mark(function re($,z){var H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this._socketRequest("disableRelayMedia",{meetingId:$,kind:z});case 3:K.next=8;break;case 5:K.prev=5,K.t0=K.catch(0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:K.t0.message}});case 8:case"end":return K.stop()}},re,this,[[0,5]])})),function(re,$){return Td.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Cd=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,this._socketRequest("enableAdaptiveSubscription");case 3:z.next=8;break;case 5:z.prev=5,z.t0=z.catch(0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:z.t0.message}});case 8:case"end":return z.stop()}},re,this,[[0,5]])})),function(){return Cd.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(kd=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,this._socketRequest("disableAdaptiveSubscription");case 3:z.next=8;break;case 5:z.prev=5,z.t0=z.catch(0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:z.t0.message}});case 8:case"end":return z.stop()}},re,this,[[0,5]])})),function(){return kd.apply(this,arguments)})},{key:"disablePeerMic",value:(Rd=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Disabling peer ".concat($," Mic"),status:1}),Ve.debug("disablePeerMic()"),K.prev=2,K.next=5,this._socketRequest("disablePeerMic",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("disablePeerMic() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Rd.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(El=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return Ve.debug("consumeWebcamStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.prev=4,K.next=7,this._socketRequest("consumeVideoStreams",{peerId:$});case 7:K.next=13;break;case 9:K.prev=9,K.t0=K.catch(4),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("consumeWebcamStreams() | failed:%o",K.t0);case 13:case"end":return K.stop()}},re,this,[[4,9]])})),function(re){return El.apply(this,arguments)})},{key:"consumeMicStreams",value:(rp=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return Ve.debug("consumeMicStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.prev=2,K.next=5,this._socketRequest("consumeAudioStreams",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("consumeMicStreams() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return rp.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(tp=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return Ve.debug("stopConsumingAudioStreams()"),K.prev=3,K.next=6,this._socketRequest("stopConsumingAudioStreams",{peerId:$});case 6:(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.next=13;break;case 9:K.prev=9,K.t0=K.catch(3),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("stopConsumingMicStreams() | failed:%o",K.t0);case 13:case"end":return K.stop()}},re,this,[[3,9]])})),function(re){return tp.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(ep=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return Ve.debug("stopConsumingWebcamStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.prev=2,K.next=5,this._socketRequest("stopConsumingVideoStreams",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("stopConsumingWebcamStreams() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return ep.apply(this,arguments)})},{key:"changeMode",value:(Ed=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt=this;return y().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeMode() Calling with mode: ".concat($)}),K=this._mode,Je.prev=2,K!==$){Je.next=7;break}throw(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"changeMode() Ending"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"You are already in ".concat($," mode"),logType:"INFO"}),new Error("You are already in ".concat($," mode"));case 7:if(Pe=function(){var yt=(0,u.A)(y().mark(function Ct(It,Rt){return y().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.next=2,vt._socketRequest("createWebRtcTransport",{preferredProtocol:vt._preferredProtocol,producing:It,consuming:Rt,sctpCapabilities:vt._useDataChannel?vt._mediasoupDevice.sctpCapabilities:void 0});case 2:return bt.abrupt("return",bt.sent);case 3:case"end":return bt.stop()}},Ct)}));return function(Ct,It){return yt.apply(this,arguments)}}(),!(0,Us.kR)($)){Je.next=36;break}return this._consume=!0,this._produce=!0,this._mode=$,this._mediasoupDevice=new Ht.pF({handlerName:this._handlerName}),Je.next=15,this._socketRequest("getRouterRtpCapabilities");case 15:return ft=Je.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(ft.headerExtensions=(Ze=ft.headerExtensions)===null||Ze===void 0?void 0:Ze.filter(function(yt){return yt.uri!="urn:3gpp:video-orientation"})),Je.next=19,this._mediasoupDevice.load({routerRtpCapabilities:ft});case 19:if(!this._produce){Je.next=24;break}return Je.next=22,Pe(!0,!1);case 22:ht=Je.sent,this.createProducerTransport(ht,H);case 24:if(K===Us.nI.RECV_ONLY||!this._consume){Je.next=29;break}return Je.next=27,Pe(!1,!0);case 27:mt=Je.sent,this.createConsumerTransport(mt,H);case 29:return(Ne=this._openTelemetry)===null||Ne===void 0||Ne.traceAutoComplete({spanName:"Sending changeMode request to server",span:H,status:1}),Je.next=32,this._socketRequest("changeMode",{mode:$});case 32:this._produce&&(Ke.dispatch(xr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,H)),window.SHOW_INFO&&(pe=Ke.getState(),gt=pe.me,Ke.dispatch(dr(gt.id))),Je.next=62;break;case 36:if(!(0,Us.kR)(K)||$!==Us.nI.RECV_ONLY){Je.next=44;break}return this._produce=!1,this._mode=$,this._closeProducersAndTransport(),Je.next=42,this._socketRequest("changeMode",{mode:$});case 42:Je.next=62;break;case 44:if(!(0,Us.wZ)(K)||$!==Us.nI.RECV_ONLY){Je.next=54;break}return this._consume=!0,this._mode=$,Je.next=49,this._setupWebrtcTransport(H);case 49:return Je.next=51,this._socketRequest("changeMode",{mode:$});case 51:window.SHOW_INFO&&(it=Ke.getState(),ze=it.me,Ke.dispatch(dr(ze.id))),Je.next=62;break;case 54:if(!(0,Us.wZ)($)){Je.next=62;break}return Je.next=57,this._socketRequest("changeMode",{mode:$});case 57:this._consume=!1,this._produce=!1,this._mode=$,this._dataConsumers.clear(),this._closeTransports();case 62:Je.next=68;break;case 64:Je.prev=64,Je.t0=Je.catch(2),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:"Error changeMode(".concat($,") | failed"),logType:"ERROR",attributes:{error:Je.t0.message}}),(Be=this._openTelemetry)===null||Be===void 0||Be.completeSpan({span:H,status:2,message:"changeMode(".concat($,") | failed")});case 68:case"end":return Je.stop()}},re,this,[[2,64]])})),function(re){return Ed.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var re;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(re=this._sendTransport)===null||re===void 0||re.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var re,$;this._sendTransport&&((re=this._sendTransport)===null||re===void 0||re.close(),this._sendTransport=null),this._recvTransport&&(($=this._recvTransport)===null||$===void 0||$.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(Sd=(0,u.A)(y().mark(function re($){var z,H,K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return this._mediasoupDevice=new Ht.pF({handlerName:this._handlerName}),oe.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return z=oe.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(z.headerExtensions=(H=z.headerExtensions)===null||H===void 0?void 0:H.filter(function(fe){return fe.uri!="urn:3gpp:video-orientation"})),oe.next=7,this._mediasoupDevice.load({routerRtpCapabilities:z});case 7:return oe.next=9,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 9:K=oe.sent,this.createConsumerTransport(K,$);case 11:case"end":return oe.stop()}},re,this)})),function(re){return Sd.apply(this,arguments)})},{key:"enablePeerWebcam",value:(vo=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Enabling peer ".concat($," Webcam"),status:1}),Ve.debug("enablePeerWebcam()"),K.prev=2,K.next=5,this._socketRequest("enablePeerWebcam",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("enablePeerWebcam() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return vo.apply(this,arguments)})},{key:"disablePeerWebcam",value:(Sl=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Disabling peer ".concat($," Webcam"),status:1}),Ve.debug("disablePeerWebcam()"),K.prev=2,K.next=5,this._socketRequest("disablePeerWebcam",{peerId:$});case 5:K.next=10;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:K.t0.message}});case 10:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Sl.apply(this,arguments)})},{key:"getMicStats",value:function(re){var $=this;if(this._micProducer){var z=0;re.onStatsCollected=function(H){var K;$._stats.producerStats||($._stats.producerStats={}),$._stats.producerStats.audio||($._stats.producerStats.audio=[]),$._micProducer&&($._latestStats[(K=$._micProducer)===null||K===void 0?void 0:K.id]=[]),H.audio.forEach(function(oe){var fe;$._micProducer&&$._latestStats[(fe=$._micProducer)===null||fe===void 0?void 0:fe.id].push(oe)}),z%5==0&&$._micProducer!=null&&$._stats.producerStats.audio.push(os({timestamp:new Date},$._latestStats[$._micProducer.id]?$._latestStats[$._micProducer.id][0]:{})),z++}}}},{key:"enableMic",value:(_l=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt,Je,yt,Ct,It,Rt,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,jn,Bn,Xn,jr,On,zn,Zn,en,_s,Un,rr,es,Et,fr,yn,mn,bn,Hn,vi,wa,Ai,aa,oa,Ws,Ps,ci,zs,ji,F,U,W,Z,le,ne,me,ye,be,ke,Ae,ce=this,_e=arguments;return y().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(fe=_e.length>0&&_e[0]!==void 0?_e[0]:void 0,Pe=_e.length>1&&_e[1]!==void 0?_e[1]:void 0,Ne=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"enableMic() Calling ".concat(fe?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:fe?JSON.stringify(fe):"Not Specify Custom Track"},span:Pe||null}),Ve.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){ve.next=28;break}if(ht=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Mic Producer found",span:Ne}),fe&&((mt=this._openTelemetry)===null||mt===void 0||mt.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Ne,status:1}),fe.getTracks().forEach(function(J){J.stop()})),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:ht,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),pe=this._micProducer,!this._sendTransport){ve.next=19;break}return ve.next=14,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(J){ce.e2eeManager&&(J.senderStreams=J.createEncodedStreams())}});case 14:this._micProducer=ve.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(it=An({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:pe._appData.encodings,codecOptions:pe._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),Ke.dispatch(it),this._eventEmitter.emit(it.type,it.payload),(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:Ne,status:1,message:"Enable Mic Successful"})):(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: micProducer null"}),ve.next=22;break;case 19:return(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:mr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(mr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),ve.abrupt("return");case 22:return Be=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Be==null||Be.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(Be)}),this._micProducer.observer.on("close",function(){Be==null||Be.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(Be)}),this.getMicStats(Be),Be.start(),ve.abrupt("return");case 28:if(!this._mediasoupDevice){ve.next=37;break}if(this._mediasoupDevice.canProduce("audio")){ve.next=35;break}return yt=this._deviceInfo.sdkType=="react-native"?mr.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:mr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(vt=this._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:yt,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),Ve.error("enableMic() | cannot produce audio"),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: ".concat(yt)}),ve.abrupt("return");case 35:ve.next=40;break;case 37:return(Ct=this._videosdkLogs)===null||Ct===void 0||Ct.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(It=this._openTelemetry)===null||It===void 0||It.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),ve.abrupt("return");case 40:if(ve.prev=40,this._externalVideo){ve.next=107;break}return Ve.debug("enableMic() | calling getUserMedia()"),ve.next=45,this._updateMics(Ne);case 45:if(this._mic.device){ve.next=48;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 48:try{fe&&(Rt=fe.getAudioTracks()[0]).readyState=="ended"&&(Rt=null,Wr=mr.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(Zr=this._videosdkLogs)===null||Zr===void 0||Zr.pushLogs({logText:Wr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Wr))}catch(J){Bn=mr.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(jn=this._videosdkLogs)===null||jn===void 0||jn.pushLogs({logText:Bn.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Bn),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(J))}if(Rt){ve.next=105;break}return On=(Xn=this._openTelemetry)===null||Xn===void 0?void 0:Xn.trace({spanName:"Creating Track",span:Ne}),ve.prev=51,ve.next=54,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 54:zn=ve.sent,ve.next=103;break;case 57:if(ve.prev=57,ve.t0=ve.catch(51),(Zn=this._openTelemetry)===null||Zn===void 0||Zn.completeSpan({message:"Error in enableMic() :: ".concat(ve.t0.message),span:On,status:2}),ve.t0.name!=="SecurityError"){ve.next=68;break}Un=mr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,rr=Un.message,this._emitError(Un),(en=this._videosdkLogs)===null||en===void 0||en.pushLogs({logText:rr,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(_s=this._openTelemetry)===null||_s===void 0||_s.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(rr),span:Ne,status:2}),ve.next=102;break;case 68:if(ve.t0.name!=="DOMException"){ve.next=76;break}fr=mr.q.ERROR_RN_MIC_NOT_FOUND,yn=fr.message,this._emitError(fr),(es=this._videosdkLogs)===null||es===void 0||es.pushLogs({logText:yn,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(yn),span:Ne,status:2}),ve.next=102;break;case 76:if(!(ve.t0 instanceof DOMException)){ve.next=99;break}ve.t1=ve.t0.name,ve.next=ve.t1==="NotAllowedError"?80:ve.t1==="NotReadableError"?83:ve.t1==="NotFoundError"?86:93;break;case 80:return mn=this.handleNotAllowedError(ve.t0,this._openTelemetry,this._videosdkLogs,Ne,"audio"),this._emitError(mn),ve.abrupt("break",97);case 83:return bn=this.handleNotReadableError(ve.t0,this._openTelemetry,this._videosdkLogs,Ne,"audio"),this._emitError(bn),ve.abrupt("break",97);case 86:return Hn=mr.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Hn=mr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),vi=Hn.message,this._emitError(Hn),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:vi,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(vi),span:Ne,status:2}),ve.abrupt("break",97);case 93:return wa="An error occurred in creating audio track, ".concat(ve.t0.message),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:ve.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(wa)},dashboardLog:!0}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Error in enableMic() :: ".concat(wa),span:Ne,status:2}),ve.abrupt("break",97);case 97:ve.next=102;break;case 99:oa="An error occurred in creating audio track, ".concat(ve.t0.message),(Ai=this._videosdkLogs)===null||Ai===void 0||Ai.pushLogs({logText:ve.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(oa)},dashboardLog:!0}),(aa=this._openTelemetry)===null||aa===void 0||aa.completeSpan({message:"Error in enableMic() :: ".concat(oa),span:Ne,status:2});case 102:return ve.abrupt("return");case 103:Rt=zn.getAudioTracks()[0],(jr=this._openTelemetry)===null||jr===void 0||jr.completeSpan({message:"Audio Track Generated",span:On,status:1});case 105:ve.next=111;break;case 107:return ve.next=109,this._getExternalVideoStream();case 109:Ws=ve.sent,Rt=Ws.getAudioTracks()[0].clone();case 111:if(bt=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"Generating Producer Configuration",span:Ne}),Ps={opusStereo:1,opusDtx:1},fe&&(ci=fe.encoderConfig?ta.$.audioProfiles[fe.encoderConfig]:ta.$.audioProfiles.speech_standard,Ps={opusStereo:ci.stereo?1:0,opusFec:ci.fec?1:0,opusDtx:ci.dtx?1:0,opusMaxPlaybackRate:ci.maxPlaybackRate,opusPtime:ci.packetTime}),ji={encodings:zs=[{networkPriority:"high"}],codecOptions:Ps},(Bt=this._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"Generated AppData",span:bt,attributes:{appData:JSON.stringify(ji)},status:1}),(Ut=this._openTelemetry)===null||Ut===void 0||Ut.completeSpan({span:bt,status:1,message:"Producer Configuration Generated"}),bt=(Ar=this._openTelemetry)===null||Ar===void 0?void 0:Ar.trace({spanName:"Creating Mic Producer",span:Ne}),(kn=Rt)===null||kn===void 0||kn.addEventListener("ended",function(){console.log("Track Ended Error");try{var J,X,he=ce._deviceInfo.sdkType=="react-native"?mr.q.ERROR_RN_MIC_TRACK_ENDED:mr.q.ERROR_MICROPHONE_TRACK_ENDED;(J=ce._videosdkLogs)===null||J===void 0||J.pushLogs({logText:he.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(he.message)},dashboardLog:!0}),(X=ce._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ne,message:he.message,status:2}),Ke.dispatch(lr({type:"error",text:"Microphone disconnected!"})),ce.disableMic(!0,Ne).catch(function(){})}catch(je){console.error(je)}}),!this._sendTransport){ve.next=128;break}return ve.next=124,this._sendTransport.produce({track:Rt,encodings:zs,codecOptions:Ps,appData:os(os({},ji),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(J){ce.e2eeManager&&(J.senderStreams=J.createEncodedStreams())}});case 124:this._micProducer=ve.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),ve.next=131;break;case 128:return(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:mr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(mr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),ve.abrupt("return");case 131:this._micProducer?(Rt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Rt.getConstraints().deviceId)),Z=An({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:zs,codecOptions:Ps,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),Ke.dispatch(Z),this._eventEmitter.emit(Z.type,Z.payload),(le=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(le),this._micProducer.on("transportclose",function(){var J,X=Ln(ce._micProducer.id);Ke.dispatch(X),ce._eventEmitter.emit(X.type,X.payload),(J=ce._micProducer)===null||J===void 0||J.close(),ce._micProducer=null}),this._micProducer.observer.on("pause",function(){le==null||le.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(le)}),this._micProducer.observer.on("close",function(){le==null||le.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(le)}),this._micProducer.on("trackended",function(){var J,X,he=ce._deviceInfo.sdkType=="react-native"?mr.q.ERROR_RN_MIC_TRACK_ENDED:mr.q.ERROR_MICROPHONE_TRACK_ENDED;(J=ce._videosdkLogs)===null||J===void 0||J.pushLogs({logText:he.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(he.message)},dashboardLog:!0}),(X=ce._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ne,message:he.message,status:2}),Ke.dispatch(lr({type:"error",text:"Microphone disconnected!"})),ce.disableMic(!0,Ne).catch(function(){})}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:bt,status:1,message:"Mic Producer Created"}),(W=this._openTelemetry)===null||W===void 0||W.completeSpan({span:Ne,status:1,message:"Enable Mic Successful"})):((ne=this._videosdkLogs)===null||ne===void 0||ne.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(me=this._openTelemetry)===null||me===void 0||me.completeSpan({span:bt,status:2,message:"Error in enableMic() :: micProducer null"}),(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: micProducer null"})),ve.next=144;break;case 134:return ve.prev=134,ve.t2=ve.catch(40),(be=this._openTelemetry)===null||be===void 0||be.completeSpan({span:bt,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(ve.t2.message)}),(ke=this._openTelemetry)===null||ke===void 0||ke.completeSpan({span:Ne,status:2,message:"Error in enableMic :: ".concat(ve.t2.message)}),(Ae=this._videosdkLogs)===null||Ae===void 0||Ae.pushLogs({logText:ve.t2.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(ve.t2.message)},dashboardLog:!0}),Ve.error("enableMic() | failed:%o",ve.t2),Ke.dispatch(lr({type:"error",text:"Error enabling microphone: ".concat(ve.t2)})),ve.next=143,this._socketRequest("produceError",{mediaType:"audio",message:ve.t2.message});case 143:Rt&&Rt.stop();case 144:case"end":return ve.stop()}},re,this,[[40,134],[51,57]])})),function(){return _l.apply(this,arguments)})},{key:"disableMic",value:(oc=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt,Je,yt,Ct,It,Rt,bt,sr=arguments;return y().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(H=sr.length>0&&sr[0]!==void 0&&sr[0],K=sr.length>1&&sr[1]!==void 0?sr[1]:void 0,Ve.debug("disableMic()"),oe=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"disableMic() Calling",status:1,span:K||null}),this._micProducer){Bt.next=8;break}return(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:oe,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Bt.abrupt("return");case 8:if(Ne=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Mic Producer",span:oe,status:1}),this._micEnabled=!1,!this._micProducer||H){Bt.next=32;break}return mt=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Pausing Mic Producer",span:Ne,status:1}),this._micProducer.pause(),pe=Ln(this._micProducer.id),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:mt,status:1,message:"Pause Mic Successfully"}),Ke.dispatch(pe),this._eventEmitter.emit(pe.type,pe.payload),Bt.prev=17,Bt.next=20,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 20:(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:Ne,status:1,message:"Requested Server to Close Producer"}),Bt.next=30;break;case 23:Bt.prev=23,Bt.t0=Bt.catch(17),Ke.dispatch(lr({type:"error",text:"Error closing server-side mic Producer: ".concat(Bt.t0)})),Be="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(H),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:Ne,status:2,message:"Error in disableMic() :: ".concat(Bt.t0.message)}),(ze=this._openTelemetry)===null||ze===void 0||ze.completeSpan({span:oe,status:2,message:Be}),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:Be,logType:"ERROR",attributes:{error:Bt.t0.message},dashboardLog:!0});case 30:return(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:oe,status:1,message:"Mic Disabled Successfully"}),Bt.abrupt("return");case 32:return this._micProducer.close(),vt=Ln(this._micProducer.id),Ke.dispatch(vt),this._eventEmitter.emit(vt.type,vt.payload),Bt.prev=36,Bt.next=39,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 39:(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:Ne,status:1,message:"Requested Server to Close Producer"}),(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:oe,status:1,message:"Mic Disabled Successfully"}),Bt.next=50;break;case 43:Bt.prev=43,Bt.t1=Bt.catch(36),Ke.dispatch(lr({type:"error",text:"Error closing server-side mic Producer: ".concat(Bt.t1)})),bt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(H),(Ct=this._openTelemetry)===null||Ct===void 0||Ct.completeSpan({span:Ne,status:2,message:"Error in disableMic() :: ".concat(Bt.t1.message)}),(It=this._openTelemetry)===null||It===void 0||It.completeSpan({span:oe,status:2,message:bt}),(Rt=this._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:bt,logType:"ERROR",attributes:{error:Bt.t1.message},dashboardLog:!0});case 50:this._micProducer=null;case 51:case"end":return Bt.stop()}},re,this,[[17,23],[36,43]])})),function(){return oc.apply(this,arguments)})},{key:"muteMic",value:(df=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),z.prev=3,z.next=6,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 6:Ke.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(3),Ve.error("muteMic() | failed: %o",z.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:z.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error pausing server-side mic Producer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},re,this,[[3,9]])})),function(){return df.apply(this,arguments)})},{key:"unmuteMic",value:(lf=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),z.prev=3,z.next=6,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 6:Ke.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(3),Ve.error("unmuteMic() | failed: %o",z.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:z.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error resuming server-side mic Producer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},re,this,[[3,9]])})),function(){return lf.apply(this,arguments)})},{key:"enableWebcam",value:(Zu=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt,Je,yt,Ct,It,Rt,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,jn,Bn,Xn,jr,On,zn,Zn,en,_s,Un,rr,es,Et,fr,yn,mn,bn,Hn,vi,wa,Ai,aa,oa,Ws,Ps,ci,zs,ji,F,U,W,Z,le,ne,me,ye,be,ke,Ae=this,ce=arguments;return y().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(fe=ce.length>0&&ce[0]!==void 0?ce[0]:void 0,Pe=ce.length>1&&ce[1]!==void 0?ce[1]:void 0,Ne=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"enableWebcam() Calling ".concat(fe?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:fe?JSON.stringify(fe):"Not Specify Custom Track"},span:Pe||null}),Ve.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){_e.next=9;break}return(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Ze=this._videosdkLogs)===null||Ze===void 0||Ze.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),_e.abrupt("return");case 9:if(!this._mediasoupDevice){_e.next=18;break}if(this._mediasoupDevice.canProduce("video")){_e.next=16;break}return pe=this._deviceInfo.sdkType=="react-native"?mr.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:mr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: ".concat(pe)}),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:pe,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),Ve.error("enableWebcam() | cannot produce video"),_e.abrupt("return");case 16:_e.next=21;break;case 18:return(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),_e.abrupt("return");case 21:if(Ke.dispatch(Qs(!0)),Be=this._webcam.resolution,_e.prev=23,this._externalVideo){_e.next=100;break}return _e.next=27,this._updateWebcams(Ne);case 27:if(Ue=this._webcam.device){_e.next=31;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 31:Ve.debug("enableWebcam() | calling getUserMedia()");try{fe&&(ze=fe.getVideoTracks()[0]).readyState=="ended"&&(ze=null,Rt=mr.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(It=this._videosdkLogs)===null||It===void 0||It.pushLogs({logText:Rt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Rt))}catch(ve){sr=mr.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(bt=this._videosdkLogs)===null||bt===void 0||bt.pushLogs({logText:sr.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(sr),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(ve))}if(ze){_e.next=98;break}if(Ut=(Bt=this._openTelemetry)===null||Bt===void 0?void 0:Bt.trace({spanName:"Creating Track",span:Ne}),Ar=null,_e.prev=36,this._webcam.resolution!="hd"){_e.next=44;break}return _e.next=40,this.createCameraVideoTrack({cameraId:Ue.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Ue.facing});case 40:fe=_e.sent,Ar=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),_e.next=48;break;case 44:return _e.next=46,this.createCameraVideoTrack({cameraId:Ue.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Ue.facing});case 46:fe=_e.sent,Ar=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 48:ze=fe.getVideoTracks()[0],(kn=this._openTelemetry)===null||kn===void 0||kn.completeSpan({message:"Video Track Generated",span:Ut,attributes:{customVideoTrackConfig:Ar},status:1}),_e.next=98;break;case 52:if(_e.prev=52,_e.t0=_e.catch(36),(Zr=this._openTelemetry)===null||Zr===void 0||Zr.completeSpan({message:"Error in enableWebcam() :: ".concat(_e.t0.message),span:Ut,status:2}),_e.t0.name!=="SecurityError"){_e.next=63;break}Bn=mr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,Xn=Bn.message,this._emitError(Bn),(Wr=this._videosdkLogs)===null||Wr===void 0||Wr.pushLogs({logText:Xn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(jn=this._openTelemetry)===null||jn===void 0||jn.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Xn),span:enableMicSpan,status:2}),_e.next=97;break;case 63:if(_e.t0.name!=="DOMException"){_e.next=71;break}zn=mr.q.ERROR_RN_CAMERA_NOT_FOUND,Zn=zn.message,this._emitError(zn),(jr=this._videosdkLogs)===null||jr===void 0||jr.pushLogs({logText:Zn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(On=this._openTelemetry)===null||On===void 0||On.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Zn),span:enableMicSpan,status:2}),_e.next=97;break;case 71:if(!(_e.t0 instanceof DOMException)){_e.next=94;break}_e.t1=_e.t0.name,_e.next=_e.t1==="NotAllowedError"?75:_e.t1==="NotReadableError"?78:_e.t1==="NotFoundError"?81:88;break;case 75:return en=this.handleNotAllowedError(_e.t0,this._openTelemetry,this._videosdkLogs,Ne,"video"),this._emitError(en),_e.abrupt("break",92);case 78:return _s=this.handleNotReadableError(_e.t0,this._openTelemetry,this._videosdkLogs,Ne,"video"),this._emitError(_s),_e.abrupt("break",92);case 81:return Un=mr.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Un=mr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),rr=Un.message,this._emitError(Un),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:rr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(rr),span:Ne,status:2}),_e.abrupt("break",92);case 88:return es="An error occurred in creating video track, ".concat(_e.t0.message),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:_e.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(es)},dashboardLog:!0}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Error in enableWebcam() :: ".concat(es),span:Ne,status:2}),_e.abrupt("break",92);case 92:_e.next=97;break;case 94:yn="An error occurred in creating video track, ".concat(_e.t0.message),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:_e.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(yn)},dashboardLog:!0}),(fr=this._openTelemetry)===null||fr===void 0||fr.completeSpan({message:"Error in enableWebcam() :: ".concat(yn),span:Ne,status:2});case 97:return _e.abrupt("return");case 98:_e.next=105;break;case 100:return Ue={label:"external video"},_e.next=103,this._getExternalVideoStream();case 103:mn=_e.sent,ze=mn.getVideoTracks()[0].clone();case 105:if(bn=(vt=this._openTelemetry)===null||vt===void 0?void 0:vt.trace({spanName:"Generating Producer Configuration",span:Ne}),wa={videoGoogleStartBitrate:1e3},!this._forceH264){_e.next=114;break}if(vi=this._mediasoupDevice.rtpCapabilities.codecs.find(function(ve){return ve.mimeType.toLowerCase()==="video/h264"})){_e.next=112;break}throw new Error("The desired H.264 codec and configuration are not supported");case 112:_e.next=119;break;case 114:if(!this._forceVP9){_e.next=119;break}if(vi=this._mediasoupDevice.rtpCapabilities.codecs.find(function(ve){return ve.mimeType.toLowerCase()==="video/vp9"})){_e.next=119;break}throw new Error("The desired VP9 codec and configuration are not supported");case 119:ze?(Ai=ze.getConstraints(),aa=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",Hn=(0,Ho.v7)(!1,Ai.width,Ai.height,{simulcast:fe.multiStream},aa)):this._useSimulcast&&(oa=this._mediasoupDevice.rtpCapabilities.codecs.find(function(ve){return ve.kind==="video"}),Hn=this._forceVP9&&vi||oa.mimeType.toLowerCase()==="video/vp9"?Qh:Sv[this._webcam.resolution]),Ws={};try{Ws={encodings:Hn,width:fe?(Ps=ze)===null||Ps===void 0?void 0:Ps.getConstraints().width:qu[Be].width.ideal,height:fe?(ci=ze)===null||ci===void 0?void 0:ci.getConstraints().height:qu[Be].height.ideal}}catch(ve){(zs=this._videosdkLogs)===null||zs===void 0||zs.pushLogs({logText:ve.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(ve.message)},dashboardLog:!0}),console.log(ve)}if((Je=this._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Track Generated with height ".concat(Ws.height," and width ").concat(Ws.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Ws)},span:Ne,status:1}),(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:bn,status:1,message:"Producer Configuration Generated"}),bn=(Ct=this._openTelemetry)===null||Ct===void 0?void 0:Ct.trace({spanName:"Creating Webcam Producer",span:Ne}),!this._sendTransport){_e.next=132;break}return _e.next=128,this._sendTransport.produce({track:ze,encodings:Hn,codecOptions:wa,codec:vi,appData:os(os({},Ws),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(ve){Ae.e2eeManager&&(ve.senderStreams=ve.createEncodedStreams())}});case 128:this._webcamProducer=_e.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),_e.next=135;break;case 132:return(ji=this._videosdkLogs)===null||ji===void 0||ji.pushLogs({logText:mr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(mr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),_e.abrupt("return");case 135:ze.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(ze.getConstraints().deviceId)),this._webcamProducer?(W=An({id:this._webcamProducer.id,deviceLabel:Ue.label,type:this._getWebcamType(Ue),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),Ke.dispatch(W),this._eventEmitter.emit(W.type,W.payload),Z=0,(le=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(ve){try{var J;Ae._stats.producerStats||(Ae._stats.producerStats={}),Ae._stats.producerStats.video||(Ae._stats.producerStats.video=[]),Ae._webcamProducer&&(Ae._latestStats[(J=Ae._webcamProducer)===null||J===void 0?void 0:J.id]=[]),ve.video.forEach(function(he){var je;Ae._latestStats[(je=Ae._webcamProducer)===null||je===void 0?void 0:je.id].push(he)}),Z%5==0&&Ae._webcamProducer!=null&&Ae._stats.producerStats.video.push({timestamp:new Date,stats:Ae._latestStats[Ae._webcamProducer.id]}),Z++}catch(he){var X;(X=Ae._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:he.message}}),console.log("PRODUCER ERROR",he)}},le.start(),this._webcamProducer.observer.on("close",function(){le.stop(),Ae._metrics.removeExistingProbe(le)}),this._webcamProducer.on("transportclose",function(){var ve,J=Ln(Ae._webcamProducer.id);Ke.dispatch(J),Ae._eventEmitter.emit(J.type,J.payload),(ve=Ae._webcamProducer)===null||ve===void 0||ve.close(),Ae._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var ve,J,X=Ae._deviceInfo.sdkType=="react-native"?mr.q.ERROR_RN_CAMERA_TRACK_ENDED:mr.q.ERROR_WEBCAM_TRACK_ENDED;(ve=Ae._videosdkLogs)===null||ve===void 0||ve.pushLogs({logText:X.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(X.message)},dashboardLog:!0}),(J=Ae._openTelemetry)===null||J===void 0||J.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Ne,message:X.message,status:2}),Ke.dispatch(lr({type:"error",text:"Webcam disconnected!"})),Ae.disableWebcam(Ne).catch(function(){})}),(F=this._openTelemetry)===null||F===void 0||F.completeSpan({span:bn,status:1,message:"Webcam Producer Created"}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Ne,status:1,message:"Enable Webcam Successful"})):((ne=this._videosdkLogs)===null||ne===void 0||ne.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(me=this._openTelemetry)===null||me===void 0||me.completeSpan({span:bn,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),_e.next=147;break;case 139:return _e.prev=139,_e.t2=_e.catch(23),(be=this._videosdkLogs)===null||be===void 0||be.pushLogs({logText:_e.t2.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(_e.t2.message)},dashboardLog:!0}),(ke=this._openTelemetry)===null||ke===void 0||ke.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: ".concat(_e.t2.message)}),Ke.dispatch(lr({type:"error",text:"Error enabling webcam: ".concat(_e.t2)})),_e.next=146,this._socketRequest("produceError",{mediaType:"video",message:_e.t2.message});case 146:ze&&ze.stop();case 147:Ke.dispatch(Qs(!1));case 148:case"end":return _e.stop()}},re,this,[[23,139],[36,52]])})),function(){return Zu.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(re,$,z,H,K){var oe={};return oe=re.message==="Permission denied"||re.message==="Permission dismissed"?K==="video"?mr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:mr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:re.message.includes("The request is not allowed by the user agent")?K==="video"?mr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:mr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:re.message==="Permission denied by system"?K==="video"?mr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:mr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?mr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:mr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,z.pushLogs({logText:oe.message,logType:"ERROR",attributes:{error:"Error in ".concat(K==="video"?"enableWebcam()":"enableMic()"," :: ").concat(re.message)},dashboardLog:!0}),$.completeSpan({message:K==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(oe.message):"Error in enableMic() :: occurred in creating audio track, ".concat(oe.message),span:H,status:2}),oe}},{key:"handleNotReadableError",value:function(re,$,z,H,K){var oe={};return oe=re.message==="Device in use"?K==="video"?mr.q.ERROR_CAMERA_IN_USE:mr.q.ERROR_MICROPHONE_IN_USE:K==="video"?mr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:mr.q.ERROR_MICROPHONE_IN_USE,z.pushLogs({logText:oe.message,logType:"ERROR",attributes:{error:"Error in ".concat(K==="video"?"enableWebcam()":"enableMic()"," :: ").concat(re.message)},dashboardLog:!0}),$.completeSpan({message:K==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(oe.message):"Error in enableMic() :: occurred in creating audio track, ".concat(oe.message),span:H,status:2}),oe}},{key:"createCameraVideoTrack",value:(_d=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt;return y().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return z=$.cameraId,H=z===void 0?void 0:z,K=$.encoderConfig,oe=K===void 0?void 0:K,fe=$.facingMode,Pe=fe===void 0?void 0:fe,Ne=$.optimizationMode,ft=Ne===void 0?void 0:Ne,Ze=$.multiStream,ht=Ze===void 0||Ze,mt=oe?ta.$.videoProfiles[oe]:ta.$.videoProfiles.h360p_w640p,pe={video:{deviceId:H||void 0,facingMode:Pe||void 0,width:mt.width,height:mt.height,frameRate:mt.frameRate}},it.next=5,(0,ul.lp)(pe);case 5:return gt=it.sent,ft&&(gt.contentHint=ft),gt.encoderConfig=oe||"h360p_w640p",gt.contentHint=ft||"",gt.multiStream=ht,gt.cameraId=H,it.abrupt("return",gt);case 12:case"end":return it.stop()}},re)})),function(re){return _d.apply(this,arguments)})},{key:"disableWebcam",value:($s=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt=arguments;return y().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(H=gt.length>0&&gt[0]!==void 0?gt[0]:void 0,K=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"disableWebcam() Calling",status:1,span:H||null}),Ve.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){it.next=8;break}return(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),it.abrupt("return");case 8:return Pe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Webcam Producer",span:K,status:1}),this._webcamProducer.close(),Ne=Ln(this._webcamProducer.id),Ke.dispatch(Ne),this._eventEmitter.emit(Ne.type,Ne.payload),it.prev=13,it.next=16,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 16:(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Pe,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:K,status:1,message:"Webcam Disabled Successfully"}),it.next=27;break;case 21:it.prev=21,it.t0=it.catch(13),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:it.t0.message},dashboardLog:!0}),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:Pe,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(it.t0)}),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:K,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(it.t0)}),Ke.dispatch(lr({type:"error",text:"Error closing server-side webcam Producer: ".concat(it.t0)}));case 27:case"end":return it.stop()}},re,this,[[13,21]])})),function(){return $s.apply(this,arguments)})},{key:"getMics",value:(cf=(0,u.A)(y().mark(function re(){var $,z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return $=[],H.prev=1,H.next=4,this._updateMics();case 4:this._mics.forEach(function(K,oe){$.push({deviceId:oe,label:K.label})}),H.next=11;break;case 7:H.prev=7,H.t0=H.catch(1),Ve.error("getMics() | Error",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:H.t0.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 11:return H.abrupt("return",$);case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(){return cf.apply(this,arguments)})},{key:"changeMic",value:(Xu=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it;return y().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeMic() Calling"}),ze.prev=1,(0,m.A)($)!="object"){ze.next=9;break}return ze.next=5,this.disableMic(!0,H);case 5:return ze.next=7,this.enableMic($,H);case 7:ze.next=27;break;case 9:return Pe=$,ze.next=12,this._updateMics();case 12:if(Ne=Array.from(this._mics.keys()),ft=Ne.length,Ze=this._mic.device?this._mic.device.deviceId:void 0,Pe!=null&&Pe!=null?ht=Ne.indexOf(Pe):(ht=Ne.indexOf(Ze))<ft-1?ht++:ht=0,this._mic.device=this._mics.get(Ne[ht]),mt=(K=this._openTelemetry)===null||K===void 0?void 0:K.trace({spanName:"Getting Selected Mic",span:H,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){ze.next=21;break}throw(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return ze.next=23,this.disableMic(!0,H);case 23:return ze.next=25,this.enableMic(void 0,H);case 25:(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:mt,status:1,message:"Done"}),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:H,status:1,message:"changeMic() Ending"});case 27:ze.next=33;break;case 29:ze.prev=29,ze.t0=ze.catch(1),(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:H,status:2,message:"changeMic() | Error ".concat(ze.t0)}),(it=this._videosdkLogs)===null||it===void 0||it.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:ze.t0.message}});case 33:case"end":return ze.stop()}},re,this,[[1,29]])})),function(re){return Xu.apply(this,arguments)})},{key:"getWebcams",value:(of=(0,u.A)(y().mark(function re(){var $,z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return $=[],H.prev=1,H.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(K,oe){$.push({deviceId:oe,label:K.label,facingMode:K.facing||"environment"})}),H.next=11;break;case 7:H.prev=7,H.t0=H.catch(1),Ve.error("getWebcams() | failed %o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:H.t0.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 11:return H.abrupt("return",$);case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(){return of.apply(this,arguments)})},{key:"replaceWebcamStream",value:(xl=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._webcamProducer){H.next=7;break}return z=$.getVideoTracks()[0],H.next=4,this._webcamProducer.replaceTrack({track:z});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),H.next=11;break;case 7:return H.next=9,this.disableWebcam();case 9:return H.next=11,this.enableWebcam($);case 11:case"end":return H.stop()}},re,this)})),function(re){return xl.apply(this,arguments)})},{key:"changeWebcam",value:(Qu=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it;return y().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeWebcam() Calling"}),Ke.dispatch(Qs(!0)),(0,m.A)($)!=="object"){ze.next=17;break}return ze.prev=3,ze.next=6,this.disableWebcam(H);case 6:return ze.next=8,this.enableWebcam($,H);case 8:ze.next=15;break;case 10:ze.prev=10,ze.t0=ze.catch(3),Ve.error("changeWebcam() | failed: %o",ze.t0),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify($),error:ze.t0.message}}),Ke.dispatch(lr({type:"error",text:"Could not change webcam: ".concat(ze.t0)}));case 15:ze.next=46;break;case 17:return ze.prev=17,ze.next=20,this._updateWebcams(H);case 20:if(Ne=Array.from(this._webcams.keys()),ft=Ne.length,Ze=this._webcam.device?this._webcam.device.deviceId:void 0,$!=null&&$!=null?ht=Ne.indexOf($):(ht=Ne.indexOf(Ze))<ft-1?ht++:ht=0,this._webcam.device=this._webcams.get(Ne[ht]),Ve.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",mt=(oe=this._openTelemetry)===null||oe===void 0?void 0:oe.trace({spanName:"Getting Selected Webcam",span:H,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){ze.next=31;break}throw(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return ze.next=33,this.disableWebcam(H);case 33:return ze.next=35,this.enableWebcam(void 0,H);case 35:return(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:mt,status:1,message:"Done"}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:H,status:1,message:"changeWebcam() Ending"}),ze.abrupt("return");case 40:ze.prev=40,ze.t1=ze.catch(17),Ve.error("changeWebcam() | failed: %o",ze.t1),(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify($),error:ze.t1.message}}),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:H,status:2,message:"Could not change webcam ".concat(ze.t1)}),Ke.dispatch(lr({type:"error",text:"Could not change webcam: ".concat(ze.t1)}));case 46:Ke.dispatch(Qs(!1));case 47:case"end":return ze.stop()}},re,this,[[3,10],[17,40]])})),function(re){return Qu.apply(this,arguments)})},{key:"changeWebcamResolution",value:(wl=(0,u.A)(y().mark(function re(){var $,z,H,K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:Ve.debug("changeWebcamResolution()"),Ke.dispatch(Qs(!0)),oe.prev=2,oe.t0=this._webcam.resolution,oe.next=oe.t0==="qvga"?6:oe.t0==="vga"?8:oe.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",oe.abrupt("break",13);case 8:return this._webcam.resolution="hd",oe.abrupt("break",13);case 10:return this._webcam.resolution="qvga",oe.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return Ve.debug("changeWebcamResolution() | calling getUserMedia()"),oe.prev=14,oe.next=17,navigator.mediaDevices.getUserMedia({video:os({deviceId:{exact:this._webcam.device.deviceId}},qu[this._webcam.resolution])});case 17:$=oe.sent,oe.next=25;break;case 20:return oe.prev=20,oe.t1=oe.catch(14),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(oe.t1)}}),oe.t1.message==="Permission denied"||oe.t1.name==="NotAllowedError"?this._emitError(mr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(mr.q.ERROR_GET_VIDEO_MEDIA),oe.abrupt("return");case 25:return H=$.getVideoTracks()[0],oe.next=28,this._webcamProducer.replaceTrack({track:H});case 28:Ke.dispatch(Js(this._webcamProducer.id,H)),oe.next=36;break;case 31:oe.prev=31,oe.t2=oe.catch(2),Ve.error("changeWebcamResolution() | failed: %o",oe.t2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:oe.t2.message}}),Ke.dispatch(lr({type:"error",text:"Could not change webcam resolution: ".concat(oe.t2)}));case 36:Ke.dispatch(Qs(!1));case 37:case"end":return oe.stop()}},re,this,[[2,31],[14,20]])})),function(){return wl.apply(this,arguments)})},{key:"enableShare",value:(Ju=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt,Je,yt,Ct,It,Rt,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,jn,Bn,Xn,jr,On,zn,Zn,en,_s,Un,rr=this,es=arguments;return y().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:if(z=es.length>0&&es[0]!==void 0?es[0]:void 0,H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"enableShare() Calling ".concat(z?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:z?JSON.stringify(z):"Not Specify Custom Track"}}),Ve.debug("enableShare()"),!this._shareProducer){Et.next=6;break}return(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Screen Share Producer found"}),Et.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){Et.next=10;break}return(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"enableShare() | cannot produce video"}),Ve.error("enableShare() | cannot produce video"),Et.abrupt("return");case 10:if(Ne=[],Ke.dispatch(ba(!0)),Et.prev=12,Ve.debug("enableShare() | calling getUserMedia()"),it=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Creating Track",span:H}),!z||!z.active){Et.next=21;break}fe=z.getVideoTracks()[0],Pe=z.getAudioTracks()[0],z.multiStream?(ze=fe.getConstraints(),Ue=ze.height,Be=ze.frameRate,vt=ta.$.screenShareProfiles["h".concat(Ue,"p_").concat(Be,"fps")],Je=[{maxBitrate:vt.bitrates.high,maxFramerate:Be,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:vt.bitrates.medium,maxFramerate:Be,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:vt.bitrates.low,maxFramerate:Be,scalabilityMode:"S1T3",dtx:!0}],Ne=Je):Ne=sa,Et.next=41;break;case 21:return Et.prev=21,Et.next=24,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 24:Ct=Et.sent,Et.next=33;break;case 27:return Et.prev=27,Et.t0=Et.catch(21),(It=this._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(Et.t0)}}),(Rt=this._openTelemetry)===null||Rt===void 0||Rt.completeSpan({span:H,status:2,message:"Error in getDisplayMedia for screen share ".concat(Et.t0)}),Et.t0.message==="Permission denied"||Et.t0.name==="NotAllowedError"?this._emitError(mr.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(mr.q.ERROR_GET_DISPLAY_MEDIA),Et.abrupt("return");case 33:if(Ct){Et.next=37;break}return Ke.dispatch(ba(!0)),(bt=this._openTelemetry)===null||bt===void 0||bt.completeSpan({span:H,status:2,message:"Stream not found"}),Et.abrupt("return");case 37:fe=Ct.getVideoTracks()[0],Pe=Ct.getAudioTracks()[0],Ne=sa,(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({message:"Track Generated with height ".concat(fe.getSettings().height," and width ").concat(fe.getSettings().width),span:it,status:1});case 41:if(sr=(Ze=this._openTelemetry)===null||Ze===void 0?void 0:Ze.trace({spanName:"Generating Producer Configuration",span:H}),Ut={videoGoogleStartBitrate:1e3},!this._forceH264){Et.next=50;break}if(Bt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(fr){return fr.mimeType.toLowerCase()==="video/h264"})){Et.next=48;break}throw(Ar=this._videosdkLogs)===null||Ar===void 0||Ar.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 48:Et.next=55;break;case 50:if(!this._forceVP9){Et.next=55;break}if(Bt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(fr){return fr.mimeType.toLowerCase()==="video/vp9"})){Et.next=55;break}throw(kn=this._videosdkLogs)===null||kn===void 0||kn.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 55:return(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:sr,status:1,message:"Producer Configuration Generated"}),sr=(mt=this._openTelemetry)===null||mt===void 0?void 0:mt.trace({spanName:"Creating Share Producer",span:H}),Et.next=59,this._sendTransport.produce({track:fe,encodings:Ne.length>0?Ne:sa,codecOptions:Ut,codec:Bt,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(fr){rr.e2eeManager&&(fr.senderStreams=fr.createEncodedStreams())}});case 59:if(this._shareProducer=Et.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),Zr=An({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),Ke.dispatch(Zr),this._eventEmitter.emit(Zr.type,Zr.payload),this._shareProducer.on("transportclose",function(){var fr,yn=Ln(rr._shareProducer.id);Ke.dispatch(yn),rr._eventEmitter.emit(yn.type,yn.payload),(fr=rr._shareProducer)===null||fr===void 0||fr.close(),rr._shareProducer=null}),this._shareProducer.on("trackended",function(){var fr;(fr=rr._openTelemetry)===null||fr===void 0||fr.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:H,status:2}),Ke.dispatch(lr({type:"error",text:"Share disconnected!"})),rr.disableShare().catch(function(){})}),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:sr,status:1,message:"Share Producer Created"}),!Pe){Et.next=88;break}return Et.prev=68,Bn={opusStereo:1,opusDtx:1},sr=(Wr=this._openTelemetry)===null||Wr===void 0?void 0:Wr.trace({spanName:"Creating Share Audio Producer",span:H}),Et.next=73,this._sendTransport.produce({track:Pe,codecOptions:Bn,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(fr){rr.e2eeManager&&(fr.senderStreams=fr.createEncodedStreams())}});case 73:this._shareAudioProducer=Et.sent,Xn=An({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),Ke.dispatch(Xn),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit(Xn.type,Xn.payload),this._shareAudioProducer.on("transportclose",function(){var fr,yn=Ln(rr._shareAudioProducer.id);Ke.dispatch(yn),rr._eventEmitter.emit(yn.type,yn.payload),(fr=rr._shareAudioProducer)===null||fr===void 0||fr.close(),rr._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var fr;(fr=rr._openTelemetry)===null||fr===void 0||fr.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:H,status:2}),Ke.dispatch(lr({type:"error",text:"Share disconnected!"}))}),(jn=this._openTelemetry)===null||jn===void 0||jn.completeSpan({span:sr,status:1,message:"Share Audio Producer Created"}),Et.next=88;break;case 83:return Et.prev=83,Et.t1=Et.catch(68),Et.next=87,this._socketRequest("produceError",{mediaType:"shareAudio",message:Et.t1.message});case 87:(jr=this._videosdkLogs)===null||jr===void 0||jr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Et.t1.message}});case 88:(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:H,status:1,message:"Enable Share Successful"}),Et.next=102;break;case 91:return Et.prev=91,Et.t2=Et.catch(12),Ve.error("enableShare() | failed:%o",Et.t2),(On=this._openTelemetry)===null||On===void 0||On.completeSpan({span:H,status:2,attributes:{error:Et.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",Et.t2.message),(zn=this._videosdkLogs)===null||zn===void 0||zn.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:Et.t2.message}}),Et.t2.name!=="NotAllowedError"&&Ke.dispatch(lr({type:"error",text:"Error sharing: ".concat(Et.t2)})),Et.next=100,this._socketRequest("produceError",{mediaType:"share",message:Et.t2.message});case 100:fe&&fe.stop(),Pe&&Pe.stop();case 102:Ke.dispatch(ba(!1)),this._shareProducer&&(Zn=0,(en=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(fr){try{var yn;rr._stats.producerStats||(rr._stats.producerStats={}),rr._stats.producerStats.share||(rr._stats.producerStats.share=[]),rr._shareProducer&&(rr._latestStats[(yn=rr._shareProducer)===null||yn===void 0?void 0:yn.id]=[]),fr.video.forEach(function(bn){var Hn;rr._shareProducer&&rr._latestStats[(Hn=rr._shareProducer)===null||Hn===void 0?void 0:Hn.id].push(bn)}),Zn%5==0&&rr._shareProducer!=null&&rr._stats.producerStats.share.push({timestamp:new Date,stats:rr._latestStats[rr._shareProducer.id]}),Zn++}catch(bn){var mn;(mn=rr._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:bn.message}}),console.log("PRODUCER ERROR",bn)}},en.start(),this._shareProducer.observer.on("close",function(){en.stop(),rr._metrics.removeExistingProbe(en)})),this._shareAudioProducer&&(_s=0,(Un=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(fr){try{var yn;rr._stats.producerStats||(rr._stats.producerStats={}),rr._stats.producerStats.shareAudio||(rr._stats.producerStats.shareAudio=[]),rr._shareAudioProducer&&(rr._latestStats[(yn=rr._shareAudioProducer)===null||yn===void 0?void 0:yn.id]=[]),fr.audio.forEach(function(bn){var Hn;rr._shareAudioProducer&&rr._latestStats[(Hn=rr._shareAudioProducer)===null||Hn===void 0?void 0:Hn.id].push(bn)}),_s%5==0&&rr._shareAudioProducer!=null&&rr._stats.producerStats.shareAudio.push(os({timestamp:new Date},rr._latestStats[rr._shareAudioProducer.id]?rr._latestStats[rr._shareAudioProducer.id][0]:{})),_s++}catch(bn){var mn;(mn=rr._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:bn.message}}),console.log("PRODUCER ERROR",bn)}},Un.start(),this._shareAudioProducer.observer.on("close",function(){Un.stop(),rr._metrics.removeExistingProbe(Un)}));case 105:case"end":return Et.stop()}},re,this,[[12,91],[21,27],[68,83]])})),function(){return Ju.apply(this,arguments)})},{key:"disableShare",value:(ac=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe;return y().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(Ve.debug("disableShare()"),K=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){gt.next=5;break}return(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"Share Producer Not found"}),gt.abrupt("return");case 5:return fe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Share Producer",span:K,status:1}),this._shareProducer.close(),Pe=Ln(this._shareProducer.id),Ke.dispatch(Pe),this._eventEmitter.emit(Pe.type,Pe.payload),this._shareAudioProducer&&(Ze=(Ne=this._openTelemetry)===null||Ne===void 0?void 0:Ne.trace({spanName:"Closing Share Audio Producer",span:K,status:1}),this._shareAudioProducer.close(),Pe=Ln(this._shareAudioProducer.id),Ke.dispatch(Pe),this._eventEmitter.emit(Pe.type,Pe.payload),(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Ze,status:1,message:"Closed Share Audio Producer"})),gt.prev=11,gt.next=14,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){gt.next=17;break}return gt.next=17,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:fe,status:1,message:"Requested Server to Close Producer"}),gt.next=25;break;case 20:gt.prev=20,gt.t0=gt.catch(11),Ke.dispatch(lr({type:"error",text:"Error closing server-side share Producer: ".concat(gt.t0)})),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:K,status:2,message:"Error closing server-side share Producer ".concat(gt.t0)}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:gt.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return gt.stop()}},re,this,[[11,20]])})),function(){return ac.apply(this,arguments)})},{key:"enableAudioOnly",value:(xd=(0,u.A)(y().mark(function re(){var $,z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:Ve.debug("enableAudioOnly()"),Ke.dispatch(Rr(!0)),this.disableWebcam(),$=Pi(this._consumers.values()),K.prev=4,$.s();case 6:if((z=$.n()).done){K.next=13;break}if((H=z.value).kind==="video"){K.next=10;break}return K.abrupt("continue",11);case 10:this._pauseConsumer(H);case 11:K.next=6;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(4),$.e(K.t0);case 18:return K.prev=18,$.f(),K.finish(18);case 21:Ke.dispatch(Cr(!0)),Ke.dispatch(Rr(!1));case 23:case"end":return K.stop()}},re,this,[[4,15,18,21]])})),function(){return xd.apply(this,arguments)})},{key:"disableAudioOnly",value:(ic=(0,u.A)(y().mark(function re(){var $,z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:Ve.debug("disableAudioOnly()"),Ke.dispatch(Rr(!0)),!this._webcamProducer&&this._produce&&(zi()||{}).webcamEnabled&&this.enableWebcam(),$=Pi(this._consumers.values()),K.prev=4,$.s();case 6:if((z=$.n()).done){K.next=13;break}if((H=z.value).kind==="video"){K.next=10;break}return K.abrupt("continue",11);case 10:this._resumeConsumer(H);case 11:K.next=6;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(4),$.e(K.t0);case 18:return K.prev=18,$.f(),K.finish(18);case 21:Ke.dispatch(Cr(!1)),Ke.dispatch(Rr(!1));case 23:case"end":return K.stop()}},re,this,[[4,15,18,21]])})),function(){return ic.apply(this,arguments)})},{key:"muteAudio",value:(wd=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:Ve.debug("muteAudio()"),Ke.dispatch(an(!0));case 2:case"end":return $.stop()}},re)})),function(){return wd.apply(this,arguments)})},{key:"unmuteAudio",value:(bd=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:Ve.debug("unmuteAudio()"),Ke.dispatch(an(!1));case 2:case"end":return $.stop()}},re)})),function(){return bd.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(yd=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft;return y().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return K=$.iceParameters,oe=$.transportId,fe=$.internalSpan,oe===((z=this._sendTransport)===null||z===void 0?void 0:z.id)&&this._sendTransport.restartIce({iceParameters:K}),oe===((H=this._recvTransport)===null||H===void 0?void 0:H.id)&&this._recvTransport.restartIce({iceParameters:K}),Ze.prev=3,Ze.next=6,this._socketRequest("iceRestarted",{transportId:oe});case 6:(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:fe,status:1,message:"iceRestarted"}),Ze.next=14;break;case 9:Ze.prev=9,Ze.t0=Ze.catch(3),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:fe,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Ze.t0)}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Ze.t0.message}}),Ke.dispatch(lr({type:"error",text:"ICE restart failed: ".concat(Ze.t0)}));case 14:case"end":return Ze.stop()}},re,this,[[3,9]])})),function(re){return yd.apply(this,arguments)})},{key:"restartIce",value:(bl=(0,u.A)(y().mark(function re(){var $,z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Ve.debug("restartIce()"),Ke.dispatch(Cs(!0)),K.prev=2,!this._sendTransport){K.next=9;break}return K.next=6,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 6:return $=K.sent,K.next=9,this._sendTransport.restartIce({iceParameters:$});case 9:if(!this._recvTransport){K.next=15;break}return K.next=12,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 12:return z=K.sent,K.next=15,this._recvTransport.restartIce({iceParameters:z});case 15:Ke.dispatch(lr({text:"ICE restarted"})),K.next=23;break;case 18:K.prev=18,K.t0=K.catch(2),Ve.error("restartIce() | failed:%o",K.t0),Ke.dispatch(lr({type:"error",text:"ICE restart failed: ".concat(K.t0)})),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:K.t0.message}});case 23:Ke.dispatch(Cs(!1));case 24:case"end":return K.stop()}},re,this,[[2,18]])})),function(){return bl.apply(this,arguments)})},{key:"_socketRequest",value:(go=(0,u.A)(y().mark(function re($){var z,H=this,K=arguments;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return z=K.length>1&&K[1]!==void 0?K[1]:{},oe.abrupt("return",new Promise(function(fe,Pe){H._webSocket.emit("request",{method:$,request:!0,data:z},function(Ne){Ne!=null&&Ne.error?Pe(new Error(Ne.error)):fe(Ne.data)})}));case 2:case"end":return oe.stop()}},re)})),function(re){return go.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(sc=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Ve.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",$),H.prev=1,!this._webcamProducer){H.next=7;break}return H.next=5,this._webcamProducer.setMaxSpatialLayer($);case 5:H.next=10;break;case 7:if(!this._shareProducer){H.next=10;break}return H.next=10,this._shareProducer.setMaxSpatialLayer($);case 10:H.next=17;break;case 12:H.prev=12,H.t0=H.catch(1),Ve.error("setMaxSendingSpatialLayer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error setting max sending video spatial layer: ".concat(H.t0)}));case 17:case"end":return H.stop()}},re,this,[[1,12]])})),function(re){return sc.apply(this,arguments)})},{key:"setWebcamQuality",value:(mo=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(this._webcamProducer){K.next=2;break}return K.abrupt("return");case 2:if(z=this._webcam.resolution,H=Hu[z][$].s,this._webcamProducer.maxSpatialLayer!=H){K.next=6;break}return K.abrupt("return");case 6:return K.next=8,this._webcamProducer.setMaxSpatialLayer(H);case 8:case"end":return K.stop()}},re,this)})),function(re){return mo.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(ia=(0,u.A)(y().mark(function re($,z){var H,K,oe,fe,Pe,Ne;return y().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return fe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:'Setting "'.concat(z,'" Quality for Screen Share')}),Ne=(Pe={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[z]||Pe.high,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:fe,attributes:{selectedQuality:Ne},status:1}),ft.next=6,this.setConsumerPreferredLayers($,Ne.spatialLayer,Ne.temporalLayer);case 6:(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Done",span:fe,status:1});case 7:case"end":return ft.stop()}},re,this)})),function(re,$){return ia.apply(this,arguments)})},{key:"setConsumerQuality",value:(nc=(0,u.A)(y().mark(function re($,z){var H,K,oe,fe,Pe,Ne,ft;return y().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return fe=this._webcam.resolution,Pe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:'Setting "'.concat(z,'" Quality')}),Ne=Hu[fe][z].s,ft=Hu[fe][z].t,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Pe,attributes:{spatialLayers:JSON.parse(Ne),temporalLayers:JSON.parse(ft)},status:1}),Ze.next=7,this.setConsumerPreferredLayers($,Ne,ft);case 7:(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Done",span:Pe,status:1});case 8:case"end":return Ze.stop()}},re,this)})),function(re,$){return nc.apply(this,arguments)})},{key:"setViewPort",value:(rc=(0,u.A)(y().mark(function re($,z,H){var K,oe,fe,Pe;return y().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(this._consumers.get($.id)){Ne.next=2;break}return Ne.abrupt("return");case 2:if(K=(0,Ho.ed)(this._consumers.get($.id),z,H),oe=K.consumerId,fe=K.newPreferredSpatialLayer,Pe=K.newPreferredTemporalLayer,fe!==$.preferredSpatialLayer||Pe!==$.preferredTemporalLayer){Ne.next=5;break}return Ne.abrupt("return");case 5:if(!oe){Ne.next=8;break}return Ne.next=8,this.setConsumerPreferredLayers(oe,fe,Pe);case 8:case"end":return Ne.stop()}},re,this)})),function(re,$,z){return rc.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(tc=(0,u.A)(y().mark(function re($,z,H){var K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",$,z,H),fe.prev=1,(K=this._consumers.get($)).spatialLayers>1&&(K.preferredSpatialLayer=z,K.preferredTemporalLayer=H),fe.next=6,this._socketRequest("setConsumerPreferredLayers",{consumerId:$,spatialLayer:z,temporalLayer:H});case 6:Ke.dispatch(rl($,z,H)),fe.next=14;break;case 9:fe.prev=9,fe.t0=fe.catch(1),Ve.error("setConsumerPreferredLayers() | failed:%o",fe.t0),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:fe.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error setting Consumer preferred layers: ".concat(fe.t0)}));case 14:case"end":return fe.stop()}},re,this,[[1,9]])})),function(re,$,z){return tc.apply(this,arguments)})},{key:"setConsumerPriority",value:(vd=(0,u.A)(y().mark(function re($,z){var H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return Ve.debug("setConsumerPriority() [consumerId:%s, priority:%d]",$,z),K.prev=1,K.next=4,this._socketRequest("setConsumerPriority",{consumerId:$,priority:z});case 4:Ke.dispatch(Vo($,z)),K.next=12;break;case 7:K.prev=7,K.t0=K.catch(1),Ve.error("setConsumerPriority() | failed:%o",K.t0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:K.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error setting Consumer priority: ".concat(K.t0)}));case 12:case"end":return K.stop()}},re,this,[[1,7]])})),function(re,$){return vd.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(gd=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Ve.debug("requestConsumerKeyFrame() [consumerId:%s]",$),H.prev=1,H.next=4,this._socketRequest("requestConsumerKeyFrame",{consumerId:$});case 4:Ke.dispatch(lr({text:"Keyframe requested for video consumer"})),H.next=12;break;case 7:H.prev=7,H.t0=H.catch(1),Ve.error("requestConsumerKeyFrame() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error requesting key frame for Consumer: ".concat(H.t0)}));case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(re){return gd.apply(this,arguments)})},{key:"enableChatDataProducer",value:(fo=(0,u.A)(y().mark(function re(){var $,z=this;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Ve.debug("enableChatDataProducer()"),this._useDataChannel){H.next=3;break}return H.abrupt("return");case 3:return H.prev=3,H.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=H.sent,Ke.dispatch(Hi({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){z._chatDataProducer=null}),this._chatDataProducer.on("open",function(){Ve.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){Ve.error('chat DataProducer "close" event'),z._chatDataProducer=null,Ke.dispatch(lr({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(K){Ve.error('chat DataProducer "error" event:%o',K),Ke.dispatch(lr({type:"error",text:"Chat DataProducer error: ".concat(K)}))}),this._chatDataProducer.on("bufferedamountlow",function(){Ve.debug('chat DataProducer "bufferedamountlow" event')}),H.next=21;break;case 15:throw H.prev=15,H.t0=H.catch(3),Ve.error("enableChatDataProducer() | failed:%o",H.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error enabling chat DataProducer: ".concat(H.t0)})),H.t0;case 21:case"end":return H.stop()}},re,this,[[3,15]])})),function(){return fo.apply(this,arguments)})},{key:"enableBotDataProducer",value:(md=(0,u.A)(y().mark(function re(){var $,z=this;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Ve.debug("enableBotDataProducer()"),this._useDataChannel){H.next=3;break}return H.abrupt("return");case 3:return H.prev=3,H.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=H.sent,Ke.dispatch(Hi({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){z._botDataProducer=null}),this._botDataProducer.on("open",function(){Ve.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){Ve.error('bot DataProducer "close" event'),z._botDataProducer=null,Ke.dispatch(lr({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(K){Ve.error('bot DataProducer "error" event:%o',K),Ke.dispatch(lr({type:"error",text:"Bot DataProducer error: ".concat(K)}))}),this._botDataProducer.on("bufferedamountlow",function(){Ve.debug('bot DataProducer "bufferedamountlow" event')}),H.next=21;break;case 15:throw H.prev=15,H.t0=H.catch(3),Ve.error("enableBotDataProducer() | failed:%o",H.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error enabling bot DataProducer: ".concat(H.t0)})),H.t0;case 21:case"end":return H.stop()}},re,this,[[3,15]])})),function(){return md.apply(this,arguments)})},{key:"sendChatMessage",value:(yl=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug('sendChatMessage() [text:"%s]',$),this._chatDataProducer){z.next=4;break}return Ke.dispatch(lr({type:"error",text:"No chat DataProducer"})),z.abrupt("return");case 4:try{this._chatDataProducer.send($)}catch(H){Ve.error("chat DataProducer.send() failed:%o",H),Ke.dispatch(lr({type:"error",text:"chat DataProducer.send() failed: ".concat(H)}))}case 5:case"end":return z.stop()}},re,this)})),function(re){return yl.apply(this,arguments)})},{key:"sendBotMessage",value:(fd=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug('sendBotMessage() [text:"%s]',$),this._botDataProducer){z.next=4;break}return Ke.dispatch(lr({type:"error",text:"No bot DataProducer"})),z.abrupt("return");case 4:try{this._botDataProducer.send($)}catch(H){Ve.error("bot DataProducer.send() failed:%o",H),Ke.dispatch(lr({type:"error",text:"bot DataProducer.send() failed: ".concat(H)}))}case 5:case"end":return z.stop()}},re,this)})),function(re){return fd.apply(this,arguments)})},{key:"changeDisplayName",value:(hd=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug('changeDisplayName() [displayName:"%s"]',$),as({displayName:$}),z.prev=2,z.next=5,this._socketRequest("changeDisplayName",{displayName:$});case 5:this._displayName=$,Ke.dispatch(fn($)),Ke.dispatch(lr({text:"Display name changed"})),z.next=15;break;case 10:z.prev=10,z.t0=z.catch(2),Ve.error("changeDisplayName() | failed: %o",z.t0),Ke.dispatch(lr({type:"error",text:"Could not change display name: ".concat(z.t0)})),Ke.dispatch(fn());case 15:case"end":return z.stop()}},re,this,[[2,10]])})),function(re){return hd.apply(this,arguments)})},{key:"openConnection",value:(pd=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=$.roomId,H=$.payload,K.next=3,this._socketRequest("openConnection",{roomId:z,payload:H}).catch(function(oe){throw new Error(oe)});case 3:case"end":return K.stop()}},re,this)})),function(re){return pd.apply(this,arguments)})},{key:"closeConnection",value:(vl=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this._socketRequest("closeConnection",{roomId:$});case 2:case"end":return z.stop()}},re,this)})),function(re){return vl.apply(this,arguments)})},{key:"switchPeerRoom",value:(gl=(0,u.A)(y().mark(function re($){var z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return z=$.peerId,H=$.roomId,K=$.payload,oe=$.token,fe.next=3,this._socketRequest("switchPeerRoom",{roomId:H,peerId:z,payload:K,token:oe});case 3:case"end":return fe.stop()}},re,this)})),function(re){return gl.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(ml=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe;return y().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return z=$.roomId,H=$.connectionRoomId,K=$.peerId,oe=$.payload,fe=$.token,Pe.next=3,this._socketRequest("connectionSwitchPeerRoom",{roomId:z,connectionRoomId:H,peerId:K,payload:oe,token:fe});case 3:case"end":return Pe.stop()}},re,this)})),function(re){return ml.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(af=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=$.roomId,H=$.message,K.next=3,this._socketRequest("connectionSendChatMessage",{roomId:z,message:H});case 3:case"end":return K.stop()}},re,this)})),function(re){return af.apply(this,arguments)})},{key:"connectionEndMeeting",value:(sf=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=$.roomId,H.next=3,this._socketRequest("connectionCloseRoom",{roomId:z});case 3:case"end":return H.stop()}},re,this)})),function(re){return sf.apply(this,arguments)})},{key:"pubsubPublish",value:(nf=(0,u.A)(y().mark(function re($,z,H,K){var oe,fe,Pe,Ne,ft,Ze;return y().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(ht.prev=0,H!=null&&H.sendOnly){if(oe=H.sendOnly,fe=[],oe){Pe=Pi(oe);try{for(Pe.s();!(Ne=Pe.n()).done;)(ft=Ne.value)&&fe.push(ft.toString())}catch(mt){Pe.e(mt)}finally{Pe.f()}}H.sendOnly=fe}return ht.next=4,this._socketRequest("pubsubPublish",{topic:$,message:z,options:H,payload:K});case 4:ht.next=10;break;case 6:ht.prev=6,ht.t0=ht.catch(0),(Ze=this._videosdkLogs)===null||Ze===void 0||Ze.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:ht.t0.message}}),Ve.error("pubsubPublish() | failed: %o",ht.t0);case 10:case"end":return ht.stop()}},re,this,[[0,6]])})),function(re,$,z,H){return nf.apply(this,arguments)})},{key:"pubsubSubscribe",value:(rf=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return K.prev=2,K.next=5,this._socketRequest("pubsubSubscribe",{topic:$});case 5:return z=K.sent,K.abrupt("return",z);case 9:K.prev=9,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("pubsubSubscribe() | failed: %o",K.t0);case 13:case"end":return K.stop()}},re,this,[[2,9]])})),function(re){return rf.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(tf=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return K.prev=2,K.next=5,this._socketRequest("pubsubUnsubscribe",{topic:$});case 5:(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat($),logType:"INFO"}),K.next=12;break;case 8:K.prev=8,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("pubsubUnsubscribe() | failed: %o",K.t0);case 12:case"end":return K.stop()}},re,this,[[2,8]])})),function(re){return tf.apply(this,arguments)})},{key:"closeRoom",value:(ef=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,this._socketRequest("closeRoom",{});case 2:case"end":return $.stop()}},re,this)})),function(){return ef.apply(this,arguments)})},{key:"removePeer",value:(Zh=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Removing peer ".concat($),status:1}),$!=null){H.next=3;break}return H.abrupt("return");case 3:return H.next=5,this._socketRequest("removePeer",{peerId:$});case 5:case"end":return H.stop()}},re,this)})),function(re){return Zh.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(Xh=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getSendTransportRemoteStats()"),this._sendTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return $.stop()}},re,this)})),function(){return Xh.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(Yu=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getRecvTransportRemoteStats()"),this._recvTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return $.stop()}},re,this)})),function(){return Yu.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Gu=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getAudioRemoteStats()"),$=this._micProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[$.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return Gu.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(fl=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getVideoRemoteStats()"),$=this._webcamProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[$.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return fl.apply(this,arguments)})},{key:"getShareRemoteStats",value:(Ts=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getVideoRemoteStats()"),$=this._shareProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[$.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return Ts.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(Jt=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($=this._shareAudioProducer){z.next=3;break}return z.abrupt("return");case 3:return z.abrupt("return",this._latestStats[$.id]);case 4:case"end":return z.stop()}},re,this)})),function(){return Jt.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(Ku=(0,u.A)(y().mark(function re($){var z,H;return y().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Ve.debug("getConsumerRemoteStats()"),z=this._consumers.get($)){K.next=4;break}return K.abrupt("return");case 4:return this._latestStats[$]&&(this._latestStats[$][0].currentSpatialLayer=z.currentSpatialLayer,this._latestStats[$][0].currentTemporalLayer=z.currentTemporalLayer,this._latestStats[$][0].preferredSpatialLayer=z.preferredSpatialLayer,this._latestStats[$][0].preferredTemporalLayer=z.preferredTemporalLayer),H=z.track.id.replace(/[{}]/g,""),K.abrupt("return",this._latestStats[H]);case 7:case"end":return K.stop()}},re,this)})),function(re){return Ku.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(pr=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getChatDataProducerRemoteStats()"),$=this._chatDataProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:$.id}));case 5:case"end":return z.stop()}},re,this)})),function(){return pr.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(ec=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getBotDataProducerRemoteStats()"),$=this._botDataProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:$.id}));case 5:case"end":return z.stop()}},re,this)})),function(){return ec.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Lt=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get($)){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:$}));case 5:case"end":return z.stop()}},re,this)})),function(re){return Lt.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Re=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getSendTransportLocalStats()"),this._sendTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._sendTransport.getStats());case 4:case"end":return $.stop()}},re,this)})),function(){return Re.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(gs=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getRecvTransportLocalStats()"),this._recvTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._recvTransport.getStats());case 4:case"end":return $.stop()}},re,this)})),function(){return gs.apply(this,arguments)})},{key:"getAudioLocalStats",value:(on=(0,u.A)(y().mark(function re(){return y().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getAudioLocalStats()"),this._micProducer){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._micProducer.getStats());case 4:case"end":return $.stop()}},re,this)})),function(){return on.apply(this,arguments)})},{key:"getVideoLocalStats",value:(wn=(0,u.A)(y().mark(function re(){var $;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getVideoLocalStats()"),$=this._webcamProducer||this._shareProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",$.getStats());case 5:case"end":return z.stop()}},re,this)})),function(){return wn.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(ar=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(z=this._consumers.get($)){H.next=3;break}return H.abrupt("return");case 3:return H.abrupt("return",z.getStats());case 4:case"end":return H.stop()}},re,this)})),function(re){return ar.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Pt=(0,u.A)(y().mark(function re($){var z,H,K,oe;return y().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return z=$.uplink,H=$.downlink,K=$.rtt,oe=$.secret,Ve.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",z,H,K),fe.prev=2,fe.next=5,this._socketRequest("applyNetworkThrottle",{uplink:z,downlink:H,rtt:K,secret:oe});case 5:fe.next=11;break;case 7:fe.prev=7,fe.t0=fe.catch(2),Ve.error("applyNetworkThrottle() | failed:%o",fe.t0),Ke.dispatch(lr({type:"error",text:"Error applying network throttle: ".concat(fe.t0)}));case 11:case"end":return fe.stop()}},re,this,[[2,7]])})),function(re){return Pt.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(ct=(0,u.A)(y().mark(function re($){var z,H,K;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return z=$.silent,H=z!==void 0&&z,K=$.secret,Ve.debug("resetNetworkThrottle()"),oe.prev=2,oe.next=5,this._socketRequest("resetNetworkThrottle",{secret:K});case 5:oe.next=10;break;case 7:oe.prev=7,oe.t0=oe.catch(2),H||(Ve.error("resetNetworkThrottle() | failed:%o",oe.t0),Ke.dispatch(lr({type:"error",text:"Error resetting network throttle: ".concat(oe.t0)})));case 10:case"end":return oe.stop()}},re,this,[[2,7]])})),function(re){return ct.apply(this,arguments)})},{key:"createProducerTransport",value:(Yt=(0,u.A)(y().mark(function re($,z){var H,K,oe,fe,Pe,Ne,ft,Ze,ht=this;return y().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:oe=$.id,fe=$.iceParameters,Pe=$.iceCandidates,Ne=$.dtlsParameters,ft=$.sctpParameters,Ze=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Creating Send Transport",span:z||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:oe,iceParameters:fe,iceCandidates:Pe,dtlsParameters:Ne,sctpParameters:ft,iceServers:this._iceServers}),this._sendTransport.on("connect",function(pe,gt,it){var ze,Ue=pe.dtlsParameters;(ze=ht._openTelemetry)===null||ze===void 0||ze.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Ze,status:1}),ht._socketRequest("connectWebRtcTransport",{transportId:ht._sendTransport.id,dtlsParameters:Ue}).then(function(){gt()}).catch(function(Be){it(Be)})}),this._sendTransport.on("produce",function(){var pe=(0,u.A)(y().mark(function gt(it,ze,Ue){var Be,vt,Je,yt,Ct,It,Rt;return y().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return Be=it.kind,vt=it.rtpParameters,Je=it.appData,bt.prev=1,(yt=ht._openTelemetry)===null||yt===void 0||yt.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Ze,status:1}),bt.next=5,ht._socketRequest("produce",{transportId:ht._sendTransport.id,kind:Be,rtpParameters:vt,appData:Je});case 5:Ct=bt.sent,It=Ct.id,ze({id:It}),bt.next=14;break;case 10:bt.prev=10,bt.t0=bt.catch(1),(Rt=ht._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:bt.t0.message}}),Ue(bt.t0);case 14:case"end":return bt.stop()}},gt,null,[[1,10]])}));return function(gt,it,ze){return pe.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var pe=(0,u.A)(y().mark(function gt(it,ze,Ue){var Be,vt,Je,yt,Ct,It,Rt;return y().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return Be=it.sctpStreamParameters,vt=it.label,Je=it.protocol,yt=it.appData,bt.prev=1,bt.next=4,ht._socketRequest("produceData",{transportId:ht._sendTransport.id,sctpStreamParameters:Be,label:vt,protocol:Je,appData:yt});case 4:Ct=bt.sent,It=Ct.id,ze({id:It}),bt.next=13;break;case 9:bt.prev=9,bt.t0=bt.catch(1),(Rt=ht._videosdkLogs)===null||Rt===void 0||Rt.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:bt.t0.message}}),Ue(bt.t0);case 13:case"end":return bt.stop()}},gt,null,[[1,9]])}));return function(gt,it,ze){return pe.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var pe=(0,u.A)(y().mark(function gt(it){var ze,Ue,Be,vt;return y().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.t0=Array,Je.next=3,ht._sendTransport.getStats();case 3:Je.t1=Je.sent,(Ue=Je.t0.from.call(Je.t0,Je.t1).filter(function(yt){var Ct=(0,v.A)(yt,2)[1];return Ct.type==="local-candidate"||Ct.type==="remote-candidate"}).map(function(yt){return(0,v.A)(yt,2)[1]})).length>0&&((Be=ht._videosdkLogs)===null||Be===void 0||Be.pushLogs({logText:'Send Trasnport State Change "'.concat(it,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(Ue)}})),it==="connected"&&ht.emitMeetingStateChange(qo),(ze=ht._openTelemetry)===null||ze===void 0||ze.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(it),span:Ze,status:1}),it==="failed"&&((vt=ht._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),ht.restartIce()),ht._transportState=it;case 10:case"end":return Je.stop()}},gt)}));return function(gt){return pe.apply(this,arguments)}}()),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:Ze,status:1,message:"Send Transport Created Successfully"});case 8:case"end":return mt.stop()}},re,this)})),function(re,$){return Yt.apply(this,arguments)})},{key:"createConsumerTransport",value:(qe=(0,u.A)(y().mark(function re($,z){var H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe=this;return y().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:oe=$.id,fe=$.iceParameters,Pe=$.iceCandidates,Ne=$.dtlsParameters,ft=$.sctpParameters,Ze=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Creating Recieve Transport",span:z||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:oe,iceParameters:fe,iceCandidates:Pe,dtlsParameters:Ne,sctpParameters:ft,iceServers:this._iceServers}),this._recvTransport.on("connect",function(it,ze,Ue){var Be,vt=it.dtlsParameters;(Be=pe._openTelemetry)===null||Be===void 0||Be.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Ze,status:1}),pe._socketRequest("connectWebRtcTransport",{transportId:pe._recvTransport.id,dtlsParameters:vt}).then(function(){ze()}).catch(function(Je){Ue(Je)})}),this._recvTransport.on("connectionstatechange",function(){var it=(0,u.A)(y().mark(function ze(Ue){var Be,vt,Je;return y().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.t0=Array,yt.next=3,pe._recvTransport.getStats();case 3:yt.t1=yt.sent,(vt=yt.t0.from.call(yt.t0,yt.t1).filter(function(Ct){var It=(0,v.A)(Ct,2)[1];return It.type==="local-candidate"||It.type==="remote-candidate"}).map(function(Ct){return(0,v.A)(Ct,2)[1]})).length>0&&((Je=pe._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:'Recv Trasnport State Change "'.concat(Ue,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(vt)}})),(Be=pe._openTelemetry)===null||Be===void 0||Be.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ue),span:Ze,status:1}),Ue==="failed"&&pe.restartIce(),pe._transportState=Ue;case 9:case"end":return yt.stop()}},ze)}));return function(ze){return it.apply(this,arguments)}}()),ht=0,(mt=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(it){try{var ze=function(vt,Je,yt){pe._stats.consumerStats||(pe._stats.consumerStats={});var Ct=Je.appData.peerId;pe._stats.consumerStats[Ct]||(pe._stats.consumerStats[Ct]={}),pe._stats.consumerStats[Ct][yt]||(pe._stats.consumerStats[Ct][yt]=[]),pe._latestStats[Je.track.id.replace(/[{}]/g,"")]=[vt],ht%5==0&&pe._stats.consumerStats[Ct][yt].push(vt)},Ue=function(vt){it[vt].forEach(function(Je){var yt,Ct=Pi(pe._consumers);try{for(Ct.s();!(yt=Ct.n()).done;){var It=(0,v.A)(yt.value,2),Rt=(It[0],It[1]);if(Rt.track.id.replace(/[{}]/g,"")===Je.trackId){var bt=Rt.appData.share?Rt.kind==="audio"?"shareAudio":"share":Rt.kind;ze(Je,Rt,bt)}}}catch(sr){Ct.e(sr)}finally{Ct.f()}})};Ue("audio"),Ue("video"),ht++}catch(vt){var Be;(Be=pe._videosdkLogs)===null||Be===void 0||Be.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:vt.message}}),console.log("CONSUMER CATCH",vt)}},mt.start(),this._recvTransport.observer.on("close",function(){mt.stop(),pe._metrics.removeExistingProbe(mt)}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:Ze,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return gt.stop()}},re,this)})),function(re,$){return qe.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(re){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:re}),this._meetingConnectionState=re}},{key:"joinRoom",value:(dt=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt,Je,yt,Ct,It,Rt,bt,sr,Bt;return y().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ve.debug("joinRoom()"),Ut.prev=1,Pe=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new Ht.pF({handlerName:this._handlerName}),Ut.next=6,this._socketRequest("getRouterRtpCapabilities");case 6:return Ne=Ut.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Ne.headerExtensions=(ft=Ne.headerExtensions)===null||ft===void 0?void 0:ft.filter(function(Ar){return Ar.uri!="urn:3gpp:video-orientation"})):Ne.headerExtensions=(Ze=Ne.headerExtensions)===null||Ze===void 0?void 0:Ze.filter(function(Ar){return Ar.uri!="urn:3gpp:video-orientation"}),Ut.next=10,this._mediasoupDevice.load({routerRtpCapabilities:Ne});case 10:if((z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:Pe,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Ne).toString()},message:"Router Capabilities Loaded"}),!this._produce){Ut.next=16;break}return Ut.next=14,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 14:ht=Ut.sent,this.createProducerTransport(ht,this._joinSpan);case 16:if(!this._consume){Ut.next=21;break}return Ut.next=19,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 19:mt=Ut.sent,this.createConsumerTransport(mt,this._joinSpan);case 21:return Ut.next=23,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(H=this._mediasoupDevice)===null||H===void 0?void 0:H.rtpCapabilities,sctpCapabilities:(K=this._mediasoupDevice)===null||K===void 0?void 0:K.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 23:pe=Ut.sent,gt=pe.peers,it=pe.poll,ze=pe.messages,Ke.dispatch(Gt("connected")),(oe=this._openTelemetry)===null||oe===void 0||oe.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:gt,poll:it,messages:ze,baseUrl:this._baseUrl}),Ke.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Ke.dispatch(lr({text:"You are in the room!",timeout:3e3})),Ue=Pi(gt);try{for(Ue.s();!(Be=Ue.n()).done;)vt=Be.value,Je=ii(os(os({},vt),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(Je),this._eventEmitter.emit(Je.type,Je.payload)}catch(Ar){Ue.e(Ar)}finally{Ue.f()}this._produce&&(Ke.dispatch(xr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((yt=this._openTelemetry)===null||yt===void 0||yt.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(Ar){Ar.stop()})),Ct=zi(),this._webcamEnabled&&(!Ct||Ct.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((It=this._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(Ar){Ar.stop()}))),window.SHOW_INFO&&(Rt=Ke.getState(),bt=Rt.me,Ke.dispatch(dr(bt.id))),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Ut.next=46;break;case 39:Ut.prev=39,Ut.t0=Ut.catch(1),Ve.error("joinRoom() failed:%o",Ut.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:Ut.t0.message}}),(Bt=this._openTelemetry)===null||Bt===void 0||Bt.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(Ut.t0)}),Ke.dispatch(lr({type:"error",text:"Could not join the room: ".concat(Ut.t0)})),this.close({sendLeft:!0});case 46:case"end":return Ut.stop()}},re,this,[[1,39]])})),function(){return dt.apply(this,arguments)})},{key:"switchingRoom",value:(rt=(0,u.A)(y().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze,Ue,Be,vt;return y().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({name:"switchingRoom() start",attributes:{"room.id":$,"peer.id":this._peerId,display_name:this._displayName}}),Je.prev=1,ft=(K=this._openTelemetry)===null||K===void 0?void 0:K.trace({name:"switch room join request",parentSpan:H}),Je.next=5,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(oe=this._mediasoupDevice)===null||oe===void 0?void 0:oe.rtpCapabilities,sctpCapabilities:(fe=this._mediasoupDevice)===null||fe===void 0?void 0:fe.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 5:Ze=Je.sent,ht=Ze.peers,mt=Ze.poll,pe=Ze.messages,(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:ft,status:1,message:"Join request successful in switched room"}),Ke.dispatch(Gt("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:$,peers:ht,poll:mt,messages:pe,baseUrl:this._baseUrl}),Ke.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Ke.dispatch(lr({text:"You are in the room!",timeout:3e3})),gt=Pi(ht);try{for(gt.s();!(it=gt.n()).done;)ze=it.value,Ue=ii(os(os({},ze),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload)}catch(yt){gt.e(yt)}finally{gt.f()}(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:H,status:1,message:"Room switch completed successfully"}),Je.next=26;break;case 19:Je.prev=19,Je.t0=Je.catch(1),Ve.error("joinRoom() failed:%o",Je.t0),(Be=this._videosdkLogs)===null||Be===void 0||Be.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:Je.t0.message}}),(vt=this._openTelemetry)===null||vt===void 0||vt.completeSpan({span:H,status:2,message:"Room switch failed: ".concat(Je.t0.message)}),Ke.dispatch(lr({type:"error",text:"Could not join the switched room: ".concat(Je.t0)})),this.close({sendLeft:!0});case 26:case"end":return Je.stop()}},re,this,[[1,19]])})),function(re){return rt.apply(this,arguments)})},{key:"_updateMics",value:(Te=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze=arguments;return y().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return z=ze.length>0&&ze[0]!==void 0?ze[0]:void 0,this._mics=new Map,Ve.debug("_updateMics() |"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:z||null}),Ue.prev=4,Ue.next=7,navigator.mediaDevices.enumerateDevices();case 7:fe=Ue.sent,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting System Mic list",span:H,status:1,attributes:{systemDevice:fe?JSON.stringify(fe):"Device not found"}}),Pe=Pi(fe);try{for(Pe.s();!(Ne=Pe.n()).done;)(ft=Ne.value).kind=="audioinput"&&this._mics.set(ft.deviceId,ft)}catch(Be){Pe.e(Be)}finally{Pe.f()}Ze=Array.from(this._mics.values()),ht=Ze.length,mt=this._mic.device?this._mic.device.deviceId:void 0,ht===0?this._mic.device=null:this._mics.has(mt)||(this._mic.device=Ze[0]),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:1,message:"Update Mic"}),Ue.next=30;break;case 18:if(Ue.prev=18,Ue.t0=Ue.catch(4),!(Ue.t0 instanceof TypeError)){Ue.next=30;break}if(Ue.t0.name!=="TypeError"){Ue.next=28;break}throw gt=mr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(gt),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:H,status:2,message:"Error in updateMics() :: ".concat(gt.message)}),new Error(gt.message);case 28:throw(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:H,status:2,message:"Error in updateMics() :: ".concat(Ue.t0.message)}),new Error(Ue.t0.message);case 30:case"end":return Ue.stop()}},re,this,[[4,18]])})),function(){return Te.apply(this,arguments)})},{key:"_updateWebcams",value:(ge=(0,u.A)(y().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,ze=arguments;return y().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return z=ze.length>0&&ze[0]!==void 0?ze[0]:void 0,Ve.debug("_updateWebcams()"),this._webcams=new Map,Ve.debug("_updateWebcams() | calling enumerateDevices()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:z||null}),Ue.prev=5,Ue.next=8,navigator.mediaDevices.enumerateDevices();case 8:fe=Ue.sent,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting System Webcam list",span:H,status:1,attributes:{systemDevice:fe?JSON.stringify(fe):"Device not found"}}),Pe=Pi(fe),Ue.prev=11,Pe.s();case 13:if((Ne=Pe.n()).done){Ue.next=20;break}if((ft=Ne.value).kind==="videoinput"){Ue.next=17;break}return Ue.abrupt("continue",18);case 17:this._webcams.set(ft.deviceId,ft);case 18:Ue.next=13;break;case 20:Ue.next=25;break;case 22:Ue.prev=22,Ue.t0=Ue.catch(11),Pe.e(Ue.t0);case 25:return Ue.prev=25,Pe.f(),Ue.finish(25);case 28:Ze=Array.from(this._webcams.values()),ht=Ze.length,(mt=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=mt),Ve.debug("_updateWebcams() [webcams:%o]",Ze),ht===0?this._webcam.device=null:this._webcams.has(mt)||(this._webcam.device=Ze[this._defaultCameraIndex]),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:1,message:"Update Webcam"}),Ke.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1}),Ue.next=50;break;case 38:if(Ue.prev=38,Ue.t1=Ue.catch(5),!(Ue.t1 instanceof TypeError)){Ue.next=50;break}if(Ue.t1.name!=="TypeError"){Ue.next=48;break}throw gt=mr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(gt),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:H,status:2,message:"Error in updateWebcams() :: ".concat(gt.message)}),new Error(gt.message);case 48:throw(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:H,status:2,message:"Error in updateWebcams() :: ".concat(Ue.t1.message)}),new Error(Ue.t1.message);case 50:case"end":return Ue.stop()}},re,this,[[5,38],[11,22,25,28]])})),function(){return ge.apply(this,arguments)})},{key:"_getWebcamType",value:function(re){return/(back|rear)/i.test(re.label)?(Ve.debug("_getWebcamType() | it seems to be a back camera"),"back"):(Ve.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(Y=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!$.paused){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._socketRequest("pauseConsumer",{consumerId:$.id});case 5:$.pause(),Ke.dispatch(qi($.id,"local")),H.next=14;break;case 9:H.prev=9,H.t0=H.catch(2),Ve.error("_pauseConsumer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error pausing Consumer: ".concat(H.t0)}));case 14:case"end":return H.stop()}},re,this,[[2,9]])})),function(re){return Y.apply(this,arguments)})},{key:"_resumeConsumer",value:(V=(0,u.A)(y().mark(function re($){var z;return y().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if($.paused){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._socketRequest("resumeConsumer",{consumerId:$.id});case 5:$.resume(),Ke.dispatch(Uo($.id,"local")),H.next=14;break;case 9:H.prev=9,H.t0=H.catch(2),Ve.error("_resumeConsumer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(lr({type:"error",text:"Error resuming Consumer: ".concat(H.t0)}));case 14:case"end":return H.stop()}},re,this,[[2,9]])})),function(re){return V.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(B=(0,u.A)(y().mark(function re(){var $=this;return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._externalVideoStream){z.next=2;break}return z.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){z.next=5;break}return z.next=5,new Promise(function(H){return $._externalVideo.addEventListener("canplay",H)});case 5:if(!this._externalVideo.captureStream){z.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),z.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){z.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),z.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return z.abrupt("return",this._externalVideoStream);case 15:case"end":return z.stop()}},re,this)})),function(){return B.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(q=(0,u.A)(y().mark(function re($){return y().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.e2eeManager){z.next=5;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled($,this._peerId),this.isE2EEEnabled=$,z.next=6;break;case 5:throw Error("e2ee not configured, please set e2ee settings within the room options");case 6:case"end":return z.stop()}},re,this)})),function(re){return q.apply(this,arguments)})},{key:"_emitError",value:function(re){this._eventEmitter.emit("ERROR",re)}}],[{key:"init",value:function(re){Ke=re.store}}]);var q,B,V,Y,ge,Te,rt,dt,qe,Yt,ct,Pt,ar,wn,on,gs,Re,Lt,ec,pr,Ku,Jt,Ts,fl,Gu,Yu,Xh,Zh,ef,tf,rf,nf,sf,af,ml,gl,vl,pd,hd,fd,yl,md,fo,gd,vd,tc,rc,nc,ia,mo,sc,go,bl,yd,bd,wd,ic,xd,ac,Ju,wl,Qu,xl,of,Xu,cf,$s,_d,Zu,lf,df,oc,_l,Sl,vo,Sd,Ed,ep,tp,rp,El,Rd,kd,Cd,Td,np,uf,sp,ip,pf,cc,hf,ff,lc,Rl,kl,dc,Cl,mf,Pd,Tl,Nd,yo,ap,Ad,gf,vf,oi,yf,bf,jd,op,Wa,Pl,wf,xf}();function Ev(q){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,u.A)(y().mark(function q(B){var V,Y=this;return y().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(ge.prev=0,this.e2eeManager){ge.next=13;break}return ge.t0=hl,ge.t1=B,ge.next=6,zu();case 6:ge.t2=ge.sent,ge.t3={keyProvider:ge.t1,worker:ge.t2},this.e2eeManager=new ge.t0(ge.t3),this.e2eeManager.on(gr.KS.ParticipantEncryptionStatusChanged,function(Te){Y.isE2EEEnabled=Te}),this.e2eeManager.on(gr.KS.E2EEStateChange,function(Te){Y._eventEmitter.emit("E2EE_STATE_CHANGE",Te)}),(V=this.e2eeManager)===null||V===void 0||V.setup(this),this.toggleE2EEEnabled(!0);case 13:ge.next=19;break;case 15:throw ge.prev=15,ge.t4=ge.catch(0),console.error("Error setting up E2EE: ",ge.t4),new Error("Error setting up E2EE: "+ge.t4.message);case 19:case"end":return ge.stop()}},q,this,[[0,15]])}))).apply(this,arguments)}},2073:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.pad.AnsiX923={pad:function(v,m){var u=v.sigBytes,b=4*m,f=b-u%b,w=u+f-1;v.clamp(),v.words[w>>>2]|=f<<24-w%4*8,v.sigBytes+=f},unpad:function(v){var m=255&v.words[v.sigBytes-1>>>2];v.sigBytes-=m}},p.pad.Ansix923)},2107:(l,d,o)=>{o.d(d,{kR:()=>v,nI:()=>p,wZ:()=>m});var p={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function v(u){return u===p.CONFERENCE||u===p.SEND_AND_RECV}function m(u){return u===p.VIEWER||u===p.SIGNALLING_ONLY}},2109:function(l,d,o){var p;(function(v,m){var u,b="user-agent",f="",w="function",g="undefined",y="object",_="string",x="browser",E="cpu",j="device",R="engine",C="os",T="result",h="name",S="type",k="vendor",P="version",N="architecture",O="major",D="model",L="console",M="mobile",I="tablet",G="smarttv",de="wearable",ee="xr",Q="embedded",ae="inapp",xe="brands",Se="formFactors",ie="fullVersionList",We="platform",Oe="platformVersion",se="bitness",ue="sec-ch-ua",Ce=ue+"-full-version-list",$e=ue+"-arch",Wt=ue+"-"+se,er=ue+"-form-factors",wt=ue+"-"+M,Er=ue+"-"+D,yr=ue+"-"+We,Ot=yr+"-version",nn=[xe,ie,M,D,We,Oe,N,Se,se],Dt="Amazon",Xt="Apple",Gr="ASUS",dn="BlackBerry",Mr="Google",Yr="Huawei",un="Lenovo",Mt="Honor",pn="LG",sn="Microsoft",zr="Motorola",Lr="Nvidia",_n="OnePlus",Xr="OPPO",Pn="Samsung",Sn="Sharp",In="Sony",Nn="Xiaomi",zt="Zebra",Mn="Chrome",ns="Chromium",hn="Chromecast",or="Firefox",Ye="Opera",Me="Facebook",ot="Sogou",Le="Mobile ",lt=" Browser",cr="Windows",De=typeof v!==g,Zt=De&&v.navigator?v.navigator:m,Vt=Zt&&Zt.userAgentData?Zt.userAgentData:m,br=function(kt){for(var ir={},Gt=0;Gt<kt.length;Gt++)ir[kt[Gt].toUpperCase()]=kt[Gt];return ir},hr=function(kt,ir){if(typeof kt===y&&kt.length>0){for(var Gt in kt)if(Tt(kt[Gt])==Tt(ir))return!0;return!1}return!!Xe(kt)&&Tt(ir).indexOf(Tt(kt))!==-1},Pr=function(kt,ir){for(var Gt in kt)return/^(browser|cpu|device|engine|os)$/.test(Gt)||!!ir&&Pr(kt[Gt])},Xe=function(kt){return typeof kt===_},Kt=function(kt){if(!kt)return m;for(var ir=[],Gt=Nr(/\\?\"/g,kt).split(","),Rn=0;Rn<Gt.length;Rn++)if(Gt[Rn].indexOf(";")>-1){var dr=Sr(Gt[Rn]).split(";v=");ir[Rn]={brand:dr[0],version:dr[1]}}else ir[Rn]=Sr(Gt[Rn]);return ir},Tt=function(kt){return Xe(kt)?kt.toLowerCase():kt},Ht=function(kt){return Xe(kt)?Nr(/[^\d\.]/g,kt).split(".")[0]:m},Fr=function(kt){for(var ir in kt){var Gt=kt[ir];typeof Gt==y&&Gt.length==2?this[Gt[0]]=Gt[1]:this[Gt]=m}return this},Nr=function(kt,ir){return Xe(ir)?ir.replace(kt,f):ir},$r=function(kt){return Nr(/\\?\"/g,kt)},Sr=function(kt,ir){if(Xe(kt))return kt=Nr(/^\s\s*/,kt),typeof ir===g?kt:kt.substring(0,500)},wr=function(kt,ir){if(kt&&ir)for(var Gt,Rn,dr,xr,fn,Cr,Rr=0;Rr<ir.length&&!fn;){var an=ir[Rr],Cs=ir[Rr+1];for(Gt=Rn=0;Gt<an.length&&!fn&&an[Gt];)if(fn=an[Gt++].exec(kt))for(dr=0;dr<Cs.length;dr++)Cr=fn[++Rn],typeof(xr=Cs[dr])===y&&xr.length>0?xr.length===2?typeof xr[1]==w?this[xr[0]]=xr[1].call(this,Cr):this[xr[0]]=xr[1]:xr.length===3?typeof xr[1]!==w||xr[1].exec&&xr[1].test?this[xr[0]]=Cr?Cr.replace(xr[1],xr[2]):m:this[xr[0]]=Cr?xr[1].call(this,Cr,xr[2]):m:xr.length===4&&(this[xr[0]]=Cr?xr[3].call(this,Cr.replace(xr[1],xr[2])):m):this[xr]=Cr||m;Rr+=2}},Jr=function(kt,ir){for(var Gt in ir)if(typeof ir[Gt]===y&&ir[Gt].length>0){for(var Rn=0;Rn<ir[Gt].length;Rn++)if(hr(ir[Gt][Rn],kt))return Gt==="?"?m:Gt}else if(hr(ir[Gt],kt))return Gt==="?"?m:Gt;return ir.hasOwnProperty("*")?ir["*"]:kt},Jn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ss={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":m},Gs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[P,[h,Le+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[P,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,P],[/opios[\/ ]+([\w\.]+)/i],[P,[h,Ye+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[P,[h,Ye+" GX"]],[/\bopr\/([\w\.]+)/i],[P,[h,Ye]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[P,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[P,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[h,P],[/quark(?:pc)?\/([-\w\.]+)/i],[P,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[P,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[P,[h,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[P,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[P,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[P,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[P,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[P,[h,"Smart "+un+lt]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure"+lt],P],[/\bfocus\/([\w\.]+)/i],[P,[h,or+" Focus"]],[/\bopt\/([\w\.]+)/i],[P,[h,Ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[P,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[P,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[P,[h,Ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[P,[h,"MIUI"+lt]],[/fxios\/([\w\.-]+)/i],[P,[h,Le+or]],[/\bqihoobrowser\/?([\w\.]*)/i],[P,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],P],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+lt],P],[/samsungbrowser\/([\w\.]+)/i],[P,[h,Pn+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[P,[h,ot+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,ot+" Mobile"],P],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,P],[/(lbbrowser|rekonq)/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[P,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Me],P,[S,ae]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,P,[S,ae]],[/\bgsa\/([\w\.]+) .*safari\//i],[P,[h,"GSA"],[S,ae]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[P,[h,"TikTok"],[S,ae]],[/\[(linkedin)app\]/i],[h,[S,ae]],[/(chromium)[\/ ]([-\w\.]+)/i],[h,P],[/headlesschrome(?:\/([\w\.]+)| )/i],[P,[h,Mn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,Mn+" WebView"],P],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[P,[h,"Android"+lt]],[/chrome\/([\w\.]+) mobile/i],[P,[h,Le+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,P],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[P,[h,Le+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[h,Le+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[P,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[P,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[h,P],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[h,Le+or],P],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],P],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,P],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[P,[h,or+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[h,[P,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[P,/[^\d\.]+./,f]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[N,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[N,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[N,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[N,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[N,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[N,/ower/,f,Tt]],[/ sun4\w[;\)]/i],[[N,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[N,Tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[D,[k,Pn],[S,I]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[D,[k,Pn],[S,M]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[D,[k,Xt],[S,M]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[D,[k,Xt],[S,I]],[/(macintosh);/i],[D,[k,Xt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[D,[k,Sn],[S,M]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[D,[k,Mt],[S,I]],[/honor([-\w ]+)[;\)]/i],[D,[k,Mt],[S,M]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[D,[k,Yr],[S,I]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[D,[k,Yr],[S,M]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[D,/_/g," "],[k,Nn],[S,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[D,/_/g," "],[k,Nn],[S,M]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[D,[k,Xr],[S,M]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[D,[k,Jr,{OnePlus:["304","403","203"],"*":Xr}],[S,I]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[D,[k,"BLU"],[S,M]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[D,[k,"Vivo"],[S,M]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[D,[k,"Realme"],[S,M]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[D,[k,zr],[S,M]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[D,[k,zr],[S,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[D,[k,pn],[S,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[D,[k,pn],[S,M]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[D,[k,un],[S,I]],[/(nokia) (t[12][01])/i],[k,D,[S,I]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[D,/_/g," "],[S,M],[k,"Nokia"]],[/(pixel (c|tablet))\b/i],[D,[k,Mr],[S,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[D,[k,Mr],[S,M]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[D,[k,In],[S,M]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[D,"Xperia Tablet"],[k,In],[S,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[D,[k,_n],[S,M]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[D,[k,Dt],[S,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[D,/(.+)/g,"Fire Phone $1"],[k,Dt],[S,M]],[/(playbook);[-\w\),; ]+(rim)/i],[D,k,[S,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[D,[k,dn],[S,M]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[D,[k,Gr],[S,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[D,[k,Gr],[S,M]],[/(nexus 9)/i],[D,[k,"HTC"],[S,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[k,[D,/_/g," "],[S,M]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[D,[k,"TCL"],[S,I]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[D,[k,"TCL"],[S,M]],[/(itel) ((\w+))/i],[[k,Tt],D,[S,Jr,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[D,[k,"Acer"],[S,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[D,[k,"Meizu"],[S,M]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[D,[k,"Ulefone"],[S,M]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[D,[k,"Energizer"],[S,M]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[D,[k,"Cat"],[S,M]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[D,[k,"Smartfren"],[S,M]],[/droid.+; (a(?:015|06[35]|142p?))/i],[D,[k,"Nothing"],[S,M]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[D,[k,"Archos"],[S,I]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[D,[k,"Archos"],[S,M]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[k,D,[S,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[k,D,[S,M]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[k,D,[S,I]],[/(surface duo)/i],[D,[k,sn],[S,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[D,[k,"Fairphone"],[S,M]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[D,[k,Lr],[S,I]],[/(sprint) (\w+)/i],[k,D,[S,M]],[/(kin\.[onetw]{3})/i],[[D,/\./g," "],[k,sn],[S,M]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[D,[k,zt],[S,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[D,[k,zt],[S,M]],[/smart-tv.+(samsung)/i],[k,[S,G]],[/hbbtv.+maple;(\d+)/i],[[D,/^/,"SmartTV"],[k,Pn],[S,G]],[/tcast.+(lg)e?. ([-\w]+)/i],[k,D,[S,G]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[k,pn],[S,G]],[/(apple) ?tv/i],[k,[D,Xt+" TV"],[S,G]],[/crkey.*devicetype\/chromecast/i],[[D,hn+" Third Generation"],[k,Mr],[S,G]],[/crkey.*devicetype\/([^/]*)/i],[[D,/^/,"Chromecast "],[k,Mr],[S,G]],[/fuchsia.*crkey/i],[[D,hn+" Nest Hub"],[k,Mr],[S,G]],[/crkey/i],[[D,hn],[k,Mr],[S,G]],[/(portaltv)/i],[D,[k,Me],[S,G]],[/droid.+aft(\w+)( bui|\))/i],[D,[k,Dt],[S,G]],[/(shield \w+ tv)/i],[D,[k,Lr],[S,G]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[D,[k,Sn],[S,G]],[/(bravia[\w ]+)( bui|\))/i],[D,[k,In],[S,G]],[/(mi(tv|box)-?\w+) bui/i],[D,[k,Nn],[S,G]],[/Hbbtv.*(technisat) (.*);/i],[k,D,[S,G]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[k,Sr],[D,Sr],[S,G]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[D,[S,G]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,G]],[/(ouya)/i,/(nintendo) (\w+)/i],[k,D,[S,L]],[/droid.+; (shield)( bui|\))/i],[D,[k,Lr],[S,L]],[/(playstation \w+)/i],[D,[k,In],[S,L]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[D,[k,sn],[S,L]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[D,[k,Pn],[S,de]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[k,D,[S,de]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[D,[k,Xr],[S,de]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[D,[k,Xt],[S,de]],[/(opwwe\d{3})/i],[D,[k,_n],[S,de]],[/(moto 360)/i],[D,[k,zr],[S,de]],[/(smartwatch 3)/i],[D,[k,In],[S,de]],[/(g watch r)/i],[D,[k,pn],[S,de]],[/droid.+; (wt63?0{2,3})\)/i],[D,[k,zt],[S,de]],[/droid.+; (glass) \d/i],[D,[k,Mr],[S,ee]],[/(pico) (4|neo3(?: link|pro)?)/i],[k,D,[S,ee]],[/(quest( \d| pro)?s?).+vr/i],[D,[k,Me],[S,ee]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[k,[S,Q]],[/(aeobc)\b/i],[D,[k,Dt],[S,Q]],[/(homepod).+mac os/i],[D,[k,Xt],[S,Q]],[/windows iot/i],[[S,Q]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[D,[S,Jr,{mobile:"Mobile",xr:"VR","*":I}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,M]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[D,[k,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[P,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,P],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[P,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,P],[/ladybird\//i],[[h,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[P,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,P],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[h,[P,Jr,Jn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[P,Jr,Jn],[h,cr]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[P,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"macOS"],[P,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[P,[h,hn+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[P,[h,hn+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[P,[h,hn+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[P,[h,hn+" Linux"]],[/crkey\/([\d\.]+)/i],[P,[h,hn]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[P,h],[/(ubuntu) ([\w\.]+) like android/i],[[h,/(.+)/,"$1 Touch"],P],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[h,P],[/\(bb(10);/i],[P,[h,dn]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[P,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[P,[h,or+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[P,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[P,[h,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,"Chrome OS"],P],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,P],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],P],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,P]]},Ys=(Fr.call((u={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[x,[h,P,O,S]],[E,[N]],[j,[S,D,k]],[R,[h,P]],[C,[h,P]]]),Fr.call(u.isIgnore,[[x,[P,O]],[R,[P]],[C,[P]]]),Fr.call(u.isIgnoreRgx,[[x,/ ?browser$/i],[C,/ ?os$/i]]),Fr.call(u.toString,[[x,[h,P]],[E,[N]],[j,[k,D]],[R,[h,P]],[C,[h,P]]]),u),mi=function(kt,ir){var Gt=Ys.init[ir],Rn=Ys.isIgnore[ir]||0,dr=Ys.isIgnoreRgx[ir]||0,xr=Ys.toString[ir]||0;function fn(){Fr.call(this,Gt)}return fn.prototype.getItem=function(){return kt},fn.prototype.withClientHints=function(){return Vt?Vt.getHighEntropyValues(nn).then(function(Cr){return kt.setCH(new Ci(Cr,!1)).parseCH().get()}):kt.parseCH().get()},fn.prototype.withFeatureCheck=function(){return kt.detectFeature().get()},ir!=T&&(fn.prototype.is=function(Cr){var Rr=!1;for(var an in this)if(this.hasOwnProperty(an)&&!hr(Rn,an)&&Tt(dr?Nr(dr,this[an]):this[an])==Tt(dr?Nr(dr,Cr):Cr)){if(Rr=!0,Cr!=g)break}else if(Cr==g&&Rr){Rr=!Rr;break}return Rr},fn.prototype.toString=function(){var Cr=f;for(var Rr in xr)typeof this[xr[Rr]]!==g&&(Cr+=(Cr?" ":f)+this[xr[Rr]]);return Cr||g}),Vt||(fn.prototype.then=function(Cr){var Rr=this,an=function(){for(var An in Rr)Rr.hasOwnProperty(An)&&(this[An]=Rr[An])};an.prototype={is:fn.prototype.is,toString:fn.prototype.toString};var Cs=new an;return Cr(Cs),Cs}),new fn};function Ci(kt,ir){if(kt=kt||{},Fr.call(this,nn),ir)Fr.call(this,[[xe,Kt(kt[ue])],[ie,Kt(kt[Ce])],[M,/\?1/.test(kt[wt])],[D,$r(kt[Er])],[We,$r(kt[yr])],[Oe,$r(kt[Ot])],[N,$r(kt[$e])],[Se,Kt(kt[er])],[se,$r(kt[Wt])]]);else for(var Gt in kt)this.hasOwnProperty(Gt)&&typeof kt[Gt]!==g&&(this[Gt]=kt[Gt])}function gi(kt,ir,Gt,Rn){return this.get=function(dr){return dr?this.data.hasOwnProperty(dr)?this.data[dr]:m:this.data},this.set=function(dr,xr){return this.data[dr]=xr,this},this.setCH=function(dr){return this.uaCH=dr,this},this.detectFeature=function(){if(Zt&&Zt.userAgent==this.ua)switch(this.itemType){case x:Zt.brave&&typeof Zt.brave.isBrave==w&&this.set(h,"Brave");break;case j:!this.get(S)&&Vt&&Vt[M]&&this.set(S,M),this.get(D)=="Macintosh"&&Zt&&typeof Zt.standalone!==g&&Zt.maxTouchPoints&&Zt.maxTouchPoints>2&&this.set(D,"iPad").set(S,I);break;case C:!this.get(h)&&Vt&&Vt[We]&&this.set(h,Vt[We]);break;case T:var dr=this.data,xr=function(fn){return dr[fn].getItem().detectFeature().get()};this.set(x,xr(x)).set(E,xr(E)).set(j,xr(j)).set(R,xr(R)).set(C,xr(C))}return this},this.parseUA=function(){return this.itemType!=T&&wr.call(this.data,this.ua,this.rgxMap),this.itemType==x&&this.set(O,Ht(this.get(P))),this},this.parseCH=function(){var dr=this.uaCH,xr=this.rgxMap;switch(this.itemType){case x:case R:var fn,Cr=dr[ie]||dr[xe];if(Cr)for(var Rr in Cr){var an=Cr[Rr].brand||Cr[Rr],Cs=Cr[Rr].version;this.itemType!=x||/not.a.brand/i.test(an)||fn&&(!/chrom/i.test(fn)||an==ns)||(an=Jr(an,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(h,an).set(P,Cs).set(O,Ht(Cs)),fn=an),this.itemType==R&&an==ns&&this.set(P,Cs)}break;case E:var An=dr[N];An&&(An&&dr[se]=="64"&&(An+="64"),wr.call(this.data,An+";",xr));break;case j:if(dr[M]&&this.set(S,M),dr[D]&&(this.set(D,dr[D]),!this.get(S)||!this.get(k))){var Ln={};wr.call(Ln,"droid 9; "+dr[D]+")",xr),!this.get(S)&&Ln.type&&this.set(S,Ln.type),!this.get(k)&&Ln.vendor&&this.set(k,Ln.vendor)}if(dr[Se]){var Js;if(typeof dr[Se]!="string")for(var xs=0;!Js&&xs<dr[Se].length;)Js=Jr(dr[Se][xs++],ss);else Js=Jr(dr[Se],ss);this.set(S,Js)}break;case C:var Hi=dr[We];if(Hi){var Qs=dr[Oe];Hi==cr&&(Qs=parseInt(Ht(Qs),10)>=13?"11":"10"),this.set(h,Hi).set(P,Qs)}this.get(h)==cr&&dr[D]=="Xbox"&&this.set(h,"Xbox").set(P,m);break;case T:var ba=this.data,ii=function(Va){return ba[Va].getItem().setCH(dr).parseCH().get()};this.set(x,ii(x)).set(E,ii(E)).set(j,ii(j)).set(R,ii(R)).set(C,ii(C))}return this},Fr.call(this,[["itemType",kt],["ua",ir],["uaCH",Rn],["rgxMap",Gt],["data",mi(this,kt)]]),this}function is(kt,ir,Gt){if(typeof kt===y?(Pr(kt,!0)?(typeof ir===y&&(Gt=ir),ir=kt):(Gt=kt,ir=m),kt=m):typeof kt!==_||Pr(ir,!0)||(Gt=ir,ir=m),Gt&&typeof Gt.append===w){var Rn={};Gt.forEach(function(Rr,an){Rn[an]=Rr}),Gt=Rn}if(!(this instanceof is))return new is(kt,ir,Gt).getResult();var dr=typeof kt===_?kt:Gt&&Gt[b]?Gt[b]:Zt&&Zt.userAgent?Zt.userAgent:f,xr=new Ci(Gt,!0),fn=ir?function(Rr,an){var Cs={},An=an;if(!Pr(an))for(var Ln in An={},an)for(var Js in an[Ln])An[Js]=an[Ln][Js].concat(An[Js]?An[Js]:[]);for(var xs in Rr)Cs[xs]=An[xs]&&An[xs].length%2==0?An[xs].concat(Rr[xs]):Rr[xs];return Cs}(Gs,ir):Gs,Cr=function(Rr){return Rr==T?function(){return new gi(Rr,dr,fn,xr).set("ua",dr).set(x,this.getBrowser()).set(E,this.getCPU()).set(j,this.getDevice()).set(R,this.getEngine()).set(C,this.getOS()).get()}:function(){return new gi(Rr,dr,fn[Rr],xr).parseUA().get()}};return Fr.call(this,[["getBrowser",Cr(x)],["getCPU",Cr(E)],["getDevice",Cr(j)],["getEngine",Cr(R)],["getOS",Cr(C)],["getResult",Cr(T)],["getUA",function(){return dr}],["setUA",function(Rr){return Xe(Rr)&&(dr=Rr.length>500?Sr(Rr,500):Rr),this}]]).setUA(dr),this}is.VERSION="2.0.3",is.BROWSER=br([h,P,O,S]),is.CPU=br([N]),is.DEVICE=br([D,k,S,L,M,G,I,de,Q]),is.ENGINE=is.OS=br([h,P]),typeof d!==g?(l.exports&&(d=l.exports=is),d.UAParser=is):o.amdO?(p=(function(){return is}).call(d,o,d,l))===m||(l.exports=p):De&&(v.UAParser=is);var as=De&&(v.jQuery||v.Zepto);if(as&&!as.ua){var zi=new is;as.ua=zi.getResult(),as.ua.get=function(){return zi.getUA()},as.ua.set=function(kt){zi.setUA(kt);var ir=zi.getResult();for(var Gt in ir)as.ua[Gt]=ir[Gt]}}})(typeof window=="object"?window:this)},2155:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.pad.ZeroPadding={pad:function(v,m){var u=4*m;v.clamp(),v.sigBytes+=u-(v.sigBytes%u||u)},unpad:function(v){var m=v.words,u=v.sigBytes-1;for(u=v.sigBytes-1;u>=0;u--)if(m[u>>>2]>>>24-u%4*8&255){v.sigBytes=u+1;break}}},p.pad.ZeroPadding)},2169:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.mode.CFB=function(){var v=p.lib.BlockCipherMode.extend();function m(u,b,f,w){var g,y=this._iv;y?(g=y.slice(0),this._iv=void 0):g=this._prevBlock,w.encryptBlock(g,0);for(var _=0;_<f;_++)u[b+_]^=g[_]}return v.Encryptor=v.extend({processBlock:function(u,b){var f=this._cipher,w=f.blockSize;m.call(this,u,b,w,f),this._prevBlock=u.slice(b,b+w)}}),v.Decryptor=v.extend({processBlock:function(u,b){var f=this._cipher,w=f.blockSize,g=u.slice(b,b+w);m.call(this,u,b,w,f),this._prevBlock=g}}),v}(),p.mode.CFB)},2183:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Chrome111=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),w=o(4256),g=o(4893),y=o(521),_=o(1305),x=o(3303),E=new v.Logger("Chrome111"),j={OS:1024,MIS:1024};class R extends y.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new R}get name(){return"Chrome111"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{h.addTransceiver("audio"),h.addTransceiver("video");const S=await h.createOffer();try{h.close()}catch{}const k=p.parse(S.sdp),P=b.extractRtpCapabilities({sdpObject:k});return w.addNackSupportForOpus(P),P}catch(S){try{h.close()}catch{}throw S}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:j}}run({direction:h,iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N,iceServers:O,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._direction=h,this._remoteSdp=new _.RemoteSdp({iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=h,this._pc.setConfiguration(S)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:S,codecOptions:k,codec:P,onRtpSender:N}){if(this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),S&&S.length>1){let ae=1;for(const xe of S){const Se=xe.scalabilityMode?(0,x.parse)(xe.scalabilityMode).temporalLayers:3;Se>ae&&(ae=Se)}S.forEach((xe,Se)=>{xe.rid=`r${Se}`,xe.scalabilityMode=`L1T${ae}`})}const O=m.clone(this._sendingRtpParametersByKind[h.kind]);O.codecs=u.reduceCodecs(O.codecs,P);const D=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);D.codecs=u.reduceCodecs(D.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:S});N&&N(M.sender);const I=await this._pc.createOffer();let G=p.parse(I.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const de=M.mid;O.mid=de,G=p.parse(this._pc.localDescription.sdp);const ee=G.media[L.idx];if(O.rtcp.cname=b.getCname({offerMediaObject:ee}),S)if(S.length===1){const ae=f.getRtpEncodings({offerMediaObject:ee});Object.assign(ae[0],S[0]),O.encodings=ae}else O.encodings=S;else O.encodings=f.getRtpEncodings({offerMediaObject:ee});this._remoteSdp.send({offerMediaObject:ee,reuseMid:L.reuseMid,offerRtpParameters:O,answerRtpParameters:D,codecOptions:k});const Q={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Q),await this._pc.setRemoteDescription(Q),this._mapMidTransceiver.set(de,M),{localId:de,rtpParameters:O,rtpSender:M.sender}}async stopSending(h){if(this.assertSendDirection(),E.debug("stopSending() [localId:%s]",h),this._closed)return;const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");if(S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.closeMediaSection(S.mid))try{S.stop()}catch{}const k=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(h);const k=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(this._remoteSdp.resumeSendingMediaSection(h),!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="sendonly";const k=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,S){this.assertNotClosed(),this.assertSendDirection(),S?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,S.id):E.debug("replaceTrack() [localId:%s, no track]",h);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");await k.sender.replaceTrack(S)}async setMaxSpatialLayer(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=S}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...S}}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:S,maxRetransmits:k,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:S,maxRetransmits:k,protocol:N};E.debug("sendDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(P,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%j.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const S=[],k=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);k.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const D of h){const{trackId:L,onRtpReceiver:M}=D;if(M){const I=k.get(L),G=this._pc.getTransceivers().find(de=>de.mid===I);if(!G)throw new Error("transceiver not found");M(G.receiver)}}let N=await this._pc.createAnswer();const O=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=k.get(L),G=O.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=k.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),S.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return S}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:S,protocol:k}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D,protocol:k};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(S,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:S}){S||(S=p.parse(this._pc.localDescription.sdp));const k=b.extractDtlsParameters({sdpObject:S});k.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:k},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Chrome111=R},2196:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:l=>{l.exports=function(d){var o,p,v="",m=(d=function(b){return b||(b={}),{length:b.length||8,numeric:typeof b.numeric!="boolean"||b.numeric,letters:typeof b.letters!="boolean"||b.letters,special:typeof b.special=="boolean"&&b.special,exclude:Array.isArray(b.exclude)?b.exclude:[]}}(d)).length,u=(d.exclude,function(b){var f="";b.numeric&&(f+="0123456789"),b.letters&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),b.special&&(f+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var w=0;w<=b.exclude.length;w++)f=f.replace(b.exclude[w],"");return f}(d));for(o=1;o<=m;o++)v+=u.substring(p=Math.floor(Math.random()*u.length),p+1);return v}},2215:(l,d,o)=>{var p,v;(function(m){(v=typeof(p=m)=="function"?p.call(d,o,d,l):p)===void 0||(l.exports=v),l.exports=m()})(function(){function m(){for(var b=0,f={};b<arguments.length;b++){var w=arguments[b];for(var g in w)f[g]=w[g]}return f}function u(b){return b.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function b(f){function w(){}function g(_,x,E){if(typeof document<"u"){typeof(E=m({path:"/"},w.defaults,E)).expires=="number"&&(E.expires=new Date(1*new Date+864e5*E.expires)),E.expires=E.expires?E.expires.toUTCString():"";try{var j=JSON.stringify(x);/^[\{\[]/.test(j)&&(x=j)}catch{}x=f.write?f.write(x,_):encodeURIComponent(String(x)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),_=encodeURIComponent(String(_)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var R="";for(var C in E)E[C]&&(R+="; "+C,E[C]!==!0&&(R+="="+E[C].split(";")[0]));return document.cookie=_+"="+x+R}}function y(_,x){if(typeof document<"u"){for(var E={},j=document.cookie?document.cookie.split("; "):[],R=0;R<j.length;R++){var C=j[R].split("="),T=C.slice(1).join("=");x||T.charAt(0)!=='"'||(T=T.slice(1,-1));try{var h=u(C[0]);if(T=(f.read||f)(T,h)||u(T),x)try{T=JSON.parse(T)}catch{}if(E[h]=T,_===h)break}catch{}}return _?E[_]:E}}return w.set=g,w.get=function(_){return y(_,!1)},w.getJSON=function(_){return y(_,!0)},w.remove=function(_,x){g(_,"",m(x,{expires:-1}))},w.defaults={},w.withConverter=b,w}(function(){})})},2284:(l,d,o)=>{function p(v){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},p(v)}o.d(d,{A:()=>p})},2291:(l,d)=>{let o;Object.defineProperty(d,"__esModule",{value:!0});const p=new Uint8Array(16);d.default=function(){if(!o){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(p)}},2292:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Firefox120=void 0;const p=o(7363),v=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),w=o(5938),g=o(521),y=o(1305),_=o(3303),x=new v.Logger("Firefox120"),E={OS:16,MIS:2048};class j extends g.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new j}get name(){return"Firefox120"}close(){if(x.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),h=document.createElement("canvas");h.getContext("2d");const S=h.captureStream().getVideoTracks()[0];try{T.addTransceiver("audio",{direction:"sendrecv"}),T.addTransceiver(S,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const k=await T.createOffer();try{h.remove()}catch{}try{S.stop()}catch{}try{T.close()}catch{}const P=p.parse(k.sdp);return f.extractRtpCapabilities({sdpObject:P})}catch(k){try{h.remove()}catch{}try{S.stop()}catch{}try{T.close()}catch{}throw k}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:E}}run({direction:T,iceParameters:h,iceCandidates:S,dtlsParameters:k,sctpParameters:P,iceServers:N,iceTransportPolicy:O,additionalSettings:D,proprietaryConstraints:L,extendedRtpCapabilities:M}){this.assertNotClosed(),x.debug("run()"),this._direction=T,this._remoteSdp=new y.RemoteSdp({iceParameters:h,iceCandidates:S,dtlsParameters:k,sctpParameters:P}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",M),video:b.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",M),video:b.getSendingRemoteRtpParameters("video",M)},this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:O??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...D},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",I=>{this.emit("@icecandidateerror",I)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(T){throw this.assertNotClosed(),new m.UnsupportedError("not supported")}async restartIce(T){if(this.assertNotClosed(),x.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const S={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:T,encodings:h,codecOptions:S,codec:k,onRtpSender:P}){this.assertNotClosed(),this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),h&&h.length>1&&h.forEach((Q,ae)=>{Q.rid=`r${ae}`});const N=u.clone(this._sendingRtpParametersByKind[T.kind]);N.codecs=b.reduceCodecs(N.codecs,k);const O=u.clone(this._sendingRemoteRtpParametersByKind[T.kind]);O.codecs=b.reduceCodecs(O.codecs,k);const D=this._pc.addTransceiver(T,{direction:"sendonly",streams:[this._sendStream],sendEncodings:h});P&&P(D.sender);const L=await this._pc.createOffer();let M=p.parse(L.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M});const I=(0,_.parse)((h??[{}])[0].scalabilityMode);x.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const G=D.mid;N.mid=G,M=p.parse(this._pc.localDescription.sdp);const de=M.media[M.media.length-1];if(N.rtcp.cname=f.getCname({offerMediaObject:de}),h)if(h.length===1){const Q=w.getRtpEncodings({offerMediaObject:de});Object.assign(Q[0],h[0]),N.encodings=Q}else N.encodings=h;else N.encodings=w.getRtpEncodings({offerMediaObject:de});if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Q of N.encodings)Q.scalabilityMode?Q.scalabilityMode=`L1T${I.temporalLayers}`:Q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:de,offerRtpParameters:N,answerRtpParameters:O,codecOptions:S});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(G,D),{localId:G,rtpParameters:N,rtpSender:D.sender}}async stopSending(T){if(this.assertSendDirection(),x.debug("stopSending() [localId:%s]",T),this._closed)return;const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated transceiver not found");h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.disableMediaSection(h.mid);const S=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.delete(T)}async pauseSending(T){this.assertNotClosed(),this.assertSendDirection(),x.debug("pauseSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="inactive",this._remoteSdp.pauseMediaSection(T);const S=await this._pc.createOffer();x.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async resumeSending(T){this.assertNotClosed(),this.assertSendDirection(),x.debug("resumeSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(T);const S=await this._pc.createOffer();x.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async replaceTrack(T,h){this.assertNotClosed(),this.assertSendDirection(),h?x.debug("replaceTrack() [localId:%s, track.id:%s]",T,h.id):x.debug("replaceTrack() [localId:%s, no track]",T);const S=this._mapMidTransceiver.get(T);if(!S)throw new Error("associated RTCRtpTransceiver not found");await S.sender.replaceTrack(h)}async setMaxSpatialLayer(T,h){this.assertNotClosed(),this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,h);const S=this._mapMidTransceiver.get(T);if(!S)throw new Error("associated transceiver not found");const k=S.sender.getParameters();k.encodings.forEach((O,D)=>{O.active=D<=h}),await S.sender.setParameters(k),this._remoteSdp.muxMediaSectionSimulcast(T,k.encodings);const P=await this._pc.createOffer();x.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(T,h){this.assertNotClosed(),this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,h);const S=this._mapMidTransceiver.get(T);if(!S)throw new Error("associated RTCRtpTransceiver not found");const k=S.sender.getParameters();k.encodings.forEach((O,D)=>{k.encodings[D]={...O,...h}}),await S.sender.setParameters(k),this._remoteSdp.muxMediaSectionSimulcast(T,k.encodings);const P=await this._pc.createOffer();x.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(T){this.assertNotClosed(),this.assertSendDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:h,maxRetransmits:S,label:k,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:h,maxRetransmits:S,protocol:P};x.debug("sendDataChannel() [options:%o]",N);const O=this._pc.createDataChannel(k,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%E.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),L=p.parse(D.sdp),M=L.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const I={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(T){this.assertNotClosed(),this.assertRecvDirection();const h=[],S=new Map;for(const O of T){const{trackId:D,kind:L,rtpParameters:M,streamId:I}=O;x.debug("receive() [trackId:%s, kind:%s]",D,L);const G=M.mid??String(this._mapMidTransceiver.size);S.set(D,G),this._remoteSdp.receive({mid:G,kind:L,offerRtpParameters:M,streamId:I??M.rtcp.cname,trackId:D})}const k={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);for(const O of T){const{trackId:D,onRtpReceiver:L}=O;if(L){const M=S.get(D),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("transceiver not found");L(I.receiver)}}let P=await this._pc.createAnswer();const N=p.parse(P.sdp);for(const O of T){const{trackId:D,rtpParameters:L}=O,M=S.get(D),I=N.media.find(G=>String(G.mid)===M);f.applyCodecParameters({offerRtpParameters:L,answerMediaObject:I}),P={type:"answer",sdp:p.write(N)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const O of T){const{trackId:D}=O,L=S.get(D),M=this._pc.getTransceivers().find(I=>I.mid===L);if(!M)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,M),h.push({localId:L,track:M.receiver.track,rtpReceiver:M.receiver})}return h}async stopReceiving(T){if(this.assertRecvDirection(),this._closed)return;for(const k of T){x.debug("stopReceiving() [localId:%s]",k);const P=this._mapMidTransceiver.get(k);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const k of T)this._mapMidTransceiver.delete(k)}async pauseReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const k of T){x.debug("pauseReceiving() [localId:%s]",k);const P=this._mapMidTransceiver.get(k);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(k)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async resumeReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const k of T){x.debug("resumeReceiving() [localId:%s]",k);const P=this._mapMidTransceiver.get(k);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(k)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const S=await this._pc.createAnswer();x.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S)}async getReceiverStats(T){this.assertRecvDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:T,label:h,protocol:S}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:k,ordered:P,maxPacketLifeTime:N,maxRetransmits:O}=T,D={negotiated:!0,id:k,ordered:P,maxPacketLifeTime:N,maxRetransmits:O,protocol:S};x.debug("receiveDataChannel() [options:%o]",D);const L=this._pc.createDataChannel(h,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const M={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const I=await this._pc.createAnswer();if(!this._transportReady){const G=p.parse(I.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:G})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setLocalDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:T,localSdpObject:h}){h||(h=p.parse(this._pc.localDescription.sdp));const S=f.extractDtlsParameters({sdpObject:h});S.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((k,P)=>{this.safeEmit("@connect",{dtlsParameters:S},k,P)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new m.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Firefox120=j},2696:function(l,d,o){var p;l.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var v=p,m=v.lib.StreamCipher,u=v.algo,b=[],f=[],w=[],g=u.RabbitLegacy=m.extend({_doReset:function(){var _=this._key.words,x=this.cfg.iv,E=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],j=this._C=[_[2]<<16|_[2]>>>16,4294901760&_[0]|65535&_[1],_[3]<<16|_[3]>>>16,4294901760&_[1]|65535&_[2],_[0]<<16|_[0]>>>16,4294901760&_[2]|65535&_[3],_[1]<<16|_[1]>>>16,4294901760&_[3]|65535&_[0]];this._b=0;for(var R=0;R<4;R++)y.call(this);for(R=0;R<8;R++)j[R]^=E[R+4&7];if(x){var C=x.words,T=C[0],h=C[1],S=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),k=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),P=S>>>16|4294901760&k,N=k<<16|65535&S;for(j[0]^=S,j[1]^=P,j[2]^=k,j[3]^=N,j[4]^=S,j[5]^=P,j[6]^=k,j[7]^=N,R=0;R<4;R++)y.call(this)}},_doProcessBlock:function(_,x){var E=this._X;y.call(this),b[0]=E[0]^E[5]>>>16^E[3]<<16,b[1]=E[2]^E[7]>>>16^E[5]<<16,b[2]=E[4]^E[1]>>>16^E[7]<<16,b[3]=E[6]^E[3]>>>16^E[1]<<16;for(var j=0;j<4;j++)b[j]=16711935&(b[j]<<8|b[j]>>>24)|4278255360&(b[j]<<24|b[j]>>>8),_[x+j]^=b[j]},blockSize:4,ivSize:2});function y(){for(var _=this._X,x=this._C,E=0;E<8;E++)f[E]=x[E];for(x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<f[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<f[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<f[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<f[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<f[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<f[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<f[6]>>>0?1:0)|0,this._b=x[7]>>>0<f[7]>>>0?1:0,E=0;E<8;E++){var j=_[E]+x[E],R=65535&j,C=j>>>16,T=((R*R>>>17)+R*C>>>15)+C*C,h=((4294901760&j)*j|0)+((65535&j)*j|0);w[E]=T^h}_[0]=w[0]+(w[7]<<16|w[7]>>>16)+(w[6]<<16|w[6]>>>16)|0,_[1]=w[1]+(w[0]<<8|w[0]>>>24)+w[7]|0,_[2]=w[2]+(w[1]<<16|w[1]>>>16)+(w[0]<<16|w[0]>>>16)|0,_[3]=w[3]+(w[2]<<8|w[2]>>>24)+w[1]|0,_[4]=w[4]+(w[3]<<16|w[3]>>>16)+(w[2]<<16|w[2]>>>16)|0,_[5]=w[5]+(w[4]<<8|w[4]>>>24)+w[3]|0,_[6]=w[6]+(w[5]<<16|w[5]>>>16)+(w[4]<<16|w[4]>>>16)|0,_[7]=w[7]+(w[6]<<8|w[6]>>>24)+w[5]|0}v.RabbitLegacy=m._createHelper(g)}(),p.RabbitLegacy)},2731:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FakeHandler=void 0;const p=o(5328),v=o(3953),m=o(2994),u=o(1765),b=o(8046),f=o(4893),w=o(521),g=new m.Logger("FakeHandler");class y extends v.EnhancedEventEmitter{constructor({id:j,ordered:R,maxPacketLifeTime:C,maxRetransmits:T,label:h,protocol:S}){super();we(this,"id");we(this,"ordered");we(this,"maxPacketLifeTime");we(this,"maxRetransmits");we(this,"label");we(this,"protocol");this.id=j,this.ordered=R,this.maxPacketLifeTime=C,this.maxRetransmits=T,this.label=h,this.protocol=S}close(){this.safeEmit("close"),this.emit("@close")}send(j){this.safeEmit("message",j)}addEventListener(j,R){this.on(j,R)}}class _ extends w.HandlerInterface{constructor(j){super();we(this,"_closed",!1);we(this,"fakeParameters");we(this,"_rtpParametersByKind");we(this,"_cname",`CNAME-${u.generateRandomNumber()}`);we(this,"_transportReady",!1);we(this,"_nextLocalId",1);we(this,"_tracks",new Map);we(this,"_nextSctpStreamId",0);this.fakeParameters=j}static createFactory(j){return()=>new _(j)}get name(){return"FakeHandler"}close(){g.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(j){this.emit("@icegatheringstatechange",j)}setConnectionState(j){this.emit("@connectionstatechange",j)}async getNativeRtpCapabilities(){return g.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:j,iceParameters:R,iceCandidates:C,dtlsParameters:T,sctpParameters:h,iceServers:S,iceTransportPolicy:k,proprietaryConstraints:P,extendedRtpCapabilities:N}){this.assertNotClosed(),g.debug("run()"),this._rtpParametersByKind={audio:b.getSendingRtpParameters("audio",N),video:b.getSendingRtpParameters("video",N)}}async updateIceServers(j){this.assertNotClosed(),g.debug("updateIceServers()")}async restartIce(j){this.assertNotClosed(),g.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:j,encodings:R,codecOptions:C,codec:T}){this.assertNotClosed(),g.debug("send() [kind:%s, track.id:%s]",j.kind,j.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const h=u.clone(this._rtpParametersByKind[j.kind]),S=h.codecs.some(P=>/.+\/rtx$/i.test(P.mimeType));h.mid=`mid-${u.generateRandomNumber()}`,R||(R=[{}]);for(const P of R)P.ssrc=u.generateRandomNumber(),S&&(P.rtx={ssrc:u.generateRandomNumber()});h.encodings=R,h.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const k=this._nextLocalId++;return this._tracks.set(k,j),{localId:String(k),rtpParameters:h}}async stopSending(j){if(g.debug("stopSending() [localId:%s]",j),!this._closed){if(!this._tracks.has(Number(j)))throw new Error("local track not found");this._tracks.delete(Number(j))}}async pauseSending(j){this.assertNotClosed()}async resumeSending(j){this.assertNotClosed()}async replaceTrack(j,R){this.assertNotClosed(),R?g.debug("replaceTrack() [localId:%s, track.id:%s]",j,R.id):g.debug("replaceTrack() [localId:%s, no track]",j),this._tracks.delete(Number(j)),this._tracks.set(Number(j),R)}async setMaxSpatialLayer(j,R){this.assertNotClosed(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",j,R)}async setRtpEncodingParameters(j,R){this.assertNotClosed(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",j,R)}async getSenderStats(j){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:j,maxPacketLifeTime:R,maxRetransmits:C,label:T,protocol:h}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),g.debug("sendDataChannel()"),{dataChannel:new y({id:this._nextSctpStreamId++,ordered:j,maxPacketLifeTime:R,maxRetransmits:C,label:T,protocol:h}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:j,maxPacketLifeTime:R,maxRetransmits:C}}}async receive(j){this.assertNotClosed();const R=[];for(const C of j){const{trackId:T,kind:h}=C;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),g.debug("receive() [trackId:%s, kind:%s]",T,h);const S=this._nextLocalId++,k=new p.FakeMediaStreamTrack({kind:h});this._tracks.set(S,k),R.push({localId:String(S),track:k})}return R}async stopReceiving(j){if(!this._closed)for(const R of j)g.debug("stopReceiving() [localId:%s]",R),this._tracks.delete(Number(R))}async pauseReceiving(j){this.assertNotClosed()}async resumeReceiving(j){this.assertNotClosed()}async getReceiverStats(j){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:j,label:R,protocol:C}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),g.debug("receiveDataChannel()"),{dataChannel:new y({id:j.streamId,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits,label:R,protocol:C})}}async setupTransport({localDtlsRole:j,localSdpObject:R}){const C=u.clone(this.fakeParameters.generateLocalDtlsParameters());j&&(C.role=j),this.emit("@connectionstatechange","connecting"),await new Promise((T,h)=>this.emit("@connect",{dtlsParameters:C},T,h)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}}d.FakeHandler=_},2770:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(9746);d.default=function(v){if(!(0,p.default)(v))throw TypeError("Invalid UUID");return parseInt(v.slice(14,15),16)}},2829:(l,d)=>{function o(v,m,u,b){switch(v){case 0:return m&u^~m&b;case 1:case 3:return m^u^b;case 2:return m&u^m&b^u&b}}function p(v,m){return v<<m|v>>>32-m}Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(v){const m=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520],b=new Uint8Array(v.length+1);b.set(v),b[v.length]=128;const f=(v=b).length/4+2,w=Math.ceil(f/16),g=new Array(w);for(let y=0;y<w;++y){const _=new Uint32Array(16);for(let x=0;x<16;++x)_[x]=v[64*y+4*x]<<24|v[64*y+4*x+1]<<16|v[64*y+4*x+2]<<8|v[64*y+4*x+3];g[y]=_}g[w-1][14]=8*(v.length-1)/Math.pow(2,32),g[w-1][14]=Math.floor(g[w-1][14]),g[w-1][15]=8*(v.length-1)&4294967295;for(let y=0;y<w;++y){const _=new Uint32Array(80);for(let T=0;T<16;++T)_[T]=g[y][T];for(let T=16;T<80;++T)_[T]=p(_[T-3]^_[T-8]^_[T-14]^_[T-16],1);let x=u[0],E=u[1],j=u[2],R=u[3],C=u[4];for(let T=0;T<80;++T){const h=Math.floor(T/20),S=p(x,5)+o(h,E,j,R)+C+m[h]+_[T]>>>0;C=R,R=j,j=p(E,30)>>>0,E=x,x=S}u[0]=u[0]+x>>>0,u[1]=u[1]+E>>>0,u[2]=u[2]+j>>>0,u[3]=u[3]+R>>>0,u[4]=u[4]+C>>>0}return Uint8Array.of(u[0]>>24,u[0]>>16,u[0]>>8,u[0],u[1]>>24,u[1]>>16,u[1]>>8,u[1],u[2]>>24,u[2]>>16,u[2]>>8,u[2],u[3]>>24,u[3]>>16,u[3]>>8,u[3],u[4]>>24,u[4]>>16,u[4]>>8,u[4])}},2901:(l,d,o)=>{o.d(d,{A:()=>m});var p=o(816);function v(u,b){for(var f=0;f<b.length;f++){var w=b[f];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(u,(0,p.A)(w.key),w)}}function m(u,b,f){return b&&v(u.prototype,b),f&&v(u,f),Object.defineProperty(u,"prototype",{writable:!1}),u}},2988:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.URL=d.DNS=d.stringToBytes=void 0;const p=o(1797),v=o(6011);function m(u){u=unescape(encodeURIComponent(u));const b=new Uint8Array(u.length);for(let f=0;f<u.length;++f)b[f]=u.charCodeAt(f);return b}d.stringToBytes=m,d.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",d.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",d.default=function(u,b,f,w,g,y){const _=typeof f=="string"?m(f):f,x=typeof w=="string"?(0,p.default)(w):w;if(typeof w=="string"&&(w=(0,p.default)(w)),(w==null?void 0:w.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let E=new Uint8Array(16+_.length);if(E.set(x),E.set(_,x.length),E=b(E),E[6]=15&E[6]|u,E[8]=63&E[8]|128,g){y=y||0;for(let j=0;j<16;++j)g[y+j]=E[j];return g}return(0,v.unsafeStringify)(E)}},2994:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Logger=void 0;const p=o(7833),v="mediasoup-client";d.Logger=class{constructor(m){we(this,"_debug");we(this,"_warn");we(this,"_error");m?(this._debug=(0,p.default)(`${v}:${m}`),this._warn=(0,p.default)(`${v}:WARN:${m}`),this._error=(0,p.default)(`${v}:ERROR:${m}`)):(this._debug=(0,p.default)(v),this._warn=(0,p.default)(`${v}:WARN`),this._error=(0,p.default)(`${v}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(l,d,o){var p;l.exports=(p=o(9021),function(v){var m=p,u=m.lib,b=u.WordArray,f=u.Hasher,w=m.algo,g=[],y=[];(function(){function E(T){for(var h=v.sqrt(T),S=2;S<=h;S++)if(!(T%S))return!1;return!0}function j(T){return 4294967296*(T-(0|T))|0}for(var R=2,C=0;C<64;)E(R)&&(C<8&&(g[C]=j(v.pow(R,.5))),y[C]=j(v.pow(R,.3333333333333333)),C++),R++})();var _=[],x=w.SHA256=f.extend({_doReset:function(){this._hash=new b.init(g.slice(0))},_doProcessBlock:function(E,j){for(var R=this._hash.words,C=R[0],T=R[1],h=R[2],S=R[3],k=R[4],P=R[5],N=R[6],O=R[7],D=0;D<64;D++){if(D<16)_[D]=0|E[j+D];else{var L=_[D-15],M=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,I=_[D-2],G=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;_[D]=M+_[D-7]+G+_[D-16]}var de=C&T^C&h^T&h,ee=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),Q=O+((k<<26|k>>>6)^(k<<21|k>>>11)^(k<<7|k>>>25))+(k&P^~k&N)+y[D]+_[D];O=N,N=P,P=k,k=S+Q|0,S=h,h=T,T=C,C=Q+(ee+de)|0}R[0]=R[0]+C|0,R[1]=R[1]+T|0,R[2]=R[2]+h|0,R[3]=R[3]+S|0,R[4]=R[4]+k|0,R[5]=R[5]+P|0,R[6]=R[6]+N|0,R[7]=R[7]+O|0},_doFinalize:function(){var E=this._data,j=E.words,R=8*this._nDataBytes,C=8*E.sigBytes;return j[C>>>5]|=128<<24-C%32,j[14+(C+64>>>9<<4)]=v.floor(R/4294967296),j[15+(C+64>>>9<<4)]=R,E.sigBytes=4*j.length,this._process(),this._hash},clone:function(){var E=f.clone.call(this);return E._hash=this._hash.clone(),E}});m.SHA256=f._createHelper(x),m.HmacSHA256=f._createHmacHelper(x)}(Math),p.SHA256)},3029:(l,d,o)=>{function p(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}o.d(d,{A:()=>p})},3128:function(l,d,o){var p;l.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var v=p,m=v.lib.BlockCipher,u=v.algo;const b=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],w=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var g={pbox:[],sbox:[]};function y(R,C){let T=C>>24&255,h=C>>16&255,S=C>>8&255,k=255&C,P=R.sbox[0][T]+R.sbox[1][h];return P^=R.sbox[2][S],P+=R.sbox[3][k],P}function _(R,C,T){let h,S=C,k=T;for(let P=0;P<b;++P)S^=R.pbox[P],k=y(R,S)^k,h=S,S=k,k=h;return h=S,S=k,k=h,k^=R.pbox[b],S^=R.pbox[b+1],{left:S,right:k}}function x(R,C,T){let h,S=C,k=T;for(let P=b+1;P>1;--P)S^=R.pbox[P],k=y(R,S)^k,h=S,S=k,k=h;return h=S,S=k,k=h,k^=R.pbox[1],S^=R.pbox[0],{left:S,right:k}}function E(R,C,T){for(let N=0;N<4;N++){R.sbox[N]=[];for(let O=0;O<256;O++)R.sbox[N][O]=w[N][O]}let h=0;for(let N=0;N<b+2;N++)R.pbox[N]=f[N]^C[h],h++,h>=T&&(h=0);let S=0,k=0,P=0;for(let N=0;N<b+2;N+=2)P=_(R,S,k),S=P.left,k=P.right,R.pbox[N]=S,R.pbox[N+1]=k;for(let N=0;N<4;N++)for(let O=0;O<256;O+=2)P=_(R,S,k),S=P.left,k=P.right,R.sbox[N][O]=S,R.sbox[N][O+1]=k;return!0}var j=u.Blowfish=m.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var R=this._keyPriorReset=this._key,C=R.words,T=R.sigBytes/4;E(g,C,T)}},encryptBlock:function(R,C){var T=_(g,R[C],R[C+1]);R[C]=T.left,R[C+1]=T.right},decryptBlock:function(R,C){var T=x(g,R[C],R[C+1]);R[C]=T.left,R[C+1]=T.right},blockSize:2,keySize:4,ivSize:2});v.Blowfish=m._createHelper(j)}(),p.Blowfish)},3145:(l,d,o)=>{function p(v,m){(m==null||m>v.length)&&(m=v.length);for(var u=0,b=Array(m);u<m;u++)b[u]=v[u];return b}o.d(d,{A:()=>p})},3200:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ProfileLevelId=d.Level=d.Profile=void 0,d.parseProfileLevelId=_,d.profileLevelIdToString=x,d.profileToString=function(C){switch(C){case v.ConstrainedBaseline:return"ConstrainedBaseline";case v.Baseline:return"Baseline";case v.Main:return"Main";case v.ConstrainedHigh:return"ConstrainedHigh";case v.High:return"High";case v.PredictiveHigh444:return"PredictiveHigh444";default:return void p.warn(`profileToString() | unrecognized profile ${C}`)}},d.levelToString=function(C){switch(C){case m.L1_b:return"1b";case m.L1:return"1";case m.L1_1:return"1.1";case m.L1_2:return"1.2";case m.L1_3:return"1.3";case m.L2:return"2";case m.L2_1:return"2.1";case m.L2_2:return"2.2";case m.L3:return"3";case m.L3_1:return"3.1";case m.L3_2:return"3.2";case m.L4:return"4";case m.L4_1:return"4.1";case m.L4_2:return"4.2";case m.L5:return"5";case m.L5_1:return"5.1";case m.L5_2:return"5.2";default:return void p.warn(`levelToString() | unrecognized level ${C}`)}},d.parseSdpProfileLevelId=E,d.isSameProfile=function(C={},T={}){const h=E(C),S=E(T);return!!(h&&S&&h.profile===S.profile)},d.isSameProfileAndLevel=function(C={},T={}){const h=E(C),S=E(T);return!!(h&&S&&h.profile===S.profile&&h.level==S.level)},d.generateProfileLevelIdStringForAnswer=function(C={},T={}){if(!C["profile-level-id"]&&!T["profile-level-id"])return void p.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const h=E(C),S=E(T);if(!h)throw new TypeError("invalid local_profile_level_id");if(!S)throw new TypeError("invalid remote_profile_level_id");if(h.profile!==S.profile)throw new TypeError("H264 Profile mismatch");const k=R(C)&&R(T),P=h.level,N=S.level,O=(L=P,M=N,function(I,G){return I===m.L1_b?G!==m.L1&&G!==m.L1_b:G===m.L1_b?I!==m.L1:I<G}(L,M)?L:M),D=k?P:O;var L,M;return p.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${h.profile}, level:${D}]`),x(new u(h.profile,D))},d.supportedLevel=function(C,T){for(let h=y.length-1;h>=0;--h){const S=y[h];if(256*S.max_macroblock_frame_size<=C&&S.max_macroblocks_per_second<=T*S.max_macroblock_frame_size)return p.debug(`supportedLevel() | result [max_frame_pixel_count:${C}, max_fps:${T}, level:${S.level}]`),S.level}return void p.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${C}, max_fps:${T}]`)};const p=new(o(3582)).Logger;var v,m;(function(C){C[C.ConstrainedBaseline=1]="ConstrainedBaseline",C[C.Baseline=2]="Baseline",C[C.Main=3]="Main",C[C.ConstrainedHigh=4]="ConstrainedHigh",C[C.High=5]="High",C[C.PredictiveHigh444=6]="PredictiveHigh444"})(v||(d.Profile=v={})),function(C){C[C.L1_b=0]="L1_b",C[C.L1=10]="L1",C[C.L1_1=11]="L1_1",C[C.L1_2=12]="L1_2",C[C.L1_3=13]="L1_3",C[C.L2=20]="L2",C[C.L2_1=21]="L2_1",C[C.L2_2=22]="L2_2",C[C.L3=30]="L3",C[C.L3_1=31]="L3_1",C[C.L3_2=32]="L3_2",C[C.L4=40]="L4",C[C.L4_1=41]="L4_1",C[C.L4_2=42]="L4_2",C[C.L5=50]="L5",C[C.L5_1=51]="L5_1",C[C.L5_2=52]="L5_2"}(m||(d.Level=m={}));class u{constructor(T,h){this.profile=T,this.level=h}}d.ProfileLevelId=u;const b=new u(v.ConstrainedBaseline,m.L3_1);class f{constructor(T){this.mask=~j("x",T),this.masked_value=j("1",T)}isMatch(T){return this.masked_value===(T&this.mask)}}class w{constructor(T,h,S){this.profile_idc=T,this.profile_iop=h,this.profile=S}}const g=[new w(66,new f("x1xx0000"),v.ConstrainedBaseline),new w(77,new f("1xxx0000"),v.ConstrainedBaseline),new w(88,new f("11xx0000"),v.ConstrainedBaseline),new w(66,new f("x0xx0000"),v.Baseline),new w(88,new f("10xx0000"),v.Baseline),new w(77,new f("0x0x0000"),v.Main),new w(100,new f("00000000"),v.High),new w(100,new f("00001100"),v.ConstrainedHigh),new w(244,new f("00000000"),v.PredictiveHigh444)],y=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:m.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:m.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:m.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:m.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:m.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:m.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:m.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:m.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:m.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:m.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:m.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:m.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:m.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:m.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:m.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:m.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:m.L5_2}];function _(C){if(typeof C!="string"||C.length!==6)return;const T=parseInt(C,16);if(T===0)return;const h=255&T,S=T>>8&255,k=T>>16&255;let P;switch(h){case m.L1_1:P=16&S?m.L1_b:m.L1_1;break;case m.L1:case m.L1_2:case m.L1_3:case m.L2:case m.L2_1:case m.L2_2:case m.L3:case m.L3_1:case m.L3_2:case m.L4:case m.L4_1:case m.L4_2:case m.L5:case m.L5_1:case m.L5_2:P=h;break;default:return void p.warn(`parseProfileLevelId() | unrecognized level_idc [str:${C}, level_idc:${h}]`)}for(const N of g)if(k===N.profile_idc&&N.profile_iop.isMatch(S))return p.debug(`parseProfileLevelId() | result [str:${C}, profile:${N.profile}, level:${P}]`),new u(N.profile,P);p.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${C}, profile_idc:${k}, profile_iop:${S}]`)}function x(C){if(C.level==m.L1_b)switch(C.profile){case v.ConstrainedBaseline:return"42f00b";case v.Baseline:return"42100b";case v.Main:return"4d100b";default:return void p.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${C.profile}`)}let T;switch(C.profile){case v.ConstrainedBaseline:T="42e0";break;case v.Baseline:T="4200";break;case v.Main:T="4d00";break;case v.ConstrainedHigh:T="640c";break;case v.High:T="6400";break;case v.PredictiveHigh444:T="f400";break;default:return void p.warn(`profileLevelIdToString() | unrecognized profile ${C.profile}`)}let h=C.level.toString(16);return h.length===1&&(h=`0${h}`),`${T}${h}`}function E(C={}){const T=C["profile-level-id"];return T?_(T):b}function j(C,T){return+(T[0]===C)<<7|+(T[1]===C)<<6|+(T[2]===C)<<5|+(T[3]===C)<<4|+(T[4]===C)<<3|+(T[5]===C)<<2|+(T[6]===C)<<1|+(T[7]===C)}function R(C={}){const T=C["level-asymmetry-allowed"];return T===!0||T===1||T==="1"}},3240:function(l,d,o){var p;l.exports=(p=o(9021),function(v){var m=p,u=m.lib,b=u.Base,f=u.WordArray,w=m.x64={};w.Word=b.extend({init:function(g,y){this.high=g,this.low=y}}),w.WordArray=b.extend({init:function(g,y){g=this.words=g||[],this.sigBytes=y!=v?y:8*g.length},toX32:function(){for(var g=this.words,y=g.length,_=[],x=0;x<y;x++){var E=g[x];_.push(E.high),_.push(E.low)}return f.create(_,this.sigBytes)},clone:function(){for(var g=b.clone.call(this),y=g.words=this.words.slice(0),_=y.length,x=0;x<_;x++)y[x]=y[x].clone();return g}})}(),p)},3303:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.parse=function(p){const v=o.exec(p??"");return v?{spatialLayers:Number(v[1]),temporalLayers:Number(v[2])}:{spatialLayers:1,temporalLayers:1}};const o=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default="00000000-0000-0000-0000-000000000000"},3471:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.OfferMediaSection=d.AnswerMediaSection=d.MediaSection=void 0;const p=o(7363),v=o(1765);class m{constructor({iceParameters:f,iceCandidates:w,dtlsParameters:g,planB:y=!1}){we(this,"_mediaObject");we(this,"_planB");if(this._mediaObject={},this._planB=y,f&&this.setIceParameters(f),w){this._mediaObject.candidates=[];for(const _ of w){const x={component:1};x.foundation=_.foundation,x.ip=_.address??_.ip,x.port=_.port,x.priority=_.priority,x.transport=_.protocol,x.type=_.type,_.tcpType&&(x.tcptype=_.tcpType),this._mediaObject.candidates.push(x)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}g&&this.setDtlsRole(g.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(f){this._mediaObject.iceUfrag=f.usernameFragment,this._mediaObject.icePwd=f.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}d.MediaSection=m,d.AnswerMediaSection=class extends m{constructor({iceParameters:b,iceCandidates:f,dtlsParameters:w,sctpParameters:g,plainRtpParameters:y,planB:_=!1,offerMediaObject:x,offerRtpParameters:E,answerRtpParameters:j,codecOptions:R}){switch(super({iceParameters:b,iceCandidates:f,dtlsParameters:w,planB:_}),this._mediaObject.mid=String(x.mid),this._mediaObject.type=x.type,this._mediaObject.protocol=x.protocol,y?(this._mediaObject.connection={ip:y.ip,version:y.ipVersion},this._mediaObject.port=y.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),x.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const C of j.codecs){const T={payload:C.payloadType,codec:u(C),rate:C.clockRate};C.channels>1&&(T.encoding=C.channels),this._mediaObject.rtp.push(T);const h=v.clone(C.parameters)??{};let S=v.clone(C.rtcpFeedback)??[];if(R){const{opusStereo:P,opusFec:N,opusDtx:O,opusMaxPlaybackRate:D,opusMaxAverageBitrate:L,opusPtime:M,opusNack:I,videoGoogleStartBitrate:G,videoGoogleMaxBitrate:de,videoGoogleMinBitrate:ee}=R,Q=E.codecs.find(ae=>ae.payloadType===C.payloadType);switch(C.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":P!==void 0&&(Q.parameters["sprop-stereo"]=P?1:0,h.stereo=P?1:0),N!==void 0&&(Q.parameters.useinbandfec=N?1:0,h.useinbandfec=N?1:0),O!==void 0&&(Q.parameters.usedtx=O?1:0,h.usedtx=O?1:0),D!==void 0&&(h.maxplaybackrate=D),L!==void 0&&(h.maxaveragebitrate=L),M!==void 0&&(Q.parameters.ptime=M,h.ptime=M),I||(Q.rtcpFeedback=Q.rtcpFeedback.filter(ae=>ae.type!=="nack"||ae.parameter),S=S.filter(ae=>ae.type!=="nack"||ae.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":G!==void 0&&(h["x-google-start-bitrate"]=G),de!==void 0&&(h["x-google-max-bitrate"]=de),ee!==void 0&&(h["x-google-min-bitrate"]=ee)}}const k={payload:C.payloadType,config:""};for(const P of Object.keys(h))k.config&&(k.config+=";"),k.config+=`${P}=${h[P]}`;k.config&&this._mediaObject.fmtp.push(k);for(const P of S)this._mediaObject.rtcpFb.push({payload:C.payloadType,type:P.type,subtype:P.parameter})}this._mediaObject.payloads=j.codecs.map(C=>C.payloadType).join(" "),this._mediaObject.ext=[];for(const C of j.headerExtensions)(x.ext??[]).some(T=>T.uri===C.uri)&&this._mediaObject.ext.push({uri:C.uri,value:C.id});if(x.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),x.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:x.simulcast.list1},this._mediaObject.rids=[];for(const C of x.rids??[])C.direction==="send"&&this._mediaObject.rids.push({id:C.id,direction:"recv"})}else if(x.simulcast_03){this._mediaObject.simulcast_03={value:x.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const C of x.rids??[])C.direction==="send"&&this._mediaObject.rids.push({id:C.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof x.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize):x.sctpmap&&(this._mediaObject.payloads=g.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize})}}setDtlsRole(b){switch(b){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(b){var y,_;if(!((y=this._mediaObject.simulcast)!=null&&y.list1))return;const f={};for(const x of b)x.rid&&(f[x.rid]=x);const w=this._mediaObject.simulcast.list1,g=p.parseSimulcastStreamList(w);for(const x of g)for(const E of x)E.paused=!((_=f[E.scid])!=null&&_.active);this._mediaObject.simulcast.list1=g.map(x=>x.map(E=>`${E.paused?"~":""}${E.scid}`).join(",")).join(";")}};function u(b){const f=new RegExp("^(audio|video)/(.+)","i").exec(b.mimeType);if(!f)throw new TypeError("invalid codec.mimeType");return f[2]}d.OfferMediaSection=class extends m{constructor({iceParameters:b,iceCandidates:f,dtlsParameters:w,sctpParameters:g,plainRtpParameters:y,planB:_=!1,mid:x,kind:E,offerRtpParameters:j,streamId:R,trackId:C,oldDataChannelSpec:T=!1}){var h;switch(super({iceParameters:b,iceCandidates:f,dtlsParameters:w,planB:_}),this._mediaObject.mid=String(x),this._mediaObject.type=E,y?(this._mediaObject.connection={ip:y.ip,version:y.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=y.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=g?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",E){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${R??"-"} ${C}`);for(const N of j.codecs){const O={payload:N.payloadType,codec:u(N),rate:N.clockRate};N.channels>1&&(O.encoding=N.channels),this._mediaObject.rtp.push(O);const D={payload:N.payloadType,config:""};for(const L of Object.keys(N.parameters))D.config&&(D.config+=";"),D.config+=`${L}=${N.parameters[L]}`;D.config&&this._mediaObject.fmtp.push(D);for(const L of N.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:N.payloadType,type:L.type,subtype:L.parameter})}this._mediaObject.payloads=j.codecs.map(N=>N.payloadType).join(" "),this._mediaObject.ext=[];for(const N of j.headerExtensions)this._mediaObject.ext.push({uri:N.uri,value:N.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const S=j.encodings[0],k=S.ssrc,P=(h=S.rtx)==null?void 0:h.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],j.rtcp.cname&&this._mediaObject.ssrcs.push({id:k,attribute:"cname",value:j.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:k,attribute:"msid",value:`${R??"-"} ${C}`}),P&&(j.rtcp.cname&&this._mediaObject.ssrcs.push({id:P,attribute:"cname",value:j.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:P,attribute:"msid",value:`${R??"-"} ${C}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${k} ${P}`}));break}case"application":T?(this._mediaObject.payloads=g.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize)}}setDtlsRole(b){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:b,streamId:f,trackId:w}){var E;const g=b.encodings[0],y=g.ssrc,_=(E=g.rtx)==null?void 0:E.ssrc,x=this._mediaObject.payloads.split(" ");for(const j of b.codecs){if(x.includes(String(j.payloadType)))continue;const R={payload:j.payloadType,codec:u(j),rate:j.clockRate};j.channels>1&&(R.encoding=j.channels),this._mediaObject.rtp.push(R);const C={payload:j.payloadType,config:""};for(const T of Object.keys(j.parameters))C.config&&(C.config+=";"),C.config+=`${T}=${j.parameters[T]}`;C.config&&this._mediaObject.fmtp.push(C);for(const T of j.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:j.payloadType,type:T.type,subtype:T.parameter})}this._mediaObject.payloads+=` ${b.codecs.filter(j=>!this._mediaObject.payloads.includes(j.payloadType)).map(j=>j.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),b.rtcp.cname&&this._mediaObject.ssrcs.push({id:y,attribute:"cname",value:b.rtcp.cname}),this._mediaObject.ssrcs.push({id:y,attribute:"msid",value:`${f??"-"} ${w}`}),_&&(b.rtcp.cname&&this._mediaObject.ssrcs.push({id:_,attribute:"cname",value:b.rtcp.cname}),this._mediaObject.ssrcs.push({id:_,attribute:"msid",value:`${f??"-"} ${w}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${y} ${_}`}))}planBStopReceiving({offerRtpParameters:b}){var y;const f=b.encodings[0],w=f.ssrc,g=(y=f.rtx)==null?void 0:y.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(_=>_.id!==w&&_.id!==g),g&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(_=>_.ssrcs!==`${w} ${g}`))}}},3518:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Consumer=void 0;const p=o(2994),v=o(3953),m=o(4893),u=new p.Logger("Consumer");class b extends v.EnhancedEventEmitter{constructor({id:g,localId:y,producerId:_,rtpReceiver:x,track:E,rtpParameters:j,appData:R}){super();we(this,"_id");we(this,"_localId");we(this,"_producerId");we(this,"_closed",!1);we(this,"_rtpReceiver");we(this,"_track");we(this,"_rtpParameters");we(this,"_paused");we(this,"_appData");we(this,"_observer",new v.EnhancedEventEmitter);u.debug("constructor()"),this._id=g,this._localId=y,this._producerId=_,this._rtpReceiver=x,this._track=E,this._rtpParameters=j,this._paused=!E.enabled,this._appData=R??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(u.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(u.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new m.InvalidStateError("closed");return new Promise((g,y)=>{this.safeEmit("@getstats",g,y)})}pause(){u.debug("pause()"),this._closed?u.error("pause() | Consumer closed"):this._paused?u.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){u.debug("resume()"),this._closed?u.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):u.debug("resume() | Consumer is already resumed")}onTrackEnded(){u.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}d.Consumer=b},3582:function(l,d,o){var p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(d,"__esModule",{value:!0}),d.Logger=void 0;const v=p(o(7833)),m="h264-profile-level-id";d.Logger=class{constructor(u){u?(this._debug=(0,v.default)(`${m}:${u}`),this._warn=(0,v.default)(`${m}:WARN:${u}`),this._error=(0,v.default)(`${m}:ERROR:${u}`)):(this._debug=(0,v.default)(m),this._warn=(0,v.default)(`${m}:WARN`),this._error=(0,v.default)(`${m}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(l,d,o)=>{function p(v,m){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,b){return u.__proto__=b,u},p(v,m)}o.d(d,{A:()=>p})},3738:l=>{function d(o){return l.exports=d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},l.exports.__esModule=!0,l.exports.default=l.exports,d(o)}l.exports=d,l.exports.__esModule=!0,l.exports.default=l.exports},3779:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0});const o=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);d.default={randomUUID:o}},3785:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.clone=function(o){return o===void 0?void 0:Number.isNaN(o)?NaN:typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}},3797:function(l,d,o){var p,v,m;l.exports=(m=o(9021),o(7165),m.mode.OFB=(p=m.lib.BlockCipherMode.extend(),v=p.Encryptor=p.extend({processBlock:function(u,b){var f=this._cipher,w=f.blockSize,g=this._iv,y=this._keystream;g&&(y=this._keystream=g.slice(0),this._iv=void 0),f.encryptBlock(y,0);for(var _=0;_<w;_++)u[b+_]^=y[_]}}),p.Decryptor=v,p),m.mode.OFB)},3804:(l,d,o)=>{var p=o(5602),v=/%[sdv%]/g,m=function(w){var g=1,y=arguments,_=y.length;return w.replace(v,function(x){if(g>=_)return x;var E=y[g];switch(g+=1,x){case"%%":return"%";case"%s":return String(E);case"%d":return Number(E);case"%v":return""}})},u=function(w,g,y){var _=[w+"="+(g.format instanceof Function?g.format(g.push?y:y[g.name]):g.format)];if(g.names)for(var x=0;x<g.names.length;x+=1){var E=g.names[x];g.name?_.push(y[g.name][E]):_.push(y[g.names[x]])}else _.push(y[g.name]);return m.apply(null,_)},b=["v","o","s","i","u","e","p","c","b","t","r","z","a"],f=["i","c","b","a"];l.exports=function(w,g){g=g||{},w.version==null&&(w.version=0),w.name==null&&(w.name=" "),w.media.forEach(function(E){E.payloads==null&&(E.payloads="")});var y=g.outerOrder||b,_=g.innerOrder||f,x=[];return y.forEach(function(E){p[E].forEach(function(j){j.name in w&&w[j.name]!=null?x.push(u(E,j,w)):j.push in w&&w[j.push]!=null&&w[j.push].forEach(function(R){x.push(u(E,j,R))})})}),w.media.forEach(function(E){x.push(u("m",p.m[0],E)),_.forEach(function(j){p[j].forEach(function(R){R.name in E&&E[R.name]!=null?x.push(u(j,R,E)):R.push in E&&E[R.push]!=null&&E[R.push].forEach(function(C){x.push(u(j,R,C))})})})}),x.join(`\r
`)+`\r
`}},3953:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.EnhancedEventEmitter=void 0;const p=o(9596),v=new(o(2994)).Logger("EnhancedEventEmitter");class m extends p.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(b,...f){return super.emit(b,...f)}safeEmit(b,...f){try{return super.emit(b,...f)}catch(w){v.error("safeEmit() | event listener threw an error [eventName:%s]:%o",b,w);try{super.emit("listenererror",b,w)}catch{}return!!super.listenerCount(b)}}on(b,f){return super.on(b,f),this}off(b,f){return super.off(b,f),this}addListener(b,f){return super.on(b,f),this}prependListener(b,f){return super.prependListener(b,f),this}once(b,f){return super.once(b,f),this}prependOnceListener(b,f){return super.prependOnceListener(b,f),this}removeListener(b,f){return super.off(b,f),this}removeAllListeners(b){return super.removeAllListeners(b),this}listenerCount(b){return super.listenerCount(b)}listeners(b){return super.listeners(b)}rawListeners(b){return super.rawListeners(b)}}d.EnhancedEventEmitter=m},3954:(l,d,o)=>{function p(v){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},p(v)}o.d(d,{A:()=>p})},4039:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ReactNativeUnifiedPlan=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),w=o(4256),g=o(4893),y=o(521),_=o(1305),x=o(3303),E=new v.Logger("ReactNativeUnifiedPlan"),j={OS:1024,MIS:1024};class R extends y.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new R}get name(){return"ReactNativeUnifiedPlan"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{h.addTransceiver("audio"),h.addTransceiver("video");const S=await h.createOffer();try{h.close()}catch{}const k=p.parse(S.sdp),P=b.extractRtpCapabilities({sdpObject:k});return w.addNackSupportForOpus(P),P}catch(S){try{h.close()}catch{}throw S}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:j}}run({direction:h,iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N,iceServers:O,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._direction=h,this._remoteSdp=new _.RemoteSdp({iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=h,this._pc.setConfiguration(S)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:S,codecOptions:k,codec:P,onRtpSender:N}){this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),S&&S.length>1&&S.forEach((Se,ie)=>{Se.rid=`r${ie}`});const O=m.clone(this._sendingRtpParametersByKind[h.kind]);O.codecs=u.reduceCodecs(O.codecs,P);const D=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);D.codecs=u.reduceCodecs(D.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:S});N&&N(M.sender);let I,G=await this._pc.createOffer(),de=p.parse(G.sdp);de.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de});let ee=!1;const Q=(0,x.parse)((S??[{}])[0].scalabilityMode);S&&S.length===1&&Q.spatialLayers>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(E.debug("send() | enabling legacy simulcast for VP9 SVC"),ee=!0,de=p.parse(G.sdp),I=de.media[L.idx],f.addLegacySimulcast({offerMediaObject:I,numStreams:Q.spatialLayers}),G={type:"offer",sdp:p.write(de)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",G),await this._pc.setLocalDescription(G);let ae=M.mid??void 0;if(ae||E.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),O.mid=ae,de=p.parse(this._pc.localDescription.sdp),I=de.media[L.idx],O.rtcp.cname=b.getCname({offerMediaObject:I}),S)if(S.length===1){let Se=f.getRtpEncodings({offerMediaObject:I});Object.assign(Se[0],S[0]),ee&&(Se=[Se[0]]),O.encodings=Se}else O.encodings=S;else O.encodings=f.getRtpEncodings({offerMediaObject:I});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Se of O.encodings)Se.scalabilityMode?Se.scalabilityMode=`L1T${Q.temporalLayers}`:Se.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:L.reuseMid,offerRtpParameters:O,answerRtpParameters:D,codecOptions:k});const xe={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",xe),await this._pc.setRemoteDescription(xe),ae||(ae=M.mid,O.mid=ae),this._mapMidTransceiver.set(ae,M),{localId:ae,rtpParameters:O,rtpSender:M.sender}}async stopSending(h){if(this.assertSendDirection(),this._closed)return;E.debug("stopSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");if(S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.closeMediaSection(S.mid))try{S.stop()}catch{}const k=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(h);const k=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(this._remoteSdp.resumeSendingMediaSection(h),!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="sendonly";const k=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,S){this.assertNotClosed(),this.assertSendDirection(),S?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,S.id):E.debug("replaceTrack() [localId:%s, no track]",h);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");await k.sender.replaceTrack(S)}async setMaxSpatialLayer(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=S}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...S}}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:S,maxRetransmits:k,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:S,maxRetransmits:k,protocol:N};E.debug("sendDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(P,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%j.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const S=[],k=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);k.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const D of h){const{trackId:L,onRtpReceiver:M}=D;if(M){const I=k.get(L),G=this._pc.getTransceivers().find(de=>de.mid===I);if(!G)throw new Error("transceiver not found");M(G.receiver)}}let N=await this._pc.createAnswer();const O=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=k.get(L),G=O.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=k.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),S.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return S}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:S,protocol:k}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D,protocol:k};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(S,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:S}){S||(S=p.parse(this._pc.localDescription.sdp));const k=b.extractDtlsParameters({sdpObject:S});k.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:k},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.ReactNativeUnifiedPlan=R},4160:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0})},4253:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AwaitQueueRemovedTaskError=d.AwaitQueueStoppedError=void 0;class o extends Error{constructor(m){super(m??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o)}}d.AwaitQueueStoppedError=o;class p extends Error{constructor(m){super(m??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,p)}}d.AwaitQueueRemovedTaskError=p},4256:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.addNackSupportForOpus=function(o){var p;for(const v of o.codecs??[])v.mimeType.toLowerCase()!=="audio/opus"&&v.mimeType.toLowerCase()!=="audio/multiopus"||(p=v.rtcpFeedback)!=null&&p.some(m=>m.type==="nack"&&!m.parameter)||(v.rtcpFeedback||(v.rtcpFeedback=[]),v.rtcpFeedback.push({type:"nack"}))}},4299:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.updateV7State=void 0;const p=o(2291),v=o(6011),m={};function u(f,w,g){return f.msecs??(f.msecs=-1/0),f.seq??(f.seq=0),w>f.msecs?(f.seq=g[6]<<23|g[7]<<16|g[8]<<8|g[9],f.msecs=w):(f.seq=f.seq+1|0,f.seq===0&&f.msecs++),f}function b(f,w,g,y,_=0){if(f.length<16)throw new Error("Random bytes length must be >= 16");if(y){if(_<0||_+16>y.length)throw new RangeError(`UUID byte range ${_}:${_+15} is out of buffer bounds`)}else y=new Uint8Array(16),_=0;return w??(w=Date.now()),g??(g=127*f[6]<<24|f[7]<<16|f[8]<<8|f[9]),y[_++]=w/1099511627776&255,y[_++]=w/4294967296&255,y[_++]=w/16777216&255,y[_++]=w/65536&255,y[_++]=w/256&255,y[_++]=255&w,y[_++]=112|g>>>28&15,y[_++]=g>>>20&255,y[_++]=128|g>>>14&63,y[_++]=g>>>6&255,y[_++]=g<<2&255|3&f[10],y[_++]=f[11],y[_++]=f[12],y[_++]=f[13],y[_++]=f[14],y[_++]=f[15],y}d.updateV7State=u,d.default=function(f,w,g){var _;let y;if(f)y=b(f.random??((_=f.rng)==null?void 0:_.call(f))??(0,p.default)(),f.msecs,f.seq,w,g);else{const x=Date.now(),E=(0,p.default)();u(m,x,E),y=b(E,m.msecs,m.seq,w,g)}return w??(0,v.unsafeStringify)(y)}},4467:(l,d,o)=>{o.d(d,{A:()=>v});var p=o(816);function v(m,u,b){return(u=(0,p.A)(u))in m?Object.defineProperty(m,u,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[u]=b,m}},4496:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getRtpEncodings=function({offerMediaObject:o,track:p}){const v=new Set;for(const b of o.ssrcs??[])if(b.attribute==="msid"&&b.value.split(" ")[1]===p.id){const f=b.id;v.add(f)}if(v.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${p.id}]`);const m=new Map;for(const b of o.ssrcGroups??[]){if(b.semantics!=="FID")continue;let[f,w]=b.ssrcs.split(/\s+/);f=Number(f),w=Number(w),v.has(f)&&(v.delete(f),v.delete(w),m.set(f,w))}for(const b of v)m.set(b,null);const u=[];for(const[b,f]of m){const w={ssrc:b};f&&(w.rtx={ssrc:f}),u.push(w)}return u},d.addLegacySimulcast=function({offerMediaObject:o,track:p,numStreams:v}){if(v<=1)throw new TypeError("numStreams must be greater than 1");let m,u,b;if(!(o.ssrcs??[]).find(_=>_.attribute!=="msid"?!1:_.value.split(" ")[1]===p.id&&(m=_.id,b=_.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${p.id}]`);(o.ssrcGroups??[]).some(_=>{if(_.semantics!=="FID")return!1;const x=_.ssrcs.split(/\s+/);return Number(x[0])===m&&(u=Number(x[1]),!0)});const f=o.ssrcs.find(_=>_.attribute==="cname"&&_.id===m);if(!f)throw new Error(`a=ssrc line with cname information not found [track.id:${p.id}]`);const w=f.value,g=[],y=[];for(let _=0;_<v;++_)g.push(m+_),u&&y.push(u+_);o.ssrcGroups=o.ssrcGroups??[],o.ssrcs=o.ssrcs??[],o.ssrcGroups.push({semantics:"SIM",ssrcs:g.join(" ")});for(const _ of g)o.ssrcs.push({id:_,attribute:"cname",value:w}),o.ssrcs.push({id:_,attribute:"msid",value:`${b} ${p.id}`});for(let _=0;_<y.length;++_){const x=g[_],E=y[_];o.ssrcs.push({id:E,attribute:"cname",value:w}),o.ssrcs.push({id:E,attribute:"msid",value:`${b} ${p.id}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${E}`})}}},4557:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.URL=d.DNS=void 0;const p=o(2829),v=o(2988);var m=o(2988);function u(b,f,w,g){return(0,v.default)(80,p.default,b,f,w,g)}Object.defineProperty(d,"DNS",{enumerable:!0,get:function(){return m.DNS}}),Object.defineProperty(d,"URL",{enumerable:!0,get:function(){return m.URL}}),u.DNS=v.DNS,u.URL=v.URL,d.default=u},4633:(l,d,o)=>{var p=o(3738).default;function v(){l.exports=v=function(){return u},l.exports.__esModule=!0,l.exports.default=l.exports;var m,u={},b=Object.prototype,f=b.hasOwnProperty,w=typeof Symbol=="function"?Symbol:{},g=w.iterator||"@@iterator",y=w.asyncIterator||"@@asyncIterator",_=w.toStringTag||"@@toStringTag";function x(ee,Q,ae,xe){return Object.defineProperty(ee,Q,{value:ae,enumerable:!xe,configurable:!xe,writable:!xe})}try{x({},"")}catch{x=function(Q,ae,xe){return Q[ae]=xe}}function E(ee,Q,ae,xe){var Se=Q&&Q.prototype instanceof C?Q:C,ie=Object.create(Se.prototype);return x(ie,"_invoke",function(We,Oe,se){var ue=1;return function(Ce,$e){if(ue===3)throw Error("Generator is already running");if(ue===4){if(Ce==="throw")throw $e;return{value:m,done:!0}}for(se.method=Ce,se.arg=$e;;){var Wt=se.delegate;if(Wt){var er=L(Wt,se);if(er){if(er===R)continue;return er}}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(ue===1)throw ue=4,se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);ue=3;var wt=j(We,Oe,se);if(wt.type==="normal"){if(ue=se.done?4:2,wt.arg===R)continue;return{value:wt.arg,done:se.done}}wt.type==="throw"&&(ue=4,se.method="throw",se.arg=wt.arg)}}}(ee,ae,new G(xe||[])),!0),ie}function j(ee,Q,ae){try{return{type:"normal",arg:ee.call(Q,ae)}}catch(xe){return{type:"throw",arg:xe}}}u.wrap=E;var R={};function C(){}function T(){}function h(){}var S={};x(S,g,function(){return this});var k=Object.getPrototypeOf,P=k&&k(k(de([])));P&&P!==b&&f.call(P,g)&&(S=P);var N=h.prototype=C.prototype=Object.create(S);function O(ee){["next","throw","return"].forEach(function(Q){x(ee,Q,function(ae){return this._invoke(Q,ae)})})}function D(ee,Q){function ae(Se,ie,We,Oe){var se=j(ee[Se],ee,ie);if(se.type!=="throw"){var ue=se.arg,Ce=ue.value;return Ce&&p(Ce)=="object"&&f.call(Ce,"__await")?Q.resolve(Ce.__await).then(function($e){ae("next",$e,We,Oe)},function($e){ae("throw",$e,We,Oe)}):Q.resolve(Ce).then(function($e){ue.value=$e,We(ue)},function($e){return ae("throw",$e,We,Oe)})}Oe(se.arg)}var xe;x(this,"_invoke",function(Se,ie){function We(){return new Q(function(Oe,se){ae(Se,ie,Oe,se)})}return xe=xe?xe.then(We,We):We()},!0)}function L(ee,Q){var ae=Q.method,xe=ee.i[ae];if(xe===m)return Q.delegate=null,ae==="throw"&&ee.i.return&&(Q.method="return",Q.arg=m,L(ee,Q),Q.method==="throw")||ae!=="return"&&(Q.method="throw",Q.arg=new TypeError("The iterator does not provide a '"+ae+"' method")),R;var Se=j(xe,ee.i,Q.arg);if(Se.type==="throw")return Q.method="throw",Q.arg=Se.arg,Q.delegate=null,R;var ie=Se.arg;return ie?ie.done?(Q[ee.r]=ie.value,Q.next=ee.n,Q.method!=="return"&&(Q.method="next",Q.arg=m),Q.delegate=null,R):ie:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,R)}function M(ee){this.tryEntries.push(ee)}function I(ee){var Q=ee[4]||{};Q.type="normal",Q.arg=m,ee[4]=Q}function G(ee){this.tryEntries=[[-1]],ee.forEach(M,this),this.reset(!0)}function de(ee){if(ee!=null){var Q=ee[g];if(Q)return Q.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var ae=-1,xe=function Se(){for(;++ae<ee.length;)if(f.call(ee,ae))return Se.value=ee[ae],Se.done=!1,Se;return Se.value=m,Se.done=!0,Se};return xe.next=xe}}throw new TypeError(p(ee)+" is not iterable")}return T.prototype=h,x(N,"constructor",h),x(h,"constructor",T),T.displayName=x(h,_,"GeneratorFunction"),u.isGeneratorFunction=function(ee){var Q=typeof ee=="function"&&ee.constructor;return!!Q&&(Q===T||(Q.displayName||Q.name)==="GeneratorFunction")},u.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,h):(ee.__proto__=h,x(ee,_,"GeneratorFunction")),ee.prototype=Object.create(N),ee},u.awrap=function(ee){return{__await:ee}},O(D.prototype),x(D.prototype,y,function(){return this}),u.AsyncIterator=D,u.async=function(ee,Q,ae,xe,Se){Se===void 0&&(Se=Promise);var ie=new D(E(ee,Q,ae,xe),Se);return u.isGeneratorFunction(Q)?ie:ie.next().then(function(We){return We.done?We.value:ie.next()})},O(N),x(N,_,"Generator"),x(N,g,function(){return this}),x(N,"toString",function(){return"[object Generator]"}),u.keys=function(ee){var Q=Object(ee),ae=[];for(var xe in Q)ae.unshift(xe);return function Se(){for(;ae.length;)if((xe=ae.pop())in Q)return Se.value=xe,Se.done=!1,Se;return Se.done=!0,Se}},u.values=de,G.prototype={constructor:G,reset:function(ee){if(this.prev=this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(I),!ee)for(var Q in this)Q.charAt(0)==="t"&&f.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=m)},stop:function(){this.done=!0;var ee=this.tryEntries[0][4];if(ee.type==="throw")throw ee.arg;return this.rval},dispatchException:function(ee){if(this.done)throw ee;var Q=this;function ae(ue){ie.type="throw",ie.arg=ee,Q.next=ue}for(var xe=Q.tryEntries.length-1;xe>=0;--xe){var Se=this.tryEntries[xe],ie=Se[4],We=this.prev,Oe=Se[1],se=Se[2];if(Se[0]===-1)return ae("end"),!1;if(!Oe&&!se)throw Error("try statement without catch or finally");if(Se[0]!=null&&Se[0]<=We){if(We<Oe)return this.method="next",this.arg=m,ae(Oe),!0;if(We<se)return ae(se),!1}}},abrupt:function(ee,Q){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var xe=this.tryEntries[ae];if(xe[0]>-1&&xe[0]<=this.prev&&this.prev<xe[2]){var Se=xe;break}}Se&&(ee==="break"||ee==="continue")&&Se[0]<=Q&&Q<=Se[2]&&(Se=null);var ie=Se?Se[4]:{};return ie.type=ee,ie.arg=Q,Se?(this.method="next",this.next=Se[2],R):this.complete(ie)},complete:function(ee,Q){if(ee.type==="throw")throw ee.arg;return ee.type==="break"||ee.type==="continue"?this.next=ee.arg:ee.type==="return"?(this.rval=this.arg=ee.arg,this.method="return",this.next="end"):ee.type==="normal"&&Q&&(this.next=Q),R},finish:function(ee){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ae=this.tryEntries[Q];if(ae[2]===ee)return this.complete(ae[4],ae[3]),I(ae),R}},catch:function(ee){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ae=this.tryEntries[Q];if(ae[0]===ee){var xe=ae[4];if(xe.type==="throw"){var Se=xe.arg;I(ae)}return Se}}throw Error("illegal catch attempt")},delegateYield:function(ee,Q,ae){return this.delegate={i:de(ee),r:Q,n:ae},this.method==="next"&&(this.arg=m),R}},u}l.exports=v,l.exports.__esModule=!0,l.exports.default=l.exports},4636:function(l,d,o){var p;l.exports=(p=o(9021),function(v){var m=p,u=m.lib,b=u.WordArray,f=u.Hasher,w=m.algo,g=[];(function(){for(var R=0;R<64;R++)g[R]=4294967296*v.abs(v.sin(R+1))|0})();var y=w.MD5=f.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(R,C){for(var T=0;T<16;T++){var h=C+T,S=R[h];R[h]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8)}var k=this._hash.words,P=R[C+0],N=R[C+1],O=R[C+2],D=R[C+3],L=R[C+4],M=R[C+5],I=R[C+6],G=R[C+7],de=R[C+8],ee=R[C+9],Q=R[C+10],ae=R[C+11],xe=R[C+12],Se=R[C+13],ie=R[C+14],We=R[C+15],Oe=k[0],se=k[1],ue=k[2],Ce=k[3];Oe=_(Oe,se,ue,Ce,P,7,g[0]),Ce=_(Ce,Oe,se,ue,N,12,g[1]),ue=_(ue,Ce,Oe,se,O,17,g[2]),se=_(se,ue,Ce,Oe,D,22,g[3]),Oe=_(Oe,se,ue,Ce,L,7,g[4]),Ce=_(Ce,Oe,se,ue,M,12,g[5]),ue=_(ue,Ce,Oe,se,I,17,g[6]),se=_(se,ue,Ce,Oe,G,22,g[7]),Oe=_(Oe,se,ue,Ce,de,7,g[8]),Ce=_(Ce,Oe,se,ue,ee,12,g[9]),ue=_(ue,Ce,Oe,se,Q,17,g[10]),se=_(se,ue,Ce,Oe,ae,22,g[11]),Oe=_(Oe,se,ue,Ce,xe,7,g[12]),Ce=_(Ce,Oe,se,ue,Se,12,g[13]),ue=_(ue,Ce,Oe,se,ie,17,g[14]),Oe=x(Oe,se=_(se,ue,Ce,Oe,We,22,g[15]),ue,Ce,N,5,g[16]),Ce=x(Ce,Oe,se,ue,I,9,g[17]),ue=x(ue,Ce,Oe,se,ae,14,g[18]),se=x(se,ue,Ce,Oe,P,20,g[19]),Oe=x(Oe,se,ue,Ce,M,5,g[20]),Ce=x(Ce,Oe,se,ue,Q,9,g[21]),ue=x(ue,Ce,Oe,se,We,14,g[22]),se=x(se,ue,Ce,Oe,L,20,g[23]),Oe=x(Oe,se,ue,Ce,ee,5,g[24]),Ce=x(Ce,Oe,se,ue,ie,9,g[25]),ue=x(ue,Ce,Oe,se,D,14,g[26]),se=x(se,ue,Ce,Oe,de,20,g[27]),Oe=x(Oe,se,ue,Ce,Se,5,g[28]),Ce=x(Ce,Oe,se,ue,O,9,g[29]),ue=x(ue,Ce,Oe,se,G,14,g[30]),Oe=E(Oe,se=x(se,ue,Ce,Oe,xe,20,g[31]),ue,Ce,M,4,g[32]),Ce=E(Ce,Oe,se,ue,de,11,g[33]),ue=E(ue,Ce,Oe,se,ae,16,g[34]),se=E(se,ue,Ce,Oe,ie,23,g[35]),Oe=E(Oe,se,ue,Ce,N,4,g[36]),Ce=E(Ce,Oe,se,ue,L,11,g[37]),ue=E(ue,Ce,Oe,se,G,16,g[38]),se=E(se,ue,Ce,Oe,Q,23,g[39]),Oe=E(Oe,se,ue,Ce,Se,4,g[40]),Ce=E(Ce,Oe,se,ue,P,11,g[41]),ue=E(ue,Ce,Oe,se,D,16,g[42]),se=E(se,ue,Ce,Oe,I,23,g[43]),Oe=E(Oe,se,ue,Ce,ee,4,g[44]),Ce=E(Ce,Oe,se,ue,xe,11,g[45]),ue=E(ue,Ce,Oe,se,We,16,g[46]),Oe=j(Oe,se=E(se,ue,Ce,Oe,O,23,g[47]),ue,Ce,P,6,g[48]),Ce=j(Ce,Oe,se,ue,G,10,g[49]),ue=j(ue,Ce,Oe,se,ie,15,g[50]),se=j(se,ue,Ce,Oe,M,21,g[51]),Oe=j(Oe,se,ue,Ce,xe,6,g[52]),Ce=j(Ce,Oe,se,ue,D,10,g[53]),ue=j(ue,Ce,Oe,se,Q,15,g[54]),se=j(se,ue,Ce,Oe,N,21,g[55]),Oe=j(Oe,se,ue,Ce,de,6,g[56]),Ce=j(Ce,Oe,se,ue,We,10,g[57]),ue=j(ue,Ce,Oe,se,I,15,g[58]),se=j(se,ue,Ce,Oe,Se,21,g[59]),Oe=j(Oe,se,ue,Ce,L,6,g[60]),Ce=j(Ce,Oe,se,ue,ae,10,g[61]),ue=j(ue,Ce,Oe,se,O,15,g[62]),se=j(se,ue,Ce,Oe,ee,21,g[63]),k[0]=k[0]+Oe|0,k[1]=k[1]+se|0,k[2]=k[2]+ue|0,k[3]=k[3]+Ce|0},_doFinalize:function(){var R=this._data,C=R.words,T=8*this._nDataBytes,h=8*R.sigBytes;C[h>>>5]|=128<<24-h%32;var S=v.floor(T/4294967296),k=T;C[15+(h+64>>>9<<4)]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),C[14+(h+64>>>9<<4)]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),R.sigBytes=4*(C.length+1),this._process();for(var P=this._hash,N=P.words,O=0;O<4;O++){var D=N[O];N[O]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}return P},clone:function(){var R=f.clone.call(this);return R._hash=this._hash.clone(),R}});function _(R,C,T,h,S,k,P){var N=R+(C&T|~C&h)+S+P;return(N<<k|N>>>32-k)+C}function x(R,C,T,h,S,k,P){var N=R+(C&h|T&~h)+S+P;return(N<<k|N>>>32-k)+C}function E(R,C,T,h,S,k,P){var N=R+(C^T^h)+S+P;return(N<<k|N>>>32-k)+C}function j(R,C,T,h,S,k,P){var N=R+(T^(C|~h))+S+P;return(N<<k|N>>>32-k)+C}m.MD5=f._createHelper(y),m.HmacMD5=f._createHmacHelper(y)}(Math),p.MD5)},4725:function(l,d,o){var p;l.exports=(p=o(9021),function(){var v=p,m=v.lib.WordArray;function u(b,f,w){for(var g=[],y=0,_=0;_<f;_++)if(_%4){var x=w[b.charCodeAt(_-1)]<<_%4*2|w[b.charCodeAt(_)]>>>6-_%4*2;g[y>>>2]|=x<<24-y%4*8,y++}return m.create(g,y)}v.enc.Base64url={stringify:function(b,f){f===void 0&&(f=!0);var w=b.words,g=b.sigBytes,y=f?this._safe_map:this._map;b.clamp();for(var _=[],x=0;x<g;x+=3)for(var E=(w[x>>>2]>>>24-x%4*8&255)<<16|(w[x+1>>>2]>>>24-(x+1)%4*8&255)<<8|w[x+2>>>2]>>>24-(x+2)%4*8&255,j=0;j<4&&x+.75*j<g;j++)_.push(y.charAt(E>>>6*(3-j)&63));var R=y.charAt(64);if(R)for(;_.length%4;)_.push(R);return _.join("")},parse:function(b,f){f===void 0&&(f=!0);var w=b.length,g=f?this._safe_map:this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var _=0;_<g.length;_++)y[g.charCodeAt(_)]=_}var x=g.charAt(64);if(x){var E=b.indexOf(x);E!==-1&&(w=E)}return u(b,w,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),p.enc.Base64url)},4756:(l,d,o)=>{var p=o(4633)();l.exports=p;try{regeneratorRuntime=p}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},4893:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.InvalidStateError=d.UnsupportedError=void 0;class o extends Error{constructor(m){super(m),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,o):this.stack=new Error(m).stack}}d.UnsupportedError=o;class p extends Error{constructor(m){super(m),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,p):this.stack=new Error(m).stack}}d.InvalidStateError=p},4905:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.pad.Iso10126={pad:function(v,m){var u=4*m,b=u-v.sigBytes%u;v.concat(p.lib.WordArray.random(b-1)).concat(p.lib.WordArray.create([b<<24],1))},unpad:function(v){var m=255&v.words[v.sigBytes-1>>>2];v.sigBytes-=m}},p.pad.Iso10126)},4973:(l,d,o)=>{o.d(d,{Zu:()=>b,lp:()=>u});var p=o(467),v=o(4756),m=o.n(v),u=(o(9027),function(){var f=(0,p.A)(m().mark(function w(g){return m().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(_){var x=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return x?new Promise(function(E,j){x.call(navigator,_,E,j)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),y.next=4,navigator.mediaDevices.getUserMedia(g);case 4:return y.abrupt("return",y.sent);case 5:case"end":return y.stop()}},w)}));return function(w){return f.apply(this,arguments)}}()),b=function(){var f=(0,p.A)(m().mark(function w(g){return m().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(_){var x=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return x?new Promise(function(E,j){x.call(navigator,_,E,j)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),y.next=4,navigator.mediaDevices.getDisplayMedia(g);case 4:return y.abrupt("return",y.sent);case 5:case"end":return y.stop()}},w)}));return function(w){return f.apply(this,arguments)}}()},5020:(l,d,o)=>{var p=function(f){return String(Number(f))===f?Number(f):f},v=function(f,w,g){var y=f.name&&f.names;f.push&&!w[f.push]?w[f.push]=[]:y&&!w[f.name]&&(w[f.name]={});var _=f.push?{}:y?w[f.name]:w;(function(x,E,j,R){if(R&&!j)E[R]=p(x[1]);else for(var C=0;C<j.length;C+=1)x[C+1]!=null&&(E[j[C]]=p(x[C+1]))})(g.match(f.reg),_,f.names,f.name),f.push&&w[f.push].push(_)},m=o(5602),u=RegExp.prototype.test.bind(/^([a-z])=(.*)/);d.parse=function(f){var w={},g=[],y=w;return f.split(/(\r\n|\r|\n)/).filter(u).forEach(function(_){var x=_[0],E=_.slice(2);x==="m"&&(g.push({rtp:[],fmtp:[]}),y=g[g.length-1]);for(var j=0;j<(m[x]||[]).length;j+=1){var R=m[x][j];if(R.reg.test(E))return v(R,y,E)}}),w.media=g,w};var b=function(f,w){var g=w.split(/=(.+)/,2);return g.length===2?f[g[0]]=p(g[1]):g.length===1&&w.length>1&&(f[g[0]]=void 0),f};d.parseParams=function(f){return f.split(/;\s?/).reduce(b,{})},d.parseFmtpConfig=d.parseParams,d.parsePayloads=function(f){return f.toString().split(" ").map(Number)},d.parseRemoteCandidates=function(f){for(var w=[],g=f.split(" ").map(p),y=0;y<g.length;y+=3)w.push({component:g[y],ip:g[y+1],port:g[y+2]});return w},d.parseImageAttributes=function(f){return f.split(" ").map(function(w){return w.substring(1,w.length-1).split(",").reduce(b,{})})},d.parseSimulcastStreamList=function(f){return f.split(";").map(function(w){return w.split(",").map(function(g){var y,_=!1;return g[0]!=="~"?y=p(g):(y=p(g.substring(1,g.length)),_=!0),{scid:y,paused:_}})})}},5071:(l,d,o)=>{o.d(d,{V:()=>p});var p={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5248:(l,d,o)=>{o(1765)},5328:(l,d,o)=>{var b,f,w,g,y,_,x,E,j,R,C,T,h,S,k,P;Object.defineProperty(d,"__esModule",{value:!0}),d.FakeMediaStreamTrack=void 0;const p=o(182),v=o(5862),m=o(3785),N=class N extends v.FakeEventTarget{constructor({kind:L,id:M,label:I,contentHint:G,enabled:de,muted:ee,readyState:Q,capabilities:ae,constraints:xe,settings:Se,data:ie}){super();Zs(this,b);Zs(this,f);Zs(this,w);Zs(this,g);Zs(this,y);Zs(this,_);Zs(this,x);Zs(this,E);Zs(this,j);Zs(this,R);Zs(this,C);Zs(this,T,null);Zs(this,h,null);Zs(this,S,null);Zs(this,k,null);Zs(this,P,null);qn(this,b,M??(0,p.v4)()),qn(this,f,L),qn(this,w,I??""),qn(this,x,G??""),qn(this,y,de??!0),qn(this,_,ee??!1),qn(this,g,Q??"live"),qn(this,E,ae??{}),qn(this,j,xe??{}),qn(this,R,Se??{}),qn(this,C,ie??{})}get id(){return Dr(this,b)}get kind(){return Dr(this,f)}get label(){return Dr(this,w)}get contentHint(){return Dr(this,x)}set contentHint(L){qn(this,x,L)}get enabled(){return Dr(this,y)}set enabled(L){const M=Dr(this,y)!==L;qn(this,y,L),M&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return Dr(this,_)}get readyState(){return Dr(this,g)}get data(){return Dr(this,C)}set data(L){qn(this,C,L)}get onmute(){return Dr(this,T)}set onmute(L){Dr(this,T)&&this.removeEventListener("mute",Dr(this,T)),qn(this,T,L),L&&this.addEventListener("mute",L)}get onunmute(){return Dr(this,h)}set onunmute(L){Dr(this,h)&&this.removeEventListener("unmute",Dr(this,h)),qn(this,h,L),L&&this.addEventListener("unmute",L)}get onended(){return Dr(this,S)}set onended(L){Dr(this,S)&&this.removeEventListener("ended",Dr(this,S)),qn(this,S,L),L&&this.addEventListener("ended",L)}get onenabledchange(){return Dr(this,k)}set onenabledchange(L){Dr(this,k)&&this.removeEventListener("enabledchange",Dr(this,k)),qn(this,k,L),L&&this.addEventListener("enabledchange",L)}get onstopped(){return Dr(this,P)}set onstopped(L){Dr(this,P)&&this.removeEventListener("stopped",Dr(this,P)),qn(this,P,L),L&&this.addEventListener("stopped",L)}addEventListener(L,M,I){super.addEventListener(L,M,I)}removeEventListener(L,M){super.removeEventListener(L,M)}stop(){Dr(this,g)!=="ended"&&(qn(this,g,"ended"),this.dispatchEvent(new Event("stopped")))}clone({id:L,data:M}={}){return new N({id:L??(0,p.v4)(),kind:Dr(this,f),label:Dr(this,w),contentHint:Dr(this,x),enabled:Dr(this,y),muted:Dr(this,_),readyState:Dr(this,g),capabilities:(0,m.clone)(Dr(this,E)),constraints:(0,m.clone)(Dr(this,j)),settings:(0,m.clone)(Dr(this,R)),data:M??(0,m.clone)(Dr(this,C))})}getCapabilities(){return Dr(this,E)}getConstraints(){return Dr(this,j)}async applyConstraints(L={}){return qn(this,j,L),Promise.resolve()}getSettings(){return Dr(this,R)}remoteStop(){Dr(this,g)!=="ended"&&(qn(this,g,"ended"),this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){Dr(this,_)||(qn(this,_,!0),this.dispatchEvent(new Event("mute")))}remoteUnmute(){Dr(this,_)&&(qn(this,_,!1),this.dispatchEvent(new Event("unmute")))}};b=new WeakMap,f=new WeakMap,w=new WeakMap,g=new WeakMap,y=new WeakMap,_=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,R=new WeakMap,C=new WeakMap,T=new WeakMap,h=new WeakMap,S=new WeakMap,k=new WeakMap,P=new WeakMap;let u=N;d.FakeMediaStreamTrack=u},5370:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0})},5414:l=>{l.exports=(()=>{var d={43:function(m,u,b){var f,w;(function(){f=function(){var g=function(){},y="undefined",_=typeof window!==y&&typeof window.navigator!==y&&/Trident\/|MSIE /.test(window.navigator.userAgent),x=["trace","debug","info","warn","error"];function E(N,O){var D=N[O];if(typeof D.bind=="function")return D.bind(N);try{return Function.prototype.bind.call(D,N)}catch{return function(){return Function.prototype.apply.apply(D,[N,arguments])}}}function j(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function R(N,O){for(var D=0;D<x.length;D++){var L=x[D];this[L]=D<N?g:this.methodFactory(L,N,O)}this.log=this.debug}function C(N,O,D){return function(){typeof console!==y&&(R.call(this,O,D),this[N].apply(this,arguments))}}function T(N,O,D){return function(L){return L==="debug"&&(L="log"),typeof console!==y&&(L==="trace"&&_?j:console[L]!==void 0?E(console,L):console.log!==void 0?E(console,"log"):g)}(N)||C.apply(this,arguments)}function h(N,O,D){var L,M=this,I="loglevel";function G(){var ee;if(typeof window!==y&&I){try{ee=window.localStorage[I]}catch{}if(typeof ee===y)try{var Q=window.document.cookie,ae=Q.indexOf(encodeURIComponent(I)+"=");ae!==-1&&(ee=/^([^;]+)/.exec(Q.slice(ae))[1])}catch{}return M.levels[ee]===void 0&&(ee=void 0),ee}}typeof N=="string"?I+=":"+N:typeof N=="symbol"&&(I=void 0),M.name=N,M.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},M.methodFactory=D||T,M.getLevel=function(){return L},M.setLevel=function(ee,Q){if(typeof ee=="string"&&M.levels[ee.toUpperCase()]!==void 0&&(ee=M.levels[ee.toUpperCase()]),!(typeof ee=="number"&&ee>=0&&ee<=M.levels.SILENT))throw"log.setLevel() called with invalid level: "+ee;if(L=ee,Q!==!1&&function(ae){var xe=(x[ae]||"silent").toUpperCase();if(typeof window!==y&&I){try{return void(window.localStorage[I]=xe)}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+xe+";"}catch{}}}(ee),R.call(M,ee,N),typeof console===y&&ee<M.levels.SILENT)return"No console available for logging"},M.setDefaultLevel=function(ee){G()||M.setLevel(ee,!1)},M.enableAll=function(ee){M.setLevel(M.levels.TRACE,ee)},M.disableAll=function(ee){M.setLevel(M.levels.SILENT,ee)};var de=G();de==null&&(de=O??"WARN"),M.setLevel(de,!1)}var S=new h,k={};S.getLogger=function(N){if(typeof N!="symbol"&&typeof N!="string"||N==="")throw new TypeError("You must supply a name when creating a logger.");var O=k[N];return O||(O=k[N]=new h(N,S.getLevel(),S.methodFactory)),O};var P=typeof window!==y?window.log:void 0;return S.noConflict=function(){return typeof window!==y&&window.log===S&&(window.log=P),S},S.getLoggers=function(){return k},S.default=S,S},(w=f.call(u,b,u,m))===void 0||(m.exports=w)})()}},o={};function p(m){var u=o[m];if(u!==void 0)return u.exports;var b=o[m]={exports:{}};return d[m].call(b.exports,b,b.exports,p),b.exports}p.d=(m,u)=>{for(var b in u)p.o(u,b)&&!p.o(m,b)&&Object.defineProperty(m,b,{enumerable:!0,get:u[b]})},p.o=(m,u)=>Object.prototype.hasOwnProperty.call(m,u),p.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var v={};return(()=>{p.r(v),p.d(v,{VideoSDKMetrics:()=>or});const m="inbound",u="outbound",b={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:m},f={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:u},w={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:m},g={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:u},y="inbound-rtp",_="bytesReceived",x="bytesSent",E="clockRate",j="codecId",R="currentRoundTripTime",C="roundTripTime",T="fractionLost",h="frameHeight",S="frameWidth",k="qualityLimitationReason",P="qualityLimitationDurations",N="qualityLimitationResolutionChanges",O="id",D="jitter",L="kind",M="mimeType",I="packetsLost",G="packetsReceived",de="packetsSent",ee="responsesReceived",Q="ssrc",ae="selected",xe="timestamp",Se="totalRoundTripTime",ie="roundTripTimeMeasurements",We="type",Oe="framesDecoded",se="framesEncoded",ue="totalDecodeTime",Ce="totalEncodeTime",$e="pliCount",Wt="nackCount",er="trackId",wt="trackIdentifier",Er="mediaSourceId",yr="audio",Ot="video",nn={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Dt="audio",Xt="video",Gr="network",dn="data";var Mr=p(43);const Yr=()=>`${new Date().toISOString()} | metrics`,un=(Ye,Me,ot)=>`${Ye} | ${Me} | ${ot}`;Mr.setDefaultLevel(Mr.levels.TRACE);const Mt=(Ye,Me,ot)=>{ot?Mr.debug(un(Yr(),Ye,Me),ot):Mr.debug(un(Yr(),Ye,Me))},pn=(Ye,Me)=>{Mr.warn(un(Yr(),Ye,Me))},sn=(Ye,Me)=>{Mr.error(un(Yr(),Ye,Me))},zr="extractor   ",Lr=(Ye,Me,ot)=>{if(!Me)return null;const Le={};let lt=Me[yr][Ye];lt||(lt=ot===m?{...b}:{...f}),Le[yr]=lt;let cr=Me[Ot][Ye];return cr||(cr=ot===m?{...w}:{...g}),Le[Ot]=cr,Le},_n=(Ye,Me,ot,Le)=>{let lt=!1;const cr=Le[Me].total_rtt_ms_out,De=Le[Me].total_rtt_measure_out,Zt=ot?ot[Me].total_rtt_ms_out:0,Vt=ot?ot[Me].total_rtt_measure_out:0,br={rtt:null,totalRTT:cr,totalRTTMeasurements:De};if(Ye[xe]===Le[Me].timestamp_out||!Object.prototype.hasOwnProperty.call(Ye,C)||Object.prototype.hasOwnProperty.call(Ye,ie)&&(lt=!0,Number(Ye[ie])===0||Number(Ye[ie])-Vt===De))return br;const hr=1e3*Number(Ye[C]);let Pr=cr+hr,Xe=De+1;return lt&&(Pr=1e3*Number(Ye[Se])-Zt,Xe=Number(Ye[ie])-Vt),{rtt:hr,totalRTT:Pr,totalRTTMeasurements:Xe}},Xr=(Ye,Me,ot)=>Ye[xe]===ot[Me].timestamp_out?null:Object.prototype.hasOwnProperty.call(Ye,D)?1e3*(Number(Ye[D])||0):null,Pn=(Ye,Me,ot,Le)=>{if(!Object.prototype.hasOwnProperty.call(Ye,de)||!Object.prototype.hasOwnProperty.call(Ye,x))return{packetsSent:ot[Me].total_packets_out,packetsLost:ot[Me].total_packets_lost_out,bytesSent:ot[Me].total_KBytes_out};const lt=Number(Ye[de])||0-(Le?Le[Me].total_packets_out:0),cr=lt-ot[Me].total_packets_out,De=Number(Ye[x])/1024-(Le?Le[Me].total_KBytes_out:0),Zt=De-ot[Me].total_KBytes_out,Vt=Ye[xe]||Date.now(),br=Le?Le.timestamp:null;let hr=ot.timestamp;!hr&&br&&(hr=br);const Pr=hr?Vt-hr:0;return{packetsSent:lt,deltaPacketsSent:cr,KBytesSent:De,deltaKBytesSent:Zt,kbsSent:Pr>0?.008*Zt*1024/Pr*1e3:0}},Sn=(Ye,Me,ot,Le)=>{let lt=ot[Me].total_packets_lost_out,cr=0,De=0;return Object.prototype.hasOwnProperty.call(Ye,I)&&(lt=Number(Ye[I])||0-(Le?Le[Me].total_packets_lost_out:0),cr=lt-ot[Me].total_packets_lost_out),Object.prototype.hasOwnProperty.call(Ye,T)&&(De=Number(100*Ye[T])),{packetsLost:lt,deltaPacketsLost:cr,fractionLost:De}},In=(Ye,Me,ot,Le)=>{if(!Object.prototype.hasOwnProperty.call(Ye,G)||!Object.prototype.hasOwnProperty.call(Ye,I)||!Object.prototype.hasOwnProperty.call(Ye,_))return{percent_packets_lost:ot[Me].percent_packets_lost_in,packetsReceived:ot[Me].total_packets_in,packetsLost:ot[Me].total_packets_lost_in,bytesReceived:ot[Me].total_KBytes_in};const lt=(Number(Ye[G])||0)-(Le?Le[Me].total_packets_in:0),cr=(Number(Ye[I])||0)-(Le?Le[Me].total_packets_lost_in:0),De=cr-ot[Me].total_packets_lost_in,Zt=lt-ot[Me].total_packets_in,Vt=lt!==ot[Me].total_packets_in?100*De/(De+Zt):0,br=Number(Ye[_])/1024-(Le?Le[Me].total_KBytes_in:0),hr=br-ot[Me].total_KBytes_in,Pr=Ye[xe]||Date.now(),Xe=Le?Le.timestamp:null;let Kt=ot.timestamp;!Kt&&Xe&&(Kt=Xe);const Tt=Kt?Pr-Kt:0;return{percentPacketsLost:Vt,packetsReceived:lt,deltaPacketsReceived:Zt,packetsLost:cr,deltaPacketsLost:De,KBytesReceived:br,deltaKBytesReceived:hr,kbsReceived:Tt>0?.008*hr*1024/Tt*1e3:0}},Nn=Ye=>Ye.candidateType!=="relay"?"":Ye.relayProtocol||"",zt=Ye=>Object.prototype.hasOwnProperty.call(Ye,h)&&Object.prototype.hasOwnProperty.call(Ye,S)?{width:Ye[S]||null,height:Ye[h]||null,framerate:Ye.framesPerSecond}:{width:null,height:null,framerate:null};class Mn{constructor(Me,ot){this._callbacks={onStatsCollected:null},this._id=`collector-${ot}`,this._moduleName=this._id,this._probeId=ot,this._config=Me,this._state="idle",this._statsReports=[]}registerCallback(Me,ot,Le){Me in this._callbacks?(this._callbacks[Me]={callback:ot,context:Le},Mt(this._moduleName,`registered callback '${Me}'`)):sn(this._moduleName,`can't register callback for '${Me}' - not found`)}unregisterCallback(Me){Me in this._callbacks?(this._callbacks[Me]=null,delete this._callbacks[Me],Mt(this._moduleName,`unregistered callback '${Me}'`)):sn(this._moduleName,`can't unregister callback for '${Me}' - not found`)}analyze(Me,ot){const Le=(cr=>{const De={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(cr){const Zt={...cr,audio:{},video:{},data:{...cr.data},network:{...cr.network}};return Object.keys(cr.audio).forEach(Vt=>{Zt.audio[Vt]={...cr.audio[Vt]}}),Object.keys(cr.video).forEach(Vt=>{Zt.video[Vt]={...cr.video[Vt]}}),Zt}return{...De,audio:{},video:{},data:{...De.data},network:{...De.network}}})(ot);Le.name=this._config.name,Le.meetingId=this._config.meetingId,Le.peerId=this._config.peerId,Le.count=ot?ot.count+1:1;let lt=null;return Me.forEach(cr=>{!lt&&cr.timestamp&&(lt=cr.timestamp),((De,Zt,Vt,br)=>{if(!De)return[];switch(De[We]){case"candidate-pair":let hr=!1;if(De.nominated&&De.state==="succeeded"&&(hr=!0,Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De),ae in De&&!De[ae]&&(hr=!1)),hr){De.localCandidateId,De.remoteCandidateId;const Xe=((Tt,Ht,Fr)=>{const Nr=(Tt[_]||0)/1024-0,$r=(Tt[x]||0)/1024-0,Sr=Tt[xe]||Date.now(),wr=Nr-Ht.data.total_KBytes_in,Jr=$r-Ht.data.total_KBytes_out;let Jn=Ht.timestamp;const ss=Jn?Sr-Jn:0;return{total_KBytes_received:Nr,total_KBytes_sent:$r,delta_KBytes_received:wr,delta_KBytes_sent:Jr,kbs_speed_received:ss>0?.008*wr*1024/ss*1e3:0,kbs_speed_sent:ss>0?.008*Jr*1024/ss*1e3:0}})(De,Zt),Kt=((Tt=>{Tt.availableIncomingBitrate,Tt.availableOutgoingBitrate})(De),((Tt,Ht,Fr,Nr)=>{if(!Object.prototype.hasOwnProperty.call(Tt,R))return{rtt:null,totalRTT:Nr[Ht].total_rtt_connectivity_ms,totalRTTMeasurements:Nr[Ht].total_rtt_connectivity_measure};const $r=1e3*Number(Tt[R]);let Sr=Nr[Ht].total_rtt_connectivity_ms+$r,wr=Nr[Ht].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(Tt,Se)&&(Sr=1e3*Number(Tt[Se])-0),Object.prototype.hasOwnProperty.call(Tt,ee)&&(wr=Number(Tt[ee])-0),{rtt:$r,totalRTT:Sr,totalRTTMeasurements:wr}})(De,"data",br,Zt));return[{type:dn,value:{total_KBytes_in:Xe.total_KBytes_received}},{type:dn,value:{total_KBytes_out:Xe.total_KBytes_sent}},{type:dn,value:{delta_KBytes_in:Xe.delta_KBytes_received}},{type:dn,value:{delta_KBytes_out:Xe.delta_KBytes_sent}},{type:dn,value:{delta_kbs_in:Xe.kbs_speed_received}},{type:dn,value:{delta_kbs_out:Xe.kbs_speed_sent}},{type:dn,value:{delta_rtt_connectivity_ms:Kt.rtt}}]}break;case"local-candidate":if(De[O]===Zt.network.local_candidate_id)return[{type:Gr,value:{infrastructure:De.networkType}},{type:Gr,value:{local_candidate_protocol:De.protocol||""}},{type:Gr,value:{local_candidate_relay_protocol:Nn(De)}}];break;case y:{Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,m);Kt&&(Kt.timestamp=Zt.timestamp);const Tt=Lr(Xe,br,m);if(Tt&&(Tt.timestamp=br.timestamp),De[L]===yr){const Ht=In(De,yr,Kt,Tt),Fr=Xr(De,yr,Kt),Nr=De[j]||"",$r=((Sr,wr,Jr)=>{const Jn=Number(Sr.concealmentEvents)||0,ss=Jn-(Jr[wr].total_concealment_events||0),Gs=Number(Sr.insertedSamplesForDeceleration)||0,Ys=Gs-(Jr[wr].total_inserted_samples_for_decelaration||0),mi=Number(Sr.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:Jn,deltaConcealmentEvents:ss,totalInsertedSamplesForDecelaration:Gs,deltaInsertedSamplesForDecelaration:Ys,totalRemovedSamplesForAccelaration:mi,deltaRemovedSampleForAccelaration:mi-(Jr[wr].total_removed_samples_for_accelaration||0)}})(De,yr,Kt);return[{ssrc:Xe,type:Dt,value:{codec_id_in:Nr}},{ssrc:Xe,type:Dt,value:{total_packets_in:Ht.packetsReceived}},{ssrc:Xe,type:Dt,value:{delta_packets_in:Ht.deltaPacketsReceived}},{ssrc:Xe,type:Dt,value:{total_packets_lost_in:Ht.packetsLost}},{ssrc:Xe,type:Dt,value:{delta_packets_lost_in:Ht.deltaPacketsLost}},{ssrc:Xe,type:Dt,value:{percent_packets_lost_in:Ht.percentPacketsLost}},{ssrc:Xe,type:Dt,value:{total_KBytes_in:Ht.KBytesReceived}},{ssrc:Xe,type:Dt,value:{delta_KBytes_in:Ht.deltaKBytesReceived}},{ssrc:Xe,type:Dt,value:{delta_kbs_in:Ht.kbsReceived}},{ssrc:Xe,type:Dt,value:{delta_jitter_ms_in:Fr}},{ssrc:Xe,type:Dt,value:{total_concealment_events:$r.totalConcealmentEvents}},{ssrc:Xe,type:Dt,value:{delta_concealment_events:$r.deltaConcealmentEvents}},{ssrc:Xe,type:Dt,value:{total_inserted_samples_for_decelaration:$r.totalInsertedSamplesForDecelaration}},{ssrc:Xe,type:Dt,value:{delta_inserted_samples_for_decelaration:$r.deltaInsertedSamplesForDecelaration}},{ssrc:Xe,type:Dt,value:{total_removed_samples_for_accelaration:$r.totalRemovedSamplesForAccelaration}},{ssrc:Xe,type:Dt,value:{delta_removed_samples_for_accelaration:$r.deltaRemovedSampleForAccelaration}},{ssrc:Xe,type:Dt,value:{track_in:De[er]}},{ssrc:Xe,type:Dt,value:{track_id_in:De[wt]}},{ssrc:Xe,type:Dt,value:{media_source_id:De[Er]}}]}if(De[L]===Ot){((Sr,wr)=>{if(!Object.prototype.hasOwnProperty.call(Sr,Oe)||!Object.prototype.hasOwnProperty.call(Sr,ue))return{delta_ms_decode_frame:wr[Ot].delta_ms_decode_frame_in,frames_decoded:wr[Ot].total_frames_decoded_in,total_decode_time:wr[Ot].total_time_decoded_in};Sr[Oe],Sr[ue],wr[Ot].total_time_decoded_in,wr[Ot].total_frames_decoded_in})(De,Kt);const Ht=In(De,Ot,Kt,Tt),Fr=Xr(De,Ot,Kt),Nr=(De.decoderImplementation,De[j]||null),$r=zt(De);return((Sr,wr,Jr)=>{if(!Object.prototype.hasOwnProperty.call(Sr,$e)||!Object.prototype.hasOwnProperty.call(Sr,Wt))return{pliCount:wr.total_pli_sent_in,nackCount:wr.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};Sr[$e],Jr&&Jr[Ot].total_pli_sent_in,Sr[Wt],Jr&&Jr[Ot].total_nack_sent_in,wr[Ot].total_pli_sent_in,wr[Ot].total_nack_sent_in})(De,Kt,Tt),[{ssrc:Xe,type:Xt,value:{codec_id_in:Nr}},{ssrc:Xe,type:Xt,value:{total_packets_in:Ht.packetsReceived}},{ssrc:Xe,type:Xt,value:{delta_packets_in:Ht.deltaPacketsReceived}},{ssrc:Xe,type:Xt,value:{total_packets_lost_in:Ht.packetsLost}},{ssrc:Xe,type:Xt,value:{delta_packets_lost_in:Ht.deltaPacketsLost}},{ssrc:Xe,type:Xt,value:{percent_packets_lost_in:Ht.percentPacketsLost}},{ssrc:Xe,type:Xt,value:{total_KBytes_in:Ht.KBytesReceived}},{ssrc:Xe,type:Xt,value:{delta_KBytes_in:Ht.deltaKBytesReceived}},{ssrc:Xe,type:Xt,value:{delta_kbs_in:Ht.kbsReceived}},{ssrc:Xe,type:Xt,value:{delta_jitter_ms_in:Fr}},{ssrc:Xe,type:Xt,value:{size_in:$r}},{ssrc:Xe,type:Xt,value:{track_in:De[er]}},{ssrc:Xe,type:Xt,value:{track_id_in:De[wt]}},{ssrc:Xe,type:Xt,value:{media_source_id:De[Er]}},{ssrc:Xe,type:Xt,value:{pause_count:De.pauseCount}},{ssrc:Xe,type:Xt,value:{total_pauses_duration:De.totalPausesDuration}},{ssrc:Xe,type:Xt,value:{freeze_count:De.freezeCount}},{ssrc:Xe,type:Xt,value:{total_freezes_duration:De.totalFreezesDuration}}]}break}case"outbound-rtp":{Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,u);Kt&&(Kt.timestamp=Zt.timestamp);const Tt=Lr(Xe,br,u);if(Tt&&(Tt.timestamp=br.timestamp),De[L]===yr){const Ht=De[j]||null,Fr=Pn(De,yr,Kt,Tt);return[{ssrc:Xe,type:Dt,value:{codec_id_out:Ht}},{ssrc:Xe,type:Dt,value:{total_packets_out:Fr.packetsSent}},{ssrc:Xe,type:Dt,value:{delta_packets_out:Fr.deltaPacketsSent}},{ssrc:Xe,type:Dt,value:{total_KBytes_out:Fr.KBytesSent}},{type:Dt,value:{delta_KBytes_out:Fr.deltaKBytesSent}},{ssrc:Xe,type:Dt,value:{delta_kbs_out:Fr.kbsSent}},{ssrc:Xe,type:Dt,value:{track_out:De[er]}},{ssrc:Xe,type:Dt,value:{track_id_out:De[wt]}},{ssrc:Xe,type:Dt,value:{media_source_id:De[Er]}}]}if(De[L]===Ot){De.encoderImplementation;const Ht=De[j]||null,Fr=(((Sr,wr)=>{if(!Object.prototype.hasOwnProperty.call(Sr,se)||!Object.prototype.hasOwnProperty.call(Sr,Ce))return{delta_ms_encode_frame:wr[Ot].delta_ms_encode_frame_out,frames_encoded:wr[Ot].total_frames_encoded_out,total_encode_time:wr[Ot].total_time_encoded_out};Sr[se],Sr[Ce],wr[Ot].total_time_encoded_out,wr[Ot].total_frames_encoded_out})(De,Kt),zt(De)),Nr=(Sr=>{const wr=Object.prototype.hasOwnProperty.call(Sr,k)?Sr[k]:null,Jr=Object.prototype.hasOwnProperty.call(Sr,N)?Sr[N]:null,Jn=Object.prototype.hasOwnProperty.call(Sr,P)?Sr[P]:null;return Jn&&Object.keys(Jn).forEach(ss=>{Jn[ss]>1e3&&(Jn[ss]=Number(Jn[ss]/1e3))}),{reason:wr,durations:Jn,resolutionChanges:Jr}})(De),$r=(((Sr,wr,Jr)=>{if(!Object.prototype.hasOwnProperty.call(Sr,$e)||!Object.prototype.hasOwnProperty.call(Sr,Wt))return{pliCount:wr.total_pli_received_out,nackCount:wr.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};Sr[$e],Jr&&Jr[Ot].total_pli_received_out,Sr[Wt],Jr&&Jr[Ot].total_nack_received_out,wr[Ot].total_pli_received_out,wr[Ot].total_nack_received_out})(De,Kt,Tt),Pn(De,Ot,Kt,Tt));return[{ssrc:Xe,type:Xt,value:{codec_id_out:Ht}},{ssrc:Xe,type:Xt,value:{total_packets_out:$r.packetsSent}},{ssrc:Xe,type:Xt,value:{delta_packets_out:$r.deltaPacketsSent}},{ssrc:Xe,type:Xt,value:{total_KBytes_out:$r.KBytesSent}},{ssrc:Xe,type:Xt,value:{delta_KBytes_out:$r.deltaKBytesSent}},{ssrc:Xe,type:Xt,value:{delta_kbs_out:$r.kbsSent}},{ssrc:Xe,type:Xt,value:{size_out:Fr}},{ssrc:Xe,type:Xt,value:{limitation_out:Nr}},{ssrc:Xe,type:Xt,value:{track_out:De[er]}},{ssrc:Xe,type:Xt,value:{track_id_out:De[wt]}},{ssrc:Xe,type:Xt,value:{media_source_id:De[Er]}}]}break}case"media-source":{Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Xe=[];return Object.keys(Zt[yr]).forEach(Kt=>{const Tt=Zt[yr][Kt];if(Tt.media_source_id===De[O]){var Ht=De[wt];Xe.push({ssrc:Tt.ssrc,type:Dt,value:{track_id_out:Ht}})}}),Object.keys(Zt[Ot]).forEach(Kt=>{const Tt=Zt[Ot][Kt];if(Tt.media_source_id===De[O]){var Ht=De[wt];Xe.push({ssrc:Tt.ssrc,type:Xt,value:{track_id_out:Ht}})}}),Xe}case"track":{Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Xe=[];return Object.keys(Zt[yr]).forEach(Kt=>{const Tt=Zt[yr][Kt];if(Tt.track_in===De[O]||Tt.track_out===De[O]){Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);var Ht=De[wt];De[O]===Tt.track_in?Xe.push({ssrc:Tt.ssrc,type:Dt,value:{track_id_in:Ht}}):Xe.push({ssrc:Tt.ssrc,type:Dt,value:{track_id_out:Ht}})}}),Object.keys(Zt[Ot]).forEach(Kt=>{const Tt=Zt[Ot][Kt];if(Tt.track_in===De[O]||Tt.track_out===De[O]){Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);var Ht=De[wt];De[O]===Tt.track_in?Xe.push({ssrc:Tt.ssrc,type:Xt,value:{track_id_in:Ht}}):Xe.push({ssrc:Tt.ssrc,type:Xt,value:{track_id_out:Ht}})}}),Xe}case"codec":const Pr=[];return Object.keys(Zt[yr]).forEach(Xe=>{const Kt=Zt[yr][Xe];if(Kt.codec_id_in===De[O]||Kt.codec_id_out===De[O]){Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Tt=(Ht=>({channels:Ht.channels||null,clock_rate:Ht[E]||null,mime_type:Ht[M]||null,sdp_fmtp_line:Ht.sdpFmtpLine||null}))(De);De[O]===Kt.codec_id_in?Pr.push({ssrc:Kt.ssrc,type:Dt,value:{codec_in:Tt}}):Pr.push({ssrc:Kt.ssrc,type:Dt,value:{codec_out:Tt}})}}),Object.keys(Zt[Ot]).forEach(Xe=>{const Kt=Zt[Ot][Xe];if(Kt.codec_id_in===De[O]||Kt.codec_id_out===De[O]){Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Tt=(Ht=>({clock_rate:Ht[E]||null,mime_type:Ht[M]||null}))(De);De[O]===Kt.codec_id_in?Pr.push({ssrc:Kt.ssrc,type:Xt,value:{codec_in:Tt}}):Pr.push({ssrc:Kt.ssrc,type:Xt,value:{codec_out:Tt}})}}),Pr;case"remote-inbound-rtp":{Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,u),Tt=Lr(Xe,br,u);if(De[L]===yr){const Ht=_n(De,yr,Tt,Kt),Fr=Xr(De,yr,Kt),Nr=Sn(De,yr,Kt,Tt);return[{ssrc:Xe,type:Dt,value:{delta_rtt_ms_out:Ht.rtt}},{ssrc:Xe,type:Dt,value:{delta_jitter_ms_out:Fr}},{ssrc:Xe,type:Dt,value:{timestamp_out:De[xe]}},{ssrc:Xe,type:Dt,value:{total_packets_lost_out:Nr.packetsLost}},{ssrc:Xe,type:Dt,value:{delta_packets_lost_out:Nr.deltaPacketsLost}},{ssrc:Xe,type:Dt,value:{percent_packets_lost_out:Nr.fractionLost}}]}if(De[L]===Ot){const Ht=_n(De,Ot,Tt,Kt),Fr=Xr(De,Ot,Kt),Nr=Sn(De,Ot,Kt,Tt);return[{ssrc:Xe,type:Xt,value:{delta_rtt_ms_out:Ht.rtt}},{ssrc:Xe,type:Xt,value:{delta_jitter_ms_out:Fr}},{ssrc:Xe,type:Xt,value:{timestamp_out:De[xe]}},{ssrc:Xe,type:Xt,value:{total_packets_lost_out:Nr.packetsLost}},{ssrc:Xe,type:Xt,value:{delta_packets_lost_out:Nr.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Mt(zr,`analyze() - got stats ${De[We]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,u),Tt=Lr(Xe,br,u);if(De[L]===yr){const Ht=_n(De,yr,Tt,Kt);return[{ssrc:Xe,type:Dt,value:{delta_rtt_ms_in:Ht.rtt}},{ssrc:Xe,type:Dt,value:{timestamp_in:De[xe]}}]}break}}return[]})(cr,Le,Le.name,null).forEach(De=>{if(De.value&&De.type)if(De.ssrc){let br=Le[De.type][De.ssrc];br||(Zt=De.type,Vt=cr.type,br=Zt===yr?Vt===y?{...b}:{...f}:Vt===y?{...w}:{...g},br.ssrc=De.ssrc,Le[De.type][De.ssrc]=br),Object.keys(De.value).forEach(hr=>{De.value[hr]!==void 0&&(br[hr]=De.value[hr])})}else Object.keys(De.value).forEach(br=>{De.value[br]!==void 0&&(Le[De.type][br]=De.value[br])});var Zt,Vt})}),Le.timestamp=lt,Le}async collectStats(){try{const Me=await this._config.monitoringObject.getStats(),ot=this.analyze(Me,this._statsReports.slice().pop()||null);return this._statsReports.push(ot),this.fireOnStatsCollected(ot),Me}catch(Me){return sn(this._moduleName,`got error ${Me}`),null}}fireOnStatsCollected(Me){if(this._callbacks.onStatsCollected){const ot={};ot.meetingId=Me.meetingId,ot.peerId=Me.peerId,ot.name=Me.name,ot.audio=[],ot.video=[],Object.values(Me.audio).forEach(Le=>{const lt={};if(lt.network=nn[Me.network.infrastructure],lt.timestamp=Me.timestamp,Le.direction==m){lt.codec=Le.codec_in.mime_type,lt.jitter=Le.delta_jitter_ms_in,lt.bitrate=Le.delta_kbs_in,lt.packetsLost=Le.delta_packets_lost_in,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_in,lt.concealmentEvents=Le.delta_concealment_events,lt.removedSampleForAccelaration=Le.delta_removed_samples_for_accelaration,lt.insertedSamplesForDecelaration=Le.delta_inserted_samples_for_decelaration;const cr=JSON.stringify(Le.track_id_in).replace(/[{}"]/g,"");lt.trackId=cr}else Le.direction==u&&(lt.codec=Le.codec_out.mime_type,lt.jitter=Le.delta_jitter_ms_out,lt.bitrate=Le.delta_kbs_out,lt.packetsLost=Le.delta_packets_lost_out,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_out,lt.trackId=Le.track_id_out);ot.audio.push(lt)}),Object.values(Me.video).forEach(Le=>{const lt={};if(lt.network=nn[Me.network.infrastructure],lt.timestamp=Me.timestamp,Le.direction==m){lt.codec=Le.codec_in.mime_type,lt.jitter=Le.delta_jitter_ms_in,lt.bitrate=Le.delta_kbs_in,lt.packetsLost=Le.delta_packets_lost_in,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_in,lt.size=Le.size_in,lt.pauseCount=Le.pause_count,lt.totalPausesDuration=Le.total_pauses_duration,lt.freezeCount=Le.freeze_count,lt.totalFreezesDuration=Le.total_freezes_duration;const cr=JSON.stringify(Le.track_id_in).replace(/[{}"]/g,"");lt.trackId=cr}else Le.direction==u&&(lt.codec=Le.codec_out.mime_type,lt.jitter=Le.delta_jitter_ms_out,lt.bitrate=Le.delta_kbs_out,lt.packetsLost=Le.delta_packets_lost_out,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_out,lt.limitation=Le.limitation_out,lt.size=Le.size_out,lt.trackId=Le.track_id_out);ot.video.push(lt)}),this._callbacks.onStatsCollected.callback(ot)}}}class ns{constructor(Me){this._id=Me.name&&Me.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=Me,this._collector=new Mn(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?pn("Probe already started."):(Mt(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Mt(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Mt(this._moduleName,"Probe Stopped")):pn("Probe not running, Please start first.")}set onStatsCollected(Me){Me?this._collector.registerCallback("onStatsCollected",Me):this._collector.unregisterCallback("onStatsCollected")}}const hn={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class or{constructor(Me){var ot;this._config={defaultConfig:hn,...Me},this._probes=[],ot=this._config.verbose||!1,Mr.setLevel(ot?Mr.levels.TRACE:Mr.levels.INFO),Mt("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(Me,ot){if(!Me)throw new Error("undefined monitoring object");const Le={monitoringObject:Me,...ot,...this._config},lt=new ns(Le);return this._probes.push(lt),lt}removeExistingProbe(Me){if(!Me)throw new Error("undefined probe");Me.stop(),this._probes=this._probes.filter(ot=>Me.id!==ot.id)}getProbe(Me){for(let ot of this.probes)if(ot.id==Me)return ot}startAllProbes(){this._probes.forEach((Me,ot)=>{Me.start()})}stopAllProbes(){this._probes.forEach(Me=>Me.stop())}}})(),v})()},5458:(l,d,o)=>{o.d(d,{A:()=>m});var p=o(3145),v=o(7800);function m(u){return function(b){if(Array.isArray(b))return(0,p.A)(b)}(u)||function(b){if(typeof Symbol<"u"&&b[Symbol.iterator]!=null||b["@@iterator"]!=null)return Array.from(b)}(u)||(0,v.A)(u)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(l,d,o){var p,v,m,u,b,f,w,g;l.exports=(g=o(9021),v=(p=g).lib,m=v.WordArray,u=v.Hasher,b=p.algo,f=[],w=b.SHA1=u.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,_){for(var x=this._hash.words,E=x[0],j=x[1],R=x[2],C=x[3],T=x[4],h=0;h<80;h++){if(h<16)f[h]=0|y[_+h];else{var S=f[h-3]^f[h-8]^f[h-14]^f[h-16];f[h]=S<<1|S>>>31}var k=(E<<5|E>>>27)+T+f[h];k+=h<20?1518500249+(j&R|~j&C):h<40?1859775393+(j^R^C):h<60?(j&R|j&C|R&C)-1894007588:(j^R^C)-899497514,T=C,C=R,R=j<<30|j>>>2,j=E,E=k}x[0]=x[0]+E|0,x[1]=x[1]+j|0,x[2]=x[2]+R|0,x[3]=x[3]+C|0,x[4]=x[4]+T|0},_doFinalize:function(){var y=this._data,_=y.words,x=8*this._nDataBytes,E=8*y.sigBytes;return _[E>>>5]|=128<<24-E%32,_[14+(E+64>>>9<<4)]=Math.floor(x/4294967296),_[15+(E+64>>>9<<4)]=x,y.sigBytes=4*_.length,this._process(),this._hash},clone:function(){var y=u.clone.call(this);return y._hash=this._hash.clone(),y}}),p.SHA1=u._createHelper(w),p.HmacSHA1=u._createHmacHelper(w),g.SHA1)},5501:(l,d,o)=>{o.d(d,{A:()=>v});var p=o(3662);function v(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),u&&(0,p.A)(m,u)}},5503:function(l,d,o){var p;l.exports=(p=o(9021),function(){var v=p,m=v.lib.WordArray,u=v.enc;function b(f){return f<<8&4278255360|f>>>8&16711935}u.Utf16=u.Utf16BE={stringify:function(f){for(var w=f.words,g=f.sigBytes,y=[],_=0;_<g;_+=2){var x=w[_>>>2]>>>16-_%4*8&65535;y.push(String.fromCharCode(x))}return y.join("")},parse:function(f){for(var w=f.length,g=[],y=0;y<w;y++)g[y>>>1]|=f.charCodeAt(y)<<16-y%2*16;return m.create(g,2*w)}},u.Utf16LE={stringify:function(f){for(var w=f.words,g=f.sigBytes,y=[],_=0;_<g;_+=2){var x=b(w[_>>>2]>>>16-_%4*8&65535);y.push(String.fromCharCode(x))}return y.join("")},parse:function(f){for(var w=f.length,g=[],y=0;y<w;y++)g[y>>>1]|=b(f.charCodeAt(y)<<16-y%2*16);return m.create(g,2*w)}}}(),p.enc.Utf16)},5535:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Chrome70=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),w=o(521),g=o(1305),y=o(3303),_=new v.Logger("Chrome70"),x={OS:1024,MIS:1024};class E extends w.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new E}get name(){return"Chrome70"}close(){if(_.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{C.addTransceiver("audio"),C.addTransceiver("video");const T=await C.createOffer();try{C.close()}catch{}const h=p.parse(T.sdp);return b.extractRtpCapabilities({sdpObject:h})}catch(T){try{C.close()}catch{}throw T}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:C,iceParameters:T,iceCandidates:h,dtlsParameters:S,sctpParameters:k,iceServers:P,iceTransportPolicy:N,additionalSettings:O,proprietaryConstraints:D,extendedRtpCapabilities:L}){_.debug("run()"),this._direction=C,this._remoteSdp=new g.RemoteSdp({iceParameters:T,iceCandidates:h,dtlsParameters:S,sctpParameters:k}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",L),video:u.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",L),video:u.getSendingRemoteRtpParameters("video",L)},S.role&&S.role!=="auto"&&(this._forcedLocalDtlsRole=S.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...O},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){_.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=C,this._pc.setConfiguration(T)}async restartIce(C){if(_.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const h={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:T,codecOptions:h,codec:S}){this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",C.kind,C.id);const k=m.clone(this._sendingRtpParametersByKind[C.kind]);k.codecs=u.reduceCodecs(k.codecs,S);const P=m.clone(this._sendingRemoteRtpParametersByKind[C.kind]);P.codecs=u.reduceCodecs(P.codecs,S);const N=this._remoteSdp.getNextMediaSectionIdx(),O=this._pc.addTransceiver(C,{direction:"sendonly",streams:[this._sendStream]});let D,L=await this._pc.createOffer(),M=p.parse(L.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),T&&T.length>1&&(_.debug("send() | enabling legacy simulcast"),M=p.parse(L.sdp),D=M.media[N.idx],f.addLegacySimulcast({offerMediaObject:D,numStreams:T.length}),L={type:"offer",sdp:p.write(M)});let I=!1;const G=(0,y.parse)((T??[{}])[0].scalabilityMode);if(T&&T.length===1&&G.spatialLayers>1&&k.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(_.debug("send() | enabling legacy simulcast for VP9 SVC"),I=!0,M=p.parse(L.sdp),D=M.media[N.idx],f.addLegacySimulcast({offerMediaObject:D,numStreams:G.spatialLayers}),L={type:"offer",sdp:p.write(M)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),T){_.debug("send() | applying given encodings");const Q=O.sender.getParameters();for(let ae=0;ae<(Q.encodings??[]).length;++ae){const xe=Q.encodings[ae],Se=T[ae];if(!Se)break;Q.encodings[ae]=Object.assign(xe,Se)}await O.sender.setParameters(Q)}const de=O.mid;if(k.mid=de,M=p.parse(this._pc.localDescription.sdp),D=M.media[N.idx],k.rtcp.cname=b.getCname({offerMediaObject:D}),k.encodings=f.getRtpEncodings({offerMediaObject:D}),T)for(let Q=0;Q<k.encodings.length;++Q)T[Q]&&Object.assign(k.encodings[Q],T[Q]);if(I&&(k.encodings=[k.encodings[0]]),k.encodings.length>1&&(k.codecs[0].mimeType.toLowerCase()==="video/vp8"||k.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Q of k.encodings)Q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:D,reuseMid:N.reuseMid,offerRtpParameters:k,answerRtpParameters:P,codecOptions:h});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return _.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(de,O),{localId:de,rtpParameters:k,rtpSender:O.sender}}async stopSending(C){this.assertSendDirection(),_.debug("stopSending() [localId:%s]",C);const T=this._mapMidTransceiver.get(C);if(!T)throw new Error("associated RTCRtpTransceiver not found");if(T.sender.replaceTrack(null),this._pc.removeTrack(T.sender),this._remoteSdp.closeMediaSection(T.mid))try{T.stop()}catch{}const h=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const S={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.delete(C)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,T){this.assertSendDirection(),T?_.debug("replaceTrack() [localId:%s, track.id:%s]",C,T.id):_.debug("replaceTrack() [localId:%s, no track]",C);const h=this._mapMidTransceiver.get(C);if(!h)throw new Error("associated RTCRtpTransceiver not found");await h.sender.replaceTrack(T)}async setMaxSpatialLayer(C,T){this.assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,T);const h=this._mapMidTransceiver.get(C);if(!h)throw new Error("associated RTCRtpTransceiver not found");const S=h.sender.getParameters();S.encodings.forEach((N,O)=>{N.active=O<=T}),await h.sender.setParameters(S),this._remoteSdp.muxMediaSectionSimulcast(C,S.encodings);const k=await this._pc.createOffer();_.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(C,T){this.assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,T);const h=this._mapMidTransceiver.get(C);if(!h)throw new Error("associated RTCRtpTransceiver not found");const S=h.sender.getParameters();S.encodings.forEach((N,O)=>{S.encodings[O]={...N,...T}}),await h.sender.setParameters(S),this._remoteSdp.muxMediaSectionSimulcast(C,S.encodings);const k=await this._pc.createOffer();_.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(C){this.assertSendDirection();const T=this._mapMidTransceiver.get(C);if(!T)throw new Error("associated RTCRtpTransceiver not found");return T.sender.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:T,maxRetransmits:h,label:S,protocol:k}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:h,protocol:k};_.debug("sendDataChannel() [options:%o]",P);const N=this._pc.createDataChannel(S,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),D=p.parse(O.sdp),L=D.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const M={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(C){this.assertRecvDirection();const T=[],h=new Map;for(const N of C){const{trackId:O,kind:D,rtpParameters:L,streamId:M}=N;_.debug("receive() [trackId:%s, kind:%s]",O,D);const I=L.mid??String(this._mapMidTransceiver.size);h.set(O,I),this._remoteSdp.receive({mid:I,kind:D,offerRtpParameters:L,streamId:M??L.rtcp.cname,trackId:O})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);let k=await this._pc.createAnswer();const P=p.parse(k.sdp);for(const N of C){const{trackId:O,rtpParameters:D}=N,L=h.get(O),M=P.media.find(I=>String(I.mid)===L);b.applyCodecParameters({offerRtpParameters:D,answerMediaObject:M})}k={type:"answer",sdp:p.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const N of C){const{trackId:O}=N,D=h.get(O),L=this._pc.getTransceivers().find(M=>M.mid===D);if(!L)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(D,L),T.push({localId:D,track:L.receiver.track,rtpReceiver:L.receiver})}return T}async stopReceiving(C){this.assertRecvDirection();for(const S of C){_.debug("stopReceiving() [localId:%s]",S);const k=this._mapMidTransceiver.get(S);if(!k)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(k.mid)}const T={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h);for(const S of C)this._mapMidTransceiver.delete(S)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){this.assertRecvDirection();const T=this._mapMidTransceiver.get(C);if(!T)throw new Error("associated RTCRtpTransceiver not found");return T.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:C,label:T,protocol:h}){this.assertRecvDirection();const{streamId:S,ordered:k,maxPacketLifeTime:P,maxRetransmits:N}=C,O={negotiated:!0,id:S,ordered:k,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:N,protocol:h};_.debug("receiveDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(T,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const L={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const M=await this._pc.createAnswer();if(!this._transportReady){const I=p.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:C,localSdpObject:T}){T||(T=p.parse(this._pc.localDescription.sdp));const h=b.extractDtlsParameters({sdpObject:T});h.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((S,k)=>{this.safeEmit("@connect",{dtlsParameters:h},S,k)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Chrome70=E},5544:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.extractRtpCapabilities=function({sdpObject:v}){const m=new Map,u=[];let b=!1,f=!1;for(const w of v.media){const g=w.type;switch(g){case"audio":if(b)continue;b=!0;break;case"video":if(f)continue;f=!0;break;default:continue}for(const y of w.rtp){const _={kind:g,mimeType:`${g}/${y.codec}`,preferredPayloadType:y.payload,clockRate:y.rate,channels:y.encoding,parameters:{},rtcpFeedback:[]};m.set(_.preferredPayloadType,_)}for(const y of w.fmtp??[]){const _=p.parseParams(y.config),x=m.get(y.payload);x&&(_!=null&&_.hasOwnProperty("profile-level-id")&&(_["profile-level-id"]=String(_["profile-level-id"])),x.parameters=_)}for(const y of w.rtcpFb??[]){const _={type:y.type,parameter:y.subtype};if(_.parameter||delete _.parameter,y.payload!=="*"){const x=m.get(y.payload);if(!x)continue;x.rtcpFeedback.push(_)}else for(const x of m.values())x.kind!==g||/.+\/rtx$/i.test(x.mimeType)||x.rtcpFeedback.push(_)}for(const y of w.ext??[]){if(y["encrypt-uri"])continue;const _={kind:g,uri:y.uri,preferredId:y.value};u.push(_)}}return{codecs:Array.from(m.values()),headerExtensions:u}},d.extractDtlsParameters=function({sdpObject:v}){let m,u=v.setup,b=v.fingerprint;if(!u||!b){const f=(v.media??[]).find(w=>w.port!==0);f&&(u??(u=f.setup),b??(b=f.fingerprint))}if(!u)throw new Error("no a=setup found at SDP session or media level");if(!b)throw new Error("no a=fingerprint found at SDP session or media level");switch(u){case"active":m="client";break;case"passive":m="server";break;case"actpass":m="auto"}return{role:m,fingerprints:[{algorithm:b.type,value:b.hash}]}},d.getCname=function({offerMediaObject:v}){const m=(v.ssrcs??[]).find(u=>u.attribute==="cname");return m?m.value:""},d.applyCodecParameters=function({offerRtpParameters:v,answerMediaObject:m}){for(const u of v.codecs){const b=u.mimeType.toLowerCase();if(b!=="audio/opus"||!(m.rtp??[]).find(g=>g.payload===u.payloadType))continue;m.fmtp=m.fmtp??[];let f=m.fmtp.find(g=>g.payload===u.payloadType);f||(f={payload:u.payloadType,config:""},m.fmtp.push(f));const w=p.parseParams(f.config);switch(b){case"audio/opus":{const g=u.parameters["sprop-stereo"];g!==void 0&&(w.stereo=Number(g)?1:0);break}}f.config="";for(const g of Object.keys(w))f.config&&(f.config+=";"),f.config+=`${g}=${w[g]}`}};const p=o(7363)},5601:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Transport=void 0;const p=o(8876),v=o(2994),m=o(3953),u=o(4893),b=o(1765),f=o(8046),w=o(9792),g=o(3518),y=o(7504),_=o(9166),x=new v.Logger("Transport");class E{constructor(C){we(this,"consumerOptions");we(this,"promise");we(this,"resolve");we(this,"reject");this.consumerOptions=C,this.promise=new Promise((T,h)=>{this.resolve=T,this.reject=h})}}class j extends m.EnhancedEventEmitter{constructor({direction:T,id:h,iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N,iceServers:O,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,appData:I,handlerFactory:G,extendedRtpCapabilities:de,canProduceByKind:ee}){super();we(this,"_id");we(this,"_closed",!1);we(this,"_direction");we(this,"_extendedRtpCapabilities");we(this,"_canProduceByKind");we(this,"_maxSctpMessageSize");we(this,"_handler");we(this,"_iceGatheringState","new");we(this,"_connectionState","new");we(this,"_appData");we(this,"_producers",new Map);we(this,"_consumers",new Map);we(this,"_dataProducers",new Map);we(this,"_dataConsumers",new Map);we(this,"_probatorConsumerCreated",!1);we(this,"_awaitQueue",new p.AwaitQueue);we(this,"_pendingConsumerTasks",[]);we(this,"_consumerCreationInProgress",!1);we(this,"_pendingPauseConsumers",new Map);we(this,"_consumerPauseInProgress",!1);we(this,"_pendingResumeConsumers",new Map);we(this,"_consumerResumeInProgress",!1);we(this,"_pendingCloseConsumers",new Map);we(this,"_consumerCloseInProgress",!1);we(this,"_observer",new m.EnhancedEventEmitter);x.debug("constructor() [id:%s, direction:%s]",h,T),this._id=h,this._direction=T,this._extendedRtpCapabilities=de,this._canProduceByKind=ee,this._maxSctpMessageSize=N?N.maxMessageSize:null;const Q=b.clone(L)??{};delete Q.iceServers,delete Q.iceTransportPolicy,delete Q.bundlePolicy,delete Q.rtcpMuxPolicy,delete Q.sdpSemantics,this._handler=G(),this._handler.run({direction:T,iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N,iceServers:O,iceTransportPolicy:D,additionalSettings:Q,proprietaryConstraints:M,extendedRtpCapabilities:de}),this._appData=I??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(T){this._appData=T}get observer(){return this._observer}close(){if(!this._closed){x.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const T of this._producers.values())T.transportClosed();this._producers.clear();for(const T of this._consumers.values())T.transportClosed();this._consumers.clear();for(const T of this._dataProducers.values())T.transportClosed();this._dataProducers.clear();for(const T of this._dataConsumers.values())T.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new u.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:T}){if(x.debug("restartIce()"),this._closed)throw new u.InvalidStateError("closed");if(!T)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(T),"transport.restartIce()")}async updateIceServers({iceServers:T}={}){if(x.debug("updateIceServers()"),this._closed)throw new u.InvalidStateError("closed");if(!Array.isArray(T))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(T),"transport.updateIceServers()")}async produce({track:T,encodings:h,codecOptions:S,codec:k,stopTracks:P=!0,disableTrackOnPause:N=!0,zeroRtpOnPause:O=!1,onRtpSender:D,appData:L={}}={}){if(x.debug("produce() [track:%o]",T),this._closed)throw new u.InvalidStateError("closed");if(!T)throw new TypeError("missing track");if(this._direction!=="send")throw new u.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[T.kind])throw new u.UnsupportedError(`cannot produce ${T.kind}`);if(T.readyState==="ended")throw new u.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let M;if(h&&!Array.isArray(h))throw TypeError("encodings must be an array");h&&h.length===0?M=void 0:h&&(M=h.map(ee=>{const Q={active:!0};return ee.active===!1&&(Q.active=!1),typeof ee.dtx=="boolean"&&(Q.dtx=ee.dtx),typeof ee.scalabilityMode=="string"&&(Q.scalabilityMode=ee.scalabilityMode),typeof ee.scaleResolutionDownBy=="number"&&(Q.scaleResolutionDownBy=ee.scaleResolutionDownBy),typeof ee.maxBitrate=="number"&&(Q.maxBitrate=ee.maxBitrate),typeof ee.maxFramerate=="number"&&(Q.maxFramerate=ee.maxFramerate),typeof ee.adaptivePtime=="boolean"&&(Q.adaptivePtime=ee.adaptivePtime),typeof ee.priority=="string"&&(Q.priority=ee.priority),typeof ee.networkPriority=="string"&&(Q.networkPriority=ee.networkPriority),Q}));const{localId:I,rtpParameters:G,rtpSender:de}=await this._handler.send({track:T,encodings:M,codecOptions:S,codec:k,onRtpSender:D});try{f.validateRtpParameters(G);const{id:ee}=await new Promise((ae,xe)=>{this.safeEmit("produce",{kind:T.kind,rtpParameters:G,appData:L},ae,xe)}),Q=new w.Producer({id:ee,localId:I,rtpSender:de,track:T,rtpParameters:G,stopTracks:P,disableTrackOnPause:N,zeroRtpOnPause:O,appData:L});return this._producers.set(Q.id,Q),this.handleProducer(Q),this._observer.safeEmit("newproducer",Q),Q}catch(ee){throw this._handler.stopSending(I).catch(()=>{}),ee}},"transport.produce()").catch(M=>{if(P)try{T.stop()}catch{}throw M})}async consume({id:T,producerId:h,kind:S,rtpParameters:k,streamId:P,onRtpReceiver:N,appData:O={}}){if(x.debug("consume()"),this._closed)throw new u.InvalidStateError("closed");if(this._direction!=="recv")throw new u.UnsupportedError("not a receiving Transport");if(typeof T!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing producerId");if(S!=="audio"&&S!=="video")throw new TypeError(`invalid kind '${S}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(O&&typeof O!="object")throw new TypeError("if given, appData must be an object");const D=b.clone(k);if(!f.canReceive(D,this._extendedRtpCapabilities))throw new u.UnsupportedError("cannot consume this Producer");const L=new E({id:T,producerId:h,kind:S,rtpParameters:D,streamId:P,onRtpReceiver:N,appData:O});return this._pendingConsumerTasks.push(L),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),L.promise}async produceData({ordered:T=!0,maxPacketLifeTime:h,maxRetransmits:S,label:k="",protocol:P="",appData:N={}}={}){if(x.debug("produceData()"),this._closed)throw new u.InvalidStateError("closed");if(this._direction!=="send")throw new u.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new u.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(N&&typeof N!="object")throw new TypeError("if given, appData must be an object");return(h||S)&&(T=!1),this._awaitQueue.push(async()=>{const{dataChannel:O,sctpStreamParameters:D}=await this._handler.sendDataChannel({ordered:T,maxPacketLifeTime:h,maxRetransmits:S,label:k,protocol:P});f.validateSctpStreamParameters(D);const{id:L}=await new Promise((I,G)=>{this.safeEmit("producedata",{sctpStreamParameters:D,label:k,protocol:P,appData:N},I,G)}),M=new y.DataProducer({id:L,dataChannel:O,sctpStreamParameters:D,appData:N});return this._dataProducers.set(M.id,M),this.handleDataProducer(M),this._observer.safeEmit("newdataproducer",M),M},"transport.produceData()")}async consumeData({id:T,dataProducerId:h,sctpStreamParameters:S,label:k="",protocol:P="",appData:N={}}){if(x.debug("consumeData()"),this._closed)throw new u.InvalidStateError("closed");if(this._direction!=="recv")throw new u.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new u.UnsupportedError("SCTP not enabled by remote Transport");if(typeof T!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(N&&typeof N!="object")throw new TypeError("if given, appData must be an object");const O=b.clone(S);return f.validateSctpStreamParameters(O),this._awaitQueue.push(async()=>{const{dataChannel:D}=await this._handler.receiveDataChannel({sctpStreamParameters:O,label:k,protocol:P}),L=new _.DataConsumer({id:T,dataProducerId:h,dataChannel:D,sctpStreamParameters:O,appData:N});return this._dataConsumers.set(L.id,L),this.handleDataConsumer(L),this._observer.safeEmit("newdataconsumer",L),L},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void x.debug("createPendingConsumers() | there is no Consumer to be created");const T=[...this._pendingConsumerTasks];let h;this._pendingConsumerTasks=[];const S=[];for(const k of T){const{id:P,kind:N,rtpParameters:O,streamId:D,onRtpReceiver:L}=k.consumerOptions;S.push({trackId:P,kind:N,rtpParameters:O,streamId:D,onRtpReceiver:L})}try{const k=await this._handler.receive(S);for(let P=0;P<k.length;++P){const N=T[P],O=k[P],{id:D,producerId:L,kind:M,rtpParameters:I,appData:G}=N.consumerOptions,{localId:de,rtpReceiver:ee,track:Q}=O,ae=new g.Consumer({id:D,localId:de,producerId:L,rtpReceiver:ee,track:Q,rtpParameters:I,appData:G});this._consumers.set(ae.id,ae),this.handleConsumer(ae),this._probatorConsumerCreated||h||M!=="video"||(h=ae),this._observer.safeEmit("newconsumer",ae),N.resolve(ae)}}catch(k){for(const P of T)P.reject(k)}if(h)try{const k=f.generateProbatorRtpParameters(h.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:k}]),x.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(k){x.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",k)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void x.debug("pausePendingConsumers() | there is no Consumer to be paused");const T=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const h=T.map(S=>S.localId);await this._handler.pauseReceiving(h)}catch(h){x.error("pausePendingConsumers() | failed to pause Consumers:",h)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void x.debug("resumePendingConsumers() | there is no Consumer to be resumed");const T=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const h=T.map(S=>S.localId);await this._handler.resumeReceiving(h)}catch(h){x.error("resumePendingConsumers() | failed to resume Consumers:",h)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void x.debug("closePendingConsumers() | there is no Consumer to be closed");const T=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(T.map(h=>h.localId))}catch(h){x.error("closePendingConsumers() | failed to close Consumers:",h)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const T=this._handler;T.on("@connect",({dtlsParameters:h},S,k)=>{this._closed?k(new u.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:h},S,k)}),T.on("@icegatheringstatechange",h=>{h!==this._iceGatheringState&&(x.debug("ICE gathering state changed to %s",h),this._iceGatheringState=h,this._closed||this.safeEmit("icegatheringstatechange",h))}),T.on("@icecandidateerror",h=>{x.warn(`ICE candidate error [url:${h.url}, localAddress:${h.address}, localPort:${h.port}]: ${h.errorCode} "${h.errorText}"`),this.safeEmit("icecandidateerror",h)}),T.on("@connectionstatechange",h=>{h!==this._connectionState&&(x.debug("connection state changed to %s",h),this._connectionState=h,this._closed||this.safeEmit("connectionstatechange",h))})}handleProducer(T){T.on("@close",()=>{this._producers.delete(T.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(T.localId),"producer @close event").catch(h=>x.warn("producer.close() failed:%o",h))}),T.on("@pause",(h,S)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(T.localId),"producer @pause event").then(h).catch(S)}),T.on("@resume",(h,S)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(T.localId),"producer @resume event").then(h).catch(S)}),T.on("@replacetrack",(h,S,k)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(T.localId,h),"producer @replacetrack event").then(S).catch(k)}),T.on("@setmaxspatiallayer",(h,S,k)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(T.localId,h),"producer @setmaxspatiallayer event").then(S).catch(k)}),T.on("@setrtpencodingparameters",(h,S,k)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(T.localId,h),"producer @setrtpencodingparameters event").then(S).catch(k)}),T.on("@getstats",(h,S)=>{if(this._closed)return S(new u.InvalidStateError("closed"));this._handler.getSenderStats(T.localId).then(h).catch(S)})}handleConsumer(T){T.on("@close",()=>{this._consumers.delete(T.id),this._pendingPauseConsumers.delete(T.id),this._pendingResumeConsumers.delete(T.id),this._closed||(this._pendingCloseConsumers.set(T.id,T),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),T.on("@pause",()=>{this._pendingResumeConsumers.has(T.id)&&this._pendingResumeConsumers.delete(T.id),this._pendingPauseConsumers.set(T.id,T),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),T.on("@resume",()=>{this._pendingPauseConsumers.has(T.id)&&this._pendingPauseConsumers.delete(T.id),this._pendingResumeConsumers.set(T.id,T),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),T.on("@getstats",(h,S)=>{if(this._closed)return S(new u.InvalidStateError("closed"));this._handler.getReceiverStats(T.localId).then(h).catch(S)})}handleDataProducer(T){T.on("@close",()=>{this._dataProducers.delete(T.id)})}handleDataConsumer(T){T.on("@close",()=>{this._dataConsumers.delete(T.id)})}}d.Transport=j},5602:l=>{var d=l.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(o){return o.encoding?"rtpmap:%d %s/%s/%s":o.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(o){return o.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(o){return o.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(o){return"extmap:%d"+(o.direction?"/%s":"%v")+(o["encrypt-uri"]?" %s":"%v")+" %s"+(o.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(o){return o.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(o){var p="candidate:%s %d %s %d %s %d typ %s";return p+=o.raddr!=null?" raddr %s rport %d":"%v%v",p+=o.tcptype!=null?" tcptype %s":"%v",o.generation!=null&&(p+=" generation %d"),p+=o["network-id"]!=null?" network-id %d":"%v",p+=o["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(o){var p="ssrc:%d";return o.attribute!=null&&(p+=" %s",o.value!=null&&(p+=":%s")),p}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(o){return o.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(o){return o.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(o){return"imageattr:%s %s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(o){return"simulcast:%s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(o){return"ts-refclk:%s"+(o.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(o){var p="mediaclk:";return p+=o.id!=null?"id=%s %s":"%v%s",p+=o.mediaClockValue!=null?"=%s":"",p+=o.rateNumerator!=null?" rate=%s":"",p+=o.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(d).forEach(function(o){d[o].forEach(function(p){p.reg||(p.reg=/(.*)/),p.format||(p.format="%s")})})},5765:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Safari12=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),w=o(4256),g=o(4893),y=o(521),_=o(1305),x=o(3303),E=new v.Logger("Safari12"),j={OS:1024,MIS:1024};class R extends y.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new R}get name(){return"Safari12"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{h.addTransceiver("audio"),h.addTransceiver("video");const S=await h.createOffer();try{h.close()}catch{}const k=p.parse(S.sdp),P=b.extractRtpCapabilities({sdpObject:k});return w.addNackSupportForOpus(P),P}catch(S){try{h.close()}catch{}throw S}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:j}}run({direction:h,iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N,iceServers:O,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._direction=h,this._remoteSdp=new _.RemoteSdp({iceParameters:S,iceCandidates:k,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:O??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const S=this._pc.getConfiguration();S.iceServers=h,this._pc.setConfiguration(S)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const S=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const k={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}else{const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:S,codecOptions:k,codec:P,onRtpSender:N}){this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id);const O=m.clone(this._sendingRtpParametersByKind[h.kind]);O.codecs=u.reduceCodecs(O.codecs,P);const D=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);D.codecs=u.reduceCodecs(D.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream]});N&&N(M.sender);let I,G=await this._pc.createOffer(),de=p.parse(G.sdp);de.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de});const ee=(0,x.parse)((S??[{}])[0].scalabilityMode);S&&S.length>1&&(E.debug("send() | enabling legacy simulcast"),de=p.parse(G.sdp),I=de.media[L.idx],f.addLegacySimulcast({offerMediaObject:I,numStreams:S.length}),G={type:"offer",sdp:p.write(de)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",G),await this._pc.setLocalDescription(G);const Q=M.mid;if(O.mid=Q,de=p.parse(this._pc.localDescription.sdp),I=de.media[L.idx],O.rtcp.cname=b.getCname({offerMediaObject:I}),O.encodings=f.getRtpEncodings({offerMediaObject:I}),S)for(let xe=0;xe<O.encodings.length;++xe)S[xe]&&Object.assign(O.encodings[xe],S[xe]);if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const xe of O.encodings)xe.scalabilityMode?xe.scalabilityMode=`L1T${ee.temporalLayers}`:xe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:L.reuseMid,offerRtpParameters:O,answerRtpParameters:D,codecOptions:k});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._mapMidTransceiver.set(Q,M),{localId:Q,rtpParameters:O,rtpSender:M.sender}}async stopSending(h){if(this.assertSendDirection(),this._closed)return;E.debug("stopSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");if(S.sender.replaceTrack(null),this._pc.removeTrack(S.sender),this._remoteSdp.closeMediaSection(S.mid))try{S.stop()}catch{}const k=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="inactive",this._remoteSdp.pauseMediaSection(h);const k=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");S.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const k=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,S){this.assertNotClosed(),this.assertSendDirection(),S?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,S.id):E.debug("replaceTrack() [localId:%s, no track]",h);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");await k.sender.replaceTrack(S)}async setMaxSpatialLayer(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=S}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(h,S){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,S);const k=this._mapMidTransceiver.get(h);if(!k)throw new Error("associated RTCRtpTransceiver not found");const P=k.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...S}}),await k.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const O={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:S,maxRetransmits:k,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:S,maxRetransmits:k,protocol:N};E.debug("sendDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(P,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%j.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const S=[],k=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);k.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const D of h){const{trackId:L,onRtpReceiver:M}=D;if(M){const I=k.get(L),G=this._pc.getTransceivers().find(de=>de.mid===I);if(!G)throw new Error("transceiver not found");M(G.receiver)}}let N=await this._pc.createAnswer();const O=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=k.get(L),G=O.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(O)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=k.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),S.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return S}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const S={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const k=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const S=this._mapMidTransceiver.get(h);if(!S)throw new Error("associated RTCRtpTransceiver not found");return S.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:S,protocol:k}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:O,maxRetransmits:D,protocol:k};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(S,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:S}){S||(S=p.parse(this._pc.localDescription.sdp));const k=b.extractDtlsParameters({sdpObject:S});k.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:k},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Safari12=R},5862:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FakeEventTarget=void 0,d.FakeEventTarget=class{constructor(){we(this,"listeners",{})}addEventListener(o,p,v={}){var m;p&&((m=this.listeners)[o]??(m[o]=[]),this.listeners[o].push({callback:p,once:v.once===!0}))}removeEventListener(o,p){this.listeners[o]&&(this.listeners[o]=this.listeners[o].filter(v=>v.callback!==p))}dispatchEvent(o){if(!o||typeof o.type!="string")throw new Error("invalid event object");const p=this.listeners[o.type];if(!p)return!0;for(const v of[...p]){try{v.callback.call(this,o)}catch(m){setTimeout(()=>{throw m},0)}v.once&&this.removeEventListener(o.type,v.callback)}return!o.defaultPrevented}}},5938:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getRtpEncodings=function({offerMediaObject:o}){const p=new Set;for(const u of o.ssrcs??[]){const b=u.id;p.add(b)}if(p.size===0)throw new Error("no a=ssrc lines found");const v=new Map;for(const u of o.ssrcGroups??[]){if(u.semantics!=="FID")continue;let[b,f]=u.ssrcs.split(/\s+/);b=Number(b),f=Number(f),p.has(b)&&(p.delete(b),p.delete(f),v.set(b,f))}for(const u of p)v.set(u,null);const m=[];for(const[u,b]of v){const f={ssrc:u};b&&(f.rtx={ssrc:b}),m.push(f)}return m},d.addLegacySimulcast=function({offerMediaObject:o,numStreams:p}){if(p<=1)throw new TypeError("numStreams must be greater than 1");const v=(o.ssrcs??[]).find(x=>x.attribute==="msid");if(!v)throw new Error("a=ssrc line with msid information not found");const[m,u]=v.value.split(" "),b=Number(v.id);let f;(o.ssrcGroups??[]).some(x=>{if(x.semantics!=="FID")return!1;const E=x.ssrcs.split(/\s+/);return Number(E[0])===b&&(f=Number(E[1]),!0)});const w=o.ssrcs.find(x=>x.attribute==="cname");if(!w)throw new Error("a=ssrc line with cname information not found");const g=w.value,y=[],_=[];for(let x=0;x<p;++x)y.push(b+x),f&&_.push(f+x);o.ssrcGroups=[],o.ssrcs=[],o.ssrcGroups.push({semantics:"SIM",ssrcs:y.join(" ")});for(const x of y)o.ssrcs.push({id:x,attribute:"cname",value:g}),o.ssrcs.push({id:x,attribute:"msid",value:`${m} ${u}`});for(let x=0;x<_.length;++x){const E=y[x],j=_[x];o.ssrcs.push({id:j,attribute:"cname",value:g}),o.ssrcs.push({id:j,attribute:"msid",value:`${m} ${u}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${E} ${j}`})}}},5953:function(l,d,o){var p;l.exports=(p=o(9021),o(3240),function(v){var m=p,u=m.lib,b=u.WordArray,f=u.Hasher,w=m.x64.Word,g=m.algo,y=[],_=[],x=[];(function(){for(var R=1,C=0,T=0;T<24;T++){y[R+5*C]=(T+1)*(T+2)/2%64;var h=(2*R+3*C)%5;R=C%5,C=h}for(R=0;R<5;R++)for(C=0;C<5;C++)_[R+5*C]=C+(2*R+3*C)%5*5;for(var S=1,k=0;k<24;k++){for(var P=0,N=0,O=0;O<7;O++){if(1&S){var D=(1<<O)-1;D<32?N^=1<<D:P^=1<<D-32}128&S?S=S<<1^113:S<<=1}x[k]=w.create(P,N)}})();var E=[];(function(){for(var R=0;R<25;R++)E[R]=w.create()})();var j=g.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var R=this._state=[],C=0;C<25;C++)R[C]=new w.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(R,C){for(var T=this._state,h=this.blockSize/2,S=0;S<h;S++){var k=R[C+2*S],P=R[C+2*S+1];k=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),P=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),(ue=T[S]).high^=P,ue.low^=k}for(var N=0;N<24;N++){for(var O=0;O<5;O++){for(var D=0,L=0,M=0;M<5;M++)D^=(ue=T[O+5*M]).high,L^=ue.low;var I=E[O];I.high=D,I.low=L}for(O=0;O<5;O++){var G=E[(O+4)%5],de=E[(O+1)%5],ee=de.high,Q=de.low;for(D=G.high^(ee<<1|Q>>>31),L=G.low^(Q<<1|ee>>>31),M=0;M<5;M++)(ue=T[O+5*M]).high^=D,ue.low^=L}for(var ae=1;ae<25;ae++){var xe=(ue=T[ae]).high,Se=ue.low,ie=y[ae];ie<32?(D=xe<<ie|Se>>>32-ie,L=Se<<ie|xe>>>32-ie):(D=Se<<ie-32|xe>>>64-ie,L=xe<<ie-32|Se>>>64-ie);var We=E[_[ae]];We.high=D,We.low=L}var Oe=E[0],se=T[0];for(Oe.high=se.high,Oe.low=se.low,O=0;O<5;O++)for(M=0;M<5;M++){var ue=T[ae=O+5*M],Ce=E[ae],$e=E[(O+1)%5+5*M],Wt=E[(O+2)%5+5*M];ue.high=Ce.high^~$e.high&Wt.high,ue.low=Ce.low^~$e.low&Wt.low}ue=T[0];var er=x[N];ue.high^=er.high,ue.low^=er.low}},_doFinalize:function(){var R=this._data,C=R.words,T=(this._nDataBytes,8*R.sigBytes),h=32*this.blockSize;C[T>>>5]|=1<<24-T%32,C[(v.ceil((T+1)/h)*h>>>5)-1]|=128,R.sigBytes=4*C.length,this._process();for(var S=this._state,k=this.cfg.outputLength/8,P=k/8,N=[],O=0;O<P;O++){var D=S[O],L=D.high,M=D.low;L=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),M=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),N.push(M),N.push(L)}return new b.init(N,k)},clone:function(){for(var R=f.clone.call(this),C=R._state=this._state.slice(0),T=0;T<25;T++)C[T]=C[T].clone();return R}});m.SHA3=f._createHelper(j),m.HmacSHA3=f._createHmacHelper(j)}(Math),p.SHA3)},6004:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Device=void 0,d.detectDevice=N;const p=o(2109),v=o(2994),m=o(3953),u=o(4893),b=o(1765),f=o(8046),w=o(5601),g=o(2183),y=o(11),_=o(5535),x=o(8155),E=o(7402),j=o(2292),R=o(1767),C=o(5765),T=o(9676),h=o(8633),S=o(4039),k=o(9352),P=new v.Logger("Device");function N(O){var D,L,M,I;if(!O&&typeof navigator=="object"&&navigator.product==="ReactNative")return P.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void P.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(P.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(P.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(O||typeof navigator=="object"&&typeof navigator.userAgent=="string"){O??(O=navigator.userAgent);const G=new p.UAParser(O);P.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",O,G.getResult());const de=G.getBrowser(),ee=(D=de.name)==null?void 0:D.toLowerCase(),Q=parseInt(de.major??"0"),ae=G.getEngine(),xe=(L=ae.name)==null?void 0:L.toLowerCase(),Se=G.getOS(),ie=(M=Se.name)==null?void 0:M.toLowerCase(),We=parseFloat(Se.version??"0"),Oe=G.getDevice(),se=(I=Oe.model)==null?void 0:I.toLowerCase(),ue=ie==="ios"||se==="ipad",Ce=ee&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(ee),$e=ee&&["firefox","mobile firefox","mobile focus"].includes(ee),Wt=ee&&["safari","mobile safari"].includes(ee),er=ee&&["edge"].includes(ee);if((Ce||er)&&!ue&&Q>=111)return"Chrome111";if(Ce&&!ue&&Q>=74||er&&!ue&&Q>=88)return"Chrome74";if(Ce&&!ue&&Q>=70)return"Chrome70";if(Ce&&!ue&&Q>=67)return"Chrome67";if(Ce&&!ue&&Q>=55)return"Chrome55";if($e&&!ue&&Q>=120)return"Firefox120";if($e&&!ue&&Q>=60)return"Firefox60";if($e&&ue&&We>=14.3||Wt&&Q>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Wt&&Q>=11)return"Safari11";if(er&&!ue&&Q>=11&&Q<=18)return"Edge11";if(xe==="webkit"&&ue&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(xe==="blink"){const wt=O.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(wt){const Er=Number(wt[1]);return Er>=111?"Chrome111":Er>=74?"Chrome74":Er>=70?"Chrome70":Er>=67?"Chrome67":"Chrome55"}return"Chrome111"}P.warn("detectDevice() | browser not supported [name:%s, version:%s]",ee,Q)}else P.warn("detectDevice() | unknown device")}d.Device=class{constructor({handlerName:O,handlerFactory:D}={}){we(this,"_handlerFactory");we(this,"_handlerName");we(this,"_loaded",!1);we(this,"_extendedRtpCapabilities");we(this,"_recvRtpCapabilities");we(this,"_canProduceByKind");we(this,"_sctpCapabilities");we(this,"_observer",new m.EnhancedEventEmitter);if(P.debug("constructor()"),O&&D)throw new TypeError("just one of handlerName or handlerInterface can be given");if(D)this._handlerFactory=D;else{if(O)P.debug("constructor() | handler given: %s",O);else{if(!(O=N()))throw new u.UnsupportedError("device not supported");P.debug("constructor() | detected handler: %s",O)}switch(O){case"Chrome111":this._handlerFactory=g.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=y.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=_.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=x.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=E.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=j.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=R.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=C.Safari12.createFactory();break;case"Safari11":this._handlerFactory=T.Safari11.createFactory();break;case"Edge11":this._handlerFactory=h.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=S.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=k.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${O}"`)}}const L=this._handlerFactory();this._handlerName=L.name,L.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:O}){let D;P.debug("load() [routerRtpCapabilities:%o]",O);try{if(this._loaded)throw new u.InvalidStateError("already loaded");const L=b.clone(O);f.validateRtpCapabilities(L),D=this._handlerFactory();const M=await D.getNativeRtpCapabilities();P.debug("load() | got native RTP capabilities:%o",M);const I=b.clone(M);f.validateRtpCapabilities(I),this._extendedRtpCapabilities=f.getExtendedRtpCapabilities(I,L),P.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=f.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=f.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=f.getRecvRtpCapabilities(this._extendedRtpCapabilities),f.validateRtpCapabilities(this._recvRtpCapabilities),P.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await D.getNativeSctpCapabilities(),P.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),f.validateSctpCapabilities(this._sctpCapabilities),P.debug("load() succeeded"),this._loaded=!0,D.close()}catch(L){throw D&&D.close(),L}}canProduce(O){if(!this._loaded)throw new u.InvalidStateError("not loaded");if(O!=="audio"&&O!=="video")throw new TypeError(`invalid kind "${O}"`);return this._canProduceByKind[O]}createSendTransport({id:O,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae}){return P.debug("createSendTransport()"),this.createTransport({direction:"send",id:O,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae})}createRecvTransport({id:O,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae}){return P.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:O,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae})}createTransport({direction:O,id:D,iceParameters:L,iceCandidates:M,dtlsParameters:I,sctpParameters:G,iceServers:de,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:ae,appData:xe}){if(!this._loaded)throw new u.InvalidStateError("not loaded");if(typeof D!="string")throw new TypeError("missing id");if(typeof L!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(M))throw new TypeError("missing iceCandidates");if(typeof I!="object")throw new TypeError("missing dtlsParameters");if(G&&typeof G!="object")throw new TypeError("wrong sctpParameters");if(xe&&typeof xe!="object")throw new TypeError("if given, appData must be an object");const Se=new w.Transport({direction:O,id:D,iceParameters:L,iceCandidates:M,dtlsParameters:I,sctpParameters:G,iceServers:de,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:ae,appData:xe,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Se),Se}}},6011:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.unsafeStringify=void 0;const p=o(9746),v=[];for(let u=0;u<256;++u)v.push((u+256).toString(16).slice(1));function m(u,b=0){return(v[u[b+0]]+v[u[b+1]]+v[u[b+2]]+v[u[b+3]]+"-"+v[u[b+4]]+v[u[b+5]]+"-"+v[u[b+6]]+v[u[b+7]]+"-"+v[u[b+8]]+v[u[b+9]]+"-"+v[u[b+10]]+v[u[b+11]]+v[u[b+12]]+v[u[b+13]]+v[u[b+14]]+v[u[b+15]]).toLowerCase()}d.unsafeStringify=m,d.default=function(u,b=0){const f=m(u,b);if(!(0,p.default)(f))throw TypeError("Stringified UUID is invalid");return f}},6298:function(l,d,o){var p;l.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var v=p,m=v.lib.StreamCipher,u=v.algo,b=[],f=[],w=[],g=u.Rabbit=m.extend({_doReset:function(){for(var _=this._key.words,x=this.cfg.iv,E=0;E<4;E++)_[E]=16711935&(_[E]<<8|_[E]>>>24)|4278255360&(_[E]<<24|_[E]>>>8);var j=this._X=[_[0],_[3]<<16|_[2]>>>16,_[1],_[0]<<16|_[3]>>>16,_[2],_[1]<<16|_[0]>>>16,_[3],_[2]<<16|_[1]>>>16],R=this._C=[_[2]<<16|_[2]>>>16,4294901760&_[0]|65535&_[1],_[3]<<16|_[3]>>>16,4294901760&_[1]|65535&_[2],_[0]<<16|_[0]>>>16,4294901760&_[2]|65535&_[3],_[1]<<16|_[1]>>>16,4294901760&_[3]|65535&_[0]];for(this._b=0,E=0;E<4;E++)y.call(this);for(E=0;E<8;E++)R[E]^=j[E+4&7];if(x){var C=x.words,T=C[0],h=C[1],S=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),k=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),P=S>>>16|4294901760&k,N=k<<16|65535&S;for(R[0]^=S,R[1]^=P,R[2]^=k,R[3]^=N,R[4]^=S,R[5]^=P,R[6]^=k,R[7]^=N,E=0;E<4;E++)y.call(this)}},_doProcessBlock:function(_,x){var E=this._X;y.call(this),b[0]=E[0]^E[5]>>>16^E[3]<<16,b[1]=E[2]^E[7]>>>16^E[5]<<16,b[2]=E[4]^E[1]>>>16^E[7]<<16,b[3]=E[6]^E[3]>>>16^E[1]<<16;for(var j=0;j<4;j++)b[j]=16711935&(b[j]<<8|b[j]>>>24)|4278255360&(b[j]<<24|b[j]>>>8),_[x+j]^=b[j]},blockSize:4,ivSize:2});function y(){for(var _=this._X,x=this._C,E=0;E<8;E++)f[E]=x[E];for(x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<f[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<f[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<f[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<f[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<f[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<f[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<f[6]>>>0?1:0)|0,this._b=x[7]>>>0<f[7]>>>0?1:0,E=0;E<8;E++){var j=_[E]+x[E],R=65535&j,C=j>>>16,T=((R*R>>>17)+R*C>>>15)+C*C,h=((4294901760&j)*j|0)+((65535&j)*j|0);w[E]=T^h}_[0]=w[0]+(w[7]<<16|w[7]>>>16)+(w[6]<<16|w[6]>>>16)|0,_[1]=w[1]+(w[0]<<8|w[0]>>>24)+w[7]|0,_[2]=w[2]+(w[1]<<16|w[1]>>>16)+(w[0]<<16|w[0]>>>16)|0,_[3]=w[3]+(w[2]<<8|w[2]>>>24)+w[1]|0,_[4]=w[4]+(w[3]<<16|w[3]>>>16)+(w[2]<<16|w[2]>>>16)|0,_[5]=w[5]+(w[4]<<8|w[4]>>>24)+w[3]|0,_[6]=w[6]+(w[5]<<16|w[5]>>>16)+(w[4]<<16|w[4]>>>16)|0,_[7]=w[7]+(w[6]<<8|w[6]>>>24)+w[5]|0}v.Rabbit=m._createHelper(g)}(),p.Rabbit)},6308:function(l,d,o){var p,v,m,u,b,f;l.exports=(f=o(9021),o(3009),v=(p=f).lib.WordArray,m=p.algo,u=m.SHA256,b=m.SHA224=u.extend({_doReset:function(){this._hash=new v.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var w=u._doFinalize.call(this);return w.sigBytes-=4,w}}),p.SHA224=u._createHelper(b),p.HmacSHA224=u._createHmacHelper(b),f.SHA224)},6356:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(6011),v=o(1425),m=o(6568);d.default=function(u,b,f){u??(u={}),f??(f=0);let w=(0,v.default)({...u,_v6:!0},new Uint8Array(16));if(w=(0,m.default)(w),b){for(let g=0;g<16;g++)b[f+g]=w[g];return b}return(0,p.unsafeStringify)(w)}},6372:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.mode.CTRGladman=function(){var v=p.lib.BlockCipherMode.extend();function m(f){if(255&~(f>>24))f+=16777216;else{var w=f>>16&255,g=f>>8&255,y=255&f;w===255?(w=0,g===255?(g=0,y===255?y=0:++y):++g):++w,f=0,f+=w<<16,f+=g<<8,f+=y}return f}function u(f){return(f[0]=m(f[0]))===0&&(f[1]=m(f[1])),f}var b=v.Encryptor=v.extend({processBlock:function(f,w){var g=this._cipher,y=g.blockSize,_=this._iv,x=this._counter;_&&(x=this._counter=_.slice(0),this._iv=void 0),u(x);var E=x.slice(0);g.encryptBlock(E,0);for(var j=0;j<y;j++)f[w+j]^=E[j]}});return v.Decryptor=b,v}(),p.mode.CTRGladman)},6440:function(l,d,o){var p;l.exports=(p=o(9021),function(){if(typeof ArrayBuffer=="function"){var v=p.lib.WordArray,m=v.init,u=v.init=function(b){if(b instanceof ArrayBuffer&&(b=new Uint8Array(b)),(b instanceof Int8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)&&(b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength)),b instanceof Uint8Array){for(var f=b.byteLength,w=[],g=0;g<f;g++)w[g>>>2]|=b[g]<<24-g%4*8;m.call(this,w,f)}else m.apply(this,arguments)};u.prototype=v}}(),p.lib.WordArray)},6568:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(1797),v=o(6011);d.default=function(m){const u=function(b){return Uint8Array.of((15&b[6])<<4|b[7]>>4&15,(15&b[7])<<4|(240&b[4])>>4,(15&b[4])<<4|(240&b[5])>>4,(15&b[5])<<4|(240&b[0])>>4,(15&b[0])<<4|(240&b[1])>>4,(15&b[1])<<4|(240&b[2])>>4,96|15&b[2],b[3],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}(typeof m=="string"?(0,p.default)(m):m);return typeof m=="string"?(0,v.unsafeStringify)(u):u}},6585:l=>{var d=1e3,o=60*d,p=60*o,v=24*p,m=7*v,u=365.25*v;function b(f,w,g,y){var _=w>=1.5*g;return Math.round(f/g)+" "+y+(_?"s":"")}l.exports=function(f,w){w=w||{};var g=typeof f;if(g==="string"&&f.length>0)return function(y){if(!((y=String(y)).length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(_){var x=parseFloat(_[1]);switch((_[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return x*u;case"weeks":case"week":case"w":return x*m;case"days":case"day":case"d":return x*v;case"hours":case"hour":case"hrs":case"hr":case"h":return x*p;case"minutes":case"minute":case"mins":case"min":case"m":return x*o;case"seconds":case"second":case"secs":case"sec":case"s":return x*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}(f);if(g==="number"&&isFinite(f))return w.long?function(y){var _=Math.abs(y);return _>=v?b(y,_,v,"day"):_>=p?b(y,_,p,"hour"):_>=o?b(y,_,o,"minute"):_>=d?b(y,_,d,"second"):y+" ms"}(f):function(y){var _=Math.abs(y);return _>=v?Math.round(y/v)+"d":_>=p?Math.round(y/p)+"h":_>=o?Math.round(y/o)+"m":_>=d?Math.round(y/d)+"s":y+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},6697:(l,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(l,d,o)=>{o.d(d,{KS:()=>v,fo:()=>p});var p=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),v=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(l){l.exports=function(d){var o={};function p(v){if(o[v])return o[v].exports;var m=o[v]={i:v,l:!1,exports:{}};return d[v].call(m.exports,m,m.exports,p),m.l=!0,m.exports}return p.m=d,p.c=o,p.d=function(v,m,u){p.o(v,m)||Object.defineProperty(v,m,{enumerable:!0,get:u})},p.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},p.t=function(v,m){if(1&m&&(v=p(v)),8&m||4&m&&typeof v=="object"&&v&&v.__esModule)return v;var u=Object.create(null);if(p.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:v}),2&m&&typeof v!="string")for(var b in v)p.d(u,b,(function(f){return v[f]}).bind(null,b));return u},p.n=function(v){var m=v&&v.__esModule?function(){return v.default}:function(){return v};return p.d(m,"a",m),m},p.o=function(v,m){return Object.prototype.hasOwnProperty.call(v,m)},p.p="",p(p.s=90)}({17:function(d,o,p){o.__esModule=!0,o.default=void 0;var v=p(18),m=function(){function u(){}return u.getFirstMatch=function(b,f){var w=f.match(b);return w&&w.length>0&&w[1]||""},u.getSecondMatch=function(b,f){var w=f.match(b);return w&&w.length>1&&w[2]||""},u.matchAndReturnConst=function(b,f,w){if(b.test(f))return w},u.getWindowsVersionName=function(b){switch(b){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},u.getMacOSVersionName=function(b){var f=b.split(".").splice(0,2).map(function(w){return parseInt(w,10)||0});if(f.push(0),f[0]===10)switch(f[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},u.getAndroidVersionName=function(b){var f=b.split(".").splice(0,2).map(function(w){return parseInt(w,10)||0});if(f.push(0),!(f[0]===1&&f[1]<5))return f[0]===1&&f[1]<6?"Cupcake":f[0]===1&&f[1]>=6?"Donut":f[0]===2&&f[1]<2?"Eclair":f[0]===2&&f[1]===2?"Froyo":f[0]===2&&f[1]>2?"Gingerbread":f[0]===3?"Honeycomb":f[0]===4&&f[1]<1?"Ice Cream Sandwich":f[0]===4&&f[1]<4?"Jelly Bean":f[0]===4&&f[1]>=4?"KitKat":f[0]===5?"Lollipop":f[0]===6?"Marshmallow":f[0]===7?"Nougat":f[0]===8?"Oreo":f[0]===9?"Pie":void 0},u.getVersionPrecision=function(b){return b.split(".").length},u.compareVersions=function(b,f,w){w===void 0&&(w=!1);var g=u.getVersionPrecision(b),y=u.getVersionPrecision(f),_=Math.max(g,y),x=0,E=u.map([b,f],function(j){var R=_-u.getVersionPrecision(j),C=j+new Array(R+1).join(".0");return u.map(C.split("."),function(T){return new Array(20-T.length).join("0")+T}).reverse()});for(w&&(x=_-Math.min(g,y)),_-=1;_>=x;){if(E[0][_]>E[1][_])return 1;if(E[0][_]===E[1][_]){if(_===x)return 0;_-=1}else if(E[0][_]<E[1][_])return-1}},u.map=function(b,f){var w,g=[];if(Array.prototype.map)return Array.prototype.map.call(b,f);for(w=0;w<b.length;w+=1)g.push(f(b[w]));return g},u.find=function(b,f){var w,g;if(Array.prototype.find)return Array.prototype.find.call(b,f);for(w=0,g=b.length;w<g;w+=1){var y=b[w];if(f(y,w))return y}},u.assign=function(b){for(var f,w,g=b,y=arguments.length,_=new Array(y>1?y-1:0),x=1;x<y;x++)_[x-1]=arguments[x];if(Object.assign)return Object.assign.apply(Object,[b].concat(_));var E=function(){var j=_[f];typeof j=="object"&&j!==null&&Object.keys(j).forEach(function(R){g[R]=j[R]})};for(f=0,w=_.length;f<w;f+=1)E();return b},u.getBrowserAlias=function(b){return v.BROWSER_ALIASES_MAP[b]},u.getBrowserTypeByAlias=function(b){return v.BROWSER_MAP[b]||""},u}();o.default=m,d.exports=o.default},18:function(d,o,p){o.__esModule=!0,o.ENGINE_MAP=o.OS_MAP=o.PLATFORMS_MAP=o.BROWSER_MAP=o.BROWSER_ALIASES_MAP=void 0,o.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},o.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},o.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},o.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},o.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(d,o,p){o.__esModule=!0,o.default=void 0;var v,m=(v=p(91))&&v.__esModule?v:{default:v},u=p(18);function b(w,g){for(var y=0;y<g.length;y++){var _=g[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}var f=function(){function w(){}var g,y,_;return w.getParser=function(x,E){if(E===void 0&&(E=!1),typeof x!="string")throw new Error("UserAgent should be a string");return new m.default(x,E)},w.parse=function(x){return new m.default(x).getResult()},g=w,_=[{key:"BROWSER_MAP",get:function(){return u.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return u.ENGINE_MAP}},{key:"OS_MAP",get:function(){return u.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return u.PLATFORMS_MAP}}],(y=null)&&b(g.prototype,y),_&&b(g,_),w}();o.default=f,d.exports=o.default},91:function(d,o,p){o.__esModule=!0,o.default=void 0;var v=w(p(92)),m=w(p(93)),u=w(p(94)),b=w(p(95)),f=w(p(17));function w(y){return y&&y.__esModule?y:{default:y}}var g=function(){function y(x,E){if(E===void 0&&(E=!1),x==null||x==="")throw new Error("UserAgent parameter can't be empty");this._ua=x,this.parsedResult={},E!==!0&&this.parse()}var _=y.prototype;return _.getUA=function(){return this._ua},_.test=function(x){return x.test(this._ua)},_.parseBrowser=function(){var x=this;this.parsedResult.browser={};var E=f.default.find(v.default,function(j){if(typeof j.test=="function")return j.test(x);if(j.test instanceof Array)return j.test.some(function(R){return x.test(R)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.browser=E.describe(this.getUA())),this.parsedResult.browser},_.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},_.getBrowserName=function(x){return x?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},_.getBrowserVersion=function(){return this.getBrowser().version},_.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},_.parseOS=function(){var x=this;this.parsedResult.os={};var E=f.default.find(m.default,function(j){if(typeof j.test=="function")return j.test(x);if(j.test instanceof Array)return j.test.some(function(R){return x.test(R)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.os=E.describe(this.getUA())),this.parsedResult.os},_.getOSName=function(x){var E=this.getOS().name;return x?String(E).toLowerCase()||"":E||""},_.getOSVersion=function(){return this.getOS().version},_.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},_.getPlatformType=function(x){x===void 0&&(x=!1);var E=this.getPlatform().type;return x?String(E).toLowerCase()||"":E||""},_.parsePlatform=function(){var x=this;this.parsedResult.platform={};var E=f.default.find(u.default,function(j){if(typeof j.test=="function")return j.test(x);if(j.test instanceof Array)return j.test.some(function(R){return x.test(R)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.platform=E.describe(this.getUA())),this.parsedResult.platform},_.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},_.getEngineName=function(x){return x?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},_.parseEngine=function(){var x=this;this.parsedResult.engine={};var E=f.default.find(b.default,function(j){if(typeof j.test=="function")return j.test(x);if(j.test instanceof Array)return j.test.some(function(R){return x.test(R)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.engine=E.describe(this.getUA())),this.parsedResult.engine},_.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},_.getResult=function(){return f.default.assign({},this.parsedResult)},_.satisfies=function(x){var E=this,j={},R=0,C={},T=0;if(Object.keys(x).forEach(function(L){var M=x[L];typeof M=="string"?(C[L]=M,T+=1):typeof M=="object"&&(j[L]=M,R+=1)}),R>0){var h=Object.keys(j),S=f.default.find(h,function(L){return E.isOS(L)});if(S){var k=this.satisfies(j[S]);if(k!==void 0)return k}var P=f.default.find(h,function(L){return E.isPlatform(L)});if(P){var N=this.satisfies(j[P]);if(N!==void 0)return N}}if(T>0){var O=Object.keys(C),D=f.default.find(O,function(L){return E.isBrowser(L,!0)});if(D!==void 0)return this.compareVersion(C[D])}},_.isBrowser=function(x,E){E===void 0&&(E=!1);var j=this.getBrowserName().toLowerCase(),R=x.toLowerCase(),C=f.default.getBrowserTypeByAlias(R);return E&&C&&(R=C.toLowerCase()),R===j},_.compareVersion=function(x){var E=[0],j=x,R=!1,C=this.getBrowserVersion();if(typeof C=="string")return x[0]===">"||x[0]==="<"?(j=x.substr(1),x[1]==="="?(R=!0,j=x.substr(2)):E=[],x[0]===">"?E.push(1):E.push(-1)):x[0]==="="?j=x.substr(1):x[0]==="~"&&(R=!0,j=x.substr(1)),E.indexOf(f.default.compareVersions(C,j,R))>-1},_.isOS=function(x){return this.getOSName(!0)===String(x).toLowerCase()},_.isPlatform=function(x){return this.getPlatformType(!0)===String(x).toLowerCase()},_.isEngine=function(x){return this.getEngineName(!0)===String(x).toLowerCase()},_.is=function(x,E){return E===void 0&&(E=!1),this.isBrowser(x,E)||this.isOS(x)||this.isPlatform(x)},_.some=function(x){var E=this;return x===void 0&&(x=[]),x.some(function(j){return E.is(j)})},y}();o.default=g,d.exports=o.default},92:function(d,o,p){o.__esModule=!0,o.default=void 0;var v,m=(v=p(17))&&v.__esModule?v:{default:v},u=/version\/(\d+(\.?_?\d+)+)/i,b=[{test:[/googlebot/i],describe:function(f){var w={name:"Googlebot"},g=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/opera/i],describe:function(f){var w={name:"Opera"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/opr\/|opios/i],describe:function(f){var w={name:"Opera"},g=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/SamsungBrowser/i],describe:function(f){var w={name:"Samsung Internet for Android"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/Whale/i],describe:function(f){var w={name:"NAVER Whale Browser"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/MZBrowser/i],describe:function(f){var w={name:"MZ Browser"},g=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/focus/i],describe:function(f){var w={name:"Focus"},g=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/swing/i],describe:function(f){var w={name:"Swing"},g=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/coast/i],describe:function(f){var w={name:"Opera Coast"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(f){var w={name:"Opera Touch"},g=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/yabrowser/i],describe:function(f){var w={name:"Yandex Browser"},g=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/ucbrowser/i],describe:function(f){var w={name:"UC Browser"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/Maxthon|mxios/i],describe:function(f){var w={name:"Maxthon"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/epiphany/i],describe:function(f){var w={name:"Epiphany"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/puffin/i],describe:function(f){var w={name:"Puffin"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/sleipnir/i],describe:function(f){var w={name:"Sleipnir"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/k-meleon/i],describe:function(f){var w={name:"K-Meleon"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/micromessenger/i],describe:function(f){var w={name:"WeChat"},g=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/qqbrowser/i],describe:function(f){var w={name:/qqbrowserlite/i.test(f)?"QQ Browser Lite":"QQ Browser"},g=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/msie|trident/i],describe:function(f){var w={name:"Internet Explorer"},g=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/\sedg\//i],describe:function(f){var w={name:"Microsoft Edge"},g=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/edg([ea]|ios)/i],describe:function(f){var w={name:"Microsoft Edge"},g=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/vivaldi/i],describe:function(f){var w={name:"Vivaldi"},g=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/seamonkey/i],describe:function(f){var w={name:"SeaMonkey"},g=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/sailfish/i],describe:function(f){var w={name:"Sailfish"},g=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,f);return g&&(w.version=g),w}},{test:[/silk/i],describe:function(f){var w={name:"Amazon Silk"},g=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/phantom/i],describe:function(f){var w={name:"PhantomJS"},g=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/slimerjs/i],describe:function(f){var w={name:"SlimerJS"},g=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var w={name:"BlackBerry"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var w={name:"WebOS Browser"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/bada/i],describe:function(f){var w={name:"Bada"},g=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/tizen/i],describe:function(f){var w={name:"Tizen"},g=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/qupzilla/i],describe:function(f){var w={name:"QupZilla"},g=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/firefox|iceweasel|fxios/i],describe:function(f){var w={name:"Firefox"},g=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/electron/i],describe:function(f){var w={name:"Electron"},g=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/MiuiBrowser/i],describe:function(f){var w={name:"Miui"},g=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/chromium/i],describe:function(f){var w={name:"Chromium"},g=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/chrome|crios|crmo/i],describe:function(f){var w={name:"Chrome"},g=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/GSA/i],describe:function(f){var w={name:"Google Search"},g=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:function(f){var w=!f.test(/like android/i),g=f.test(/android/i);return w&&g},describe:function(f){var w={name:"Android Browser"},g=m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/playstation 4/i],describe:function(f){var w={name:"PlayStation 4"},g=m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/safari|applewebkit/i],describe:function(f){var w={name:"Safari"},g=m.default.getFirstMatch(u,f);return g&&(w.version=g),w}},{test:[/.*/i],describe:function(f){var w=f.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(w,f),version:m.default.getSecondMatch(w,f)}}}];o.default=b,d.exports=o.default},93:function(d,o,p){o.__esModule=!0,o.default=void 0;var v,m=(v=p(17))&&v.__esModule?v:{default:v},u=p(18),b=[{test:[/Roku\/DVP/],describe:function(f){var w=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,f);return{name:u.OS_MAP.Roku,version:w}}},{test:[/windows phone/i],describe:function(f){var w=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.WindowsPhone,version:w}}},{test:[/windows /i],describe:function(f){var w=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,f),g=m.default.getWindowsVersionName(w);return{name:u.OS_MAP.Windows,version:w,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(f){var w={name:u.OS_MAP.iOS},g=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,f);return g&&(w.version=g),w}},{test:[/macintosh/i],describe:function(f){var w=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,f).replace(/[_\s]/g,"."),g=m.default.getMacOSVersionName(w),y={name:u.OS_MAP.MacOS,version:w};return g&&(y.versionName=g),y}},{test:[/(ipod|iphone|ipad)/i],describe:function(f){var w=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,f).replace(/[_\s]/g,".");return{name:u.OS_MAP.iOS,version:w}}},{test:function(f){var w=!f.test(/like android/i),g=f.test(/android/i);return w&&g},describe:function(f){var w=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,f),g=m.default.getAndroidVersionName(w),y={name:u.OS_MAP.Android,version:w};return g&&(y.versionName=g),y}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var w=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,f),g={name:u.OS_MAP.WebOS};return w&&w.length&&(g.version=w),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var w=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,f)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,f)||m.default.getFirstMatch(/\bbb(\d+)/i,f);return{name:u.OS_MAP.BlackBerry,version:w}}},{test:[/bada/i],describe:function(f){var w=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.Bada,version:w}}},{test:[/tizen/i],describe:function(f){var w=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.Tizen,version:w}}},{test:[/linux/i],describe:function(){return{name:u.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:u.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(f){var w=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.PlayStation4,version:w}}}];o.default=b,d.exports=o.default},94:function(d,o,p){o.__esModule=!0,o.default=void 0;var v,m=(v=p(17))&&v.__esModule?v:{default:v},u=p(18),b=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(f){var w=m.default.getFirstMatch(/(can-l01)/i,f)&&"Nova",g={type:u.PLATFORMS_MAP.mobile,vendor:"Huawei"};return w&&(g.model=w),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(f){var w=f.test(/ipod|iphone/i),g=f.test(/like (ipod|iphone)/i);return w&&!g},describe:function(f){var w=m.default.getFirstMatch(/(ipod|iphone)/i,f);return{type:u.PLATFORMS_MAP.mobile,vendor:"Apple",model:w}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName(!0)==="blackberry"},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(f){return f.getBrowserName(!0)==="bada"},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName()==="windows phone"},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(f){var w=Number(String(f.getOSVersion()).split(".")[0]);return f.getOSName(!0)==="android"&&w>=3},describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(f){return f.getOSName(!0)==="android"},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getOSName(!0)==="macos"},describe:function(){return{type:u.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(f){return f.getOSName(!0)==="windows"},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="linux"},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="playstation 4"},describe:function(){return{type:u.PLATFORMS_MAP.tv}}},{test:function(f){return f.getOSName(!0)==="roku"},describe:function(){return{type:u.PLATFORMS_MAP.tv}}}];o.default=b,d.exports=o.default},95:function(d,o,p){o.__esModule=!0,o.default=void 0;var v,m=(v=p(17))&&v.__esModule?v:{default:v},u=p(18),b=[{test:function(f){return f.getBrowserName(!0)==="microsoft edge"},describe:function(f){if(/\sedg\//i.test(f))return{name:u.ENGINE_MAP.Blink};var w=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,f);return{name:u.ENGINE_MAP.EdgeHTML,version:w}}},{test:[/trident/i],describe:function(f){var w={name:u.ENGINE_MAP.Trident},g=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:function(f){return f.test(/presto/i)},describe:function(f){var w={name:u.ENGINE_MAP.Presto},g=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:function(f){var w=f.test(/gecko/i),g=f.test(/like gecko/i);return w&&!g},describe:function(f){var w={name:u.ENGINE_MAP.Gecko},g=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:u.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(f){var w={name:u.ENGINE_MAP.WebKit},g=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,f);return g&&(w.version=g),w}}];o.default=b,d.exports=o.default}})},6939:function(l,d,o){var p,v,m;l.exports=(m=o(9021),o(7165),m.mode.CTR=(p=m.lib.BlockCipherMode.extend(),v=p.Encryptor=p.extend({processBlock:function(u,b){var f=this._cipher,w=f.blockSize,g=this._iv,y=this._counter;g&&(y=this._counter=g.slice(0),this._iv=void 0);var _=y.slice(0);f.encryptBlock(_,0),y[w-1]=y[w-1]+1|0;for(var x=0;x<w;x++)u[b+x]^=_[x]}}),p.Decryptor=v,p),m.mode.CTR)},7007:l=>{var d,o=typeof Reflect=="object"?Reflect:null,p=o&&typeof o.apply=="function"?o.apply:function(R,C,T){return Function.prototype.apply.call(R,C,T)};d=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:function(R){return Object.getOwnPropertyNames(R)};var v=Number.isNaN||function(R){return R!=R};function m(){m.init.call(this)}l.exports=m,l.exports.once=function(R,C){return new Promise(function(T,h){function S(P){R.removeListener(C,k),h(P)}function k(){typeof R.removeListener=="function"&&R.removeListener("error",S),T([].slice.call(arguments))}j(R,C,k,{once:!0}),C!=="error"&&function(P,N,O){typeof P.on=="function"&&j(P,"error",N,O)}(R,S,{once:!0})})},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var u=10;function b(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}function f(R){return R._maxListeners===void 0?m.defaultMaxListeners:R._maxListeners}function w(R,C,T,h){var S,k,P,N;if(b(T),(k=R._events)===void 0?(k=R._events=Object.create(null),R._eventsCount=0):(k.newListener!==void 0&&(R.emit("newListener",C,T.listener?T.listener:T),k=R._events),P=k[C]),P===void 0)P=k[C]=T,++R._eventsCount;else if(typeof P=="function"?P=k[C]=h?[T,P]:[P,T]:h?P.unshift(T):P.push(T),(S=f(R))>0&&P.length>S&&!P.warned){P.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=R,O.type=C,O.count=P.length,N=O,console&&console.warn&&console.warn(N)}return R}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(R,C,T){var h={fired:!1,wrapFn:void 0,target:R,type:C,listener:T},S=g.bind(h);return S.listener=T,h.wrapFn=S,S}function _(R,C,T){var h=R._events;if(h===void 0)return[];var S=h[C];return S===void 0?[]:typeof S=="function"?T?[S.listener||S]:[S]:T?function(k){for(var P=new Array(k.length),N=0;N<P.length;++N)P[N]=k[N].listener||k[N];return P}(S):E(S,S.length)}function x(R){var C=this._events;if(C!==void 0){var T=C[R];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function E(R,C){for(var T=new Array(C),h=0;h<C;++h)T[h]=R[h];return T}function j(R,C,T,h){if(typeof R.on=="function")h.once?R.once(C,T):R.on(C,T);else{if(typeof R.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R);R.addEventListener(C,function S(k){h.once&&R.removeEventListener(C,S),T(k)})}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(R){if(typeof R!="number"||R<0||v(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");u=R}}),m.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||v(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this},m.prototype.getMaxListeners=function(){return f(this)},m.prototype.emit=function(R){for(var C=[],T=1;T<arguments.length;T++)C.push(arguments[T]);var h=R==="error",S=this._events;if(S!==void 0)h=h&&S.error===void 0;else if(!h)return!1;if(h){var k;if(C.length>0&&(k=C[0]),k instanceof Error)throw k;var P=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw P.context=k,P}var N=S[R];if(N===void 0)return!1;if(typeof N=="function")p(N,this,C);else{var O=N.length,D=E(N,O);for(T=0;T<O;++T)p(D[T],this,C)}return!0},m.prototype.addListener=function(R,C){return w(this,R,C,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(R,C){return w(this,R,C,!0)},m.prototype.once=function(R,C){return b(C),this.on(R,y(this,R,C)),this},m.prototype.prependOnceListener=function(R,C){return b(C),this.prependListener(R,y(this,R,C)),this},m.prototype.removeListener=function(R,C){var T,h,S,k,P;if(b(C),(h=this._events)===void 0)return this;if((T=h[R])===void 0)return this;if(T===C||T.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete h[R],h.removeListener&&this.emit("removeListener",R,T.listener||C));else if(typeof T!="function"){for(S=-1,k=T.length-1;k>=0;k--)if(T[k]===C||T[k].listener===C){P=T[k].listener,S=k;break}if(S<0)return this;S===0?T.shift():function(N,O){for(;O+1<N.length;O++)N[O]=N[O+1];N.pop()}(T,S),T.length===1&&(h[R]=T[0]),h.removeListener!==void 0&&this.emit("removeListener",R,P||C)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(R){var C,T,h;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[R]),this;if(arguments.length===0){var S,k=Object.keys(T);for(h=0;h<k.length;++h)(S=k[h])!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=T[R])=="function")this.removeListener(R,C);else if(C!==void 0)for(h=C.length-1;h>=0;h--)this.removeListener(R,C[h]);return this},m.prototype.listeners=function(R){return _(this,R,!0)},m.prototype.rawListeners=function(R){return _(this,R,!1)},m.listenerCount=function(R,C){return typeof R.listenerCount=="function"?R.listenerCount(C):x.call(R,C)},m.prototype.listenerCount=x,m.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},7080:(l,d,o)=>{o.d(d,{q:()=>v,s:()=>p});var p={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},v={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(l,d,o){var p;l.exports=(p=o(9021),o(9506),void(p.lib.Cipher||function(v){var m=p,u=m.lib,b=u.Base,f=u.WordArray,w=u.BufferedBlockAlgorithm,g=m.enc,y=(g.Utf8,g.Base64),_=m.algo.EvpKDF,x=u.Cipher=w.extend({cfg:b.extend(),createEncryptor:function(N,O){return this.create(this._ENC_XFORM_MODE,N,O)},createDecryptor:function(N,O){return this.create(this._DEC_XFORM_MODE,N,O)},init:function(N,O,D){this.cfg=this.cfg.extend(D),this._xformMode=N,this._key=O,this.reset()},reset:function(){w.reset.call(this),this._doReset()},process:function(N){return this._append(N),this._process()},finalize:function(N){return N&&this._append(N),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function N(O){return typeof O=="string"?P:S}return function(O){return{encrypt:function(D,L,M){return N(L).encrypt(O,D,L,M)},decrypt:function(D,L,M){return N(L).decrypt(O,D,L,M)}}}}()}),E=(u.StreamCipher=x.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),m.mode={}),j=u.BlockCipherMode=b.extend({createEncryptor:function(N,O){return this.Encryptor.create(N,O)},createDecryptor:function(N,O){return this.Decryptor.create(N,O)},init:function(N,O){this._cipher=N,this._iv=O}}),R=E.CBC=function(){var N=j.extend();function O(D,L,M){var I,G=this._iv;G?(I=G,this._iv=v):I=this._prevBlock;for(var de=0;de<M;de++)D[L+de]^=I[de]}return N.Encryptor=N.extend({processBlock:function(D,L){var M=this._cipher,I=M.blockSize;O.call(this,D,L,I),M.encryptBlock(D,L),this._prevBlock=D.slice(L,L+I)}}),N.Decryptor=N.extend({processBlock:function(D,L){var M=this._cipher,I=M.blockSize,G=D.slice(L,L+I);M.decryptBlock(D,L),O.call(this,D,L,I),this._prevBlock=G}}),N}(),C=(m.pad={}).Pkcs7={pad:function(N,O){for(var D=4*O,L=D-N.sigBytes%D,M=L<<24|L<<16|L<<8|L,I=[],G=0;G<L;G+=4)I.push(M);var de=f.create(I,L);N.concat(de)},unpad:function(N){var O=255&N.words[N.sigBytes-1>>>2];N.sigBytes-=O}},T=(u.BlockCipher=x.extend({cfg:x.cfg.extend({mode:R,padding:C}),reset:function(){var N;x.reset.call(this);var O=this.cfg,D=O.iv,L=O.mode;this._xformMode==this._ENC_XFORM_MODE?N=L.createEncryptor:(N=L.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==N?this._mode.init(this,D&&D.words):(this._mode=N.call(L,this,D&&D.words),this._mode.__creator=N)},_doProcessBlock:function(N,O){this._mode.processBlock(N,O)},_doFinalize:function(){var N,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),N=this._process(!0)):(N=this._process(!0),O.unpad(N)),N},blockSize:4}),u.CipherParams=b.extend({init:function(N){this.mixIn(N)},toString:function(N){return(N||this.formatter).stringify(this)}})),h=(m.format={}).OpenSSL={stringify:function(N){var O=N.ciphertext,D=N.salt;return(D?f.create([1398893684,1701076831]).concat(D).concat(O):O).toString(y)},parse:function(N){var O,D=y.parse(N),L=D.words;return L[0]==1398893684&&L[1]==1701076831&&(O=f.create(L.slice(2,4)),L.splice(0,4),D.sigBytes-=16),T.create({ciphertext:D,salt:O})}},S=u.SerializableCipher=b.extend({cfg:b.extend({format:h}),encrypt:function(N,O,D,L){L=this.cfg.extend(L);var M=N.createEncryptor(D,L),I=M.finalize(O),G=M.cfg;return T.create({ciphertext:I,key:D,iv:G.iv,algorithm:N,mode:G.mode,padding:G.padding,blockSize:N.blockSize,formatter:L.format})},decrypt:function(N,O,D,L){return L=this.cfg.extend(L),O=this._parse(O,L.format),N.createDecryptor(D,L).finalize(O.ciphertext)},_parse:function(N,O){return typeof N=="string"?O.parse(N,this):N}}),k=(m.kdf={}).OpenSSL={execute:function(N,O,D,L,M){if(L||(L=f.random(8)),M)I=_.create({keySize:O+D,hasher:M}).compute(N,L);else var I=_.create({keySize:O+D}).compute(N,L);var G=f.create(I.words.slice(O),4*D);return I.sigBytes=4*O,T.create({key:I,iv:G,salt:L})}},P=u.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:k}),encrypt:function(N,O,D,L){var M=(L=this.cfg.extend(L)).kdf.execute(D,N.keySize,N.ivSize,L.salt,L.hasher);L.iv=M.iv;var I=S.encrypt.call(this,N,O,M.key,L);return I.mixIn(M),I},decrypt:function(N,O,D,L){L=this.cfg.extend(L),O=this._parse(O,L.format);var M=L.kdf.execute(D,N.keySize,N.ivSize,O.salt,L.hasher);return L.iv=M.iv,S.decrypt.call(this,N,O,M.key,L)}})}()))},7193:function(l,d,o){var p;l.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var v=p,m=v.lib.StreamCipher,u=v.algo,b=u.RC4=m.extend({_doReset:function(){for(var g=this._key,y=g.words,_=g.sigBytes,x=this._S=[],E=0;E<256;E++)x[E]=E;E=0;for(var j=0;E<256;E++){var R=E%_,C=y[R>>>2]>>>24-R%4*8&255;j=(j+x[E]+C)%256;var T=x[E];x[E]=x[j],x[j]=T}this._i=this._j=0},_doProcessBlock:function(g,y){g[y]^=f.call(this)},keySize:8,ivSize:0});function f(){for(var g=this._S,y=this._i,_=this._j,x=0,E=0;E<4;E++){_=(_+g[y=(y+1)%256])%256;var j=g[y];g[y]=g[_],g[_]=j,x|=g[(g[y]+g[_])%256]<<24-8*E}return this._i=y,this._j=_,x}v.RC4=m._createHelper(b);var w=u.RC4Drop=b.extend({cfg:b.cfg.extend({drop:192}),_doReset:function(){b._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)f.call(this)}});v.RC4Drop=m._createHelper(w)}(),p.RC4)},7363:(l,d,o)=>{var p=o(5020),v=o(3804),m=o(5602);d.grammar=m,d.write=v,d.parse=p.parse,d.parseParams=p.parseParams,d.parseFmtpConfig=p.parseFmtpConfig,d.parsePayloads=p.parsePayloads,d.parseRemoteCandidates=p.parseRemoteCandidates,d.parseImageAttributes=p.parseImageAttributes,d.parseSimulcastStreamList=p.parseSimulcastStreamList},7402:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Chrome55=void 0;const p=o(7363),v=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),w=o(4496),g=o(521),y=o(1305),_=new v.Logger("Chrome55"),x={OS:1024,MIS:1024};class E extends g.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdTrack",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new E}get name(){return"Chrome55"}close(){if(_.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const T=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const h=p.parse(T.sdp);return f.extractRtpCapabilities({sdpObject:h})}catch(T){try{C.close()}catch{}throw T}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:C,iceParameters:T,iceCandidates:h,dtlsParameters:S,sctpParameters:k,iceServers:P,iceTransportPolicy:N,additionalSettings:O,proprietaryConstraints:D,extendedRtpCapabilities:L}){_.debug("run()"),this._direction=C,this._remoteSdp=new y.RemoteSdp({iceParameters:T,iceCandidates:h,dtlsParameters:S,sctpParameters:k,planB:!0}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",L),video:b.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",L),video:b.getSendingRemoteRtpParameters("video",L)},S.role&&S.role!=="auto"&&(this._forcedLocalDtlsRole=S.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...O},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){_.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=C,this._pc.setConfiguration(T)}async restartIce(C){if(_.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const h={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:T,codecOptions:h,codec:S}){this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),S&&_.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addStream(this._sendStream);let k,P=await this._pc.createOffer(),N=p.parse(P.sdp);N.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const O=u.clone(this._sendingRtpParametersByKind[C.kind]);O.codecs=b.reduceCodecs(O.codecs);const D=u.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(D.codecs=b.reduceCodecs(D.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),C.kind==="video"&&T&&T.length>1&&(_.debug("send() | enabling simulcast"),N=p.parse(P.sdp),k=N.media.find(I=>I.type==="video"),w.addLegacySimulcast({offerMediaObject:k,track:C,numStreams:T.length}),P={type:"offer",sdp:p.write(N)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),N=p.parse(this._pc.localDescription.sdp),k=N.media.find(I=>I.type===C.kind),O.rtcp.cname=f.getCname({offerMediaObject:k}),O.encodings=w.getRtpEncodings({offerMediaObject:k,track:C}),T)for(let I=0;I<O.encodings.length;++I)T[I]&&Object.assign(O.encodings[I],T[I]);if(O.encodings.length>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const I of O.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:k,offerRtpParameters:O,answerRtpParameters:D,codecOptions:h});const L={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const M=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(M,C),{localId:M,rtpParameters:O}}async stopSending(C){this.assertSendDirection(),_.debug("stopSending() [localId:%s]",C);const T=this._mapSendLocalIdTrack.get(C);if(!T)throw new Error("track not found");this._mapSendLocalIdTrack.delete(C),this._sendStream.removeTrack(T),this._pc.addStream(this._sendStream);const h=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(k){if(this._sendStream.getTracks().length===0)return void _.warn("stopSending() | ignoring expected error due no sending tracks: %s",k.toString());throw k}if(this._pc.signalingState==="stable")return;const S={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,T){throw new m.UnsupportedError("not implemented")}async setMaxSpatialLayer(C,T){throw new m.UnsupportedError(" not implemented")}async setRtpEncodingParameters(C,T){throw new m.UnsupportedError("not supported")}async getSenderStats(C){throw new m.UnsupportedError("not implemented")}async sendDataChannel({ordered:C,maxPacketLifeTime:T,maxRetransmits:h,label:S,protocol:k}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:h,protocol:k};_.debug("sendDataChannel() [options:%o]",P);const N=this._pc.createDataChannel(S,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),D=p.parse(O.sdp),L=D.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const M={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(C){this.assertRecvDirection();const T=[];for(const P of C){const{trackId:N,kind:O,rtpParameters:D,streamId:L}=P;_.debug("receive() [trackId:%s, kind:%s]",N,O);const M=O;this._remoteSdp.receive({mid:M,kind:O,offerRtpParameters:D,streamId:L??D.rtcp.cname,trackId:N})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let S=await this._pc.createAnswer();const k=p.parse(S.sdp);for(const P of C){const{kind:N,rtpParameters:O}=P,D=N,L=k.media.find(M=>String(M.mid)===D);f.applyCodecParameters({offerRtpParameters:O,answerMediaObject:L})}S={type:"answer",sdp:p.write(k)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:k}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",S),await this._pc.setLocalDescription(S);for(const P of C){const{kind:N,trackId:O,rtpParameters:D}=P,L=N,M=O,I=P.streamId??D.rtcp.cname,G=this._pc.getRemoteStreams().find(de=>de.id===I).getTrackById(M);if(!G)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(M,{mid:L,rtpParameters:D}),T.push({localId:M,track:G})}return T}async stopReceiving(C){this.assertRecvDirection();for(const S of C){_.debug("stopReceiving() [localId:%s]",S);const{mid:k,rtpParameters:P}=this._mapRecvLocalIdInfo.get(S)??{};this._mapRecvLocalIdInfo.delete(S),this._remoteSdp.planBStopReceiving({mid:k,offerRtpParameters:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){throw new m.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:C,label:T,protocol:h}){this.assertRecvDirection();const{streamId:S,ordered:k,maxPacketLifeTime:P,maxRetransmits:N}=C,O={negotiated:!0,id:S,ordered:k,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:N,protocol:h};_.debug("receiveDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(T,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const M=await this._pc.createAnswer();if(!this._transportReady){const I=p.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:C,localSdpObject:T}){T||(T=p.parse(this._pc.localDescription.sdp));const h=f.extractDtlsParameters({sdpObject:T});h.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((S,k)=>{this.safeEmit("@connect",{dtlsParameters:h},S,k)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Chrome55=E},7504:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DataProducer=void 0;const p=o(2994),v=o(3953),m=o(4893),u=new p.Logger("DataProducer");class b extends v.EnhancedEventEmitter{constructor({id:g,dataChannel:y,sctpStreamParameters:_,appData:x}){super();we(this,"_id");we(this,"_dataChannel");we(this,"_closed",!1);we(this,"_sctpStreamParameters");we(this,"_appData");we(this,"_observer",new v.EnhancedEventEmitter);u.debug("constructor()"),this._id=g,this._dataChannel=y,this._sctpStreamParameters=_,this._appData=x??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(g){this._dataChannel.bufferedAmountLowThreshold=g}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(u.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(u.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(g){if(u.debug("send()"),this._closed)throw new m.InvalidStateError("closed");this._dataChannel.send(g)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(u.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",g=>{if(this._closed)return;let{error:y}=g;y||(y=new Error("unknown DataChannel error")),y.errorDetail==="sctp-failure"?u.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",y.sctpCauseCode,y.message):u.error('DataChannel "error" event: %o',y),this.safeEmit("error",y)}),this._dataChannel.addEventListener("close",()=>{this._closed||(u.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||u.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}d.DataProducer=b},7628:function(l,d,o){var p;l.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var v=p,m=v.lib,u=m.WordArray,b=m.BlockCipher,f=v.algo,w=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],y=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],_=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],E=f.DES=b.extend({_doReset:function(){for(var T=this._key.words,h=[],S=0;S<56;S++){var k=w[S]-1;h[S]=T[k>>>5]>>>31-k%32&1}for(var P=this._subKeys=[],N=0;N<16;N++){var O=P[N]=[],D=y[N];for(S=0;S<24;S++)O[S/6|0]|=h[(g[S]-1+D)%28]<<31-S%6,O[4+(S/6|0)]|=h[28+(g[S+24]-1+D)%28]<<31-S%6;for(O[0]=O[0]<<1|O[0]>>>31,S=1;S<7;S++)O[S]=O[S]>>>4*(S-1)+3;O[7]=O[7]<<5|O[7]>>>27}var L=this._invSubKeys=[];for(S=0;S<16;S++)L[S]=P[15-S]},encryptBlock:function(T,h){this._doCryptBlock(T,h,this._subKeys)},decryptBlock:function(T,h){this._doCryptBlock(T,h,this._invSubKeys)},_doCryptBlock:function(T,h,S){this._lBlock=T[h],this._rBlock=T[h+1],j.call(this,4,252645135),j.call(this,16,65535),R.call(this,2,858993459),R.call(this,8,16711935),j.call(this,1,1431655765);for(var k=0;k<16;k++){for(var P=S[k],N=this._lBlock,O=this._rBlock,D=0,L=0;L<8;L++)D|=_[L][((O^P[L])&x[L])>>>0];this._lBlock=O,this._rBlock=N^D}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,j.call(this,1,1431655765),R.call(this,8,16711935),R.call(this,2,858993459),j.call(this,16,65535),j.call(this,4,252645135),T[h]=this._lBlock,T[h+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function j(T,h){var S=(this._lBlock>>>T^this._rBlock)&h;this._rBlock^=S,this._lBlock^=S<<T}function R(T,h){var S=(this._rBlock>>>T^this._lBlock)&h;this._lBlock^=S,this._rBlock^=S<<T}v.DES=b._createHelper(E);var C=f.TripleDES=b.extend({_doReset:function(){var T=this._key.words;if(T.length!==2&&T.length!==4&&T.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var h=T.slice(0,2),S=T.length<4?T.slice(0,2):T.slice(2,4),k=T.length<6?T.slice(0,2):T.slice(4,6);this._des1=E.createEncryptor(u.create(h)),this._des2=E.createEncryptor(u.create(S)),this._des3=E.createEncryptor(u.create(k))},encryptBlock:function(T,h){this._des1.encryptBlock(T,h),this._des2.decryptBlock(T,h),this._des3.encryptBlock(T,h)},decryptBlock:function(T,h){this._des3.decryptBlock(T,h),this._des2.encryptBlock(T,h),this._des1.decryptBlock(T,h)},keySize:6,ivSize:2,blockSize:2});v.TripleDES=b._createHelper(C)}(),p.TripleDES)},7654:(l,d,o)=>{var p="__lodash_hash_undefined__",v="[object Function]",m="[object GeneratorFunction]",u=/^\[object .+?Constructor\]$/,b=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,f=typeof self=="object"&&self&&self.Object===Object&&self,w=b||f||Function("return this")(),g,y=Array.prototype,_=Function.prototype,x=Object.prototype,E=w["__core-js_shared__"],j=(g=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",R=_.toString,C=x.hasOwnProperty,T=x.toString,h=RegExp("^"+R.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=y.splice,k=G(w,"Map"),P=G(Object,"create");function N(Q){var ae=-1,xe=Q?Q.length:0;for(this.clear();++ae<xe;){var Se=Q[ae];this.set(Se[0],Se[1])}}function O(Q){var ae=-1,xe=Q?Q.length:0;for(this.clear();++ae<xe;){var Se=Q[ae];this.set(Se[0],Se[1])}}function D(Q){var ae=-1,xe=Q?Q.length:0;for(this.clear();++ae<xe;){var Se=Q[ae];this.set(Se[0],Se[1])}}function L(Q,ae){for(var xe,Se,ie=Q.length;ie--;)if((xe=Q[ie][0])===(Se=ae)||xe!=xe&&Se!=Se)return ie;return-1}function M(Q){if(!ee(Q)||(ae=Q,j&&j in ae))return!1;var ae,xe=function(Se){var ie=ee(Se)?T.call(Se):"";return ie==v||ie==m}(Q)||function(Se){var ie=!1;if(Se!=null&&typeof Se.toString!="function")try{ie=!!(Se+"")}catch{}return ie}(Q)?h:u;return xe.test(function(Se){if(Se!=null){try{return R.call(Se)}catch{}try{return Se+""}catch{}}return""}(Q))}function I(Q,ae){var xe,Se,ie=Q.__data__;return((Se=typeof(xe=ae))=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?xe!=="__proto__":xe===null)?ie[typeof ae=="string"?"string":"hash"]:ie.map}function G(Q,ae){var xe=function(Se,ie){return Se==null?void 0:Se[ie]}(Q,ae);return M(xe)?xe:void 0}function de(Q,ae){if(typeof Q!="function"||ae&&typeof ae!="function")throw new TypeError("Expected a function");var xe=function(){var Se=arguments,ie=ae?ae.apply(this,Se):Se[0],We=xe.cache;if(We.has(ie))return We.get(ie);var Oe=Q.apply(this,Se);return xe.cache=We.set(ie,Oe),Oe};return xe.cache=new(de.Cache||D),xe}function ee(Q){var ae=typeof Q;return!!Q&&(ae=="object"||ae=="function")}N.prototype.clear=function(){this.__data__=P?P(null):{}},N.prototype.delete=function(Q){return this.has(Q)&&delete this.__data__[Q]},N.prototype.get=function(Q){var ae=this.__data__;if(P){var xe=ae[Q];return xe===p?void 0:xe}return C.call(ae,Q)?ae[Q]:void 0},N.prototype.has=function(Q){var ae=this.__data__;return P?ae[Q]!==void 0:C.call(ae,Q)},N.prototype.set=function(Q,ae){return this.__data__[Q]=P&&ae===void 0?p:ae,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(Q){var ae=this.__data__,xe=L(ae,Q);return!(xe<0)&&(xe==ae.length-1?ae.pop():S.call(ae,xe,1),!0)},O.prototype.get=function(Q){var ae=this.__data__,xe=L(ae,Q);return xe<0?void 0:ae[xe][1]},O.prototype.has=function(Q){return L(this.__data__,Q)>-1},O.prototype.set=function(Q,ae){var xe=this.__data__,Se=L(xe,Q);return Se<0?xe.push([Q,ae]):xe[Se][1]=ae,this},D.prototype.clear=function(){this.__data__={hash:new N,map:new(k||O),string:new N}},D.prototype.delete=function(Q){return I(this,Q).delete(Q)},D.prototype.get=function(Q){return I(this,Q).get(Q)},D.prototype.has=function(Q){return I(this,Q).has(Q)},D.prototype.set=function(Q,ae){return I(this,Q).set(Q,ae),this},de.Cache=D,l.exports=de},7800:(l,d,o)=>{o.d(d,{A:()=>v});var p=o(3145);function v(m,u){if(m){if(typeof m=="string")return(0,p.A)(m,u);var b={}.toString.call(m).slice(8,-1);return b==="Object"&&m.constructor&&(b=m.constructor.name),b==="Map"||b==="Set"?Array.from(m):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?(0,p.A)(m,u):void 0}}},7833:(l,d,o)=>{d.formatArgs=function(v){if(v[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+v[0]+(this.useColors?"%c ":" ")+"+"+l.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;v.splice(1,0,m,"color: inherit");let u=0,b=0;v[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(b=u))}),v.splice(b,0,m)},d.save=function(v){try{v?d.storage.setItem("debug",v):d.storage.removeItem("debug")}catch{}},d.load=function(){let v;try{v=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!v&&typeof process<"u"&&"env"in process&&(v=r.DEBUG),v},d.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let v;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(v=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(v[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},d.storage=function(){try{return localStorage}catch{}}(),d.destroy=(()=>{let v=!1;return()=>{v||(v=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],d.log=console.debug||console.log||(()=>{}),l.exports=o(736)(d);const{formatters:p}=l.exports;p.j=function(v){try{return JSON.stringify(v)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}},8046:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.validateRtpCapabilities=function(h){if(typeof h!="object")throw new TypeError("caps is not an object");if(h.codecs&&!Array.isArray(h.codecs))throw new TypeError("caps.codecs is not an array");h.codecs||(h.codecs=[]);for(const S of h.codecs)w(S);if(h.headerExtensions&&!Array.isArray(h.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");h.headerExtensions||(h.headerExtensions=[]);for(const S of h.headerExtensions)y(S)},d.validateRtpParameters=f,d.validateSctpStreamParameters=function(h){if(typeof h!="object")throw new TypeError("params is not an object");if(typeof h.streamId!="number")throw new TypeError("missing params.streamId");let S=!1;if(typeof h.ordered=="boolean"?S=!0:h.ordered=!0,h.maxPacketLifeTime&&typeof h.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(h.maxRetransmits&&typeof h.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(h.maxPacketLifeTime&&h.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(S&&h.ordered&&(h.maxPacketLifeTime||h.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(S||!h.maxPacketLifeTime&&!h.maxRetransmits||(h.ordered=!1),h.label&&typeof h.label!="string")throw new TypeError("invalid params.label");if(h.protocol&&typeof h.protocol!="string")throw new TypeError("invalid params.protocol")},d.validateSctpCapabilities=function(h){if(typeof h!="object")throw new TypeError("caps is not an object");if(!h.numStreams||typeof h.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(S){if(typeof S!="object")throw new TypeError("numStreams is not an object");if(typeof S.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof S.MIS!="number")throw new TypeError("missing numStreams.MIS")})(h.numStreams)},d.getExtendedRtpCapabilities=function(h,S){const k={codecs:[],headerExtensions:[]};for(const P of S.codecs??[]){if(j(P))continue;const N=(h.codecs??[]).find(D=>R(D,P,{strict:!0,modify:!0}));if(!N)continue;const O={mimeType:N.mimeType,kind:N.kind,clockRate:N.clockRate,channels:N.channels,localPayloadType:N.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:P.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:N.parameters,remoteParameters:P.parameters,rtcpFeedback:T(N,P)};k.codecs.push(O)}for(const P of k.codecs){const N=h.codecs.find(D=>j(D)&&D.parameters.apt===P.localPayloadType),O=S.codecs.find(D=>j(D)&&D.parameters.apt===P.remotePayloadType);N&&O&&(P.localRtxPayloadType=N.preferredPayloadType,P.remoteRtxPayloadType=O.preferredPayloadType)}for(const P of S.headerExtensions){const N=h.headerExtensions.find(D=>C(D,P));if(!N)continue;const O={kind:P.kind,uri:P.uri,sendId:N.preferredId,recvId:P.preferredId,encrypt:N.preferredEncrypt,direction:"sendrecv"};switch(P.direction){case"sendrecv":O.direction="sendrecv";break;case"recvonly":O.direction="sendonly";break;case"sendonly":O.direction="recvonly";break;case"inactive":O.direction="inactive"}k.headerExtensions.push(O)}return k},d.getRecvRtpCapabilities=function(h){const S={codecs:[],headerExtensions:[]};for(const k of h.codecs){const P={mimeType:k.mimeType,kind:k.kind,preferredPayloadType:k.remotePayloadType,clockRate:k.clockRate,channels:k.channels,parameters:k.localParameters,rtcpFeedback:k.rtcpFeedback};if(S.codecs.push(P),!k.remoteRtxPayloadType)continue;const N={mimeType:`${k.kind}/rtx`,kind:k.kind,preferredPayloadType:k.remoteRtxPayloadType,clockRate:k.clockRate,parameters:{apt:k.remotePayloadType},rtcpFeedback:[]};S.codecs.push(N)}for(const k of h.headerExtensions){if(k.direction!=="sendrecv"&&k.direction!=="recvonly")continue;const P={kind:k.kind,uri:k.uri,preferredId:k.recvId,preferredEncrypt:k.encrypt,direction:k.direction};S.headerExtensions.push(P)}return S},d.getSendingRtpParameters=function(h,S){const k={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const P of S.codecs){if(P.kind!==h)continue;const N={mimeType:P.mimeType,payloadType:P.localPayloadType,clockRate:P.clockRate,channels:P.channels,parameters:P.localParameters,rtcpFeedback:P.rtcpFeedback};if(k.codecs.push(N),P.localRtxPayloadType){const O={mimeType:`${P.kind}/rtx`,payloadType:P.localRtxPayloadType,clockRate:P.clockRate,parameters:{apt:P.localPayloadType},rtcpFeedback:[]};k.codecs.push(O)}}for(const P of S.headerExtensions){if(P.kind&&P.kind!==h||P.direction!=="sendrecv"&&P.direction!=="sendonly")continue;const N={uri:P.uri,id:P.sendId,encrypt:P.encrypt,parameters:{}};k.headerExtensions.push(N)}return k},d.getSendingRemoteRtpParameters=function(h,S){const k={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const P of S.codecs){if(P.kind!==h)continue;const N={mimeType:P.mimeType,payloadType:P.localPayloadType,clockRate:P.clockRate,channels:P.channels,parameters:P.remoteParameters,rtcpFeedback:P.rtcpFeedback};if(k.codecs.push(N),P.localRtxPayloadType){const O={mimeType:`${P.kind}/rtx`,payloadType:P.localRtxPayloadType,clockRate:P.clockRate,parameters:{apt:P.localPayloadType},rtcpFeedback:[]};k.codecs.push(O)}}for(const P of S.headerExtensions){if(P.kind&&P.kind!==h||P.direction!=="sendrecv"&&P.direction!=="sendonly")continue;const N={uri:P.uri,id:P.sendId,encrypt:P.encrypt,parameters:{}};k.headerExtensions.push(N)}if(k.headerExtensions.some(P=>P.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const P of k.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(N=>N.type!=="goog-remb");else if(k.headerExtensions.some(P=>P.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const P of k.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(N=>N.type!=="transport-cc");else for(const P of k.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(N=>N.type!=="transport-cc"&&N.type!=="goog-remb");return k},d.reduceCodecs=function(h,S){const k=[];if(S){for(let P=0;P<h.length;++P)if(R(h[P],S,{strict:!0})){k.push(h[P]),j(h[P+1])&&k.push(h[P+1]);break}if(k.length===0)throw new TypeError("no matching codec found")}else k.push(h[0]),j(h[1])&&k.push(h[1]);return k},d.generateProbatorRtpParameters=function(h){f(h=v.clone(h));const S={mid:m,codecs:[],headerExtensions:[],encodings:[{ssrc:u}],rtcp:{cname:"probator"}};return S.codecs.push(h.codecs[0]),S.codecs[0].payloadType=b,S.headerExtensions=h.headerExtensions,S},d.canSend=function(h,S){return S.codecs.some(k=>k.kind===h)},d.canReceive=function(h,S){if(f(h),h.codecs.length===0)return!1;const k=h.codecs[0];return S.codecs.some(P=>P.remotePayloadType===k.payloadType)};const p=o(3200),v=o(1765),m="probator",u=1234,b=127;function f(h){if(typeof h!="object")throw new TypeError("params is not an object");if(h.mid&&typeof h.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(h.codecs))throw new TypeError("missing params.codecs");for(const S of h.codecs)_(S);if(h.headerExtensions&&!Array.isArray(h.headerExtensions))throw new TypeError("params.headerExtensions is not an array");h.headerExtensions||(h.headerExtensions=[]);for(const S of h.headerExtensions)x(S);if(h.encodings&&!Array.isArray(h.encodings))throw new TypeError("params.encodings is not an array");h.encodings||(h.encodings=[]);for(const S of h.encodings)E(S);if(h.rtcp&&typeof h.rtcp!="object")throw new TypeError("params.rtcp is not an object");h.rtcp||(h.rtcp={}),function(S){if(typeof S!="object")throw new TypeError("rtcp is not an object");if(S.cname&&typeof S.cname!="string")throw new TypeError("invalid rtcp.cname");S.reducedSize&&typeof S.reducedSize=="boolean"||(S.reducedSize=!0)}(h.rtcp)}function w(h){const S=new RegExp("^(audio|video)/(.+)","i");if(typeof h!="object")throw new TypeError("codec is not an object");if(!h.mimeType||typeof h.mimeType!="string")throw new TypeError("missing codec.mimeType");const k=S.exec(h.mimeType);if(!k)throw new TypeError("invalid codec.mimeType");if(h.kind=k[1].toLowerCase(),h.preferredPayloadType&&typeof h.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof h.clockRate!="number")throw new TypeError("missing codec.clockRate");h.kind==="audio"?typeof h.channels!="number"&&(h.channels=1):delete h.channels,h.parameters&&typeof h.parameters=="object"||(h.parameters={});for(const P of Object.keys(h.parameters)){let N=h.parameters[P];if(N===void 0&&(h.parameters[P]="",N=""),typeof N!="string"&&typeof N!="number")throw new TypeError(`invalid codec parameter [key:${P}s, value:${N}]`);if(P==="apt"&&typeof N!="number")throw new TypeError("invalid codec apt parameter")}h.rtcpFeedback&&Array.isArray(h.rtcpFeedback)||(h.rtcpFeedback=[]);for(const P of h.rtcpFeedback)g(P)}function g(h){if(typeof h!="object")throw new TypeError("fb is not an object");if(!h.type||typeof h.type!="string")throw new TypeError("missing fb.type");h.parameter&&typeof h.parameter=="string"||(h.parameter="")}function y(h){if(typeof h!="object")throw new TypeError("ext is not an object");if(h.kind!=="audio"&&h.kind!=="video")throw new TypeError("invalid ext.kind");if(!h.uri||typeof h.uri!="string")throw new TypeError("missing ext.uri");if(typeof h.preferredId!="number")throw new TypeError("missing ext.preferredId");if(h.preferredEncrypt&&typeof h.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(h.preferredEncrypt||(h.preferredEncrypt=!1),h.direction&&typeof h.direction!="string")throw new TypeError("invalid ext.direction");h.direction||(h.direction="sendrecv")}function _(h){const S=new RegExp("^(audio|video)/(.+)","i");if(typeof h!="object")throw new TypeError("codec is not an object");if(!h.mimeType||typeof h.mimeType!="string")throw new TypeError("missing codec.mimeType");const k=S.exec(h.mimeType);if(!k)throw new TypeError("invalid codec.mimeType");if(typeof h.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof h.clockRate!="number")throw new TypeError("missing codec.clockRate");k[1].toLowerCase()==="audio"?typeof h.channels!="number"&&(h.channels=1):delete h.channels,h.parameters&&typeof h.parameters=="object"||(h.parameters={});for(const P of Object.keys(h.parameters)){let N=h.parameters[P];if(N===void 0&&(h.parameters[P]="",N=""),typeof N!="string"&&typeof N!="number")throw new TypeError(`invalid codec parameter [key:${P}s, value:${N}]`);if(P==="apt"&&typeof N!="number")throw new TypeError("invalid codec apt parameter")}h.rtcpFeedback&&Array.isArray(h.rtcpFeedback)||(h.rtcpFeedback=[]);for(const P of h.rtcpFeedback)g(P)}function x(h){if(typeof h!="object")throw new TypeError("ext is not an object");if(!h.uri||typeof h.uri!="string")throw new TypeError("missing ext.uri");if(typeof h.id!="number")throw new TypeError("missing ext.id");if(h.encrypt&&typeof h.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");h.encrypt||(h.encrypt=!1),h.parameters&&typeof h.parameters=="object"||(h.parameters={});for(const S of Object.keys(h.parameters)){let k=h.parameters[S];if(k===void 0&&(h.parameters[S]="",k=""),typeof k!="string"&&typeof k!="number")throw new TypeError("invalid header extension parameter")}}function E(h){if(typeof h!="object")throw new TypeError("encoding is not an object");if(h.ssrc&&typeof h.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(h.rid&&typeof h.rid!="string")throw new TypeError("invalid encoding.rid");if(h.rtx&&typeof h.rtx!="object")throw new TypeError("invalid encoding.rtx");if(h.rtx&&typeof h.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(h.dtx&&typeof h.dtx=="boolean"||(h.dtx=!1),h.scalabilityMode&&typeof h.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function j(h){return!!h&&/.+\/rtx$/i.test(h.mimeType)}function R(h,S,{strict:k=!1,modify:P=!1}={}){const N=h.mimeType.toLowerCase();if(N!==S.mimeType.toLowerCase()||h.clockRate!==S.clockRate||h.channels!==S.channels)return!1;switch(N){case"video/h264":if(k){if((h.parameters["packetization-mode"]??0)!==(S.parameters["packetization-mode"]??0)||!p.isSameProfile(h.parameters,S.parameters))return!1;let O;try{O=p.generateProfileLevelIdStringForAnswer(h.parameters,S.parameters)}catch{return!1}P&&(O?(h.parameters["profile-level-id"]=O,S.parameters["profile-level-id"]=O):(delete h.parameters["profile-level-id"],delete S.parameters["profile-level-id"]))}break;case"video/vp9":if(k&&(h.parameters["profile-id"]??0)!==(S.parameters["profile-id"]??0))return!1}return!0}function C(h,S){return(!h.kind||!S.kind||h.kind===S.kind)&&h.uri===S.uri}function T(h,S){const k=[];for(const P of h.rtcpFeedback??[]){const N=(S.rtcpFeedback??[]).find(O=>O.type===P.type&&(O.parameter===P.parameter||!O.parameter&&!P.parameter));N&&k.push(N)}return k}},8056:function(l,d,o){var p;l.exports=(p=o(9021),function(){var v=p,m=v.lib,u=m.WordArray,b=m.Hasher,f=v.algo,w=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=u.create([0,1518500249,1859775393,2400959708,2840853838]),E=u.create([1352829926,1548603684,1836072691,2053994217,0]),j=f.RIPEMD160=b.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,N){for(var O=0;O<16;O++){var D=N+O,L=P[D];P[D]=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8)}var M,I,G,de,ee,Q,ae,xe,Se,ie,We,Oe=this._hash.words,se=x.words,ue=E.words,Ce=w.words,$e=g.words,Wt=y.words,er=_.words;for(Q=M=Oe[0],ae=I=Oe[1],xe=G=Oe[2],Se=de=Oe[3],ie=ee=Oe[4],O=0;O<80;O+=1)We=M+P[N+Ce[O]]|0,We+=O<16?R(I,G,de)+se[0]:O<32?C(I,G,de)+se[1]:O<48?T(I,G,de)+se[2]:O<64?h(I,G,de)+se[3]:S(I,G,de)+se[4],We=(We=k(We|=0,Wt[O]))+ee|0,M=ee,ee=de,de=k(G,10),G=I,I=We,We=Q+P[N+$e[O]]|0,We+=O<16?S(ae,xe,Se)+ue[0]:O<32?h(ae,xe,Se)+ue[1]:O<48?T(ae,xe,Se)+ue[2]:O<64?C(ae,xe,Se)+ue[3]:R(ae,xe,Se)+ue[4],We=(We=k(We|=0,er[O]))+ie|0,Q=ie,ie=Se,Se=k(xe,10),xe=ae,ae=We;We=Oe[1]+G+Se|0,Oe[1]=Oe[2]+de+ie|0,Oe[2]=Oe[3]+ee+Q|0,Oe[3]=Oe[4]+M+ae|0,Oe[4]=Oe[0]+I+xe|0,Oe[0]=We},_doFinalize:function(){var P=this._data,N=P.words,O=8*this._nDataBytes,D=8*P.sigBytes;N[D>>>5]|=128<<24-D%32,N[14+(D+64>>>9<<4)]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),P.sigBytes=4*(N.length+1),this._process();for(var L=this._hash,M=L.words,I=0;I<5;I++){var G=M[I];M[I]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}return L},clone:function(){var P=b.clone.call(this);return P._hash=this._hash.clone(),P}});function R(P,N,O){return P^N^O}function C(P,N,O){return P&N|~P&O}function T(P,N,O){return(P|~N)^O}function h(P,N,O){return P&O|N&~O}function S(P,N,O){return P^(N|~O)}function k(P,N){return P<<N|P>>>32-N}v.RIPEMD160=b._createHelper(j),v.HmacRIPEMD160=b._createHmacHelper(j)}(),p.RIPEMD160)},8057:function(l,d,o){var p=this&&this.__createBinding||(Object.create?function(m,u,b,f){f===void 0&&(f=b);var w=Object.getOwnPropertyDescriptor(u,b);w&&!("get"in w?!u.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return u[b]}}),Object.defineProperty(m,f,w)}:function(m,u,b,f){f===void 0&&(f=b),m[f]=u[b]}),v=this&&this.__exportStar||function(m,u){for(var b in m)b==="default"||Object.prototype.hasOwnProperty.call(u,b)||p(u,m,b)};Object.defineProperty(d,"__esModule",{value:!0}),v(o(6004),d),v(o(5601),d),v(o(9792),d),v(o(3518),d),v(o(7504),d),v(o(9166),d),v(o(5370),d),v(o(4160),d),v(o(521),d),v(o(4893),d)},8124:function(l,d,o){var p;l.exports=(p=o(9021),o(7165),p.pad.NoPadding={pad:function(){},unpad:function(){}},p.pad.NoPadding)},8155:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Chrome67=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(4496),w=o(521),g=o(1305),y=new v.Logger("Chrome67"),_={OS:1024,MIS:1024};class x extends w.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdRtpSender",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new x}get name(){return"Chrome67"}close(){if(y.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const R=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const C=await R.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{R.close()}catch{}const T=p.parse(C.sdp);return b.extractRtpCapabilities({sdpObject:T})}catch(C){try{R.close()}catch{}throw C}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:_}}run({direction:R,iceParameters:C,iceCandidates:T,dtlsParameters:h,sctpParameters:S,iceServers:k,iceTransportPolicy:P,additionalSettings:N,proprietaryConstraints:O,extendedRtpCapabilities:D}){y.debug("run()"),this._direction=R,this._remoteSdp=new g.RemoteSdp({iceParameters:C,iceCandidates:T,dtlsParameters:h,sctpParameters:S,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",D),video:u.getSendingRtpParameters("video",D)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",D),video:u.getSendingRemoteRtpParameters("video",D)},h.role&&h.role!=="auto"&&(this._forcedLocalDtlsRole=h.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:k??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},O),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",L=>{this.emit("@icecandidateerror",L)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(R){y.debug("updateIceServers()");const C=this._pc.getConfiguration();C.iceServers=R,this._pc.setConfiguration(C)}async restartIce(R){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(R),this._transportReady)if(this._direction==="send"){const C=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const T={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const C={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const T=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this._pc.getStats()}async send({track:R,encodings:C,codecOptions:T,codec:h}){this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),h&&y.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(R),this._pc.addTrack(R,this._sendStream);let S,k=await this._pc.createOffer(),P=p.parse(k.sdp);P.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const N=m.clone(this._sendingRtpParametersByKind[R.kind]);N.codecs=u.reduceCodecs(N.codecs);const O=m.clone(this._sendingRemoteRtpParametersByKind[R.kind]);if(O.codecs=u.reduceCodecs(O.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),R.kind==="video"&&C&&C.length>1&&(y.debug("send() | enabling simulcast"),P=p.parse(k.sdp),S=P.media.find(I=>I.type==="video"),f.addLegacySimulcast({offerMediaObject:S,track:R,numStreams:C.length}),k={type:"offer",sdp:p.write(P)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k),P=p.parse(this._pc.localDescription.sdp),S=P.media.find(I=>I.type===R.kind),N.rtcp.cname=b.getCname({offerMediaObject:S}),N.encodings=f.getRtpEncodings({offerMediaObject:S,track:R}),C)for(let I=0;I<N.encodings.length;++I)C[I]&&Object.assign(N.encodings[I],C[I]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const I of N.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:S,offerRtpParameters:N,answerRtpParameters:O,codecOptions:T});const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D);const L=String(this._nextSendLocalId);this._nextSendLocalId++;const M=this._pc.getSenders().find(I=>I.track===R);return this._mapSendLocalIdRtpSender.set(L,M),{localId:L,rtpParameters:N,rtpSender:M}}async stopSending(R){this.assertSendDirection(),y.debug("stopSending() [localId:%s]",R);const C=this._mapSendLocalIdRtpSender.get(R);if(!C)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(C),C.track&&this._sendStream.removeTrack(C.track),this._mapSendLocalIdRtpSender.delete(R);const T=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T);try{await this._pc.setLocalDescription(T)}catch(S){if(this._sendStream.getTracks().length===0)return void y.warn("stopSending() | ignoring expected error due no sending tracks: %s",S.toString());throw S}if(this._pc.signalingState==="stable")return;const h={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}async pauseSending(R){}async resumeSending(R){}async replaceTrack(R,C){this.assertSendDirection(),C?y.debug("replaceTrack() [localId:%s, track.id:%s]",R,C.id):y.debug("replaceTrack() [localId:%s, no track]",R);const T=this._mapSendLocalIdRtpSender.get(R);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.track;await T.replaceTrack(C),h&&this._sendStream.removeTrack(h),C&&this._sendStream.addTrack(C)}async setMaxSpatialLayer(R,C){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",R,C);const T=this._mapSendLocalIdRtpSender.get(R);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((S,k)=>{S.active=k<=C}),await T.setParameters(h)}async setRtpEncodingParameters(R,C){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",R,C);const T=this._mapSendLocalIdRtpSender.get(R);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((S,k)=>{h.encodings[k]={...S,...C}}),await T.setParameters(h)}async getSenderStats(R){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(R);if(!C)throw new Error("associated RTCRtpSender not found");return C.getStats()}async sendDataChannel({ordered:R,maxPacketLifeTime:C,maxRetransmits:T,label:h,protocol:S}){this.assertSendDirection();const k={negotiated:!0,id:this._nextSendSctpStreamId,ordered:R,maxPacketLifeTime:C,maxRetransmitTime:C,maxRetransmits:T,protocol:S};y.debug("sendDataChannel() [options:%o]",k);const P=this._pc.createDataChannel(h,k);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%_.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),O=p.parse(N.sdp),D=O.media.find(M=>M.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:D});const L={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:P,sctpStreamParameters:{streamId:k.id,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits}}}async receive(R){this.assertRecvDirection();const C=[];for(const k of R){const{trackId:P,kind:N,rtpParameters:O,streamId:D}=k;y.debug("receive() [trackId:%s, kind:%s]",P,N);const L=N;this._remoteSdp.receive({mid:L,kind:N,offerRtpParameters:O,streamId:D??O.rtcp.cname,trackId:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);let h=await this._pc.createAnswer();const S=p.parse(h.sdp);for(const k of R){const{kind:P,rtpParameters:N}=k,O=P,D=S.media.find(L=>String(L.mid)===O);b.applyCodecParameters({offerRtpParameters:N,answerMediaObject:D})}h={type:"answer",sdp:p.write(S)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h);for(const k of R){const{kind:P,trackId:N,rtpParameters:O}=k,D=N,L=P,M=this._pc.getReceivers().find(I=>I.track&&I.track.id===D);if(!M)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(D,{mid:L,rtpParameters:O,rtpReceiver:M}),C.push({localId:D,track:M.track,rtpReceiver:M})}return C}async stopReceiving(R){this.assertRecvDirection();for(const h of R){y.debug("stopReceiving() [localId:%s]",h);const{mid:S,rtpParameters:k}=this._mapRecvLocalIdInfo.get(h)??{};this._mapRecvLocalIdInfo.delete(h),this._remoteSdp.planBStopReceiving({mid:S,offerRtpParameters:k})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const T=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async pauseReceiving(R){}async resumeReceiving(R){}async getReceiverStats(R){this.assertRecvDirection();const{rtpReceiver:C}=this._mapRecvLocalIdInfo.get(R)??{};if(!C)throw new Error("associated RTCRtpReceiver not found");return C.getStats()}async receiveDataChannel({sctpStreamParameters:R,label:C,protocol:T}){this.assertRecvDirection();const{streamId:h,ordered:S,maxPacketLifeTime:k,maxRetransmits:P}=R,N={negotiated:!0,id:h,ordered:S,maxPacketLifeTime:k,maxRetransmitTime:k,maxRetransmits:P,protocol:T};y.debug("receiveDataChannel() [options:%o]",N);const O=this._pc.createDataChannel(C,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const D={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const L=await this._pc.createAnswer();if(!this._transportReady){const M=p.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:O}}async setupTransport({localDtlsRole:R,localSdpObject:C}){C||(C=p.parse(this._pc.localDescription.sdp));const T=b.extractDtlsParameters({sdpObject:C});T.role=R,this._remoteSdp.updateDtlsRole(R==="client"?"server":"client"),await new Promise((h,S)=>{this.safeEmit("@connect",{dtlsParameters:T},h,S)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Chrome67=x},8274:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Logger=void 0;const p=o(7833),v="awaitqueue";d.Logger=class{constructor(m){we(this,"_debug");we(this,"_warn");we(this,"_error");m?(this._debug=p(`${v}:${m}`),this._warn=p(`${v}:WARN:${m}`),this._error=p(`${v}:ERROR:${m}`)):(this._debug=p(v),this._warn=p(`${v}:WARN`),this._error=p(`${v}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(l,d,o)=>{o.d(d,{Ag:()=>u,Wm:()=>b,sn:()=>f,tr:()=>g});var p=o(467),v=o(4756),m=o.n(v);o(1806);function u(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||b()}function b(){return window.RTCRtpScriptTransform!==void 0}function f(_){return w.apply(this,arguments)}function w(){return(w=(0,p.A)(m().mark(function _(x){var E,j;return m().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return E=new TextEncoder,R.next=3,crypto.subtle.importKey("raw",E.encode(x),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 3:return j=R.sent,R.abrupt("return",j);case 5:case"end":return R.stop()}},_)}))).apply(this,arguments)}function g(_){return y.apply(this,arguments)}function y(){return(y=(0,p.A)(m().mark(function _(x){var E;return m().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,crypto.subtle.importKey("raw",x,"HKDF",!1,["deriveBits","deriveKey"]);case 2:return E=j.sent,j.abrupt("return",E);case 4:case"end":return j.stop()}},_)}))).apply(this,arguments)}},8286:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(3779),v=o(2291),m=o(6011);d.default=function(u,b,f){var g;if(p.default.randomUUID&&!b&&!u)return p.default.randomUUID();const w=(u=u||{}).random??((g=u.rng)==null?void 0:g.call(u))??(0,v.default)();if(w.length<16)throw new Error("Random bytes length must be >= 16");if(w[6]=15&w[6]|64,w[8]=63&w[8]|128,b){if((f=f||0)<0||f+16>b.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);for(let y=0;y<16;++y)b[f+y]=w[y];return b}return(0,m.unsafeStringify)(w)}},8454:function(l,d,o){var p,v;l.exports=(v=o(9021),o(7165),v.mode.ECB=((p=v.lib.BlockCipherMode.extend()).Encryptor=p.extend({processBlock:function(m,u){this._cipher.encryptBlock(m,u)}}),p.Decryptor=p.extend({processBlock:function(m,u){this._cipher.decryptBlock(m,u)}}),p),v.mode.ECB)},8624:(l,d,o)=>{o.r(d),o.d(d,{DOMException:()=>k,Headers:()=>g,Request:()=>C,Response:()=>h,fetch:()=>P});var p=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||o.g!==void 0&&o.g||{},v={searchParams:"URLSearchParams"in p,iterable:"Symbol"in p&&"iterator"in Symbol,blob:"FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in p,arrayBuffer:"ArrayBuffer"in p};if(v.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(N){return N&&m.indexOf(Object.prototype.toString.call(N))>-1};function b(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function f(N){return typeof N!="string"&&(N=String(N)),N}function w(N){var O={next:function(){var D=N.shift();return{done:D===void 0,value:D}}};return v.iterable&&(O[Symbol.iterator]=function(){return O}),O}function g(N){this.map={},N instanceof g?N.forEach(function(O,D){this.append(D,O)},this):Array.isArray(N)?N.forEach(function(O){if(O.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+O.length);this.append(O[0],O[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(O){this.append(O,N[O])},this)}function y(N){if(!N._noBody)return N.bodyUsed?Promise.reject(new TypeError("Already read")):void(N.bodyUsed=!0)}function _(N){return new Promise(function(O,D){N.onload=function(){O(N.result)},N.onerror=function(){D(N.error)}})}function x(N){var O=new FileReader,D=_(O);return O.readAsArrayBuffer(N),D}function E(N){if(N.slice)return N.slice(0);var O=new Uint8Array(N.byteLength);return O.set(new Uint8Array(N)),O.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(N){var O;this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:v.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:v.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():v.arrayBuffer&&v.blob&&(O=N)&&DataView.prototype.isPrototypeOf(O)?(this._bodyArrayBuffer=E(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||u(N))?this._bodyArrayBuffer=E(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var N=y(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=y(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(v.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")},this.text=function(){var N,O,D,L,M,I=y(this);if(I)return I;if(this._bodyBlob)return N=this._bodyBlob,O=new FileReader,D=_(O),L=/charset=([A-Za-z0-9_-]+)/.exec(N.type),M=L?L[1]:"utf-8",O.readAsText(N,M),D;if(this._bodyArrayBuffer)return Promise.resolve(function(G){for(var de=new Uint8Array(G),ee=new Array(de.length),Q=0;Q<de.length;Q++)ee[Q]=String.fromCharCode(de[Q]);return ee.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}g.prototype.append=function(N,O){N=b(N),O=f(O);var D=this.map[N];this.map[N]=D?D+", "+O:O},g.prototype.delete=function(N){delete this.map[b(N)]},g.prototype.get=function(N){return N=b(N),this.has(N)?this.map[N]:null},g.prototype.has=function(N){return this.map.hasOwnProperty(b(N))},g.prototype.set=function(N,O){this.map[b(N)]=f(O)},g.prototype.forEach=function(N,O){for(var D in this.map)this.map.hasOwnProperty(D)&&N.call(O,this.map[D],D,this)},g.prototype.keys=function(){var N=[];return this.forEach(function(O,D){N.push(D)}),w(N)},g.prototype.values=function(){var N=[];return this.forEach(function(O){N.push(O)}),w(N)},g.prototype.entries=function(){var N=[];return this.forEach(function(O,D){N.push([D,O])}),w(N)},v.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);var R=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(N,O){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var D,L,M=(O=O||{}).body;if(N instanceof C){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,O.headers||(this.headers=new g(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,M||N._bodyInit==null||(M=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=O.credentials||this.credentials||"same-origin",!O.headers&&this.headers||(this.headers=new g(O.headers)),this.method=(D=O.method||this.method||"GET",L=D.toUpperCase(),R.indexOf(L)>-1?L:D),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal||function(){if("AbortController"in p)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),!(this.method!=="GET"&&this.method!=="HEAD"||O.cache!=="no-store"&&O.cache!=="no-cache")){var I=/([?&])_=[^&]*/;I.test(this.url)?this.url=this.url.replace(I,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function T(N){var O=new FormData;return N.trim().split("&").forEach(function(D){if(D){var L=D.split("="),M=L.shift().replace(/\+/g," "),I=L.join("=").replace(/\+/g," ");O.append(decodeURIComponent(M),decodeURIComponent(I))}}),O}function h(N,O){if(!(this instanceof h))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=O.statusText===void 0?"":""+O.statusText,this.headers=new g(O.headers),this.url=O.url||"",this._initBody(N)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})},j.call(C.prototype),j.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},h.error=function(){var N=new h(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var S=[301,302,303,307,308];h.redirect=function(N,O){if(S.indexOf(O)===-1)throw new RangeError("Invalid status code");return new h(null,{status:O,headers:{location:N}})};var k=p.DOMException;try{new k}catch{(k=function(O,D){this.message=O,this.name=D;var L=Error(O);this.stack=L.stack}).prototype=Object.create(Error.prototype),k.prototype.constructor=k}function P(N,O){return new Promise(function(D,L){var M=new C(N,O);if(M.signal&&M.signal.aborted)return L(new k("Aborted","AbortError"));var I=new XMLHttpRequest;function G(){I.abort()}if(I.onload=function(){var ee,Q,ae={statusText:I.statusText,headers:(ee=I.getAllResponseHeaders()||"",Q=new g,ee.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(Se){return Se.indexOf(`
`)===0?Se.substr(1,Se.length):Se}).forEach(function(Se){var ie=Se.split(":"),We=ie.shift().trim();if(We){var Oe=ie.join(":").trim();try{Q.append(We,Oe)}catch(se){console.warn("Response "+se.message)}}}),Q)};M.url.indexOf("file://")===0&&(I.status<200||I.status>599)?ae.status=200:ae.status=I.status,ae.url="responseURL"in I?I.responseURL:ae.headers.get("X-Request-URL");var xe="response"in I?I.response:I.responseText;setTimeout(function(){D(new h(xe,ae))},0)},I.onerror=function(){setTimeout(function(){L(new TypeError("Network request failed"))},0)},I.ontimeout=function(){setTimeout(function(){L(new TypeError("Network request timed out"))},0)},I.onabort=function(){setTimeout(function(){L(new k("Aborted","AbortError"))},0)},I.open(M.method,function(ee){try{return ee===""&&p.location.href?p.location.href:ee}catch{return ee}}(M.url),!0),M.credentials==="include"?I.withCredentials=!0:M.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&(v.blob?I.responseType="blob":v.arrayBuffer&&(I.responseType="arraybuffer")),O&&typeof O.headers=="object"&&!(O.headers instanceof g||p.Headers&&O.headers instanceof p.Headers)){var de=[];Object.getOwnPropertyNames(O.headers).forEach(function(ee){de.push(b(ee)),I.setRequestHeader(ee,f(O.headers[ee]))}),M.headers.forEach(function(ee,Q){de.indexOf(Q)===-1&&I.setRequestHeader(Q,ee)})}else M.headers.forEach(function(ee,Q){I.setRequestHeader(Q,ee)});M.signal&&(M.signal.addEventListener("abort",G),I.onreadystatechange=function(){I.readyState===4&&M.signal.removeEventListener("abort",G)}),I.send(M._bodyInit===void 0?null:M._bodyInit)})}P.polyfill=!0,p.fetch||(p.fetch=P,p.Headers=g,p.Request=C,p.Response=h)},8633:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Edge11=void 0;const p=o(2994),v=o(4893),m=o(1765),u=o(8046),b=o(8751),f=o(521),w=new p.Logger("Edge11");class g extends f.HandlerInterface{constructor(){super();we(this,"_sendingRtpParametersByKind");we(this,"_remoteIceParameters");we(this,"_remoteIceCandidates");we(this,"_remoteDtlsParameters");we(this,"_iceGatherer");we(this,"_iceTransport");we(this,"_dtlsTransport");we(this,"_rtpSenders",new Map);we(this,"_rtpReceivers",new Map);we(this,"_nextSendLocalId",0);we(this,"_cname");we(this,"_transportReady",!1)}static createFactory(){return()=>new g}get name(){return"Edge11"}close(){w.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const x of this._rtpSenders.values())try{x.stop()}catch{}for(const x of this._rtpReceivers.values())try{x.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return w.debug("getNativeRtpCapabilities()"),b.getCapabilities()}async getNativeSctpCapabilities(){return w.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:x,iceParameters:E,iceCandidates:j,dtlsParameters:R,sctpParameters:C,iceServers:T,iceTransportPolicy:h,additionalSettings:S,proprietaryConstraints:k,extendedRtpCapabilities:P}){w.debug("run()"),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",P),video:u.getSendingRtpParameters("video",P)},this._remoteIceParameters=E,this._remoteIceCandidates=j,this._remoteDtlsParameters=R,this._cname=`CNAME-${m.generateRandomNumber()}`,this.setIceGatherer({iceServers:T,iceTransportPolicy:h}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(x){throw new v.UnsupportedError("not supported")}async restartIce(x){if(w.debug("restartIce()"),this._remoteIceParameters=x,this._transportReady){w.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,x,"controlling");for(const E of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(E);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:x,encodings:E,codecOptions:j,codec:R}){w.debug("send() [kind:%s, track.id:%s]",x.kind,x.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),w.debug("send() | calling new RTCRtpSender()");const C=new RTCRtpSender(x,this._dtlsTransport),T=m.clone(this._sendingRtpParametersByKind[x.kind]);T.codecs=u.reduceCodecs(T.codecs,R);const h=T.codecs.some(P=>/.+\/rtx$/i.test(P.mimeType));E||(E=[{}]);for(const P of E)P.ssrc=m.generateRandomNumber(),h&&(P.rtx={ssrc:m.generateRandomNumber()});T.encodings=E,T.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const S=b.mangleRtpParameters(T);w.debug("send() | calling rtpSender.send() [params:%o]",S),await C.send(S);const k=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(k,C),{localId:k,rtpParameters:T,rtpSender:C}}async stopSending(x){w.debug("stopSending() [localId:%s]",x);const E=this._rtpSenders.get(x);if(!E)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(x);try{w.debug("stopSending() | calling rtpSender.stop()"),E.stop()}catch(j){throw w.warn("stopSending() | rtpSender.stop() failed:%o",j),j}}async pauseSending(x){}async resumeSending(x){}async replaceTrack(x,E){E?w.debug("replaceTrack() [localId:%s, track.id:%s]",x,E.id):w.debug("replaceTrack() [localId:%s, no track]",x);const j=this._rtpSenders.get(x);if(!j)throw new Error("RTCRtpSender not found");j.setTrack(E)}async setMaxSpatialLayer(x,E){w.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",x,E);const j=this._rtpSenders.get(x);if(!j)throw new Error("RTCRtpSender not found");const R=j.getParameters();R.encodings.forEach((C,T)=>{C.active=T<=E}),await j.setParameters(R)}async setRtpEncodingParameters(x,E){w.debug("setRtpEncodingParameters() [localId:%s, params:%o]",x,E);const j=this._rtpSenders.get(x);if(!j)throw new Error("RTCRtpSender not found");const R=j.getParameters();R.encodings.forEach((C,T)=>{R.encodings[T]={...C,...E}}),await j.setParameters(R)}async getSenderStats(x){const E=this._rtpSenders.get(x);if(!E)throw new Error("RTCRtpSender not found");return E.getStats()}async sendDataChannel(x){throw new v.UnsupportedError("not implemented")}async receive(x){const E=[];for(const j of x){const{trackId:R,kind:C}=j;w.debug("receive() [trackId:%s, kind:%s]",R,C)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const j of x){const{trackId:R,kind:C,rtpParameters:T}=j;w.debug("receive() | calling new RTCRtpReceiver()");const h=new RTCRtpReceiver(this._dtlsTransport,C);h.addEventListener("error",P=>{w.error('rtpReceiver "error" event [event:%o]',P)});const S=b.mangleRtpParameters(T);w.debug("receive() | calling rtpReceiver.receive() [params:%o]",S),await h.receive(S);const k=R;this._rtpReceivers.set(k,h),E.push({localId:k,track:h.track,rtpReceiver:h})}return E}async stopReceiving(x){for(const E of x){w.debug("stopReceiving() [localId:%s]",E);const j=this._rtpReceivers.get(E);if(!j)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(E);try{w.debug("stopReceiving() | calling rtpReceiver.stop()"),j.stop()}catch(R){w.warn("stopReceiving() | rtpReceiver.stop() failed:%o",R)}}}async pauseReceiving(x){}async resumeReceiving(x){}async getReceiverStats(x){const E=this._rtpReceivers.get(x);if(!E)throw new Error("RTCRtpReceiver not found");return E.getStats()}async receiveDataChannel(x){throw new v.UnsupportedError("not implemented")}setIceGatherer({iceServers:x,iceTransportPolicy:E}){const j=new RTCIceGatherer({iceServers:x??[],gatherPolicy:E??"all"});j.addEventListener("error",R=>{w.error('iceGatherer "error" event [event:%o]',R)});try{j.gather()}catch(R){w.debug("setIceGatherer() | iceGatherer.gather() failed: %s",R.toString())}this._iceGatherer=j}setIceTransport(){const x=new RTCIceTransport(this._iceGatherer);x.addEventListener("statechange",()=>{switch(x.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),x.addEventListener("icestatechange",()=>{switch(x.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),x.addEventListener("candidatepairchange",E=>{w.debug('iceTransport "candidatepairchange" event [pair:%o]',E.pair)}),this._iceTransport=x}setDtlsTransport(){const x=new RTCDtlsTransport(this._iceTransport);x.addEventListener("statechange",()=>{w.debug('dtlsTransport "statechange" event [state:%s]',x.state)}),x.addEventListener("dtlsstatechange",()=>{w.debug('dtlsTransport "dtlsstatechange" event [state:%s]',x.state),x.state==="closed"&&this.emit("@connectionstatechange","closed")}),x.addEventListener("error",E=>{w.error('dtlsTransport "error" event [event:%o]',E)}),this._dtlsTransport=x}async setupTransport({localDtlsRole:x}){w.debug("setupTransport()");const E=this._dtlsTransport.getLocalParameters();E.role=x,await new Promise((j,R)=>{this.safeEmit("@connect",{dtlsParameters:E},j,R)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const j of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(j);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(j=>j.algorithm==="sha-256"||j.algorithm==="sha-384"||j.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}d.Edge11=g},8751:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getCapabilities=function(){const v=RTCRtpReceiver.getCapabilities(),m=p.clone(v);for(const u of m.codecs??[]){if(u.channels=u.numChannels,delete u.numChannels,u.mimeType=u.mimeType??`${u.kind}/${u.name}`,u.parameters){const b=u.parameters;b.apt&&(b.apt=Number(b.apt)),b["packetization-mode"]&&(b["packetization-mode"]=Number(b["packetization-mode"]))}for(const b of u.rtcpFeedback??[])b.parameter||(b.parameter="")}return m},d.mangleRtpParameters=function(v){const m=p.clone(v);m.mid&&(m.muxId=m.mid,delete m.mid);for(const u of m.codecs)u.channels&&(u.numChannels=u.channels,delete u.channels),u.mimeType&&!u.name&&(u.name=u.mimeType.split("/")[1]),delete u.mimeType;return m};const p=o(1765)},8876:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AwaitQueueRemovedTaskError=d.AwaitQueueStoppedError=d.AwaitQueue=void 0;var p=o(9275);Object.defineProperty(d,"AwaitQueue",{enumerable:!0,get:function(){return p.AwaitQueue}});var v=o(4253);Object.defineProperty(d,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return v.AwaitQueueStoppedError}}),Object.defineProperty(d,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return v.AwaitQueueRemovedTaskError}})},9021:function(l,d,o){var p;l.exports=(p=p||function(v,m){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&o.g!==void 0&&o.g.crypto&&(u=o.g.crypto),!u)try{u=o(477)}catch{}var b=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function h(){}return function(S){var k;return h.prototype=S,k=new h,h.prototype=null,k}}(),w={},g=w.lib={},y=g.Base={extend:function(h){var S=f(this);return h&&S.mixIn(h),S.hasOwnProperty("init")&&this.init!==S.init||(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var S in h)h.hasOwnProperty(S)&&(this[S]=h[S]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}},_=g.WordArray=y.extend({init:function(h,S){h=this.words=h||[],this.sigBytes=S!=m?S:4*h.length},toString:function(h){return(h||E).stringify(this)},concat:function(h){var S=this.words,k=h.words,P=this.sigBytes,N=h.sigBytes;if(this.clamp(),P%4)for(var O=0;O<N;O++){var D=k[O>>>2]>>>24-O%4*8&255;S[P+O>>>2]|=D<<24-(P+O)%4*8}else for(var L=0;L<N;L+=4)S[P+L>>>2]=k[L>>>2];return this.sigBytes+=N,this},clamp:function(){var h=this.words,S=this.sigBytes;h[S>>>2]&=4294967295<<32-S%4*8,h.length=v.ceil(S/4)},clone:function(){var h=y.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var S=[],k=0;k<h;k+=4)S.push(b());return new _.init(S,h)}}),x=w.enc={},E=x.Hex={stringify:function(h){for(var S=h.words,k=h.sigBytes,P=[],N=0;N<k;N++){var O=S[N>>>2]>>>24-N%4*8&255;P.push((O>>>4).toString(16)),P.push((15&O).toString(16))}return P.join("")},parse:function(h){for(var S=h.length,k=[],P=0;P<S;P+=2)k[P>>>3]|=parseInt(h.substr(P,2),16)<<24-P%8*4;return new _.init(k,S/2)}},j=x.Latin1={stringify:function(h){for(var S=h.words,k=h.sigBytes,P=[],N=0;N<k;N++){var O=S[N>>>2]>>>24-N%4*8&255;P.push(String.fromCharCode(O))}return P.join("")},parse:function(h){for(var S=h.length,k=[],P=0;P<S;P++)k[P>>>2]|=(255&h.charCodeAt(P))<<24-P%4*8;return new _.init(k,S)}},R=x.Utf8={stringify:function(h){try{return decodeURIComponent(escape(j.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return j.parse(unescape(encodeURIComponent(h)))}},C=g.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new _.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=R.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var S,k=this._data,P=k.words,N=k.sigBytes,O=this.blockSize,D=N/(4*O),L=(D=h?v.ceil(D):v.max((0|D)-this._minBufferSize,0))*O,M=v.min(4*L,N);if(L){for(var I=0;I<L;I+=O)this._doProcessBlock(P,I);S=P.splice(0,L),k.sigBytes-=M}return new _.init(S,M)},clone:function(){var h=y.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),T=(g.Hasher=C.extend({cfg:y.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){return h&&this._append(h),this._doFinalize()},blockSize:16,_createHelper:function(h){return function(S,k){return new h.init(k).finalize(S)}},_createHmacHelper:function(h){return function(S,k){return new T.HMAC.init(h,k).finalize(S)}}}),w.algo={});return w}(Math),p)},9027:(l,d,o)=>{o.d(d,{$:()=>p});var p={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DataConsumer=void 0;const p=o(2994),v=o(3953),m=new p.Logger("DataConsumer");class u extends v.EnhancedEventEmitter{constructor({id:w,dataProducerId:g,dataChannel:y,sctpStreamParameters:_,appData:x}){super();we(this,"_id");we(this,"_dataProducerId");we(this,"_dataChannel");we(this,"_closed",!1);we(this,"_sctpStreamParameters");we(this,"_appData");we(this,"_observer",new v.EnhancedEventEmitter);m.debug("constructor()"),this._id=w,this._dataProducerId=g,this._dataChannel=y,this._sctpStreamParameters=_,this._appData=x??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(w){this._dataChannel.binaryType=w}get appData(){return this._appData}set appData(w){this._appData=w}get observer(){return this._observer}close(){this._closed||(m.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(m.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(m.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",w=>{if(this._closed)return;let{error:g}=w;g||(g=new Error("unknown DataChannel error")),g.errorDetail==="sctp-failure"?m.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",g.sctpCauseCode,g.message):m.error('DataChannel "error" event: %o',g),this.safeEmit("error",g)}),this._dataChannel.addEventListener("close",()=>{this._closed||(m.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",w=>{this._closed||this.safeEmit("message",w.data)})}}d.DataConsumer=u},9275:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AwaitQueue=void 0;const p=o(8274),v=o(4253),m=new p.Logger("AwaitQueue");d.AwaitQueue=class{constructor(){we(this,"pendingTasks",new Map);we(this,"nextTaskId",0);we(this,"stopping",!1);m.debug("constructor()")}get size(){return this.pendingTasks.size}async push(u,b){if(b=b??u.name,m.debug(`push() [name:${b}]`),typeof u!="function")throw new TypeError("given task is not a function");if(b)try{Object.defineProperty(u,"name",{value:b})}catch{}return new Promise((f,w)=>{const g={id:this.nextTaskId++,task:u,name:b,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:y=>{if(g.completed)return;g.completed=!0,this.pendingTasks.delete(g.id),m.debug(`resolving task [name:${g.name}]`),f(y);const[_]=this.pendingTasks.values();_&&!_.executedAt&&this.execute(_)},reject:y=>{if(!g.completed&&(g.completed=!0,this.pendingTasks.delete(g.id),m.debug(`rejecting task [name:${g.name}]: %s`,String(y)),w(y),!this.stopping)){const[_]=this.pendingTasks.values();_&&!_.executedAt&&this.execute(_)}}};this.pendingTasks.set(g.id,g),this.pendingTasks.size===1&&this.execute(g)})}stop(){m.debug("stop()"),this.stopping=!0;for(const u of this.pendingTasks.values())m.debug(`stop() | stopping task [name:${u.name}]`),u.reject(new v.AwaitQueueStoppedError);this.stopping=!1}remove(u){m.debug(`remove() [taskIdx:${u}]`);const b=Array.from(this.pendingTasks.values())[u];b?b.reject(new v.AwaitQueueRemovedTaskError):m.debug(`stop() | no task with given idx [taskIdx:${u}]`)}dump(){const u=Date.now();let b=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:b++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:u-f.enqueuedAt,executionTime:f.executedAt?u-f.executedAt:0}))}async execute(u){if(m.debug(`execute() [name:${u.name}]`),u.executedAt)throw new Error("task already being executed");u.executedAt=Date.now();try{const b=await u.task();u.resolve(b)}catch(b){u.reject(b)}}}},9352:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ReactNative=void 0;const p=o(7363),v=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),w=o(4496),g=o(521),y=o(1305),_=new v.Logger("ReactNative"),x={OS:1024,MIS:1024};class E extends g.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdTrack",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new E}get name(){return"ReactNative"}close(){if(_.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const T=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const h=p.parse(T.sdp);return f.extractRtpCapabilities({sdpObject:h})}catch(T){try{C.close()}catch{}throw T}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:C,iceParameters:T,iceCandidates:h,dtlsParameters:S,sctpParameters:k,iceServers:P,iceTransportPolicy:N,additionalSettings:O,proprietaryConstraints:D,extendedRtpCapabilities:L}){_.debug("run()"),this._direction=C,this._remoteSdp=new y.RemoteSdp({iceParameters:T,iceCandidates:h,dtlsParameters:S,sctpParameters:k,planB:!0}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",L),video:b.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",L),video:b.getSendingRemoteRtpParameters("video",L)},S.role&&S.role!=="auto"&&(this._forcedLocalDtlsRole=S.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...O},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){_.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=C,this._pc.setConfiguration(T)}async restartIce(C){if(_.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const h={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:T,codecOptions:h,codec:S}){this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),S&&_.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addStream(this._sendStream);let k,P=await this._pc.createOffer(),N=p.parse(P.sdp);N.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const O=u.clone(this._sendingRtpParametersByKind[C.kind]);O.codecs=b.reduceCodecs(O.codecs);const D=u.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(D.codecs=b.reduceCodecs(D.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),C.kind==="video"&&T&&T.length>1&&(_.debug("send() | enabling simulcast"),N=p.parse(P.sdp),k=N.media.find(I=>I.type==="video"),w.addLegacySimulcast({offerMediaObject:k,track:C,numStreams:T.length}),P={type:"offer",sdp:p.write(N)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),N=p.parse(this._pc.localDescription.sdp),k=N.media.find(I=>I.type===C.kind),O.rtcp.cname=f.getCname({offerMediaObject:k}),O.encodings=w.getRtpEncodings({offerMediaObject:k,track:C}),T)for(let I=0;I<O.encodings.length;++I)T[I]&&Object.assign(O.encodings[I],T[I]);if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const I of O.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:k,offerRtpParameters:O,answerRtpParameters:D,codecOptions:h});const L={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const M=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(M,C),{localId:M,rtpParameters:O}}async stopSending(C){this.assertSendDirection(),_.debug("stopSending() [localId:%s]",C);const T=this._mapSendLocalIdTrack.get(C);if(!T)throw new Error("track not found");this._mapSendLocalIdTrack.delete(C),this._sendStream.removeTrack(T),this._pc.addStream(this._sendStream);const h=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(k){if(this._sendStream.getTracks().length===0)return void _.warn("stopSending() | ignoring expected error due no sending tracks: %s",k.toString());throw k}if(this._pc.signalingState==="stable")return;const S={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,T){throw new m.UnsupportedError("not implemented")}async setMaxSpatialLayer(C,T){throw new m.UnsupportedError("not implemented")}async setRtpEncodingParameters(C,T){throw new m.UnsupportedError("not implemented")}async getSenderStats(C){throw new m.UnsupportedError("not implemented")}async sendDataChannel({ordered:C,maxPacketLifeTime:T,maxRetransmits:h,label:S,protocol:k}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:h,protocol:k};_.debug("sendDataChannel() [options:%o]",P);const N=this._pc.createDataChannel(S,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),D=p.parse(O.sdp),L=D.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const M={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(C){this.assertRecvDirection();const T=[],h=new Map;for(const N of C){const{trackId:O,kind:D,rtpParameters:L}=N;_.debug("receive() [trackId:%s, kind:%s]",O,D);const M=D;let I=N.streamId??L.rtcp.cname;_.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),I+=`-hack-${u.generateRandomNumber()}`,h.set(O,I),this._remoteSdp.receive({mid:M,kind:D,offerRtpParameters:L,streamId:I,trackId:O})}const S={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);let k=await this._pc.createAnswer();const P=p.parse(k.sdp);for(const N of C){const{kind:O,rtpParameters:D}=N,L=O,M=P.media.find(I=>String(I.mid)===L);f.applyCodecParameters({offerRtpParameters:D,answerMediaObject:M})}k={type:"answer",sdp:p.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const N of C){const{kind:O,trackId:D,rtpParameters:L}=N,M=D,I=O,G=h.get(D),de=this._pc.getRemoteStreams().find(ee=>ee.id===G).getTrackById(M);if(!de)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(M,{mid:I,rtpParameters:L}),T.push({localId:M,track:de})}return T}async stopReceiving(C){this.assertRecvDirection();for(const S of C){_.debug("stopReceiving() [localId:%s]",S);const{mid:k,rtpParameters:P}=this._mapRecvLocalIdInfo.get(S)??{};this._mapRecvLocalIdInfo.delete(S),this._remoteSdp.planBStopReceiving({mid:k,offerRtpParameters:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){throw new m.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:C,label:T,protocol:h}){this.assertRecvDirection();const{streamId:S,ordered:k,maxPacketLifeTime:P,maxRetransmits:N}=C,O={negotiated:!0,id:S,ordered:k,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:N,protocol:h};_.debug("receiveDataChannel() [options:%o]",O);const D=this._pc.createDataChannel(T,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const M=await this._pc.createAnswer();if(!this._transportReady){const I=p.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:C,localSdpObject:T}){T||(T=p.parse(this._pc.localDescription.sdp));const h=f.extractDtlsParameters({sdpObject:T});h.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((S,k)=>{this.safeEmit("@connect",{dtlsParameters:h},S,k)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.ReactNative=E},9506:function(l,d,o){var p,v,m,u,b,f,w,g;l.exports=(g=o(9021),o(5471),o(1025),v=(p=g).lib,m=v.Base,u=v.WordArray,b=p.algo,f=b.MD5,w=b.EvpKDF=m.extend({cfg:m.extend({keySize:4,hasher:f,iterations:1}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,_){for(var x,E=this.cfg,j=E.hasher.create(),R=u.create(),C=R.words,T=E.keySize,h=E.iterations;C.length<T;){x&&j.update(x),x=j.update(y).finalize(_),j.reset();for(var S=1;S<h;S++)x=j.finalize(x),j.reset();R.concat(x)}return R.sigBytes=4*T,R}}),p.EvpKDF=function(y,_,x){return w.create(x).compute(y,_)},g.EvpKDF)},9557:function(l,d,o){var p,v,m,u,b,f,w,g;l.exports=(g=o(9021),o(3240),o(1380),v=(p=g).x64,m=v.Word,u=v.WordArray,b=p.algo,f=b.SHA512,w=b.SHA384=f.extend({_doReset:function(){this._hash=new u.init([new m.init(3418070365,3238371032),new m.init(1654270250,914150663),new m.init(2438529370,812702999),new m.init(355462360,4144912697),new m.init(1731405415,4290775857),new m.init(2394180231,1750603025),new m.init(3675008525,1694076839),new m.init(1203062813,3204075428)])},_doFinalize:function(){var y=f._doFinalize.call(this);return y.sigBytes-=16,y}}),p.SHA384=f._createHelper(w),p.HmacSHA384=f._createHmacHelper(w),g.SHA384)},9596:l=>{var d,o=typeof Reflect=="object"?Reflect:null,p=o&&typeof o.apply=="function"?o.apply:function(R,C,T){return Function.prototype.apply.call(R,C,T)};d=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:function(R){return Object.getOwnPropertyNames(R)};var v=Number.isNaN||function(R){return R!=R};function m(){m.init.call(this)}l.exports=m,l.exports.once=function(R,C){return new Promise(function(T,h){function S(P){R.removeListener(C,k),h(P)}function k(){typeof R.removeListener=="function"&&R.removeListener("error",S),T([].slice.call(arguments))}j(R,C,k,{once:!0}),C!=="error"&&function(P,N,O){typeof P.on=="function"&&j(P,"error",N,O)}(R,S,{once:!0})})},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var u=10;function b(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}function f(R){return R._maxListeners===void 0?m.defaultMaxListeners:R._maxListeners}function w(R,C,T,h){var S,k,P,N;if(b(T),(k=R._events)===void 0?(k=R._events=Object.create(null),R._eventsCount=0):(k.newListener!==void 0&&(R.emit("newListener",C,T.listener?T.listener:T),k=R._events),P=k[C]),P===void 0)P=k[C]=T,++R._eventsCount;else if(typeof P=="function"?P=k[C]=h?[T,P]:[P,T]:h?P.unshift(T):P.push(T),(S=f(R))>0&&P.length>S&&!P.warned){P.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=R,O.type=C,O.count=P.length,N=O,console&&console.warn&&console.warn(N)}return R}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(R,C,T){var h={fired:!1,wrapFn:void 0,target:R,type:C,listener:T},S=g.bind(h);return S.listener=T,h.wrapFn=S,S}function _(R,C,T){var h=R._events;if(h===void 0)return[];var S=h[C];return S===void 0?[]:typeof S=="function"?T?[S.listener||S]:[S]:T?function(k){for(var P=new Array(k.length),N=0;N<P.length;++N)P[N]=k[N].listener||k[N];return P}(S):E(S,S.length)}function x(R){var C=this._events;if(C!==void 0){var T=C[R];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function E(R,C){for(var T=new Array(C),h=0;h<C;++h)T[h]=R[h];return T}function j(R,C,T,h){if(typeof R.on=="function")h.once?R.once(C,T):R.on(C,T);else{if(typeof R.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R);R.addEventListener(C,function S(k){h.once&&R.removeEventListener(C,S),T(k)})}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(R){if(typeof R!="number"||R<0||v(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");u=R}}),m.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||v(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this},m.prototype.getMaxListeners=function(){return f(this)},m.prototype.emit=function(R){for(var C=[],T=1;T<arguments.length;T++)C.push(arguments[T]);var h=R==="error",S=this._events;if(S!==void 0)h=h&&S.error===void 0;else if(!h)return!1;if(h){var k;if(C.length>0&&(k=C[0]),k instanceof Error)throw k;var P=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw P.context=k,P}var N=S[R];if(N===void 0)return!1;if(typeof N=="function")p(N,this,C);else{var O=N.length,D=E(N,O);for(T=0;T<O;++T)p(D[T],this,C)}return!0},m.prototype.addListener=function(R,C){return w(this,R,C,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(R,C){return w(this,R,C,!0)},m.prototype.once=function(R,C){return b(C),this.on(R,y(this,R,C)),this},m.prototype.prependOnceListener=function(R,C){return b(C),this.prependListener(R,y(this,R,C)),this},m.prototype.removeListener=function(R,C){var T,h,S,k,P;if(b(C),(h=this._events)===void 0)return this;if((T=h[R])===void 0)return this;if(T===C||T.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete h[R],h.removeListener&&this.emit("removeListener",R,T.listener||C));else if(typeof T!="function"){for(S=-1,k=T.length-1;k>=0;k--)if(T[k]===C||T[k].listener===C){P=T[k].listener,S=k;break}if(S<0)return this;S===0?T.shift():function(N,O){for(;O+1<N.length;O++)N[O]=N[O+1];N.pop()}(T,S),T.length===1&&(h[R]=T[0]),h.removeListener!==void 0&&this.emit("removeListener",R,P||C)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(R){var C,T,h;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[R]),this;if(arguments.length===0){var S,k=Object.keys(T);for(h=0;h<k.length;++h)(S=k[h])!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=T[R])=="function")this.removeListener(R,C);else if(C!==void 0)for(h=C.length-1;h>=0;h--)this.removeListener(R,C[h]);return this},m.prototype.listeners=function(R){return _(this,R,!0)},m.prototype.rawListeners=function(R){return _(this,R,!1)},m.listenerCount=function(R,C){return typeof R.listenerCount=="function"?R.listenerCount(C):x.call(R,C)},m.prototype.listenerCount=x,m.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},9633:(l,d,o)=>{o.d(d,{l:()=>C});var p=o(467),v=o(3029),m=o(2901),u=o(388),b=o(3954),f=o(5501),w=o(4756),g=o.n(w),y=o(7007),_=o(1806),x=o(6746),E=o(8278);function j(T,h,S){return h=(0,b.A)(h),(0,u.A)(T,R()?Reflect.construct(h,S||[],(0,b.A)(T).constructor):h.apply(T,S))}function R(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R=function(){return!!T})()}var C=function(T){function h(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,v.A)(this,h),j(this,h,[Object.assign(Object.assign({},k),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,f.A)(h,T),(0,m.A)(h,[{key:"setSharedKey",value:(S=(0,p.A)(g().mark(function k(P){var N;return g().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(typeof P!="string"){O.next=6;break}return O.next=3,(0,E.sn)(P);case 3:O.t0=O.sent,O.next=9;break;case 6:return O.next=8,(0,E.tr)(P);case 8:O.t0=O.sent;case 9:N=O.t0,this.onSetEncryptionKey(N);case 11:case"end":return O.stop()}},k,this)})),function(k){return S.apply(this,arguments)})}]);var S}(function(T){function h(){var S,k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,v.A)(this,h),(S=j(this,h)).onKeyRatcheted=function(P,N){console.debug("key ratcheted event received",{material:P,keyIndex:N})},S.keyInfoMap=new Map,S.options=Object.assign(Object.assign({},_.T4),k),S.on(x.fo.KeyRatcheted,S.onKeyRatcheted),S}return(0,f.A)(h,T),(0,m.A)(h,[{key:"onSetEncryptionKey",value:function(S,k,P){var N={key:S,participantIdentity:k,keyIndex:P};if(!this.options.sharedKey&&!k)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(k??"shared","-").concat(P??0),N),this.emit(x.fo.SetKey,N)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(S,k){this.emit(x.fo.RatchetRequest,S,k)}}])}(y.EventEmitter))},9676:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Safari11=void 0;const p=o(7363),v=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(4496),w=o(521),g=o(1305),y=new v.Logger("Safari11"),_={OS:1024,MIS:1024};class x extends w.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdRtpSender",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new x}get name(){return"Safari11"}close(){if(y.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const R=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const C=await R.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{R.close()}catch{}const T=p.parse(C.sdp);return b.extractRtpCapabilities({sdpObject:T})}catch(C){try{R.close()}catch{}throw C}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:_}}run({direction:R,iceParameters:C,iceCandidates:T,dtlsParameters:h,sctpParameters:S,iceServers:k,iceTransportPolicy:P,additionalSettings:N,proprietaryConstraints:O,extendedRtpCapabilities:D}){y.debug("run()"),this._direction=R,this._remoteSdp=new g.RemoteSdp({iceParameters:C,iceCandidates:T,dtlsParameters:h,sctpParameters:S,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",D),video:u.getSendingRtpParameters("video",D)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",D),video:u.getSendingRemoteRtpParameters("video",D)},h.role&&h.role!=="auto"&&(this._forcedLocalDtlsRole=h.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:k??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...N},O),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",L=>{this.emit("@icecandidateerror",L)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(R){y.debug("updateIceServers()");const C=this._pc.getConfiguration();C.iceServers=R,this._pc.setConfiguration(C)}async restartIce(R){if(y.debug("restartIce()"),this._remoteSdp.updateIceParameters(R),this._transportReady)if(this._direction==="send"){const C=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const T={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const C={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const T=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this._pc.getStats()}async send({track:R,encodings:C,codecOptions:T,codec:h}){this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),h&&y.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(R),this._pc.addTrack(R,this._sendStream);let S,k=await this._pc.createOffer(),P=p.parse(k.sdp);P.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const N=m.clone(this._sendingRtpParametersByKind[R.kind]);N.codecs=u.reduceCodecs(N.codecs);const O=m.clone(this._sendingRemoteRtpParametersByKind[R.kind]);if(O.codecs=u.reduceCodecs(O.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),R.kind==="video"&&C&&C.length>1&&(y.debug("send() | enabling simulcast"),P=p.parse(k.sdp),S=P.media.find(I=>I.type==="video"),f.addLegacySimulcast({offerMediaObject:S,track:R,numStreams:C.length}),k={type:"offer",sdp:p.write(P)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k),P=p.parse(this._pc.localDescription.sdp),S=P.media.find(I=>I.type===R.kind),N.rtcp.cname=b.getCname({offerMediaObject:S}),N.encodings=f.getRtpEncodings({offerMediaObject:S,track:R}),C)for(let I=0;I<N.encodings.length;++I)C[I]&&Object.assign(N.encodings[I],C[I]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const I of N.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:S,offerRtpParameters:N,answerRtpParameters:O,codecOptions:T});const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D);const L=String(this._nextSendLocalId);this._nextSendLocalId++;const M=this._pc.getSenders().find(I=>I.track===R);return this._mapSendLocalIdRtpSender.set(L,M),{localId:L,rtpParameters:N,rtpSender:M}}async stopSending(R){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(R);if(!C)throw new Error("associated RTCRtpSender not found");C.track&&this._sendStream.removeTrack(C.track),this._mapSendLocalIdRtpSender.delete(R);const T=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T);try{await this._pc.setLocalDescription(T)}catch(S){if(this._sendStream.getTracks().length===0)return void y.warn("stopSending() | ignoring expected error due no sending tracks: %s",S.toString());throw S}if(this._pc.signalingState==="stable")return;const h={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}async pauseSending(R){}async resumeSending(R){}async replaceTrack(R,C){this.assertSendDirection(),C?y.debug("replaceTrack() [localId:%s, track.id:%s]",R,C.id):y.debug("replaceTrack() [localId:%s, no track]",R);const T=this._mapSendLocalIdRtpSender.get(R);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.track;await T.replaceTrack(C),h&&this._sendStream.removeTrack(h),C&&this._sendStream.addTrack(C)}async setMaxSpatialLayer(R,C){this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",R,C);const T=this._mapSendLocalIdRtpSender.get(R);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((S,k)=>{S.active=k<=C}),await T.setParameters(h)}async setRtpEncodingParameters(R,C){this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",R,C);const T=this._mapSendLocalIdRtpSender.get(R);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((S,k)=>{h.encodings[k]={...S,...C}}),await T.setParameters(h)}async getSenderStats(R){this.assertSendDirection();const C=this._mapSendLocalIdRtpSender.get(R);if(!C)throw new Error("associated RTCRtpSender not found");return C.getStats()}async sendDataChannel({ordered:R,maxPacketLifeTime:C,maxRetransmits:T,label:h,protocol:S}){this.assertSendDirection();const k={negotiated:!0,id:this._nextSendSctpStreamId,ordered:R,maxPacketLifeTime:C,maxRetransmits:T,protocol:S};y.debug("sendDataChannel() [options:%o]",k);const P=this._pc.createDataChannel(h,k);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%_.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),O=p.parse(N.sdp),D=O.media.find(M=>M.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:D});const L={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:P,sctpStreamParameters:{streamId:k.id,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits}}}async receive(R){this.assertRecvDirection();const C=[];for(const k of R){const{trackId:P,kind:N,rtpParameters:O,streamId:D}=k;y.debug("receive() [trackId:%s, kind:%s]",P,N);const L=N;this._remoteSdp.receive({mid:L,kind:N,offerRtpParameters:O,streamId:D??O.rtcp.cname,trackId:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);let h=await this._pc.createAnswer();const S=p.parse(h.sdp);for(const k of R){const{kind:P,rtpParameters:N}=k,O=P,D=S.media.find(L=>String(L.mid)===O);b.applyCodecParameters({offerRtpParameters:N,answerMediaObject:D})}h={type:"answer",sdp:p.write(S)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h);for(const k of R){const{kind:P,trackId:N,rtpParameters:O}=k,D=P,L=N,M=this._pc.getReceivers().find(I=>I.track&&I.track.id===L);if(!M)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(L,{mid:D,rtpParameters:O,rtpReceiver:M}),C.push({localId:L,track:M.track,rtpReceiver:M})}return C}async stopReceiving(R){this.assertRecvDirection();for(const h of R){y.debug("stopReceiving() [localId:%s]",h);const{mid:S,rtpParameters:k}=this._mapRecvLocalIdInfo.get(h)??{};this._mapRecvLocalIdInfo.delete(h),this._remoteSdp.planBStopReceiving({mid:S,offerRtpParameters:k})}const C={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const T=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async getReceiverStats(R){this.assertRecvDirection();const{rtpReceiver:C}=this._mapRecvLocalIdInfo.get(R)??{};if(!C)throw new Error("associated RTCRtpReceiver not found");return C.getStats()}async pauseReceiving(R){}async resumeReceiving(R){}async receiveDataChannel({sctpStreamParameters:R,label:C,protocol:T}){this.assertRecvDirection();const{streamId:h,ordered:S,maxPacketLifeTime:k,maxRetransmits:P}=R,N={negotiated:!0,id:h,ordered:S,maxPacketLifeTime:k,maxRetransmits:P,protocol:T};y.debug("receiveDataChannel() [options:%o]",N);const O=this._pc.createDataChannel(C,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const D={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const L=await this._pc.createAnswer();if(!this._transportReady){const M=p.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:O}}async setupTransport({localDtlsRole:R,localSdpObject:C}){C||(C=p.parse(this._pc.localDescription.sdp));const T=b.extractDtlsParameters({sdpObject:C});T.role=R,this._remoteSdp.updateDtlsRole(R==="client"?"server":"client"),await new Promise((h,S)=>{this.safeEmit("@connect",{dtlsParameters:T},h,S)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}d.Safari11=x},9746:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0});const p=o(6697);d.default=function(v){return typeof v=="string"&&p.default.test(v)}},9792:(l,d,o)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.Producer=void 0;const p=o(2994),v=o(3953),m=o(4893),u=new p.Logger("Producer");class b extends v.EnhancedEventEmitter{constructor({id:g,localId:y,rtpSender:_,track:x,rtpParameters:E,stopTracks:j,disableTrackOnPause:R,zeroRtpOnPause:C,appData:T}){super();we(this,"_id");we(this,"_localId");we(this,"_closed",!1);we(this,"_rtpSender");we(this,"_track");we(this,"_kind");we(this,"_rtpParameters");we(this,"_paused");we(this,"_maxSpatialLayer");we(this,"_stopTracks");we(this,"_disableTrackOnPause");we(this,"_zeroRtpOnPause");we(this,"_appData");we(this,"_observer",new v.EnhancedEventEmitter);u.debug("constructor()"),this._id=g,this._localId=y,this._rtpSender=_,this._track=x,this._kind=x.kind,this._rtpParameters=E,this._paused=!!R&&!x.enabled,this._maxSpatialLayer=void 0,this._stopTracks=j,this._disableTrackOnPause=R,this._zeroRtpOnPause=C,this._appData=T??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(u.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(u.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new m.InvalidStateError("closed");return new Promise((g,y)=>{this.safeEmit("@getstats",g,y)})}pause(){u.debug("pause()"),this._closed?u.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((g,y)=>{this.safeEmit("@pause",g,y)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){u.debug("resume()"),this._closed?u.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((g,y)=>{this.safeEmit("@resume",g,y)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:g}){if(u.debug("replaceTrack() [track:%o]",g),this._closed){if(g&&this._stopTracks)try{g.stop()}catch{}throw new m.InvalidStateError("closed")}if(g&&g.readyState==="ended")throw new m.InvalidStateError("track ended");g!==this._track?(await new Promise((y,_)=>{this.safeEmit("@replacetrack",g,y,_)}),this.destroyTrack(),this._track=g,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):u.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(g){if(this._closed)throw new m.InvalidStateError("closed");if(this._kind!=="video")throw new m.UnsupportedError("not a video Producer");if(typeof g!="number")throw new TypeError("invalid spatialLayer");g!==this._maxSpatialLayer&&(await new Promise((y,_)=>{this.safeEmit("@setmaxspatiallayer",g,y,_)}).catch(()=>{}),this._maxSpatialLayer=g)}async setRtpEncodingParameters(g){if(this._closed)throw new m.InvalidStateError("closed");if(typeof g!="object")throw new TypeError("invalid params");await new Promise((y,_)=>{this.safeEmit("@setrtpencodingparameters",g,y,_)})}onTrackEnded(){u.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}d.Producer=b}},s={};function i(l){var d=s[l];if(d!==void 0)return d.exports;var o=s[l]={exports:{}};return n[l].call(o.exports,o,o.exports,i),o.exports}i.amdO={},i.n=l=>{var d=l&&l.__esModule?()=>l.default:()=>l;return i.d(d,{a:d}),d},i.d=(l,d)=>{for(var o in d)i.o(d,o)&&!i.o(l,o)&&Object.defineProperty(l,o,{enumerable:!0,get:d[o]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(l,d)=>Object.prototype.hasOwnProperty.call(l,d),i.r=l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var c={};return(()=>{i.r(c),i.d(c,{CameraDeviceInfo:()=>zu,DeviceInfo:()=>hl,ExternalE2EEKeyProvider:()=>wa.l,MicrophoneDeviceInfo:()=>ud,VideoSDK:()=>Ps,ZujoSDK:()=>ji});var l=i(2284),d=i(467),o=i(3029),p=i(2901),v=i(4467),m=i(4756),u=i.n(m),b=i(6880),f=i.n(b);function w(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function g(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?w(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):w(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}function y(F){return"Minified Redux error #"+F+"; visit https://redux.js.org/Errors?code="+F+" for the full message or use the non-minified dev environment for full errors. "}var _=typeof Symbol=="function"&&Symbol.observable||"@@observable",x=function(){return Math.random().toString(36).substring(7).split("").join(".")},E={INIT:"@@redux/INIT"+x(),REPLACE:"@@redux/REPLACE"+x(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+x()}};function j(F){if(typeof F!="object"||F===null)return!1;for(var U=F;Object.getPrototypeOf(U)!==null;)U=Object.getPrototypeOf(U);return Object.getPrototypeOf(F)===U}function R(F,U,W){var Z;if(typeof U=="function"&&typeof W=="function"||typeof W=="function"&&typeof arguments[3]=="function")throw new Error(y(0));if(typeof U=="function"&&W===void 0&&(W=U,U=void 0),W!==void 0){if(typeof W!="function")throw new Error(y(1));return W(R)(F,U)}if(typeof F!="function")throw new Error(y(2));var le=F,ne=U,me=[],ye=me,be=!1;function ke(){ye===me&&(ye=me.slice())}function Ae(){if(be)throw new Error(y(3));return ne}function ce(ve){if(typeof ve!="function")throw new Error(y(4));if(be)throw new Error(y(5));var J=!0;return ke(),ye.push(ve),function(){if(J){if(be)throw new Error(y(6));J=!1,ke();var X=ye.indexOf(ve);ye.splice(X,1),me=null}}}function _e(ve){if(!j(ve))throw new Error(y(7));if(ve.type===void 0)throw new Error(y(8));if(be)throw new Error(y(9));try{be=!0,ne=le(ne,ve)}finally{be=!1}for(var J=me=ye,X=0;X<J.length;X++)(0,J[X])();return ve}return _e({type:E.INIT}),(Z={dispatch:_e,subscribe:ce,getState:Ae,replaceReducer:function(ve){if(typeof ve!="function")throw new Error(y(10));le=ve,_e({type:E.REPLACE})}})[_]=function(){var ve,J=ce;return(ve={subscribe:function(X){if(typeof X!="object"||X===null)throw new Error(y(11));function he(){X.next&&X.next(Ae())}return he(),{unsubscribe:J(he)}}})[_]=function(){return this},ve},Z}function C(){for(var F=arguments.length,U=new Array(F),W=0;W<F;W++)U[W]=arguments[W];return U.length===0?function(Z){return Z}:U.length===1?U[0]:U.reduce(function(Z,le){return function(){return Z(le.apply(void 0,arguments))}})}function T(){for(var F=arguments.length,U=new Array(F),W=0;W<F;W++)U[W]=arguments[W];return function(Z){return function(){var le=Z.apply(void 0,arguments),ne=function(){throw new Error(y(15))},me={getState:le.getState,dispatch:function(){return ne.apply(void 0,arguments)}},ye=U.map(function(be){return be(me)});return ne=C.apply(void 0,ye)(le.dispatch),g(g({},le),{},{dispatch:ne})}}}function h(F){return function(U){var W=U.dispatch,Z=U.getState;return function(le){return function(ne){return typeof ne=="function"?ne(W,Z,F):le(ne)}}}}var S=h();S.withExtraArgument=h;const k=S;var P=i(2211),N=i.n(P);function O(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function D(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?O(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):O(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var L={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const M=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_URL":var W=U.payload.url;return D(D({},F),{},{url:W});case"SET_ROOM_STATE":var Z=U.payload.state;return D(D({},F),{},Z==="connected"?{state:Z}:{state:Z,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var le=U.payload.peerId;return D(D({},F),{},{activeSpeakerId:le});case"SET_ROOM_STATS_PEER_ID":var ne=U.payload.peerId;return F.statsPeerId===ne?D(D({},F),{},{statsPeerId:null}):D(D({},F),{},{statsPeerId:ne});case"SET_FACE_DETECTION":var me=U.payload;return D(D({},F),{},{faceDetection:me});case"REMOVE_PEER":var ye=U.payload.peerId,be=D({},F);return ye&&ye===F.activeSpeakerId&&(be.activeSpeakerId=null),ye&&ye===F.statsPeerId&&(be.statsPeerId=null),be;default:return F}};function I(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function G(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?I(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):I(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var de={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const ee=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?G(G({},F),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):F;case"SET_ME":var W=U.payload,Z=W.peerId,le=W.displayName,ne=W.displayNameSet,me=W.device;return G(G({},F),{},{id:Z,displayName:le,displayNameSet:ne,device:me});case"SET_MEDIA_CAPABILITIES":var ye=U.payload,be=ye.canSendMic,ke=ye.canSendWebcam;return G(G({},F),{},{canSendMic:be,canSendWebcam:ke});case"SET_CAN_CHANGE_WEBCAM":var Ae=U.payload;return G(G({},F),{},{canChangeWebcam:Ae});case"SET_WEBCAM_IN_PROGRESS":var ce=U.payload.flag;return G(G({},F),{},{webcamInProgress:ce});case"SET_SHARE_IN_PROGRESS":var _e=U.payload.flag;return G(G({},F),{},{shareInProgress:_e});case"SET_DISPLAY_NAME":var ve=U.payload.displayName;return ve||(ve=F.displayName),G(G({},F),{},{displayName:ve,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var J=U.payload.enabled;return G(G({},F),{},{audioOnly:J});case"SET_AUDIO_ONLY_IN_PROGRESS":var X=U.payload.flag;return G(G({},F),{},{audioOnlyInProgress:X});case"SET_AUDIO_MUTED_STATE":var he=U.payload.enabled;return G(G({},F),{},{audioMuted:he});case"SET_RESTART_ICE_IN_PROGRESS":var je=U.payload.flag;return G(G({},F),{},{restartIceInProgress:je});default:return F}};function Q(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function ae(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?Q(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):Q(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var xe={};const Se=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xe,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_PRODUCER":var W=U.payload.producer;return ae(ae({},F),{},(0,v.A)({},W.id,W));case"REMOVE_PRODUCER":var Z=U.payload.producerId,le=ae({},F);return delete le[Z],le;case"SET_PRODUCER_PAUSED":var ne=U.payload.producerId,me=ae(ae({},F[ne]),{},{paused:!0});return ae(ae({},F),{},(0,v.A)({},ne,me));case"SET_PRODUCER_RESUMED":var ye=U.payload.producerId,be=ae(ae({},F[ye]),{},{paused:!1});return ae(ae({},F),{},(0,v.A)({},ye,be));case"SET_PRODUCER_TRACK":var ke=U.payload,Ae=ke.producerId,ce=ke.track,_e=ae(ae({},F[Ae]),{},{track:ce});return ae(ae({},F),{},(0,v.A)({},Ae,_e));case"SET_PRODUCER_SCORE":var ve=U.payload,J=ve.producerId,X=ve.score,he=F[J];if(!he)return F;var je=ae(ae({},he),{},{score:X});return ae(ae({},F),{},(0,v.A)({},J,je));default:return F}};function ie(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function We(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?ie(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):ie(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var Oe={};const se=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oe,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_DATA_PRODUCER":var W=U.payload.dataProducer;return We(We({},F),{},(0,v.A)({},W.id,W));case"REMOVE_DATA_PRODUCER":var Z=U.payload.dataProducerId,le=We({},F);return delete le[Z],le;default:return F}};var ue=i(5458);function Ce(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function $e(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?Ce(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):Ce(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var Wt={};function er(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function wt(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?er(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):er(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var Er={};function yr(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Ot(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?yr(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):yr(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var nn={},Dt=[];const Xt=function(F){for(var U=Object.keys(F),W={},Z=0;Z<U.length;Z++){var le=U[Z];typeof F[le]=="function"&&(W[le]=F[le])}var ne,me=Object.keys(W);try{(function(ye){Object.keys(ye).forEach(function(be){var ke=ye[be];if(ke(void 0,{type:E.INIT})===void 0)throw new Error(y(12));if(ke(void 0,{type:E.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(y(13))})})(W)}catch(ye){ne=ye}return function(ye,be){if(ye===void 0&&(ye={}),ne)throw ne;for(var ke=!1,Ae={},ce=0;ce<me.length;ce++){var _e=me[ce],ve=W[_e],J=ye[_e],X=ve(J,be);if(X===void 0)throw be&&be.type,new Error(y(14));Ae[_e]=X,ke=ke||X!==J}return(ke=ke||me.length!==Object.keys(ye).length)?Ae:ye}}({room:M,me:ee,producers:Se,dataProducers:se,peers:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wt,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_PEER":var W=U.payload.peer;return $e($e({},F),{},(0,v.A)({},W.id,W));case"REMOVE_PEER":var Z=U.payload.peerId,le=$e({},F);return delete le[Z],le;case"SET_PEER_DISPLAY_NAME":var ne=U.payload,me=ne.displayName,ye=F[ne.peerId];if(!ye)throw new Error("no Peer found");var be=$e($e({},ye),{},{displayName:me});return $e($e({},F),{},(0,v.A)({},be.id,be));case"ADD_CONSUMER":var ke=U.payload,Ae=ke.consumer,ce=F[ke.peerId];if(!ce)return $e({},F);var _e=[].concat((0,ue.A)(ce.consumers),[Ae.id]),ve=$e($e({},ce),{},{consumers:_e});return $e($e({},F),{},(0,v.A)({},ve.id,ve));case"REMOVE_CONSUMER":var J=U.payload,X=J.consumerId,he=F[J.peerId];if(!he)return F;var je=he.consumers.indexOf(X);if(je===-1)return $e({},F);var Ie=he.consumers.slice();Ie.splice(je,1);var xt=$e($e({},he),{},{consumers:Ie});return $e($e({},F),{},(0,v.A)({},xt.id,xt));case"ADD_DATA_CONSUMER":var ut=U.payload,et=ut.dataConsumer,Qt=ut.peerId;if(!Qt)return F;var Fe=F[Qt];if(!Fe)return $e({},F);var Ee=[].concat((0,ue.A)(Fe.dataConsumers),[et.id]),Qe=$e($e({},Fe),{},{dataConsumers:Ee});return $e($e({},F),{},(0,v.A)({},Qe.id,Qe));case"REMOVE_DATA_CONSUMER":var He=U.payload,qt=He.dataConsumerId,vr=He.peerId;if(!vr)return F;var At=F[vr];if(!At)return F;var Hr=At.dataConsumers.indexOf(qt);if(Hr===-1)return $e({},F);var Cn=At.dataConsumers.slice();Cn.splice(Hr,1);var tn=$e($e({},At),{},{dataConsumers:Cn});return $e($e({},F),{},(0,v.A)({},tn.id,tn));default:return F}},consumers:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Er,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_CONSUMER":var W=U.payload.consumer;return wt(wt({},F),{},(0,v.A)({},W.id,W));case"REMOVE_CONSUMER":var Z=U.payload.consumerId,le=wt({},F);return delete le[Z],le;case"SET_CONSUMER_PAUSED":var ne,me=U.payload,ye=me.consumerId,be=me.originator,ke=F[ye];return ne=wt(wt({},ke),{},be==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),wt(wt({},F),{},(0,v.A)({},ye,ne));case"SET_CONSUMER_RESUMED":var Ae,ce=U.payload,_e=ce.consumerId,ve=ce.originator,J=F[_e];return Ae=wt(wt({},J),{},ve==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),wt(wt({},F),{},(0,v.A)({},_e,Ae));case"SET_CONSUMER_CURRENT_LAYERS":var X=U.payload,he=X.consumerId,je=X.spatialLayer,Ie=X.temporalLayer,xt=wt(wt({},F[he]),{},{currentSpatialLayer:je,currentTemporalLayer:Ie});return wt(wt({},F),{},(0,v.A)({},he,xt));case"SET_CONSUMER_PREFERRED_LAYERS":var ut=U.payload,et=ut.consumerId,Qt=ut.spatialLayer,Fe=ut.temporalLayer,Ee=wt(wt({},F[et]),{},{preferredSpatialLayer:Qt,preferredTemporalLayer:Fe});return wt(wt({},F),{},(0,v.A)({},et,Ee));case"SET_CONSUMER_PRIORITY":var Qe=U.payload,He=Qe.consumerId,qt=Qe.priority,vr=wt(wt({},F[He]),{},{priority:qt});return wt(wt({},F),{},(0,v.A)({},He,vr));case"SET_CONSUMER_TRACK":var At=U.payload,Hr=At.consumerId,Cn=At.track,tn=wt(wt({},F[Hr]),{},{track:Cn});return wt(wt({},F),{},(0,v.A)({},Hr,tn));case"SET_CONSUMER_SCORE":var Is=U.payload,cn=Is.consumerId,Ns=Is.score,uc=F[cn];if(!uc)return F;var Nl=wt(wt({},uc),{},{score:Ns});return wt(wt({},F),{},(0,v.A)({},cn,Nl));default:return F}},dataConsumers:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_DATA_CONSUMER":var W=U.payload.dataConsumer;return Ot(Ot({},F),{},(0,v.A)({},W.id,W));case"REMOVE_DATA_CONSUMER":var Z=U.payload.dataConsumerId,le=Ot({},F);return delete le[Z],le;default:return F}},notifications:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dt,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"ADD_NOTIFICATION":var W=U.payload.notification;return[].concat((0,ue.A)(F),[W]);case"REMOVE_NOTIFICATION":var Z=U.payload.notificationId;return F.filter(function(le){return le.id!==Z});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return F}}});var Gr=i(1919),dn=i(7007),Mr=i(296),Yr=(i(1919).default,(0,p.A)(function F(){(0,o.A)(this,F),this.roomClient=null})),un=new(function(){function F(){(0,o.A)(this,F),F.instance||(F.instance=new Yr)}return(0,p.A)(F,[{key:"getInstance",value:function(){return F.instance}}])}());Object.freeze(un);var Mt=un.getInstance(),pn=function(){return(0,p.A)(function F(U){(0,o.A)(this,F),(0,v.A)(this,"pausedBy",void 0),this.id=U.id,this.kind=U.track.kind,this.codec=U.codec,this.track=U.track,this.producerOrConsumer=U.instance,U.appData&&U.appData.share===!0&&U.track.kind==="video"&&(this.kind="share"),U.appData&&U.appData.share===!0&&U.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=U.rtpSender,this.rtpReceiver=U.rtpReceiver},[{key:"pause",value:function(){Mt.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Mt.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}])}(),sn=i(1803);function zr(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Lr(F,U){var W=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!W){if(Array.isArray(F)||(W=function(be,ke){if(be){if(typeof be=="string")return _n(be,ke);var Ae={}.toString.call(be).slice(8,-1);return Ae==="Object"&&be.constructor&&(Ae=be.constructor.name),Ae==="Map"||Ae==="Set"?Array.from(be):Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae)?_n(be,ke):void 0}}(F))||U){W&&(F=W);var Z=0,le=function(){};return{s:le,n:function(){return Z>=F.length?{done:!0}:{done:!1,value:F[Z++]}},e:function(be){throw be},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,me=!0,ye=!1;return{s:function(){W=W.call(F)},n:function(){var be=W.next();return me=be.done,be},e:function(be){ye=!0,ne=be},f:function(){try{me||W.return==null||W.return()}finally{if(ye)throw ne}}}}function _n(F,U){(U==null||U>F.length)&&(U=F.length);for(var W=0,Z=Array(U);W<U;W++)Z[W]=F[W];return Z}var Xr="stream-enabled",Pn="stream-disabled",Sn="media-status-changed",In="video-quality-changed",Nn="stream-paused",zt="stream-resumed",Mn="producer-added",ns="producer-removed",hn="consumer-added",or="consumer-removed",Ye="e2ee-state-change",Me=function(){return(0,p.A)(function ne(me){var ye=this;(0,o.A)(this,ne),(0,v.A)(this,"captureImage",(0,d.A)(u().mark(function be(){var ke,Ae,ce,_e,ve,J,X,he,je=arguments;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:Ae=(ke=je.length>0&&je[0]!==void 0?je[0]:{}).height,ce=ke.width,Ie.prev=1,_e=(0,ue.A)(ye.streams.values()),ve=Lr(_e),Ie.prev=4,X=u().mark(function xt(){var ut,et,Qt,Fe,Ee;return u().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if((ut=J.value).kind!="video"){Qe.next=19;break}return Qe.prev=2,(et=new MediaStream).addTrack(ut.track),(Qt=document.createElement("video")).srcObject=et,Qt.playsInline=!0,(Fe=document.createElement("canvas")).id="canvasId",Qe.next=12,new Promise(function(He,qt){Qt.addEventListener("loadeddata",(0,d.A)(u().mark(function vr(){var At,Hr,Cn,tn,Is,cn;return u().wrap(function(Ns){for(;;)switch(Ns.prev=Ns.next){case 0:return At=Qt.videoWidth,Hr=Qt.videoHeight,Cn=16/9,Ae==null&&ce==null&&(Ae=Hr,ce=At),Ae==null&&Ae==null||(Ae<=0||Ae>Hr)&&(Ae=Hr),ce==null&&ce==null||(ce<=0||ce>At)&&(ce=At),Ae==null&&(Ae=ce/Cn),ce==null&&(ce=Ae*Cn),Fe.width=ce,Fe.height=Ae,Ns.prev=9,Ns.next=12,Qt.play();case 12:document.body.appendChild(Qt),tn=(Fe.width-At*Cn)/2,Is=(Fe.height-Hr*Cn)/2,Fe.getContext("2d").clearRect(0,0,tn/2,Is/2),Fe.getContext("2d").drawImage(Qt,0,0),cn=Fe.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(Fe),document.body.removeChild(Fe),document.body.removeChild(Qt),He(cn),Ns.next=28;break;case 24:Ns.prev=24,Ns.t0=Ns.catch(9),qt(Ns.t0),console.log("error in video",Ns.t0);case 28:case"end":return Ns.stop()}},vr,null,[[9,24]])})))});case 12:return Ee=Qe.sent,Qe.abrupt("return",{v:Ee});case 16:Qe.prev=16,Qe.t0=Qe.catch(2),console.error("err on image capture",Qe.t0);case 19:case"end":return Qe.stop()}},xt,null,[[2,16]])}),ve.s();case 7:if((J=ve.n()).done){Ie.next=14;break}return Ie.delegateYield(X(),"t0",9);case 9:if(!(he=Ie.t0)){Ie.next=12;break}return Ie.abrupt("return",he.v);case 12:Ie.next=7;break;case 14:Ie.next=19;break;case 16:Ie.prev=16,Ie.t1=Ie.catch(4),ve.e(Ie.t1);case 19:return Ie.prev=19,ve.f(),Ie.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:Ie.prev=25,Ie.t2=Ie.catch(1),console.error("Error in captureImage::",Ie.t2),Mt.roomClient._videosdkLogs&&Mt.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:Ie.t2.message}});case 29:case"end":return Ie.stop()}},be,null,[[1,25],[4,16,19,22]])}))),this.id=me.id,this.displayName=me.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=me.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=me.mode,this.metaData=me.metaData,this.eventEmitter=new dn.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(ne){ne.cam!=null&&(this.pinState.cam=ne.cam),ne.share!=null&&(this.pinState.share=ne.share)}},{key:"remove",value:function(){Mt.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Mt.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Mt.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Mt.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Mt.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(ne){if(ne){this.streams.set(ne.id,ne),ne.kind!=="video"||this.local||Mt.roomClient.setConsumerQuality(ne.id,this.quality);var me=new MediaStream;me.addTrack(ne.track);try{if(["video","share"].includes(ne.kind)){var ye=this.participantVideoElements.get(ne.kind);if(ye){var be={display:"block",objectFit:ne.kind==="share"?"contain":"cover",width:"100%"};Object.assign(ye.style,be),ye.srcObject=me,ye.play().catch(function(Ae){console.error("Failed to play ".concat(ne.kind," stream:"),Ae)}),(ne.kind==="share"||ne.kind==="video"&&this.videoVisible)&&ne.resume()}}if((ne.kind==="audio"||ne.kind==="shareAudio")&&!this.local){var ke=this.participantAudioElements.get(ne.kind);ke&&(ke.srcObject=me,ke.play().catch(function(Ae){console.error("Failed to play ".concat(ne.kind," audio:"),Ae)}))}this.eventEmitter.emit(Xr,ne),ne.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Ae){console.error("Error in addStream:",Ae)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(ne){this.streams.set(ne.id,ne),this.eventEmitter.emit(Xr,ne)}},{key:"deleteStream",value:function(ne){var me=this.streams.get(ne);if(me!=null){this.streams.delete(ne);var ye={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[me.kind];if(ye){var be=ye.collection.get(ye.type);be&&(be.style.display="none")}return this.eventEmitter.emit(Pn,me),me}}},{key:"streamResumed",value:function(ne){this.streams.get(ne)}},{key:"streamPaused",value:function(ne){this.streams.get(ne)}},{key:"updateParticipantMediaState",value:function(ne,me){ne=="audio"?this.micOn=me:ne=="video"&&(this.webcamOn=me),this.eventEmitter.emit(Sn,{peerId:this.id,kind:ne,newStatus:me})}},{key:"handleParticipantPause",value:function(ne){if(ne!=null&&ne.consumerId){var me=this.streams.get(ne.consumerId);me?me.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(ne.consumerId," not found."))}this.eventEmitter.emit(Nn,{kind:ne==null?void 0:ne.kind,reason:ne==null?void 0:ne.reason})}},{key:"handleParticipantResume",value:function(ne){if(ne!=null&&ne.consumerId){var me=this.streams.get(ne.consumerId);me?me.pausedBy=void 0:console.warn("Stream with consumerId ".concat(ne.consumerId," not found."))}this.eventEmitter.emit(zt,{kind:ne==null?void 0:ne.kind,reason:ne==null?void 0:ne.reason})}},{key:"handleE2EEStateChange",value:function(ne){ne==null||delete ne.peerId,this.eventEmitter.emit(Ye,ne)}},{key:"videoQualityChanged",value:function(ne,me){this.eventEmitter.emit(In,{peerId:this.id,prevQuality:ne,currentQuality:me})}},{key:"setQuality",value:function(ne){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var me=document.querySelector("#f-".concat(this.id));me&&this.resizeObserver.unobserve(me)}this.quality=ne,(0,ue.A)(this.streams.entries()).forEach(function(ye){var be=ye[1];be.kind==="video"&&Mt.roomClient.setConsumerQuality(be.id,ne)})}}},{key:"setScreenShareQuality",value:function(ne){this.local||(this.screenShareQuality=ne,this.streams.forEach(function(me){me.kind==="share"&&Mt.roomClient.setConsumerScreenShareQuality(me.id,ne)}))}},{key:"setViewPort",value:function(ne,me){(0,ue.A)(this.streams.entries()).forEach(function(ye){var be=ye[1];be.kind==="video"&&Mt.roomClient.setViewPort(be.producerOrConsumer,ne,me)})}},{key:"pin",value:function(ne){switch(ne){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Mt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(ne){switch(ne){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Mt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(le=(0,d.A)(u().mark(function ne(me){var ye,be,ke;return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return ye=me.meetingId,be=me.payload,ke=me.token,Ae.next=3,Mt.roomClient.switchPeerRoom({peerId:this.id,roomId:ye,payload:be,token:ke});case 3:case"end":return Ae.stop()}},ne,this)})),function(ne){return le.apply(this,arguments)})},{key:"getVideoStats",value:(Z=(0,d.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!this.local){ce.next=6;break}return ce.next=3,Mt.roomClient.getVideoRemoteStats();case 3:return ce.abrupt("return",ce.sent);case 6:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=8,ye.s();case 10:if((be=ye.n()).done){ce.next=18;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="video"){ce.next=16;break}return ce.next=15,Mt.roomClient.getConsumerRemoteStats(Ae);case 15:return ce.abrupt("return",ce.sent);case 16:ce.next=10;break;case 18:ce.next=23;break;case 20:ce.prev=20,ce.t0=ce.catch(8),ye.e(ce.t0);case 23:return ce.prev=23,ye.f(),ce.finish(23);case 26:case"end":return ce.stop()}},ne,this,[[8,20,23,26]])})),function(){return Z.apply(this,arguments)})},{key:"getShareStats",value:(W=(0,d.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!this.local){ce.next=6;break}return ce.next=3,Mt.roomClient.getShareRemoteStats();case 3:return ce.abrupt("return",ce.sent);case 6:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=8,ye.s();case 10:if((be=ye.n()).done){ce.next=18;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="share"){ce.next=16;break}return ce.next=15,Mt.roomClient.getConsumerRemoteStats(Ae);case 15:return ce.abrupt("return",ce.sent);case 16:ce.next=10;break;case 18:ce.next=23;break;case 20:ce.prev=20,ce.t0=ce.catch(8),ye.e(ce.t0);case 23:return ce.prev=23,ye.f(),ce.finish(23);case 26:case"end":return ce.stop()}},ne,this,[[8,20,23,26]])})),function(){return W.apply(this,arguments)})},{key:"getShareAudioStats",value:(U=(0,d.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!this.local){ce.next=6;break}return ce.next=3,Mt.roomClient.getShareAudioRemoteStats();case 3:return ce.abrupt("return",ce.sent);case 6:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=8,ye.s();case 10:if((be=ye.n()).done){ce.next=18;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="shareAudio"){ce.next=16;break}return ce.next=15,Mt.roomClient.getConsumerRemoteStats(Ae);case 15:return ce.abrupt("return",ce.sent);case 16:ce.next=10;break;case 18:ce.next=23;break;case 20:ce.prev=20,ce.t0=ce.catch(8),ye.e(ce.t0);case 23:return ce.prev=23,ye.f(),ce.finish(23);case 26:case"end":return ce.stop()}},ne,this,[[8,20,23,26]])})),function(){return U.apply(this,arguments)})},{key:"getAudioStats",value:(F=(0,d.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(this.micOn){ce.next=2;break}return ce.abrupt("return",[]);case 2:if(!this.local){ce.next=8;break}return ce.next=5,Mt.roomClient.getAudioRemoteStats();case 5:return ce.abrupt("return",ce.sent);case 8:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=10,ye.s();case 12:if((be=ye.n()).done){ce.next=20;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="audio"){ce.next=18;break}return ce.next=17,Mt.roomClient.getConsumerRemoteStats(Ae);case 17:return ce.abrupt("return",ce.sent);case 18:ce.next=12;break;case 20:ce.next=25;break;case 22:ce.prev=22,ce.t0=ce.catch(10),ye.e(ce.t0);case 25:return ce.prev=25,ye.f(),ce.finish(25);case 28:case"end":return ce.stop()}},ne,this,[[10,22,25,28]])})),function(){return F.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Mt.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Mt.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Mt.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Mt.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(ne){for(var me,ye=this,be=ne.type,ke=be===void 0?"video":be,Ae=ne.maxQuality,ce=Ae===void 0?"auto":Ae,_e=ne.videostyle,ve=_e===void 0?{}:_e,J=ne.containerStyle,X=J===void 0?{}:J,he=0,je=(0,ue.A)(this.streams.values());he<je.length;he++){var Ie=je[he];Ie.kind==ke&&(me=new MediaStream).addTrack(Ie.track)}if(this.participantVideoElements.get(ke)){if(me){var xt=this.participantVideoElements.get(ke);xt&&(xt.srcObject=me,xt.play().catch(function(Qe){return console.error("videoElem.play() failed",Qe)}))}return this.participantVideoElements.get(ke)}try{var ut=document.createElement("div");ut.classList.add("video-container","participant-video-".concat(this.id)),ut.setAttribute("id","f-".concat(this.id).concat(ke==="share"?"-share":"")),ut.style.setProperty("position","relative"),Object.assign(ut.style,X);var et=document.createElement("video");if(et.setAttribute("id","v-".concat(this.id).concat(ke==="share"?"-share":"")),et.setAttribute("playsinline",""),et.setAttribute("webkit-playsinline",""),et.setAttribute("x5-playsinline",""),et.playsinline=!0,et.muted=!0,et.autoplay=!0,et.onerror=function(Qe){console.log(Qe,"participant video error")},Object.assign(et.style,function(Qe){for(var He=1;He<arguments.length;He++){var qt=arguments[He]!=null?arguments[He]:{};He%2?zr(Object(qt),!0).forEach(function(vr){(0,v.A)(Qe,vr,qt[vr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(qt)):zr(Object(qt)).forEach(function(vr){Object.defineProperty(Qe,vr,Object.getOwnPropertyDescriptor(qt,vr))})}return Qe}({width:"100%",height:"100%",objectFit:ke==="share"?"contain":"cover"},ve)),me&&(et.srcObject=me,et.play().then(function(Qe){console.log("videoElem.play() success",Qe)}).catch(function(Qe){return console.error("videoElem.play() failed",Qe)})),ut.appendChild(et),this.participantVideoElements.set(ke,et),this.videoVisible=!1,!this.local&&ke==="video"){var Qt=(0,sn.sg)(function(Qe){if(Qe.length!=0)if(Qe[Qe.length-1].intersectionRatio>0){ye.videoVisible=!0;for(var He=0,qt=(0,ue.A)(ye.streams.values());He<qt.length;He++){var vr=qt[He];vr.kind=="video"&&vr.pausedBy!=="SUB_MANAGER"&&vr.paused&&vr.resume()}}else{ye.videoVisible=!1;for(var At=0,Hr=(0,ue.A)(ye.streams.values());At<Hr.length;At++){var Cn=Hr[At];Cn.kind=="video"&&Cn.pause()}}},500);if(new IntersectionObserver(Qt,{root:null,rootMargin:"0px",threshold:0}).observe(ut),ce=="auto"&&ke==="video"){var Fe=(0,sn.sg)(function(Qe){var He=Qe[0].contentRect,qt=He.width,vr=He.height;qt>0&&vr>0&&(ye.height=vr,ye.width=qt,ye.setViewPort(qt,vr))},500),Ee=new ResizeObserver(Fe);Ee.observe(ut),this.resizeObserver=Ee}}return ke!=="video"||ce==="auto"||this.local||this.setQuality(ce),ut}catch(Qe){console.log("Render video Exception",Qe)}}},{key:"renderAudio",value:function(ne){var me=ne.type,ye=me===void 0?"audio":me;if(this.local)return null;try{if(this.participantAudioElements.get(ye)){var be=this.participantAudioElements.get(ye),ke=this.getAudioStream(ye);return ke&&be&&(be.srcObject=ke,be.play().catch(function(_e){return console.error("Failed to play existing audio:",_e)})),be}var Ae=document.createElement("audio");Ae.setAttribute("id","a-".concat(this.id,"-").concat(ye)),Ae.autoplay=!1,Ae.playsInline=!0,Ae.controls=!1,Ae.style.display="none",Ae.onerror=function(_e){return console.log("Audio element error:",_e)};var ce=this.getAudioStream(ye);return ce&&(Ae.srcObject=ce,Ae.play().catch(function(_e){return console.error("Failed to play new audio:",_e)})),this.participantAudioElements.set(ye,Ae),Ae}catch(_e){return console.error("Render audio exception:",_e),null}}},{key:"getAudioStream",value:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",me=(0,ue.A)(this.streams.values()).find(function(be){return be.kind===ne});if(me){var ye=new MediaStream;return ye.addTrack(me.track),me.resume(),ye}return null}},{key:"addProducer",value:function(ne){this.eventEmitter.emit(Mn,ne)}},{key:"removeProducer",value:function(ne){this.eventEmitter.emit(ns,ne)}},{key:"addConsumer",value:function(ne){this.eventEmitter.emit(hn,ne)}},{key:"removeConsumer",value:function(ne){this.eventEmitter.emit(or,ne)}},{key:"on",value:function(ne,me){switch(ne){case Xr:case Pn:case Sn:case In:case Nn:case zt:case Mn:case ns:case hn:case or:case Ye:this.eventEmitter.on(ne,me);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(ne,me){switch(ne){case Xr:case Pn:case Sn:case In:case Nn:case zt:case Mn:case ns:case hn:case or:case Ye:this.eventEmitter.off(ne,me);break;default:throw new Error("Invalid event type from participant off")}}}]);var F,U,W,Z,le}(),ot=i(388),Le=i(3954),lt=i(5501),cr={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},De=i(2107);function Zt(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zt=function(){return!!F})()}function Vt(F,U,W){br(F,U),U.set(F,W)}function br(F,U){if(U.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hr(F,U){return F.get(Xe(F,U))}function Pr(F,U,W){return F.set(Xe(F,U),W),W}function Xe(F,U,W){if(typeof F=="function"?F===U:F.has(U))return arguments.length<3?U:W;throw new TypeError("Private element is not present on this object")}var Kt="stream-enabled",Tt="stream-disabled",Ht="character-joined",Fr="character-left",Nr="media-status-changed",$r="video-quality-changed",Sr="character-state-changed",wr="character-message",Jr="user-message",Jn="data",ss="error",Gs=new WeakMap,Ys=new WeakMap,mi=new WeakMap,Ci=new WeakMap,gi=new WeakMap,is=new WeakMap,as=new WeakMap,zi=new WeakSet,kt=function(F){function U(be){var ke,Ae,ce,_e;return(0,o.A)(this,U),Ae=this,ce=U,_e=[{id:be.id,displayName:be.displayName,mode:De.nI.SEND_AND_RECV,metaData:be.metaData}],ce=(0,Le.A)(ce),function(ve,J){br(ve,J),J.add(ve)}(ke=(0,ot.A)(Ae,Zt()?Reflect.construct(ce,_e||[],(0,Le.A)(Ae).constructor):ce.apply(Ae,_e)),zi),Vt(ke,Gs,void 0),Vt(ke,Ys,void 0),Vt(ke,mi,void 0),Vt(ke,Ci,void 0),Vt(ke,gi,void 0),Vt(ke,is,void 0),Vt(ke,as,void 0),(0,v.A)(ke,"captureImage",(0,d.A)(u().mark(function ve(){var J,X=arguments;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:throw(J=X.length>0&&X[0]!==void 0?X[0]:{}).height,J.width,new Error("captureImage method is not supported on character");case 2:case"end":return he.stop()}},ve)}))),Pr(gi,ke,be.interactionId||null),ke.id=be.id||null,Pr(Gs,ke,be.characterRole),Pr(Ys,ke,be.characterMode),Pr(mi,ke,be.knowledgeBases||[]),ke.displayName=be.displayName,Pr(Ci,ke,be.language),Pr(is,ke,be.state||cr.CHARACTER_LISTENING),Pr(as,ke,be.roomClient),ke}return(0,lt.A)(U,F),(0,p.A)(U,[{key:"join",value:(ye=(0,d.A)(u().mark(function be(){var ke;return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,hr(as,this).joinCharacter({interactionId:hr(gi,this),characterId:this.id,characterRole:hr(Gs,this),displayName:this.displayName,characterMode:hr(Ys,this),knowledgeBases:hr(mi,this),language:hr(Ci,this),metaData:this.metaData});case 2:(ke=Ae.sent)&&(this.id=ke.characterId,this.displayName=ke.displayName,Pr(Ys,this,ke.characterMode),Pr(Gs,this,ke.characterRole),Pr(gi,this,ke.interactionId),Pr(mi,this,ke.knowledgeBases),Pr(Ci,this,ke.language),hr(as,this)._eventEmitter.emit("INIT_CHARACTER",this));case 4:case"end":return Ae.stop()}},be,this)})),function(){return ye.apply(this,arguments)})},{key:"leave",value:(me=(0,d.A)(u().mark(function be(){return u().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,hr(as,this).removeCharacter();case 2:case"end":return ke.stop()}},be,this)})),function(){return me.apply(this,arguments)})},{key:"remove",value:(ne=(0,d.A)(u().mark(function be(){return u().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return ke.stop()}},be)})),function(){return ne.apply(this,arguments)})},{key:"sendMessage",value:(le=(0,d.A)(u().mark(function be(ke){return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,hr(as,this).sendCharacterMessage({interactionId:hr(gi,this),text:ke});case 2:case"end":return Ae.stop()}},be,this)})),function(be){return le.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(be){Object.keys(cr).includes(be.status)&&(Xe(zi,this,ir).call(this,be.status),this.eventEmitter.emit(Sr,be))}},{key:"handleCharacterMessage",value:function(be){this.eventEmitter.emit(wr,be)}},{key:"interrupt",value:(Z=(0,d.A)(u().mark(function be(){return u().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,hr(as,this).interruptCharacter({interactionId:hr(gi,this)});case 2:case"end":return ke.stop()}},be,this)})),function(){return Z.apply(this,arguments)})},{key:"handleUserMessage",value:function(be){this.eventEmitter.emit(Jr,be)}},{key:"handleCharacterData",value:function(be){var ke=be.topic,Ae=be.data;this.eventEmitter.emit(Jn,ke,Ae)}},{key:"handleCharacterError",value:function(be){var ke=be.data;this.eventEmitter.listenerCount(ss)>0&&this.eventEmitter.emit(ss,ke)}},{key:"enableMic",value:function(){hr(as,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){hr(as,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){hr(as,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){hr(as,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(be){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(W=(0,d.A)(u().mark(function be(ke){return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:throw ke.meetingId,ke.payload,ke.token,new Error("switchTo method is not supported on character");case 2:case"end":return Ae.stop()}},be)})),function(be){return W.apply(this,arguments)})},{key:"pin",value:function(be){throw new Error("pin method is not supported on character")}},{key:"on",value:function(be,ke){switch(be){case Kt:case Tt:case Ht:case Fr:case Nr:case $r:case Sr:case wr:case Jr:case Jn:case ss:this.eventEmitter.on(be,ke);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(be,ke){switch(be){case Kt:case Tt:case Ht:case Fr:case Nr:case $r:case Sr:case wr:case Jr:case Jn:case ss:this.eventEmitter.off(be,ke);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return hr(is,this)}},{key:"knowledgeBases",get:function(){return hr(mi,this)}},{key:"characterMode",get:function(){return hr(Ys,this)}},{key:"characterRole",get:function(){return hr(Gs,this)}},{key:"interactionId",get:function(){return hr(gi,this)}},{key:"language",get:function(){return hr(Ci,this)}}]);var W,Z,le,ne,me,ye}(Me);function ir(F){Pr(is,this,F)}function Gt(F,U,W){(function(Z,le){if(le.has(Z))throw new TypeError("Cannot initialize the same private elements twice on an object")})(F,U),U.set(F,W)}function Rn(F,U,W){if(typeof F=="function"?F===U:F.has(U))return arguments.length<3?U:W;throw new TypeError("Private element is not present on this object")}var dr=new WeakMap,xr=function(){return(0,p.A)(function U(W,Z){var le,ne,me,ye=W.id,be=W.displayName;(0,o.A)(this,U),Gt(this,dr,void 0),this.id=ye,this.displayName=be,ne=this,me=Z,(le=dr).set(Rn(le,ne),me)},[{key:"switchTo",value:(F=(0,d.A)(u().mark(function U(W){var Z,le,ne;return u().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return Z=W.meetingId,le=W.payload,ne=W.token,me.next=3,Mt.roomClient.connectionSwitchPeerRoom({roomId:Z,connectionRoomId:(ye=dr,be=this,ye.get(Rn(ye,be))),payload:le,peerId:this.id,token:ne});case 3:case"end":return me.stop()}var ye,be},U,this)})),function(U){return F.apply(this,arguments)})}]);var F}(),fn="participant-joined",Cr="participant-left",Rr="chat-message",an=function(){return(0,p.A)(function U(W,Z){var le=this;(0,o.A)(this,U),this.eventEmitter=new dn.EventEmitter,this.id=W,this.participants=new Map,Z.forEach(function(ne){le.participants.set(ne.id,new xr(ne,le.id))})},[{key:"participantJoin",value:function(U){var W=new xr(U,this.id);this.participants.set(U.id,W),this.eventEmitter.emit(fn,W)}},{key:"participantLeft",value:function(U){this.participants.delete(U),this.eventEmitter.emit(Cr,U)}},{key:"sendChatMessage",value:function(U){Mt.roomClient.connectionSendChatMessage({roomId:this.id,message:U})}},{key:"sendChatMessageEvent",value:function(U){var W=U.participantId,Z=U.message;this.eventEmitter.emit(Rr,{participantId:W,message:Z})}},{key:"end",value:(F=(0,d.A)(u().mark(function U(){return u().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Mt.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return W.stop()}},U,this)})),function(){return F.apply(this,arguments)})},{key:"on",value:function(U,W){switch(U){case fn:case Cr:case Rr:this.eventEmitter.on(U,W);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(U,W){switch(U){case fn:case Cr:case Rr:this.eventEmitter.off(U,W);break;default:throw new Error("Invalid event type")}}}]);var F}(),Cs=function(){return(0,p.A)(function F(U){var W=U.roomId,Z=U.peers,le=U.payload;(0,o.A)(this,F),this.id=W,this.payload=le,this.meeting=new an(W,Z)},[{key:"close",value:function(){Mt.roomClient.closeConnection(this.id)}}])}();function An(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Ln(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?An(Object(W),!0).forEach(function(Z){(0,v.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):An(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}function Js(F,U){if(U.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xs(F,U){return F.get(Hi(F,U))}function Hi(F,U,W){if(typeof F=="function"?F===U:F.has(U))return arguments.length<3?U:W;throw new TypeError("Private element is not present on this object")}var Qs="error",ba="meeting-joined",ii="meeting-left",Va="participant-mode-changed",co="participant-joined",Fo="participant-left",Bo="speaker-changed",qi="presenter-changed",Uo="main-participant-changed",tl="chat-message",rl="entry-requested",Vo="entry-responded",$o="recording-state-changed",nl="recording-started",Wo="recording-stopped",lr="livestream-state-changed",zo="livestream-started",Ho="livestream-stopped",ta="hls-state-changed",mr="hls-started",sl="hls-stopped",qo="whiteboard-started",il="whiteboard-stopped",al="video-state-changed",ol="video-seeked",Us="mic-requested",cl="webcam-requested",Ko="stream-enabled",Ti="stream-disabled",lo="pin-state-changed",ra="connection-open",Go="connection-close",Yo="switch-meeting",ll="meeting-state-changed",Jo="paused-all-streams",uo="resumed-all-streams",dl="transcription-state-changed",ul="transcription-text",po="character-joined",na="character-left",ho="media-relay-started",Qo="media-relay-stopped",Xo="media-relay-error",$a="media-relay-request-response",St="media-relay-request-received",te=new WeakMap,at=new WeakSet,ur=function(){return(0,p.A)(function J(X,he,je){var Ie,xt,ut,et,Qt,Fe=this;(0,o.A)(this,J),Js(Ie=this,xt=at),xt.add(Ie),function(Ee,Qe,He){Js(Ee,Qe),Qe.set(Ee,He)}(this,te,void 0),(0,v.A)(this,"pubSub",{publish:(Qt=(0,d.A)(u().mark(function Ee(Qe,He,qt,vr){return u().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(vr==null){At.next=3;break}if((0,l.A)(vr)=="object"){At.next=3;break}throw new Error('"payload" can only be object.');case 3:return At.next=5,Fe.roomClient.pubsubPublish(Qe,He,qt,vr);case 5:case"end":return At.stop()}},Ee)})),function(Ee,Qe,He,qt){return Qt.apply(this,arguments)}),subscribe:(et=(0,d.A)(u().mark(function Ee(Qe,He){var qt;return u().wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(!xs(te,Fe).listeners(Qe).includes(He)){vr.next=2;break}return vr.abrupt("return");case 2:return vr.next=4,Fe.roomClient.pubsubSubscribe(Qe);case 4:return qt=vr.sent,xs(te,Fe).on(Qe,He),vr.abrupt("return",qt);case 7:case"end":return vr.stop()}},Ee)})),function(Ee,Qe){return et.apply(this,arguments)}),unsubscribe:(ut=(0,d.A)(u().mark(function Ee(Qe,He){return u().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(xs(te,Fe).off(Qe,He),xs(te,Fe).listeners(Qe).length!=0){qt.next=4;break}return qt.next=4,Fe.roomClient.pubsubUnsubscribe(Qe);case 4:case"end":return qt.stop()}},Ee)})),function(Ee,Qe){return ut.apply(this,arguments)})}),(0,v.A)(this,"uploadBase64File",function(){var Ee=(0,d.A)(u().mark(function Qe(He){var qt,vr,At,Hr,Cn,tn,Is;return u().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(qt=He.base64Data,vr=He.token,At=He.fileName,cn.prev=1,qt&&vr&&At){cn.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Hr="https://".concat(Fe.baseUrl,"/base64-upload?roomId=").concat(Fe.id),Cn={fileName:At,base64Data:qt},cn.next=8,fetch(Hr,{method:"POST",body:JSON.stringify(Cn),headers:{"Content-Type":"application/json",Authorization:vr}});case 8:return tn=cn.sent,cn.next=11,tn.json();case 11:return Is=cn.sent,cn.abrupt("return",Is.url);case 15:cn.prev=15,cn.t0=cn.catch(1),console.error("Error while Uploading Base64 File::",cn.t0),Fe.roomClient._videosdkLogs&&Fe.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:cn.t0.message}});case 19:case"end":return cn.stop()}},Qe,null,[[1,15]])}));return function(Qe){return Ee.apply(this,arguments)}}()),(0,v.A)(this,"fetchBase64File",function(){var Ee=(0,d.A)(u().mark(function Qe(He){var qt,vr,At,Hr,Cn;return u().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(qt=He.url,vr=He.token,tn.prev=1,qt&&vr){tn.next=4;break}throw new Error("please provide url and token");case 4:return tn.next=6,fetch(qt,{headers:{Authorization:vr}});case 6:return At=tn.sent,tn.next=9,At.arrayBuffer();case 9:return Hr=tn.sent,Cn=window.btoa(new Uint8Array(Hr).reduce(function(Is,cn){return Is+String.fromCharCode(cn)},"")),tn.abrupt("return",Cn);case 14:tn.prev=14,tn.t0=tn.catch(1),console.error("Error while fetching Base64 File::",tn.t0),Fe.roomClient._videosdkLogs&&Fe.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:tn.t0.message}});case 18:case"end":return tn.stop()}},Qe,null,[[1,14]])}));return function(Qe){return Ee.apply(this,arguments)}}()),this.id=X,this.roomClient=je,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=he,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new dn.EventEmitter,function(Ee,Qe,He){Ee.set(Hi(Ee,Qe),He)}(te,this,new dn.EventEmitter),this.eventEmitter.setMaxListeners(9999),xs(te,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(Ee){return Fe.handleError(Ee)}),this.roomClient.on("ADD_PEER",function(Ee){return Fe.handlePeerAdd(Ee)}),this.roomClient.on("REMOVE_PEER",function(Ee){return Fe.handlePeerRemove(Ee)}),this.roomClient.on("ADD_PRODUCER",function(Ee){return Fe.handleProducerAdd(Ee)}),this.roomClient.on("UPDATE_PRODUCER",function(Ee){return Fe.handleUpdateProducer(Ee)}),this.roomClient.on("REMOVE_PRODUCER",function(Ee){return Fe.handleProducerRemove(Ee)}),this.roomClient.on("ADD_CONSUMER",function(Ee){return Fe.handleConsumerAdd(Ee)}),this.roomClient.on("REMOVE_CONSUMER",function(Ee){return Fe.handleConsumerRemove(Ee)}),this.roomClient.on("CONSUMER_RESUMED",function(Ee){return Fe.handleConsumerResume(Ee)}),this.roomClient.on("CONSUMER_PAUSED",function(Ee){return Fe.handleConsumerPause(Ee)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(Ee){return Fe.handleParticipantMediaStateChanged(Ee)}),this.roomClient.on("CHAT_MESSAGE",function(Ee){return Fe.handleNewChatMessage(Ee)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(Ee){return Fe.handleSpeakerChange(Ee)}),this.roomClient.on("ENTRY_REQUESTED",function(Ee){return Fe.handleEntryRequested(Ee)}),this.roomClient.on("ENTRY_RESPONDED",function(Ee){return Fe.handleEntryResponded(Ee)}),this.roomClient.on("MEETING_JOINED",function(Ee){return Fe.handleMeetingJoined(Ee)}),this.roomClient.on("MEETING_LEFT",function(Ee){return Fe.handleMeetingLeft(Ee)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(Ee){Fe.handleRecordingStateChanged(Ee)}),this.roomClient.on("RECORDING_STARTED",function(Ee){return Fe.handleRecordingStarted(Ee)}),this.roomClient.on("RECORDING_STOPPED",function(Ee){return Fe.handleRecordingStopped(Ee)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(Ee){Fe.handleLivestreamStateChanged(Ee)}),this.roomClient.on("LIVESTREAM_STARTED",function(Ee){return Fe.handleLivestreamStarted(Ee)}),this.roomClient.on("LIVESTREAM_STOPPED",function(Ee){return Fe.handleLivestreamStopped(Ee)}),this.roomClient.on("HLS_STATE_CHANGED",function(Ee){Fe.handleHlsStateChanged(Ee)}),this.roomClient.on("HLS_STARTED",function(Ee){Fe.handleHlsStarted(Ee)}),this.roomClient.on("HLS_STOPPED",function(Ee){Fe.handleHlsStopped(Ee)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(Ee){Fe.handleTranscriptionStateChanged(Ee)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(Ee){Fe.handleTranscriptionText(Ee)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(Ee){Fe.handleParticipantResumeBySubManager(Ee)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(Ee){Fe.handleParticipantPausedBySubManager(Ee)}),this.roomClient.on("WHITEBOARD_STARTED",function(Ee){return Fe.handleWhiteboardStarted(Ee)}),this.roomClient.on("WHITEBOARD_STOPPED",function(Ee){return Fe.handleWhiteboardStopped(Ee)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(Ee){return Fe.handleVideoStateChanged(Ee)}),this.roomClient.on("VIDEO_SEEKED",function(Ee){return Fe.handleVideoSeeked(Ee)}),this.roomClient.on("PIN_STATE_CHANGED",function(Ee){Fe.handlePinStateChanged(Ee)}),this.roomClient.on("MIC_REQUESTED",function(Ee){return Fe.handleMicRequested(Ee)}),this.roomClient.on("WEBCAM_REQUESTED",function(Ee){return Fe.handleWebcamRequested(Ee)}),this.roomClient.on("CONNECTION_OPEN",function(Ee){return Fe.handleConnectionOpen(Ee)}),this.roomClient.on("CONNECTION_CLOSE",function(Ee){return Fe.handleConnectionClose(Ee)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(Ee){return Fe.handleConnectionParticipantJoin(Ee)}),this.roomClient.on("SWITCH_ROOM",function(Ee){return Fe.handleSwitchMeeting(Ee)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(Ee){return Fe.handleConnectionChatMessage(Ee)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(Ee){Fe.handleConnectionParticipantLeft(Ee)}),this.roomClient.on("PUBSUB_MESSAGE",function(Ee){return Hi(at,Fe,Qn).call(Fe,Ee)}),this.roomClient.on("PEER_MODE_CHANGED",function(Ee){return Hi(at,Fe,Fn).call(Fe,Ee)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(Ee){return Fe.handleMeetingStateChanged(Ee)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(Ee){return Fe.handleConsumersPaused(Ee)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(Ee){return Fe.handleConsumersResumed(Ee)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(Ee){return Fe.handleVideoQualityChanged(Ee)}),this.roomClient.on("ADD_CHARACTER",function(Ee){return Fe.handleAddCharacter(Ee)}),this.roomClient.on("INIT_CHARACTER",function(Ee){return Fe.handleInitCharacter(Ee)}),this.roomClient.on("REMOVE_CHARACTER",function(Ee){return Fe.handleRemoveCharacter(Ee)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(Ee){return Fe.handleCharacterStateChanged(Ee)}),this.roomClient.on("CHARACTER_MESSAGE",function(Ee){return Fe.handleCharacterMessage(Ee)}),this.roomClient.on("USER_MESSAGE",function(Ee){return Fe.handleUserMessage(Ee)}),this.roomClient.on("CHARACTER_DATA",function(Ee){return Fe.handleOnCharacterData(Ee)}),this.roomClient.on("CHARACTER_ERROR",function(Ee){return Fe.handleOnCharacterError(Ee)}),this.roomClient.on("E2EE_STATE_CHANGE",function(Ee){return Fe.handleE2EEStateChange(Ee)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return Fe.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(Ee){return Fe.handleMediaRelayStart(Ee)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(Ee){return Fe.handleMediaRelayStop(Ee)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(Ee){return Fe.handleMediaRelayError(Ee)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(Ee){return Fe.handleMediaRelayRequestResponse(Ee)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(Ee){return Fe.handleMediaRelayRequest(Ee)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(J){this.eventEmitter.listenerCount(Qs)>0&&this.eventEmitter.emit(Qs,J)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(J){this.roomClient.changeMode(J)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(J,X){this.roomClient.respondEntry(J,X)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(J)}},{key:"publishAudio",value:(ve=(0,d.A)(u().mark(function J(){var X,he=arguments;return u().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return X=he.length>0&&he[0]!==void 0?he[0]:void 0,je.next=3,this.roomClient.enableMic(X);case 3:return je.abrupt("return");case 4:case"end":return je.stop()}},J,this)})),function(){return ve.apply(this,arguments)})},{key:"unpublishAudio",value:(_e=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.disableMic();case 2:return X.abrupt("return");case 3:case"end":return X.stop()}},J,this)})),function(){return _e.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(J)}},{key:"publishVideo",value:(ce=(0,d.A)(u().mark(function J(){var X,he=arguments;return u().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return X=he.length>0&&he[0]!==void 0?he[0]:void 0,this.roomClient.enableWebcam(X),je.abrupt("return");case 3:case"end":return je.stop()}},J,this)})),function(){return ce.apply(this,arguments)})},{key:"unpublishVideo",value:(Ae=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return this.roomClient.disableWebcam(),X.abrupt("return");case 2:case"end":return X.stop()}},J,this)})),function(){return Ae.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(J)}},{key:"pubblishScreenShare",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(J)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(J){this.roomClient.sendChatMessage(J);var X={text:J,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(X)}},{key:"pauseAllStreams",value:function(J){this.roomClient.pauseAllConsumers(J)}},{key:"resumeAllStreams",value:function(J){this.roomClient.resumeAllConsumers(J)}},{key:"startRecording",value:function(J,X,he,je){this.roomClient.startRecording(J,X,he,je)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(J){this.roomClient.startTranscription(J)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(J,X){this.roomClient.startLivestream(J,X)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(ke=(0,d.A)(u().mark(function J(X,he){return u().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,this.roomClient.startHls(X,he);case 2:case"end":return je.stop()}},J,this)})),function(J,X){return ke.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(J){if(!J.interactionId&&!J.id)throw new Error("InteractionId or id is required");return new kt(Ln(Ln({},J),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(be=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.getMics();case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},J,this)})),function(){return be.apply(this,arguments)})},{key:"getWebcams",value:(ye=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.getWebcams();case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},J,this)})),function(){return ye.apply(this,arguments)})},{key:"changeMic",value:function(J){this.roomClient.changeMic(J)}},{key:"changeWebcam",value:function(J){this.roomClient.changeWebcam(J)}},{key:"replaceWebcamStream",value:function(J){this.roomClient.replaceWebcamStream(J)}},{key:"setWebcamQuality",value:function(J){this.roomClient.setWebcamQuality(J)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(J){var X=J.link;this.roomClient.startVideo({link:X})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(J){var X=J.currentTime;this.roomClient.pauseVideo(X)}},{key:"seekVideo",value:function(J){var X=J.currentTime;this.roomClient.seekVideo(X)}},{key:"handlePeerAdd",value:function(J){var X=J.peer,he=new Me(X);this.participants.set(he.id,he),this.eventEmitter.emit(co,he),this.participants.size===1&&this.updateMainParticipant(he.id)}},{key:"handlePeerRemove",value:function(J){var X=J.peerId,he=this.participants.get(X);he!=null&&(this.participants.delete(X),this.eventEmitter.emit(Fo,he),this.activePresenterId===he.id&&(this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId)),this.mainParticipantId===he.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(J){var X=J.producer,he={id:X.id,rtpSender:X.rtpSender};this.localParticipant.addProducer(he);var je=new pn(X);this.localParticipant.addStream(je),je.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(qi,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(J){var X=J.producer,he=new pn(X);this.localParticipant.updateStream(he)}},{key:"handleProducerRemove",value:function(J){var X=J.producerId;this.localParticipant.removeProducer(X);var he=this.localParticipant.deleteStream(X);if(he&&he.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId);var je=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||je||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(J){var X=J.consumer,he=J.peerId,je=this.participants.get(he)||this.characters.get(he);if(je){var Ie={id:X.id,rtpReceiver:X.rtpReceiver};je.addConsumer(Ie);var xt=new pn(X);je.addStream(xt),this.eventEmitter.emit(Ko,xt),xt.kind==="share"&&(this.activePresenterId=je.id,this.eventEmitter.emit(qi,this.activePresenterId),this.updateMainParticipant(je.id))}}},{key:"handleConsumerResume",value:function(J){var X=J.consumerId,he=J.peerId,je=this.participants.get(he);je&&je.streamResumed(X)}},{key:"handleConsumerPause",value:function(J){var X=J.consumerId,he=J.peerId,je=this.participants.get(he);je&&je.streamPaused(X)}},{key:"handleConsumerRemove",value:function(J){var X=J.consumerId,he=J.peerId,je=this.participants.get(he)||this.characters.get(he);if(je!=null&&je){je.removeConsumer(X);var Ie=je.deleteStream(X);if(this.eventEmitter.emit(Ti,Ie),Ie&&Ie.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId);var xt=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||xt||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(J){var X=J.peerId,he=J.kind,je=J.newState,Ie=this.participants.get(X)||this.characters.get(X);this.localParticipant.id==X&&(Ie=this.localParticipant),Ie&&Ie&&(he=="audio"?Ie.micOn=je:he=="video"&&(Ie.webcamOn=je),Ie.updateParticipantMediaState(he,je))}},{key:"handleParticipantPausedBySubManager",value:function(J){var X=this.participants.get(J.peerId);X&&X&&X.handleParticipantPause(J)}},{key:"handleParticipantResumeBySubManager",value:function(J){var X=this.participants.get(J.peerId);X&&X&&X.handleParticipantResume(J)}},{key:"handleSpeakerChange",value:function(J){var X=J.peerId;this.activeSpeakerId!==X&&(this.activeSpeakerId=X,this.eventEmitter.emit(Bo,X),X&&X!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&X!==this.mainParticipantId&&this.updateMainParticipant(X))}},{key:"handleNewChatMessage",value:function(J){var X=J.senderId,he={senderId:X,text:J.text,timestamp:J.timestamp};if(this.localParticipant.id===X)he.senderName=this.localParticipant.displayName;else{var je=this.participants.get(X);je&&(he.senderName=je.displayName)}this.messages.push(he),this.eventEmitter.emit(tl,he)}},{key:"updateMainParticipant",value:function(J){this.mainParticipantId=J;var X=null;X=J===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Uo,X)}},{key:"handleEntryRequested",value:function(J){var X=this,he=J.id,je=J.name;this.eventEmitter.emit(rl,{participantId:he,name:je,allow:function(){X.roomClient.respondEntry(he,"allowed")},deny:function(){X.roomClient.respondEntry(he,"denied")}})}},{key:"handleEntryResponded",value:function(J){var X=J.id,he=J.decision;this.eventEmitter.emit(Vo,X,he)}},{key:"handleMeetingJoined",value:function(J){var X=J.peers,he=J.poll,je=J.messages,Ie=J.baseUrl,xt=J.switchRoomId;typeof xt=="string"&&(this.id=xt),this.baseUrl=Ie,je.length>0&&(this.messages=je),this.eventEmitter.emit(ba,{switchRoomId:xt||null,peers:X,poll:he,messages:je})}},{key:"handleMeetingLeft",value:function(J){this.eventEmitter.emit(ii,J)}},{key:"handleRecordingStateChanged",value:function(J){this.recordingState=J.status,this.eventEmitter.emit($o,J)}},{key:"handleLivestreamStateChanged",value:function(J){this.livestreamState=J.status,this.eventEmitter.emit(lr,J)}},{key:"handleHlsStateChanged",value:function(J){this.hlsState=J.status,J.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:J.downstreamUrl,playbackHlsUrl:J.playbackHlsUrl,livestreamUrl:J.livestreamUrl}:J.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(ta,J)}},{key:"handleTranscriptionStateChanged",value:function(J){this.transcriptionState=J.status,this.eventEmitter.emit(dl,J)}},{key:"handleTranscriptionText",value:function(J){this.eventEmitter.emit(ul,J)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(nl)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Wo)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(zo)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(Ho)}},{key:"handleHlsStarted",value:function(J){this.eventEmitter.emit(mr,J)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(sl)}},{key:"handleWhiteboardStarted",value:function(J){this.eventEmitter.emit(qo,J)}},{key:"handleWhiteboardStopped",value:function(J){(function(X){if(X==null)throw new TypeError("Cannot destructure "+X)})(J),this.eventEmitter.emit(il)}},{key:"handleAddCharacter",value:function(J){var X,he=J.id,je=(X=this.characters.get(he))!==null&&X!==void 0?X:new kt(Ln(Ln({},J),{},{state:cr.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(he,je),this.eventEmitter.emit(po,je),je.eventEmitter.emit(po)}},{key:"handleInitCharacter",value:function(J){this.characters.set(J.id,J)}},{key:"handleRemoveCharacter",value:function(J){var X=J.id;if(this.characters.has(X)){var he=this.characters.get(X);this.eventEmitter.emit(na,he),he.eventEmitter.emit(na),this.characters.delete(X)}}},{key:"handleCharacterStateChanged",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterStateChanged(J)}},{key:"handleCharacterMessage",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterMessage(J)}},{key:"handleUserMessage",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleUserMessage(J)}},{key:"handleOnCharacterData",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterData(J)}},{key:"handleOnCharacterError",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterError(J)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var J=this;(0,ue.A)(this.participants.keys()).forEach(function(X){X!==J.localParticipant.id&&J.handlePeerRemove({peerId:X})})}},{key:"handleVideoStateChanged",value:function(J){this.eventEmitter.emit(al,J)}},{key:"handleVideoSeeked",value:function(J){var X=J.currentTime;this.eventEmitter.emit(ol,{currentTime:X})}},{key:"handlePinStateChanged",value:function(J){var X=J.peerId,he=J.state,je=J.pinnedBy;this.eventEmitter.emit(lo,{participantId:X,state:he,pinnedBy:je})}},{key:"handleMeetingStateChanged",value:function(J){var X=J.state;this.eventEmitter.emit(ll,{state:X})}},{key:"handleConsumersPaused",value:function(J){var X=J.kind;this.eventEmitter.emit(Jo,{kind:X})}},{key:"handleConsumersResumed",value:function(J){var X=J.kind;this.eventEmitter.emit(uo,{kind:X})}},{key:"handleVideoQualityChanged",value:function(J){var X=J.peerId,he=J.prevQuality,je=J.currentQuality,Ie=this.participants.get(X)||this.characters.get(X);Ie&&Ie&&Ie.videoQualityChanged(he,je)}},{key:"handleMicRequested",value:function(J){var X=this,he=J.peerId;this.eventEmitter.emit(Us,{participantId:he,accept:function(){return X.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(J){var X=this,he=J.peerId;this.eventEmitter.emit(cl,{participantId:he,accept:function(){return X.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(J){var X=J.roomId,he=J.peer,je=this.connections.get(X);je!=null&&je.meeting.participantJoin(he)}},{key:"handleConnectionParticipantLeft",value:function(J){var X=J.roomId,he=J.peerId,je=this.connections.get(X);je!=null&&je.meeting.participantLeft(he)}},{key:"handleConnectionOpen",value:function(J){var X=J.peers,he=J.roomId,je=J.payload,Ie=new Cs({roomId:he,peers:X,payload:je});this.connections.set(Ie.id,Ie),this.eventEmitter.emit(ra,Ie)}},{key:"handleConnectionClose",value:function(J){var X=J.roomId;this.connections.get(X)!=null&&(this.connections.delete(X),this.eventEmitter.emit(Go,X))}},{key:"handleMediaRelayError",value:function(J){var X=J.meetingId,he=J.error;this.eventEmitter.emit(Xo,{meetingId:X,error:he})}},{key:"handleMediaRelayRequest",value:function(J){var X=this,he=J.peerId,je=J.meetingId,Ie=J.displayName;this.eventEmitter.emit(St,{participantId:he,meetingId:je,displayName:Ie,accept:function(){return X.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:je,peerId:he})},reject:function(){return X.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:je,peerId:he})}})}},{key:"handleMediaRelayRequestResponse",value:function(J){var X=J.decision,he=J.decidedBy,je=J.meetingId;this.eventEmitter.emit($a,{decision:X,decidedBy:he,meetingId:je})}},{key:"handleMediaRelayStart",value:function(J){var X=J.meetingId;this.eventEmitter.emit(ho,{meetingId:X})}},{key:"handleMediaRelayStop",value:function(J){var X=J.meetingId,he=J.reason;this.eventEmitter.emit(Qo,{meetingId:X,reason:he})}},{key:"requestMediaRelay",value:(me=(0,d.A)(u().mark(function J(X){var he,je,Ie;return u().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(he=X.destinationMeetingId,je=X.token,Ie=X.kinds,he){xt.next=3;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 3:return xt.next=5,this.roomClient.requestMediaRelay(he,je,Ie);case 5:case"end":return xt.stop()}},J,this)})),function(J){return me.apply(this,arguments)})},{key:"stopMediaRelay",value:(ne=(0,d.A)(u().mark(function J(X){return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(X){he.next=2;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 2:return he.next=4,this.roomClient.stopMediaRelay(X);case 4:case"end":return he.stop()}},J,this)})),function(J){return ne.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(le=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.enableAdaptiveSubscription();case 2:case"end":return X.stop()}},J,this)})),function(){return le.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(Z=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.disableAdaptiveSubscription();case 2:case"end":return X.stop()}},J,this)})),function(){return Z.apply(this,arguments)})},{key:"enableE2EE",value:(W=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.toggleE2EEEnabled(!0);case 2:case"end":return X.stop()}},J,this)})),function(){return W.apply(this,arguments)})},{key:"disableE2EE",value:(U=(0,d.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.toggleE2EEEnabled(!1);case 2:case"end":return X.stop()}},J,this)})),function(){return U.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(J){var X=J.roomId,he=J.token,je=J.payload,Ie=J.peerId,xt=J.connectionPeerId,ut=J.connectionRoomId,et=Ie?{meetingId:X,payload:je,token:he,participantId:Ie}:{meetingId:X,payload:je,token:he,connectionParticipantId:xt,connectionMeetingId:ut};this.eventEmitter.emit(Yo,et)}},{key:"handleConnectionChatMessage",value:function(J){var X=J.roomId,he=J.peerId,je=J.message,Ie=this.connections.get(X);Ie!=null&&Ie.meeting.sendChatMessageEvent({participantId:he,message:je})}},{key:"handleE2EEStateChange",value:function(J){var X=J.peerId,he=this.localParticipant.id==X?this.localParticipant:this.participants.get(X)||this.characters.get(X);he&&he&&he.handleE2EEStateChange(J)}},{key:"connectTo",value:(F=(0,d.A)(u().mark(function J(X){var he,je;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return he=X.meetingId,je=X.payload,Ie.next=3,this.roomClient.openConnection({roomId:he,payload:je});case 3:case"end":return Ie.stop()}},J,this)})),function(J){return F.apply(this,arguments)})},{key:"switchTo",value:function(J){var X=J.meetingId,he=J.token;if(!X||typeof X!="string"||X.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:X,token:he,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var J;return(J=this.roomClient._webcam)===null||J===void 0?void 0:J.device}},{key:"selectedMicrophoneDevice",get:function(){var J;return(J=this.roomClient._mic)===null||J===void 0?void 0:J.device}},{key:"on",value:function(J,X){switch(J){case co:case Fo:case Bo:case qi:case Uo:case tl:case rl:case Vo:case $o:case nl:case Wo:case lr:case zo:case Ho:case mr:case sl:case ta:case dl:case ul:case Ko:case Ti:case qo:case il:case po:case na:case ba:case ii:case al:case ol:case Us:case cl:case lo:case ra:case Go:case Yo:case ll:case Va:case Jo:case uo:case ho:case Qo:case Xo:case St:case $a:case Qs:this.eventEmitter.on(J,X);break;default:throw new Error("Invalid event type "+J)}}},{key:"off",value:function(J,X){switch(J){case co:case Fo:case Bo:case qi:case Uo:case tl:case rl:case Vo:case $o:case nl:case Wo:case lr:case zo:case Ho:case ta:case mr:case sl:case dl:case ul:case Ko:case Ti:case qo:case il:case po:case na:case ba:case ii:case al:case ol:case Us:case cl:case lo:case ra:case Go:case Yo:case ll:case Qs:case ho:case Qo:case Xo:case St:case $a:case Va:case Jo:case uo:this.eventEmitter.off(J,X);break;default:throw new Error("Invalid event type.")}}}]);var F,U,W,Z,le,ne,me,ye,be,ke,Ae,ce,_e,ve}();function Qn(F){var U=F.topic,W=F.message,Z=F.senderId,le=F.timestamp,ne=F.senderName,me=F.id,ye=F.payload;U&&W&&xs(te,this).emit(U,{message:W,senderId:Z,timestamp:le,topic:U,senderName:ne,id:me,payload:ye})}function Fn(F){var U=F.peerId,W=F.mode;U===this.localParticipant.id?this.localParticipant.mode=W:this.participants.get(U).mode=W,this.activePresenterId!==this.localParticipant.id||(0,De.kR)(W)||(this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId)),this.eventEmitter.emit(Va,{participantId:U,mode:W})}var gr=i(7080),$u=i(5071),dd=i(4973),Zo=i(9027);function pl(F,U,W){return U=(0,Le.A)(U),(0,ot.A)(F,Wu()?Reflect.construct(U,W||[],(0,Le.A)(F).constructor):U.apply(F,W))}function Wu(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wu=function(){return!!F})()}var hl=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),pl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}((0,p.A)(function F(U,W,Z,le){(0,o.A)(this,F),this.deviceId=U,this.groupId=W,this.kind=Z,this.label=le})),zu=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),pl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}(hl),ud=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),pl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}(hl),Gh=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),pl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}(hl),Vs={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},os=(i(328),i(7654));function Pi(F,U){return F==null||U==null?NaN:F<U?-1:F>U?1:F>=U?0:NaN}function Yh(F,U){return F==null||U==null?NaN:U<F?-1:U>F?1:U>=F?0:NaN}function Jh(F){let U,W,Z;function le(ne,me,ye=0,be=ne.length){if(ye<be){if(U(me,me)!==0)return be;do{const ke=ye+be>>>1;W(ne[ke],me)<0?ye=ke+1:be=ke}while(ye<be)}return ye}return F.length!==2?(U=Pi,W=(ne,me)=>Pi(F(ne),me),Z=(ne,me)=>F(ne)-me):(U=F===Pi||F===Yh?F:Ke,W=F,Z=F),{left:le,center:function(ne,me,ye=0,be=ne.length){const ke=le(ne,me,ye,be-1);return ke>ye&&Z(ne[ke-1],me)>-Z(ne[ke],me)?ke-1:ke},right:function(ne,me,ye=0,be=ne.length){if(ye<be){if(U(me,me)!==0)return be;do{const ke=ye+be>>>1;W(ne[ke],me)<=0?ye=ke+1:be=ke}while(ye<be)}return ye}}}function Ke(){return 0}const Hu=Jh(Pi),qu=Hu.right,Sv=(Jh(function(F){return F===null?NaN:+F}).center,qu);function Qh(F,U){switch(arguments.length){case 0:break;case 1:this.range(F);break;default:this.range(U).domain(F)}return this}function sa(){var F,U=[.5],W=[0,1],Z=1;function le(ne){return ne!=null&&ne<=ne?W[Sv(U,ne,0,Z)]:F}return le.domain=function(ne){return arguments.length?(U=Array.from(ne),Z=Math.min(U.length,W.length-1),le):U.slice()},le.range=function(ne){return arguments.length?(W=Array.from(ne),Z=Math.min(U.length,W.length-1),le):W.slice()},le.invertExtent=function(ne){var me=W.indexOf(ne);return[U[me-1],U[me]]},le.unknown=function(ne){return arguments.length?(F=ne,le):F},le.copy=function(){return sa().domain(U).range(W).unknown(F)},Qh.apply(le,arguments)}function Ve(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Ni(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?Ve(Object(W),!0).forEach(function(Z){q(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):Ve(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}function ai(F,U){if(!(F instanceof U))throw new TypeError("Cannot call a class as a function")}function Ev(F,U){for(var W=0;W<U.length;W++){var Z=U[W];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(F,gs(Z.key),Z)}}function Xs(F,U,W){return U&&Ev(F.prototype,U),Object.defineProperty(F,"prototype",{writable:!1}),F}function q(F,U,W){return(U=gs(U))in F?Object.defineProperty(F,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):F[U]=W,F}function B(F,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(U&&U.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),U&&Y(F,U)}function V(F){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},V(F)}function Y(F,U){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,Z){return W.__proto__=Z,W},Y(F,U)}function ge(F,U){if(F==null)return{};var W,Z,le=function(me,ye){if(me==null)return{};var be,ke,Ae={},ce=Object.keys(me);for(ke=0;ke<ce.length;ke++)be=ce[ke],ye.indexOf(be)>=0||(Ae[be]=me[be]);return Ae}(F,U);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(F);for(Z=0;Z<ne.length;Z++)W=ne[Z],U.indexOf(W)>=0||Object.prototype.propertyIsEnumerable.call(F,W)&&(le[W]=F[W])}return le}function Te(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function rt(F){var U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var W,Z=V(F);if(U){var le=V(this).constructor;W=Reflect.construct(Z,arguments,le)}else W=Z.apply(this,arguments);return function(ne,me){if(me&&(typeof me=="object"||typeof me=="function"))return me;if(me!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(ne)}(this,W)}}function dt(F,U){for(;!Object.prototype.hasOwnProperty.call(F,U)&&(F=V(F))!==null;);return F}function qe(){return qe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(F,U,W){var Z=dt(F,U);if(Z){var le=Object.getOwnPropertyDescriptor(Z,U);return le.get?le.get.call(arguments.length<3?F:W):le.value}},qe.apply(this,arguments)}function Yt(F,U,W,Z){return Yt=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(le,ne,me,ye){var be,ke=dt(le,ne);if(ke){if((be=Object.getOwnPropertyDescriptor(ke,ne)).set)return be.set.call(ye,me),!0;if(!be.writable)return!1}if(be=Object.getOwnPropertyDescriptor(ye,ne)){if(!be.writable)return!1;be.value=me,Object.defineProperty(ye,ne,be)}else q(ye,ne,me);return!0},Yt(F,U,W,Z)}function ct(F,U,W,Z,le){if(!Yt(F,U,W,Z||F)&&le)throw new TypeError("failed to set property");return W}function Pt(F,U){return function(W){if(Array.isArray(W))return W}(F)||function(W,Z){var le=W==null?null:typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(le!=null){var ne,me,ye,be,ke=[],Ae=!0,ce=!1;try{if(ye=(le=le.call(W)).next,Z===0){if(Object(le)!==le)return;Ae=!1}else for(;!(Ae=(ne=ye.call(le)).done)&&(ke.push(ne.value),ke.length!==Z);Ae=!0);}catch(_e){ce=!0,me=_e}finally{try{if(!Ae&&le.return!=null&&(be=le.return(),Object(be)!==be))return}finally{if(ce)throw me}}return ke}}(F,U)||wn(F,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ar(F){return function(U){if(Array.isArray(U))return on(U)}(F)||function(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}(F)||wn(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wn(F,U){if(F){if(typeof F=="string")return on(F,U);var W=Object.prototype.toString.call(F).slice(8,-1);return W==="Object"&&F.constructor&&(W=F.constructor.name),W==="Map"||W==="Set"?Array.from(F):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?on(F,U):void 0}}function on(F,U){(U==null||U>F.length)&&(U=F.length);for(var W=0,Z=new Array(U);W<U;W++)Z[W]=F[W];return Z}function gs(F){var U=function(W,Z){if(typeof W!="object"||W===null)return W;var le=W[Symbol.toPrimitive];if(le!==void 0){var ne=le.call(W,Z);if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(W)}(F,"string");return typeof U=="symbol"?U:String(U)}function Re(F,U){return function(W,Z){return Z.get?Z.get.call(W):Z.value}(F,ec(F,U,"get"))}function Lt(F,U,W){return function(Z,le,ne){if(le.set)le.set.call(Z,ne);else{if(!le.writable)throw new TypeError("attempted to set read only private field");le.value=ne}}(F,ec(F,U,"set"),W),W}function ec(F,U,W){if(!U.has(F))throw new TypeError("attempted to "+W+" private field on non-instance");return U.get(F)}function pr(F,U,W){if(!U.has(F))throw new TypeError("attempted to get private field on non-instance");return W}function Ku(F,U){if(U.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jt(F,U,W){Ku(F,U),U.set(F,W)}function Ts(F,U){Ku(F,U),U.add(F)}var fl="https://speed.cloudflare.com",Gu={autoStart:!0,downloadApiUrl:"".concat(fl,"/__down"),uploadApiUrl:"".concat(fl,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(fl,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(fl,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Yu={aimMeasurementScoring:{packetLoss:sa([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:sa([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:sa([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:sa([10,20,100,500],[10,5,0,-10,-20]),download:sa([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:sa([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Xh=function(F){var U=F.headers.get("server-timing");if(U){var W=U.match(/dur=([0-9.]+)/);if(W)return+W[1]}},Zh=function(F){return F.responseStart-F.requestStart},ef=function(F){return F.responseEnd-F.responseStart},tf=function(F){return F.ping+F.payloadDownloadTime},rf=function(F){return F.ttfb},nf=function(F,U){var W=F.duration,Z=F.transferSize,le=W/1e3;return le?8*(Z||1.005*+U)/le:void 0},sf=function(F,U){var W=F.duration/1e3;return W?8*U*1.005/W:void 0},af=os(function(F){return"0".repeat(F)}),ml=new WeakMap,gl=new WeakMap,vl=new WeakMap,pd=new WeakMap,hd=new WeakMap,fd=new WeakMap,yl=new WeakMap,md=new WeakMap,fo=new WeakMap,gd=new WeakMap,vd=new WeakMap,tc=new WeakMap,rc=new WeakMap,nc=new WeakMap,ia=new WeakMap,mo=new WeakMap,sc=new WeakMap,go=new WeakMap,bl=new WeakMap,yd=new WeakMap,bd=new WeakMap,wd=new WeakMap,ic=new WeakSet,xd=new WeakSet,ac=new WeakSet,Ju=new WeakSet;function wl(F){var U=this;F!==Re(this,tc)&&(Lt(this,tc,F),setTimeout(function(){return Re(U,pd).call(U,Re(U,tc))}))}function Qu(F,U){var W=this,Z=Re(this,fo)[F],le=Z.bytes,ne=Z.dir,me=Re(this,nc),ye=me[ne].hasOwnProperty(le)?me[ne][le]:{timings:[],numMeasurements:Re(this,fo).filter(function(be){var ke=be.bytes,Ae=be.dir;return le===ke&&ne===Ae}).map(function(be){return be.count}).reduce(function(be,ke){return be+ke},0)};U&&ye.timings.push(U),ye.timings=ye.timings.slice(-ye.numMeasurements),me[ne][le]=ye,U?setTimeout(function(){Re(W,fd).call(W,Ni({type:ne,bytes:le},U),me)}):Re(this,hd).call(this,Re(this,fo)[F],me)}function xl(){var F=this,U=Re(this,fo),W=U[Re(this,ia)];if(Re(this,mo)>=W.count){var Z=Re(this,rc);if(Re(this,go)>this.finishRequestDuration&&!W.bypassMinDuration){var le=W.dir;Re(this,rc)[le]=!0,Object.values(Re(this,rc)).every(function(X){return X})&&Re(this,yl).call(this,Re(this,nc))}Lt(this,mo,0),Lt(this,go,-1/0),performance.clearResourceTimings();do Lt(this,ia,Re(this,ia)+1);while(Re(this,ia)<U.length&&Z[U[Re(this,ia)].dir]);if(Re(this,ia)>=U.length)return Lt(this,rc,{down:!0,up:!0}),pr(this,ic,wl).call(this,!1),void Re(this,yl).call(this,Re(this,nc));W=U[Re(this,ia)]}var ne=Re(this,ia);Re(this,mo)===0&&pr(this,xd,Qu).call(this,ne);var me=W,ye=me.bytes,be=me.dir==="down",ke=Re(this,be?gd:vd),Ae=Object.assign({},Re(this,ml));be&&(Ae.bytes="".concat(ye));var ce,_e="".concat(ke.startsWith("http")||ke.startsWith("//")?"":window.location.origin).concat(ke,"?").concat(Object.entries(Ae).map(function(X){var he=Pt(X,2),je=he[0],Ie=he[1];return"".concat(je,"=").concat(Ie)}).join("&")),ve=Object.assign({},be?{}:{method:"POST",body:af(ye)},Re(this,gl)),J=Lt(this,bd,fetch(_e,ve).then(function(X){if(X.ok)return X;throw Error(X.statusText)}).then(function(X){return F.getServerTime&&(ce=F.getServerTime(X)),X}).then(function(X){return X.text().then(function(he){return Re(F,vl)&&Re(F,vl).call(F,{url:_e,headers:X.headers,body:he}),he})}).then(function(X,he){if(J._cancel)he("cancelled");else{var je=performance.getEntriesByName(_e).slice(-1)[0],Ie={transferSize:je.transferSize,ttfb:Zh(je),payloadDownloadTime:ef(je),serverTime:ce||-1,measTime:new Date};if(Ie.ping=Math.max(.01,Ie.ttfb-(ce||Re(F,yd))),Ie.duration=(be?tf:rf)(Ie),Ie.bps=(be?nf:sf)(Ie,ye),be&&ye){var xt=+ye;Ie.transferSize&&(Ie.transferSize<xt||Ie.transferSize/xt>1.05)&&console.warn("Requested ".concat(xt,"B but received ").concat(Ie.transferSize,"B (").concat(Math.round(Ie.transferSize/xt*1e4)/100,"%)."))}pr(F,xd,Qu).call(F,ne,Ie);var ut=Ie.duration;Lt(F,go,Re(F,go)<0?ut:Math.min(Re(F,go),ut)),Lt(F,mo,Re(F,mo)+1),Lt(F,sc,0),Re(F,bl)?Lt(F,wd,setTimeout(function(){return pr(F,ac,xl).call(F)},Re(F,bl))):pr(F,ac,xl).call(F)}}).catch(function(X){var he,je;J._cancel||(console.warn("Error fetching ".concat(_e,": ").concat(X)),Lt(F,sc,(he=Re(F,sc),je=he++,he)),je<20?pr(F,ac,xl).call(F):(Lt(F,sc,0),pr(F,ic,wl).call(F,!1),Re(F,md).call(F,"Connection failed to ".concat(_e,". Gave up after ").concat(20," retries."))))}))}function of(){var F=Re(this,bd);F&&(F._cancel=!0)}var Xu=function(){function F(U){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=W.downloadApiUrl,le=W.uploadApiUrl,ne=W.throttleMs,me=ne===void 0?0:ne,ye=W.estimatedServerTime,be=ye===void 0?0:ye;if(ai(this,F),Ts(this,Ju),Ts(this,ac),Ts(this,xd),Ts(this,ic),Jt(this,ml,{writable:!0,value:{}}),Jt(this,gl,{writable:!0,value:{}}),q(this,"finishRequestDuration",1e3),q(this,"getServerTime",Xh),Jt(this,vl,{writable:!0,value:function(ke){return ke}}),Jt(this,pd,{writable:!0,value:function(){}}),Jt(this,hd,{writable:!0,value:function(){}}),Jt(this,fd,{writable:!0,value:function(){}}),Jt(this,yl,{writable:!0,value:function(){}}),Jt(this,md,{writable:!0,value:function(){}}),Jt(this,fo,{writable:!0,value:void 0}),Jt(this,gd,{writable:!0,value:void 0}),Jt(this,vd,{writable:!0,value:void 0}),Jt(this,tc,{writable:!0,value:!1}),Jt(this,rc,{writable:!0,value:{down:!1,up:!1}}),Jt(this,nc,{writable:!0,value:{down:{},up:{}}}),Jt(this,ia,{writable:!0,value:0}),Jt(this,mo,{writable:!0,value:0}),Jt(this,sc,{writable:!0,value:0}),Jt(this,go,{writable:!0,value:-1/0}),Jt(this,bl,{writable:!0,value:0}),Jt(this,yd,{writable:!0,value:0}),Jt(this,bd,{writable:!0,value:void 0}),Jt(this,wd,{writable:!0,value:void 0}),!U)throw new Error("Missing measurements argument");if(!Z)throw new Error("Missing downloadApiUrl argument");if(!le)throw new Error("Missing uploadApiUrl argument");Lt(this,fo,U),Lt(this,gd,Z),Lt(this,vd,le),Lt(this,bl,me),Lt(this,yd,Math.max(0,be))}return Xs(F,[{key:"results",get:function(){return Re(this,nc)}},{key:"qsParams",get:function(){return Re(this,ml)},set:function(U){Lt(this,ml,U)}},{key:"fetchOptions",get:function(){return Re(this,gl)},set:function(U){Lt(this,gl,U)}},{key:"responseHook",set:function(U){Lt(this,vl,U)}},{key:"onRunningChange",set:function(U){Lt(this,pd,U)}},{key:"onNewMeasurementStarted",set:function(U){Lt(this,hd,U)}},{key:"onMeasurementResult",set:function(U){Lt(this,fd,U)}},{key:"onFinished",set:function(U){Lt(this,yl,U)}},{key:"onConnectionError",set:function(U){Lt(this,md,U)}},{key:"pause",value:function(){clearTimeout(Re(this,wd)),pr(this,Ju,of).call(this),pr(this,ic,wl).call(this,!1)}},{key:"play",value:function(){Re(this,tc)||(pr(this,ic,wl).call(this,!0),pr(this,ac,xl).call(this))}}]),F}(),cf=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],$s=new WeakMap,_d=new WeakSet;function Zu(F){var U=this;Re(this,$s)&&(F?setTimeout(function(){return Re(U,$s).play()},20):Re(this,$s).pause())}var lf=function(F){B(W,F);var U=rt(W);function W(Z){var le,ne,me,ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=ye.measureParallelLatency,ke=be!==void 0&&be,Ae=ye.parallelLatencyThrottleMs,ce=Ae===void 0?100:Ae,_e=ye.downloadApiUrl,ve=ye.uploadApiUrl,J=ye.estimatedServerTime,X=J===void 0?0:J,he=ge(ye,cf);return ai(this,W),Ts(Te(me=U.call(this,Z,Ni({downloadApiUrl:_e,uploadApiUrl:ve,estimatedServerTime:X},he))),_d),Jt(Te(me),$s,{writable:!0,value:void 0}),ke&&(Lt(Te(me),$s,new Xu([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:_e,uploadApiUrl:ve,estimatedServerTime:X,throttleMs:ce})),Re(Te(me),$s).qsParams={during:"".concat(Z[0].dir,"load")},ct((le=Te(me),V(W.prototype)),"onRunningChange",pr(Te(me),_d,Zu),le,!0),ct((ne=Te(me),V(W.prototype)),"onConnectionError",function(){return Re(Te(me),$s).pause()},ne,!0)),me}return Xs(W,[{key:"latencyResults",get:function(){return Re(this,$s)&&Re(this,$s).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(Z){Re(this,$s)&&(Re(this,$s).onMeasurementResult=function(le){return Z(le)})}},{key:"fetchOptions",get:function(){return qe(V(W.prototype),"fetchOptions",this)},set:function(Z){ct(V(W.prototype),"fetchOptions",Z,this,!0),Re(this,$s)&&(Re(this,$s).fetchOptions=Z)}},{key:"onRunningChange",set:function(Z){var le=this;ct(V(W.prototype),"onRunningChange",function(ne){pr(le,_d,Zu).call(le,ne),Z(ne)},this,!0)}},{key:"onConnectionError",set:function(Z){var le=this;ct(V(W.prototype),"onConnectionError",function(){Re(le,$s)&&Re(le,$s).pause(),Z.apply(void 0,arguments)},this,!0)}}]),W}(Xu),df=["measurementId","logApiUrl"],oc=new WeakMap,_l=new WeakMap,Sl=new WeakMap,vo=new WeakMap,Sd=new WeakSet,Ed=new WeakSet;function ep(F){Re(this,vo)&&(Lt(this,Sl,+F.headers.get("cf-meta-request-time")),Lt(this,_l,F.body.slice(-300).split("___").pop()))}function tp(F){if(Re(this,vo)){var U={type:F.type,bytes:F.bytes,ping:Math.round(F.ping),ttfb:Math.round(F.ttfb),payloadDownloadTime:Math.round(F.payloadDownloadTime),duration:Math.round(F.duration),transferSize:Math.round(F.transferSize),serverTime:Math.round(F.serverTime),token:Re(this,_l),requestTime:Re(this,Sl),measId:Re(this,oc)};Lt(this,_l,null),Lt(this,Sl,null),fetch(Re(this,vo),Ni({method:"POST",body:JSON.stringify(U)},this.fetchOptions))}}var rp=function(F){B(W,F);var U=rt(W);function W(Z){var le,ne,me,ye,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=be.measurementId,Ae=be.logApiUrl,ce=ge(be,df);return ai(this,W),Ts(Te(ye=U.call(this,Z,ce)),Ed),Ts(Te(ye),Sd),Jt(Te(ye),oc,{writable:!0,value:void 0}),Jt(Te(ye),_l,{writable:!0,value:void 0}),Jt(Te(ye),Sl,{writable:!0,value:void 0}),Jt(Te(ye),vo,{writable:!0,value:void 0}),Lt(Te(ye),oc,ke),Lt(Te(ye),vo,Ae),ct((le=Te(ye),V(W.prototype)),"qsParams",Ae?{measId:Re(Te(ye),oc)}:{},le,!0),ct((ne=Te(ye),V(W.prototype)),"responseHook",function(_e){return pr(Te(ye),Sd,ep).call(Te(ye),_e)},ne,!0),ct((me=Te(ye),V(W.prototype)),"onMeasurementResult",function(_e){return pr(Te(ye),Ed,tp).call(Te(ye),_e)},me,!0),ye}return Xs(W,[{key:"qsParams",set:function(Z){ct(V(W.prototype),"qsParams",Re(this,vo)?Ni({measId:Re(this,oc)},Z):Z,this,!0)}},{key:"responseHook",set:function(Z){var le=this;ct(V(W.prototype),"responseHook",function(ne){Z(ne),pr(le,Sd,ep).call(le,ne)},this,!0)}},{key:"onMeasurementResult",set:function(Z){var le=this;ct(V(W.prototype),"onMeasurementResult",function(ne){for(var me=arguments.length,ye=new Array(me>1?me-1:0),be=1;be<me;be++)ye[be-1]=arguments[be];Z.apply(void 0,[ne].concat(ye)),pr(le,Ed,tp).call(le,ne)},this,!0)}}]),W}(lf),El=new WeakMap,Rd=new WeakMap,kd=new WeakMap,Cd=new WeakSet,Td=new WeakSet,np=new WeakSet,uf=function(){function F(U){if(ai(this,F),Ts(this,np),Ts(this,Td),Ts(this,Cd),Jt(this,El,{writable:!0,value:!1}),Jt(this,Rd,{writable:!0,value:void 0}),Jt(this,kd,{writable:!0,value:void 0}),!U)throw new Error("Missing operation to perform");Lt(this,kd,U),this.play()}return Xs(F,[{key:"pause",value:function(){pr(this,np,pf).call(this),pr(this,Cd,sp).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Re(this,El)||(pr(this,Cd,sp).call(this,!0),pr(this,Td,ip).call(this))}}]),F}();function sp(F){F!==Re(this,El)&&Lt(this,El,F)}function ip(){var F=this,U=Lt(this,Rd,Re(this,kd).call(this).then(function(){!U._cancel&&pr(F,Td,ip).call(F)}))}function pf(){var F=Re(this,Rd);F&&(F._cancel=!0)}var cc=new WeakMap,hf=function(){function F(){var U=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=W.download,le=W.upload;if(ai(this,F),q(this,"qsParams",{}),q(this,"fetchOptions",{}),Jt(this,cc,{writable:!0,value:[]}),!Z&&!le)throw new Error("Missing at least one of download/upload config");[[Z,"download"],[le,"upload"]].filter(function(me){return Pt(me,1)[0]}).forEach(function(me){var ye=Pt(me,2),be=ye[0],ke=ye[1],Ae=be.apiUrl,ce=be.chunkSize;if(!Ae)throw new Error("Missing ".concat(ke," apiUrl argument"));if(!ce)throw new Error("Missing ".concat(ke," chunkSize argument"))});var ne=function(me){var ye=me.apiUrl,be=me.qsParams,ke=be===void 0?{}:be,Ae=me.fetchOptions,ce=Ae===void 0?{}:Ae;return new uf(function(){var _e=Object.assign({},ke,U.qsParams),ve="".concat(ye.startsWith("http")||ye.startsWith("//")?"":window.location.origin).concat(ye,"?").concat(Object.entries(_e).map(function(X){var he=Pt(X,2),je=he[0],Ie=he[1];return"".concat(je,"=").concat(Ie)}).join("&")),J=Object.assign({},ce,U.fetchOptions);return fetch(ve,J).then(function(X){if(X.ok)return X;throw Error(X.statusText)}).then(function(X){return X.text()})})};Z&&Re(this,cc).push(ne({apiUrl:Z.apiUrl,qsParams:{bytes:"".concat(Z.chunkSize)}})),le&&Re(this,cc).push(ne({apiUrl:le.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(le.chunkSize)}}))}return Xs(F,[{key:"pause",value:function(){Re(this,cc).forEach(function(U){return U.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Re(this,cc).forEach(function(U){return U.play()})}}]),F}(),ff=["iceServers","acceptIceCandidate","dataChannelCfg"],lc=new WeakMap,Rl=new WeakMap,kl=new WeakMap,dc=new WeakMap,Cl=new WeakMap,mf=function(){function F(){var U=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=W.iceServers,le=Z===void 0?[]:Z,ne=W.acceptIceCandidate,me=ne===void 0?function(ve){var J=ve.protocol||"";if(!J&&ve.candidate){var X=ve.candidate.split(" ");X.length>=3&&(J=X[2])}return J.toLowerCase()==="udp"}:ne,ye=W.dataChannelCfg,be=ye===void 0?{ordered:!1,maxRetransmits:0}:ye,ke=ge(W,ff);ai(this,F),q(this,"onOpen",function(){}),q(this,"onClose",function(){}),q(this,"onMessageReceived",function(){}),Jt(this,lc,{writable:!0,value:!1}),Jt(this,Rl,{writable:!0,value:void 0}),Jt(this,kl,{writable:!0,value:void 0}),Jt(this,dc,{writable:!0,value:void 0}),Jt(this,Cl,{writable:!0,value:void 0});var Ae=new RTCPeerConnection(Ni({iceServers:le},ke)),ce=new RTCPeerConnection(Ni({iceServers:le},ke)),_e=Ae.createDataChannel("channel",be);_e.onopen=function(){Lt(U,lc,!0),U.onOpen()},_e.onclose=function(){return U.close()},ce.ondatachannel=function(ve){var J=ve.channel;J.onclose=function(){return U.close()},J.onmessage=function(X){return U.onMessageReceived(X.data)},Lt(U,Cl,J)},Ae.onicecandidate=function(ve){ve.candidate&&me(ve.candidate)&&ce.addIceCandidate(ve.candidate)},ce.onicecandidate=function(ve){ve.candidate&&me(ve.candidate)&&Ae.addIceCandidate(ve.candidate)},Ae.createOffer().then(function(ve){return Ae.setLocalDescription(ve)}).then(function(){return ce.setRemoteDescription(Ae.localDescription)}).then(function(){return ce.createAnswer()}).then(function(ve){return ce.setLocalDescription(ve)}).then(function(){return Ae.setRemoteDescription(ce.localDescription)}),Lt(this,Rl,Ae),Lt(this,kl,ce),Lt(this,dc,_e),Lt(this,lc,!1)}return Xs(F,[{key:"send",value:function(U){return Re(this,dc).send(U)}},{key:"close",value:function(){return Re(this,Rl)&&Re(this,Rl).close(),Re(this,kl)&&Re(this,kl).close(),Re(this,dc)&&Re(this,dc).close(),Re(this,Cl)&&Re(this,Cl).close(),Re(this,lc)&&this.onClose(),Lt(this,lc,!1),this}}]),F}(),Pd=new WeakMap,Tl=new WeakMap,Nd=new WeakMap,yo=new WeakMap,ap=new WeakMap,Ad=new WeakMap,gf=function(){function F(){var U=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=W.turnServerUri,le=W.turnServerCredsApi,ne=W.turnServerCredsApiParser,me=ne===void 0?function(et){return{turnServerUser:et.username,turnServerPass:et.credential}}:ne,ye=W.turnServerCredsApiIncludeCredentials,be=ye!==void 0&&ye,ke=W.turnServerUser,Ae=W.turnServerPass,ce=W.numMsgs,_e=ce===void 0?100:ce,ve=W.batchSize,J=ve===void 0?10:ve,X=W.batchWaitTime,he=X===void 0?10:X,je=W.responsesWaitTime,Ie=je===void 0?5e3:je,xt=W.connectionTimeout,ut=xt===void 0?5e3:xt;if(ai(this,F),Jt(this,Pd,{writable:!0,value:function(){}}),Jt(this,Tl,{writable:!0,value:function(){}}),Jt(this,Nd,{writable:!0,value:function(){}}),q(this,"onMsgSent",function(){}),q(this,"onAllMsgsSent",function(){}),q(this,"onMsgReceived",function(){}),Jt(this,yo,{writable:!0,value:{}}),Jt(this,ap,{writable:!0,value:void 0}),Jt(this,Ad,{writable:!0,value:void 0}),!Z)throw new Error("Missing turnServerUri argument");if(!(ke&&Ae||le))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Lt(this,Ad,_e),(ke&&Ae?Promise.resolve({turnServerUser:ke,turnServerPass:Ae}):fetch(le,{credentials:be?"include":void 0}).then(function(et){return et.json()}).then(function(et){if(et.error)throw et.error;return et}).then(me)).catch(function(et){return Re(U,Pd).call(U,et)}).then(function(et){var Qt=et.turnServerUser,Fe=et.turnServerPass,Ee=Lt(U,ap,new mf({iceServers:[{urls:"turn:".concat(Z,"?transport=udp"),username:Qt,credential:Fe}],iceTransportPolicy:"relay"})),Qe=!1;setTimeout(function(){Qe||(Ee.close(),Re(U,Tl).call(U,"ICE connection timeout!"))},ut);var He=Re(U,yo);Ee.onOpen=function(){Qe=!0;var qt=U;(function vr(At){if(At<=_e){for(var Hr=At;Hr<=Math.min(_e,At+J-1);)He[Hr]=!1,Ee.send(Hr),qt.onMsgSent(Hr),Hr++;setTimeout(function(){return vr(Hr)},he)}else{qt.onAllMsgsSent(Object.keys(He).length);var Cn=function(){Ee.close(),Re(qt,Nd).call(qt,qt.results)},tn=setTimeout(Cn,Ie),Is=Object.values(Re(qt,yo)).filter(function(cn){return!cn}).length;Ee.onMessageReceived=function(cn){clearTimeout(tn),He[cn]=!0,qt.onMsgReceived(cn),--Is<=0&&Object.values(Re(qt,yo)).every(function(Ns){return Ns})?Cn():tn=setTimeout(Cn,Ie)}}})(1)},Ee.onMessageReceived=function(qt){He[qt]=!0,U.onMsgReceived(qt)}}).catch(function(et){return Re(U,Tl).call(U,et.toString())})}return Xs(F,[{key:"onCredentialsFailure",set:function(U){Lt(this,Pd,U)}},{key:"onConnectionError",set:function(U){Lt(this,Tl,U)}},{key:"onFinished",set:function(U){Lt(this,Nd,U)}},{key:"results",get:function(){var U=Re(this,Ad),W=Object.keys(Re(this,yo)).length,Z=Object.entries(Re(this,yo)).filter(function(le){return!Pt(le,2)[1]}).map(function(le){return+Pt(le,1)[0]});return{totalMessages:U,numMessagesSent:W,packetLoss:Z.length/W,lostMessages:Z}}}]),F}(),vf=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],oi=new WeakMap,yf=function(F){B(W,F);var U=rt(W);function W(){var Z,le,ne,me,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=ye.downloadChunkSize,ke=ye.uploadChunkSize,Ae=ye.downloadApiUrl,ce=ye.uploadApiUrl,_e=ge(ye,vf);return ai(this,W),Jt(Te(me=U.call(this,_e)),oi,{writable:!0,value:void 0}),(be||ke)&&(Lt(Te(me),oi,new hf({download:be?{apiUrl:Ae,chunkSize:be}:null,upload:ke?{apiUrl:ce,chunkSize:ke}:null})),ct((Z=Te(me),V(W.prototype)),"onCredentialsFailure",ct((ne=Te(me),V(W.prototype)),"onConnectionError",ct((le=Te(me),V(W.prototype)),"onFinished",function(){return Re(Te(me),oi).stop()},le,!0),ne,!0),Z,!0)),me}return Xs(W,[{key:"qsParams",set:function(Z){Re(this,oi)&&(Re(this,oi).qsParams=Z)}},{key:"fetchOptions",set:function(Z){Re(this,oi)&&(Re(this,oi).fetchOptions=Z)}},{key:"onCredentialsFailure",set:function(Z){var le=this;ct(V(W.prototype),"onCredentialsFailure",function(){Z.apply(void 0,arguments),Re(le,oi)&&Re(le,oi).stop()},this,!0)}},{key:"onConnectionError",set:function(Z){var le=this;ct(V(W.prototype),"onConnectionError",function(){Z.apply(void 0,arguments),Re(le,oi)&&Re(le,oi).stop()},this,!0)}},{key:"onFinished",set:function(Z){var le=this;ct(V(W.prototype),"onFinished",function(){Z.apply(void 0,arguments),Re(le,oi)&&Re(le,oi).stop()},this,!0)}}]),W}(gf),bf=["reachable"],jd=Xs(function F(U){var W=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=Z.timeout,ne=le===void 0?-1:le,me=Z.fetchOptions,ye=me===void 0?{}:me;ai(this,F),q(this,"onFinished",function(){});var be=!1,ke=function(Ae){var ce=Ae.reachable,_e=ge(Ae,bf);be||(be=!0,W.onFinished(Ni({targetUrl:U,reachable:ce},_e)))};fetch(U,ye).then(function(Ae){ke({reachable:!0,response:Ae})}).catch(function(Ae){ke({reachable:!1,error:Ae})}),ne>0&&setTimeout(function(){return ke({reachable:!1,error:"Request timeout"})},ne)}),op=function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!F.length)return 0;var W=F.slice().sort(function(me,ye){return me-ye}),Z=(F.length-1)*U,le=Z%1;if(le===0)return W[Math.round(Z)];var ne=[Math.floor,Math.ceil].map(function(me){return W[me(Z)]});return ne[0]+(ne[1]-ne[0])*le},Wa=new WeakMap,Pl=new WeakMap,wf=function(){function F(U){var W=this;ai(this,F),q(this,"getLatencyPoints",function(Z){return Z.timings.map(function(le){return le.ping})}),q(this,"getLatency",function(Z){return op(W.getLatencyPoints(Z),Re(W,Wa).latencyPercentile)}),q(this,"getBandwidthPoints",function(Z){return Object.entries(Z).map(function(le){var ne=Pt(le,2),me=ne[0];return ne[1].timings.map(function(ye){var be=ye.bps,ke=ye.duration,Ae=ye.ping,ce=ye.measTime,_e=ye.serverTime,ve=ye.transferSize;return{bytes:+me,bps:be,duration:ke,ping:Ae,measTime:ce,serverTime:_e,transferSize:ve}})}).flat()}),q(this,"getBandwidth",function(Z){return op(W.getBandwidthPoints(Z).filter(function(le){return le.duration>=Re(W,Wa).bandwidthMinRequestDuration}).map(function(le){return le.bps}).filter(function(le){return le}),Re(W,Wa).bandwidthPercentile)}),q(this,"getLoadedLatency",function(Z){return W.getLatency({timings:Re(W,Pl).call(W,Z)})}),q(this,"getLoadedJitter",function(Z){return W.getJitter({timings:Re(W,Pl).call(W,Z)})}),q(this,"getLoadedLatencyPoints",function(Z){return W.getLatencyPoints({timings:Re(W,Pl).call(W,Z)})}),q(this,"getPacketLoss",function(Z){return Z.packetLoss}),q(this,"getPacketLossDetails",function(Z){return Z}),q(this,"getReachability",function(Z){return!!Z.reachable}),q(this,"getReachabilityDetails",function(Z){return{host:Z.host,reachable:Z.reachable}}),Jt(this,Wa,{writable:!0,value:void 0}),Jt(this,Pl,{writable:!0,value:function(Z){return Object.values(Z).filter(function(le){return le.timings.length&&Math.min.apply(Math,ar(le.timings.map(function(ne){return ne.duration})))>=Re(W,Wa).loadedRequestMinDuration}).map(function(le){return le.sideLatency||[]}).flat().slice(-Re(W,Wa).loadedLatencyMaxPoints)}}),Lt(this,Wa,U)}return Xs(F,[{key:"getJitter",value:function(U){var W=this.getLatencyPoints(U);return W.length<2?null:W.reduce(function(Z,le){var ne=Z.sumDeltas,me=ne===void 0?0:ne,ye=Z.prevLatency;return{sumDeltas:me+(ye!==void 0?Math.abs(ye-le):0),prevLatency:le}},{}).sumDeltas/(W.length-1)}}]),F}(),xf=["bad","poor","average","good","great"],re={loadedLatencyIncrease:function(F){return F.latency&&(F.downLoadedLatency||F.upLoadedLatency)?Math.max(F.downLoadedLatency,F.upLoadedLatency)-F.latency:void 0}},$={packetLoss:0},z=new WeakMap,H=function(){function F(U){ai(this,F),Jt(this,z,{writable:!0,value:void 0}),Lt(this,z,U)}return Xs(F,[{key:"getScores",value:function(U){var W=Object.assign.apply(Object,ar(Object.entries(Re(this,z).aimMeasurementScoring).map(function(Z){var le=Pt(Z,2),ne=le[0],me=le[1],ye=re.hasOwnProperty(ne)?re[ne](U):U[ne];return ye===void 0?$.hasOwnProperty(ne)?q({},ne,$[ne]):{}:q({},ne,ye===void 0?0:+me(ye))})));return Object.assign.apply(Object,[{}].concat(ar(Object.entries(Re(this,z).aimExperiencesDefs).filter(function(Z){return Pt(Z,2)[1].input.every(function(le){return W.hasOwnProperty(le)})}).map(function(Z){var le,ne=Pt(Z,2),me=ne[0],ye=ne[1],be=ye.input,ke=ye.pointThresholds,Ae=Math.max(0,(le=be.map(function(_e){return W[_e]}),le.reduce(function(_e,ve){return _e+ve},0))),ce=sa(ke,[0,1,2,3,4])(Ae);return q({},me,{points:Ae,classificationIdx:ce,classificationName:xf[ce]})}))))}}]),F}(),K=new WeakMap,oe=new WeakMap,fe=new WeakMap,Pe=new WeakMap,Ne=new WeakMap,ft=new WeakMap,Ze=new WeakMap,ht=new WeakMap,mt=function(){function F(U){var W=this;ai(this,F),q(this,"raw",void 0),q(this,"getUnloadedLatency",function(){return Re(W,Pe).call(W,"getLatency","latency")}),q(this,"getUnloadedJitter",function(){return Re(W,Pe).call(W,"getJitter","latency")}),q(this,"getUnloadedLatencyPoints",function(){return Re(W,Pe).call(W,"getLatencyPoints","latency",[])}),q(this,"getDownLoadedLatency",function(){return Re(W,Pe).call(W,"getLoadedLatency","download")}),q(this,"getDownLoadedJitter",function(){return Re(W,Pe).call(W,"getLoadedJitter","download")}),q(this,"getDownLoadedLatencyPoints",function(){return Re(W,Pe).call(W,"getLoadedLatencyPoints","download",[])}),q(this,"getUpLoadedLatency",function(){return Re(W,Pe).call(W,"getLoadedLatency","upload")}),q(this,"getUpLoadedJitter",function(){return Re(W,Pe).call(W,"getLoadedJitter","upload")}),q(this,"getUpLoadedLatencyPoints",function(){return Re(W,Pe).call(W,"getLoadedLatencyPoints","upload",[])}),q(this,"getDownloadBandwidth",function(){return Re(W,Pe).call(W,"getBandwidth","download")}),q(this,"getDownloadBandwidthPoints",function(){return Re(W,Pe).call(W,"getBandwidthPoints","download",[])}),q(this,"getUploadBandwidth",function(){return Re(W,Pe).call(W,"getBandwidth","upload")}),q(this,"getUploadBandwidthPoints",function(){return Re(W,Pe).call(W,"getBandwidthPoints","upload",[])}),q(this,"getPacketLoss",function(){return Re(W,Pe).call(W,"getPacketLoss","packetLoss")}),q(this,"getPacketLossDetails",function(){return Re(W,Pe).call(W,"getPacketLossDetails","packetLoss",void 0,!0)}),q(this,"getScores",function(){return Re(W,fe).getScores(W.getSummary())}),Jt(this,K,{writable:!0,value:void 0}),Jt(this,oe,{writable:!0,value:void 0}),Jt(this,fe,{writable:!0,value:void 0}),Jt(this,Pe,{writable:!0,value:function(Z,le){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,me=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return W.raw.hasOwnProperty(le)&&W.raw[le].started?me&&W.raw[le].error?{error:W.raw[le].error}:Re(W,oe)[Z](W.raw[le].results):ne}}),Jt(this,Ne,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachability","v4Reachability")}}),Jt(this,ft,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachabilityDetails","v4Reachability")}}),Jt(this,Ze,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachability","v6Reachability")}}),Jt(this,ht,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachabilityDetails","v6Reachability")}}),Lt(this,K,U),this.clear(),Lt(this,oe,new wf(Re(this,K))),Lt(this,fe,new H(Re(this,K)))}return Xs(F,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(U){return U.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(ar(ar(new Set(Re(this,K).measurements.map(function(U){return U.type}))).map(function(U){return q({},U,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var U={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:Re(this,Ne),v6Reachability:Re(this,Ze)};return Object.assign.apply(Object,ar(Object.entries(U).map(function(W){var Z=Pt(W,2),le=Z[0],ne=(0,Z[1])();return ne===void 0?{}:q({},le,ne)})))}}]),F}(),pe=function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return F&&Math.round(F*Math.pow(10,U))/Math.pow(10,U)},gt=function(F){return F.map(function(U){return pe(U,2)})},it=function(F){return F.map(function(U){return{bytes:+U.bytes,bps:pe(U.bps)}})},ze={latencyMs:["getUnloadedLatencyPoints",gt],download:["getDownloadBandwidthPoints",it],upload:["getUploadBandwidthPoints",it],downLoadedLatencyMs:["getDownLoadedLatencyPoints",gt],upLoadedLatencyMs:["getUpLoadedLatencyPoints",gt],packetLoss:["getPacketLossDetails",function(F){return F.error?void 0:{numMessages:F.numMessagesSent,lossRatio:pe(F.packetLoss,4)}}]},Ue=function(F,U){var W=U.apiUrl,Z={};Object.entries(ze).forEach(function(ne){var me=Pt(ne,2),ye=me[0],be=Pt(me[1],2),ke=be[0],Ae=be[1],ce=Ae===void 0?function(ve){return ve}:Ae,_e=F[ke]();_e&&(Z[ye]=ce(_e))});var le=F.getScores();le&&(Z.scores=Object.assign.apply(Object,[{}].concat(ar(Object.entries(le).map(function(ne){var me,ye=Pt(ne,2),be=ye[0],ke=ye[1];return q({},be,{points:(me=ke).points,classification:me.classificationName})}))))),fetch(W,{method:"POST",body:JSON.stringify(Z)})},Be=["type"],vt=["numPackets"],Je=["bytes"],yt=["latency","latencyUnderLoad","download","upload"],Ct=function(){return"".concat(Math.round(1e16*Math.random()))},It=new WeakMap,Rt=new WeakMap,bt=new WeakMap,sr=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,Ar=new WeakMap,kn=new WeakMap,Zr=new WeakMap,Wr=new WeakMap,jn=new WeakMap,Bn=new WeakSet,Xn=new WeakSet,jr=new WeakSet,On=new WeakSet,zn=new WeakSet,Zn=new WeakSet,en=new WeakSet,_s=function(){function F(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ai(this,F),Ts(this,en),Ts(this,Zn),Ts(this,zn),Ts(this,On),Ts(this,jr),Ts(this,Xn),Ts(this,Bn),q(this,"onRunningChange",function(){}),q(this,"onResultsChange",function(){}),Jt(this,It,{writable:!0,value:function(){}}),Jt(this,Rt,{writable:!0,value:function(){}}),Jt(this,bt,{writable:!0,value:void 0}),Jt(this,sr,{writable:!0,value:void 0}),Jt(this,Bt,{writable:!0,value:Ct()}),Jt(this,Ut,{writable:!0,value:-1}),Jt(this,Ar,{writable:!0,value:void 0}),Jt(this,kn,{writable:!0,value:1e6}),Jt(this,Zr,{writable:!0,value:1e6}),Jt(this,Wr,{writable:!0,value:!1}),Jt(this,jn,{writable:!0,value:!1}),Lt(this,bt,Object.assign({},Gu,U,Yu)),Lt(this,sr,new mt(Re(this,bt))),Re(this,bt).autoStart&&this.play()}return Xs(F,[{key:"results",get:function(){return Re(this,sr)}},{key:"isRunning",get:function(){return Re(this,Wr)}},{key:"isFinished",get:function(){return Re(this,jn)}},{key:"onFinish",set:function(U){Lt(this,It,U)}},{key:"onError",set:function(U){Lt(this,Rt,U)}},{key:"pause",value:function(){yt.includes(pr(this,jr,es).call(this))&&Re(this,Ar).pause(),pr(this,Bn,Un).call(this,!1)}},{key:"play",value:function(){Re(this,Wr)||(pr(this,Bn,Un).call(this,!0),pr(this,en,mn).call(this))}},{key:"restart",value:function(){pr(this,zn,fr).call(this),this.play()}}]),F}();function Un(F){F!==Re(this,Wr)&&(Lt(this,Wr,F),this.onRunningChange(Re(this,Wr)))}function rr(F){var U=this;F!==Re(this,jn)&&(Lt(this,jn,F),F&&setTimeout(function(){return Re(U,It).call(U,U.results)}))}function es(){return Re(this,Ut)<0||Re(this,Ut)>=Re(this,bt).measurements.length?null:Re(this,bt).measurements[Re(this,Ut)].type}function Et(){return Re(this,sr).raw[pr(this,jr,es).call(this)]||void 0}function fr(){pr(this,Zn,yn).call(this),Lt(this,Bt,Ct()),Lt(this,Ut,-1),Lt(this,Ar,void 0),pr(this,Bn,Un).call(this,!1),pr(this,Xn,rr).call(this,!1),Re(this,sr).clear()}function yn(){var F=Re(this,Ar);F&&(F.onFinished=F.onConnectionError=F.onFail=F.onMsgReceived=F.onCredentialsFailure=F.onMeasurementResult=function(){},yt.includes(pr(this,jr,es).call(this))&&F.pause())}function mn(){var F,U=this;if(!(yt.includes(pr(this,jr,es).call(this))&&pr(this,On,Et).call(this)&&pr(this,On,Et).call(this).started)||pr(this,On,Et).call(this).finished||pr(this,On,Et).call(this).finishedCurrentRound||pr(this,On,Et).call(this).error){if(Lt(this,Ut,(F=Re(this,Ut),++F)),Re(this,Ut)>=Re(this,bt).measurements.length)return pr(this,Bn,Un).call(this,!1),void pr(this,Xn,rr).call(this,!0);var W,Z=Re(this,bt).measurements[Re(this,Ut)],le=Z.type,ne=ge(Z,Be),me=pr(this,On,Et).call(this),ye=Re(this,bt),be=ye.downloadApiUrl,ke=ye.uploadApiUrl,Ae=ye.estimatedServerTime;switch(le){case"v4Reachability":case"v6Reachability":(W=new jd("https://".concat(ne.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(ut){me.finished=!0,me.results=Ni({host:ne.host},ut),U.onResultsChange({type:le}),pr(U,en,mn).call(U)};break;case"rpki":(W=new jd("https://".concat(Re(this,bt).rpkiInvalidHost),{timeout:5e3})).onFinished=function(ut){(ut.response?ut.response.json():Promise.resolve()).then(function(et){me.finished=!0,me.results=Ni({host:Re(U,bt).rpkiInvalidHost,filteringInvalids:!ut.reachable},et?{asn:et.asn,name:et.name}:{}),U.onResultsChange({type:le}),pr(U,en,mn).call(U)})};break;case"nxdomain":(W=new jd("https://".concat(ne.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(ut){me.finished=!0,me.results={host:ne.nxhost,reachable:ut.reachable},U.onResultsChange({type:le}),pr(U,en,mn).call(U)};break;case"packetLoss":case"packetLossUnderLoad":me.finished=!1;var ce=ne.numPackets,_e=ge(ne,vt),ve=Re(this,bt),J=ve.turnServerUri,X=ve.turnServerCredsApiUrl,he=ve.turnServerUser,je=ve.turnServerPass,Ie=ve.includeCredentials;(W=new yf(Ni({turnServerUri:J,turnServerCredsApi:X,turnServerCredsApiIncludeCredentials:Ie,turnServerUser:he,turnServerPass:je,numMsgs:ce,downloadChunkSize:ne.loadDown?Re(this,kn):void 0,uploadChunkSize:ne.loadUp?Re(this,Zr):void 0,downloadApiUrl:be,uploadApiUrl:ke},_e))).onMsgReceived=function(){me.results=Object.assign({},W.results),U.onResultsChange({type:le})},W.onFinished=function(){me.finished=!0,U.onResultsChange({type:le}),pr(U,en,mn).call(U)},W.onConnectionError=function(ut){me.error=ut,U.onResultsChange({type:le}),Re(U,Rt).call(U,"Connection error while measuring packet loss: ".concat(ut)),pr(U,en,mn).call(U)},W.onCredentialsFailure=function(){me.error="unable to get turn server credentials",U.onResultsChange({type:le}),Re(U,Rt).call(U,"Error while measuring packet loss: unable to get turn server credentials."),pr(U,en,mn).call(U)};break;case"latency":case"latencyUnderLoad":me.finished=!1,(W=new rp([{dir:"down",bytes:0,count:ne.numPackets,bypassMinDuration:!0}],{downloadApiUrl:be,uploadApiUrl:ke,estimatedServerTime:Ae,logApiUrl:Re(this,bt).logMeasurementApiUrl,measurementId:Re(this,Bt),downloadChunkSize:ne.loadDown?Re(this,kn):void 0,uploadChunkSize:ne.loadUp?Re(this,Zr):void 0})).fetchOptions={credentials:Re(this,bt).includeCredentials?"include":void 0},W.onMeasurementResult=W.onNewMeasurementStarted=function(ut,et){me.results=Object.assign({},et.down[0]),U.onResultsChange({type:le})},W.onFinished=function(){me.finished=!0,U.onResultsChange({type:le}),Re(U,Wr)&&pr(U,en,mn).call(U)},W.onConnectionError=function(ut){me.error=ut,U.onResultsChange({type:le}),Re(U,Rt).call(U,"Connection error while measuring latency: ".concat(ut)),pr(U,en,mn).call(U)},W.play();break;case"download":case"upload":if(me.finished||me.error)pr(this,en,mn).call(this);else{delete me.finishedCurrentRound;var xt=Re(this,bt)["measure".concat(le==="download"?"Down":"Up","loadLoadedLatency")];(W=new rp([Ni({dir:le==="download"?"down":"up"},ne)],{downloadApiUrl:be,uploadApiUrl:ke,estimatedServerTime:Ae,logApiUrl:Re(this,bt).logMeasurementApiUrl,measurementId:Re(this,Bt),measureParallelLatency:xt,parallelLatencyThrottleMs:Re(this,bt).loadedLatencyThrottle})).fetchOptions={credentials:Re(this,bt).includeCredentials?"include":void 0},W.finishRequestDuration=Re(this,bt).bandwidthFinishRequestDuration,W.onNewMeasurementStarted=function(ut){var et=ut.count,Qt=ut.bytes,Fe=me.results=Object.assign({},me.results);!Fe.hasOwnProperty(Qt)&&(Fe[Qt]={timings:[],numMeasurements:0,sideLatency:xt?[]:void 0}),Fe[Qt].numMeasurements-Fe[Qt].timings.length!==et&&(Fe[Qt].numMeasurements+=et,U.onResultsChange({type:le}))},W.onMeasurementResult=function(ut){var et=ut.bytes,Qt=ge(ut,Je);me.results[et].timings.push(Qt),me.results=Object.assign({},me.results),U.onResultsChange({type:le})},W.onParallelLatencyResult=function(ut){me.results[ne.bytes].sideLatency.push(ut),me.results=Object.assign({},me.results),U.onResultsChange({type:le})},W.onFinished=function(ut){var et=!Re(U,bt).measurements.slice(Re(U,Ut)+1).map(function(Ee){return Ee.type}).includes(le),Qt=Math.min.apply(Math,ar(Object.values(le==="download"?ut.down:ut.up).slice(-1)[0].timings.map(function(Ee){return Ee.duration})));if(et||!ne.bypassMinDuration&&Qt>Re(U,bt).bandwidthFinishRequestDuration){me.finished=!0,U.onResultsChange({type:le});var Fe=.5*Object.keys(me.results).map(function(Ee){return+Ee}).sort(function(Ee,Qe){return Qe-Ee})[0];le==="download"&&Lt(U,kn,Fe),le==="upload"&&Lt(U,Zr,Fe)}else me.finishedCurrentRound=!0;Re(U,Wr)&&pr(U,en,mn).call(U)},W.onConnectionError=function(ut){me.error=ut,U.onResultsChange({type:le}),Re(U,Rt).call(U,"Connection error while measuring ".concat(le,": ").concat(ut)),pr(U,en,mn).call(U)},W.play()}}Lt(this,Ar,W),me.started=!0,this.onResultsChange({type:le})}else Re(this,Ar).play()}var bn=new WeakMap,Hn=new WeakMap,vi=function(F){B(W,F);var U=rt(W);function W(Z){var le,ne;ai(this,W);for(var me=arguments.length,ye=new Array(me>1?me-1:0),be=1;be<me;be++)ye[be-1]=arguments[be];return Jt(Te(ne=U.call.apply(U,[this,Z].concat(ye))),bn,{writable:!0,value:void 0}),Jt(Te(ne),Hn,{writable:!0,value:function(ke){Re(Te(ne),bn)&&Ue(ke,{apiUrl:Re(Te(ne),bn)})}}),ct((le=Te(ne),V(W.prototype)),"onFinish",Re(Te(ne),Hn),le,!0),Lt(Te(ne),bn,Object.assign({},Gu,Z,Yu).logAimApiUrl),ne}return Xs(W,[{key:"onFinish",set:function(Z){var le=this;ct(V(W.prototype),"onFinish",function(ne){Z(ne),Re(le,Hn).call(le,ne)},this,!0)}}]),W}(_s),wa=i(9633);function Ai(F,U){var W=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!W){if(Array.isArray(F)||(W=function(be,ke){if(be){if(typeof be=="string")return aa(be,ke);var Ae={}.toString.call(be).slice(8,-1);return Ae==="Object"&&be.constructor&&(Ae=be.constructor.name),Ae==="Map"||Ae==="Set"?Array.from(be):Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae)?aa(be,ke):void 0}}(F))||U){W&&(F=W);var Z=0,le=function(){};return{s:le,n:function(){return Z>=F.length?{done:!0}:{done:!1,value:F[Z++]}},e:function(be){throw be},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,me=!0,ye=!1;return{s:function(){W=W.call(F)},n:function(){var be=W.next();return me=be.done,be},e:function(be){ye=!0,ne=be},f:function(){try{me||W.return==null||W.return()}finally{if(ye)throw ne}}}}function aa(F,U){(U==null||U>F.length)&&(U=F.length);for(var W=0,Z=Array(U);W<U;W++)Z[W]=F[W];return Z}var oa=[k],Ws=!1,Ps=function(){return(0,p.A)(function ce(){(0,o.A)(this,ce),(0,v.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function(ce){this.keyProvider=ce}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function(ce){if(!ce)throw new Error("'token' is empty, please provide it in config");this.apiKey=ce;var _e=R(Xt,void 0,T.apply(void 0,oa));window.STORE=_e,Gr.default.init({store:_e})}},{key:"getCameras",value:(Ae=(0,d.A)(u().mark(function ce(){var _e,ve,J,X;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,_e=navigator.userAgent.includes("Firefox"),ve=[],!_e){he.next=8;break}return he.next=6,new Promise(function(je,Ie){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var xt=(0,d.A)(u().mark(function ut(et){var Qt;return u().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,navigator.mediaDevices.enumerateDevices();case 2:Qt=Fe.sent,ve=Qt.filter(function(Ee){return Ee.kind==="videoinput"}).map(function(Ee){return new zu(Ee.deviceId,Ee.groupId,Ee.kind,Ee.label)}),je(ve),et.getTracks().forEach(function(Ee){return Ee.stop()});case 6:case"end":return Fe.stop()}},ut)}));return function(ut){return xt.apply(this,arguments)}}()).catch(function(xt){console.error("Error in getCameras()",xt),Ie(xt)})});case 6:he.next=12;break;case 8:return he.next=10,navigator.mediaDevices.enumerateDevices();case 10:J=he.sent,ve=J.filter(function(je){return je.kind==="videoinput"}).map(function(je){return new zu(je.deviceId,je.groupId,je.kind,je.label)});case 12:return he.abrupt("return",ve);case 15:he.prev=15,he.t0=he.catch(0),X=he.t0.message,he.t0 instanceof TypeError&&he.t0.name==="TypeError"&&(X=gr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(X));case 20:case"end":return he.stop()}},ce,null,[[0,15]])})),function(){return Ae.apply(this,arguments)})},{key:"getMicrophones",value:(ke=(0,d.A)(u().mark(function ce(){var _e,ve,J,X;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,_e=navigator.userAgent.includes("Firefox"),ve=[],!_e){he.next=8;break}return he.next=6,new Promise(function(je,Ie){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var xt=(0,d.A)(u().mark(function ut(et){var Qt;return u().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,navigator.mediaDevices.enumerateDevices();case 2:Qt=Fe.sent,ve=Qt.filter(function(Ee){return Ee.kind==="audioinput"}).map(function(Ee){return new ud(Ee.deviceId,Ee.groupId,Ee.kind,Ee.label)}),je(ve),et.getTracks().forEach(function(Ee){return Ee.stop()});case 6:case"end":return Fe.stop()}},ut)}));return function(ut){return xt.apply(this,arguments)}}()).catch(function(xt){console.error("Error in getMicrophones()",xt),Ie(xt)})});case 6:he.next=12;break;case 8:return he.next=10,navigator.mediaDevices.enumerateDevices();case 10:J=he.sent,ve=J.filter(function(je){return je.kind==="audioinput"}).map(function(je){return new ud(je.deviceId,je.groupId,je.kind,je.label)});case 12:return he.abrupt("return",ve);case 15:he.prev=15,he.t0=he.catch(0),X=he.t0.message,he.t0 instanceof TypeError&&he.t0.name==="TypeError"&&(X=gr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(X));case 20:case"end":return he.stop()}},ce,null,[[0,15]])})),function(){return ke.apply(this,arguments)})},{key:"getPlaybackDevices",value:(be=(0,d.A)(u().mark(function ce(){var _e,ve,J,X;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,_e=navigator.userAgent.includes("Firefox"),ve=[],!_e){he.next=8;break}return he.next=6,new Promise(function(je,Ie){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var xt=(0,d.A)(u().mark(function ut(et){var Qt;return u().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,navigator.mediaDevices.enumerateDevices();case 2:Qt=Fe.sent,ve=Qt.filter(function(Ee){return Ee.kind==="audiooutput"}).map(function(Ee){return new Gh(Ee.deviceId,Ee.groupId,Ee.kind,Ee.label)}),je(ve),et.getTracks().forEach(function(Ee){return Ee.stop()});case 6:case"end":return Fe.stop()}},ut)}));return function(ut){return xt.apply(this,arguments)}}()).catch(function(xt){console.error("Error in getPlaybackDevices()",xt),Ie(xt)})});case 6:he.next=12;break;case 8:return he.next=10,navigator.mediaDevices.enumerateDevices();case 10:J=he.sent,ve=J.filter(function(je){return je.kind==="audiooutput"}).map(function(je){return new Gh(je.deviceId,je.groupId,je.kind,je.label)});case 12:return he.abrupt("return",ve);case 15:he.prev=15,he.t0=he.catch(0),X=he.t0.message,he.t0 instanceof TypeError&&he.t0.name==="TypeError"&&(X="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(X));case 20:case"end":return he.stop()}},ce,null,[[0,15]])})),function(){return be.apply(this,arguments)})},{key:"getDevices",value:(ye=(0,d.A)(u().mark(function ce(){var _e,ve,J,X,he,je;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.prev=0,Ie.next=3,navigator.mediaDevices.enumerateDevices();case 3:_e=Ie.sent,ve=[],J=Ai(_e);try{for(J.s();!(X=J.n()).done;)he=X.value,ve.push(new hl(he.deviceId,he.groupId,he.kind,he.label))}catch(xt){J.e(xt)}finally{J.f()}return Ie.abrupt("return",ve);case 10:Ie.prev=10,Ie.t0=Ie.catch(0),je=Ie.t0.message,Ie.t0 instanceof TypeError&&(je=Ie.t0.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":Ie.t0.message),console.error("An error occurred in getDevices(), ".concat(je));case 15:case"end":return Ie.stop()}},ce,null,[[0,10]])})),function(){return ye.apply(this,arguments)})},{key:"on",value:function(ce,_e){if(ce!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(ce,_e)}},{key:"addDeviceChangeEvent",value:function(){var ce=this;if(!Ws){this.getDevices().then(function(ve){ce.devices=ve});try{navigator.mediaDevices.addEventListener("devicechange",function(){var ve=(0,d.A)(u().mark(function J(X){var he,je,Ie,xt,ut;return u().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return he=ce.devices,et.next=3,ce.getDevices();case 3:ce.devices=et.sent,je=new Array,Ie=Ai(ce.devices),et.prev=6,ut=u().mark(function Qt(){var Fe;return u().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:Fe=xt.value,he.filter(function(Qe){return Qe.deviceId==Fe.deviceId&&Qe.kind==Fe.kind}).length==0?je.push(Fe):he=he.filter(function(Qe){return!(Qe.deviceId==Fe.deviceId&&Qe.kind==Fe.kind)});case 3:case"end":return Ee.stop()}},Qt)}),Ie.s();case 9:if((xt=Ie.n()).done){et.next=13;break}return et.delegateYield(ut(),"t0",11);case 11:et.next=9;break;case 13:et.next=18;break;case 15:et.prev=15,et.t1=et.catch(6),Ie.e(et.t1);case 18:return et.prev=18,Ie.f(),et.finish(18);case 21:je.length!=0&&ce.eventEmitter.emit("device-changed",{devices:ce.devices}),he.length!=0&&ce.eventEmitter.emit("device-changed",{devices:ce.devices});case 23:case"end":return et.stop()}},J,null,[[6,15,18,21]])}));return function(J){return ve.apply(this,arguments)}}()),Ws=!0}catch(ve){var _e=ve.message;ve instanceof TypeError&&(_e=ve.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":ve.message),console.error("An error occurred in device-change event, ".concat(_e))}}}},{key:"off",value:function(ce,_e){if(ce!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(ce,_e)}},{key:"checkPermissions",value:(me=(0,d.A)(u().mark(function ce(_e){var ve,J,X,he,je;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(_e||(_e=Vs.AUDIO_AND_VIDEO),ve=new Map,!_e.includes(Vs.AUDIO)&&!_e.includes(Vs.AUDIO_AND_VIDEO)){Ie.next=15;break}return J=!0,Ie.prev=4,Ie.next=7,navigator.permissions.query({name:"microphone"});case 7:(X=Ie.sent).state!="prompt"&&X.state!="denied"||(J=!1),Ie.next=14;break;case 11:throw Ie.prev=11,Ie.t0=Ie.catch(4),Error("Browser does not support microphone permission check");case 14:ve.set(Vs.AUDIO,J);case 15:if(!_e.includes(Vs.VIDEO)&&!_e.includes(Vs.AUDIO_AND_VIDEO)){Ie.next=28;break}return he=!0,Ie.prev=17,Ie.next=20,navigator.permissions.query({name:"camera"});case 20:(je=Ie.sent).state!="prompt"&&je.state!="denied"||(he=!1),Ie.next=27;break;case 24:throw Ie.prev=24,Ie.t1=Ie.catch(17),Error("Browser does not support camera permission check");case 27:ve.set(Vs.VIDEO,he);case 28:return Ie.abrupt("return",ve);case 29:case"end":return Ie.stop()}},ce,null,[[4,11],[17,24]])})),function(ce){return me.apply(this,arguments)})},{key:"requestPermission",value:(ne=(0,d.A)(u().mark(function ce(_e){var ve,J,X,he,je,Ie,xt,ut,et,Qt,Fe,Ee,Qe;return u().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(_e||(_e=Vs.AUDIO_AND_VIDEO),ve=new Map,!_e.includes(Vs.AUDIO_AND_VIDEO)){He.next=32;break}return X={audio:!0,video:!0},he=!0,He.prev=5,He.next=8,navigator.mediaDevices.getUserMedia(X);case 8:J=He.sent,He.next=30;break;case 11:if(He.prev=11,He.t0=He.catch(5),!(He.t0 instanceof DOMException)){He.next=27;break}He.t1=He.t0.name,He.next=He.t1==="NotAllowedError"?17:He.t1==="NotReadableError"?19:He.t1==="NotFoundError"?21:24;break;case 17:return He.t0.message==="Permission denied by system"&&(je=gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",25);case 19:return je=zs(He.t0,"video"),He.abrupt("break",25);case 21:return je=gr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(je=gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",25);case 24:je=He.t0.message;case 25:He.next=28;break;case 27:je=He.t0 instanceof TypeError&&He.t0.name==="TypeError"?gr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:He.t0.message;case 28:he=!1,je&&console.error("An error occurred in request permission, ".concat(je));case 30:J&&setTimeout(function(){J.getTracks().forEach(function(qt){qt.stop()})},100),ve.set(Vs.AUDIO_AND_VIDEO,he);case 32:if(!_e.includes(Vs.VIDEO)){He.next=62;break}return xt={audio:!1,video:!0},ut=!0,He.prev=35,He.next=38,navigator.mediaDevices.getUserMedia(xt);case 38:Ie=He.sent,He.next=60;break;case 41:if(He.prev=41,He.t2=He.catch(35),!(He.t2 instanceof DOMException)){He.next=57;break}He.t3=He.t2.name,He.next=He.t3==="NotAllowedError"?47:He.t3==="NotReadableError"?49:He.t3==="NotFoundError"?51:54;break;case 47:return He.t2.message==="Permission denied by system"&&(et=gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",55);case 49:return et=zs(He.t2,"video"),He.abrupt("break",55);case 51:return et=gr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(et=gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",55);case 54:et=He.t2.message;case 55:He.next=58;break;case 57:et=He.t2 instanceof TypeError&&He.t2.name==="TypeError"?gr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:He.t2.message;case 58:ut=!1,et&&console.error("An error occurred in request permission, ".concat(et));case 60:Ie&&Ie.getTracks().forEach(function(qt){qt.stop()}),ve.set(Vs.VIDEO,ut);case 62:if(!_e.includes(Vs.AUDIO)){He.next=92;break}return Fe={audio:!0,video:!1},Ee=!0,He.prev=65,He.next=68,navigator.mediaDevices.getUserMedia(Fe);case 68:Qt=He.sent,He.next=90;break;case 71:if(He.prev=71,He.t4=He.catch(65),!(He.t4 instanceof DOMException)){He.next=87;break}He.t5=He.t4.name,He.next=He.t5==="NotAllowedError"?77:He.t5==="NotReadableError"?79:He.t5==="NotFoundError"?81:84;break;case 77:return He.t4.message==="Permission denied by system"&&(Qe=gr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",85);case 79:return Qe=zs(He.t4,"audio"),He.abrupt("break",85);case 81:return Qe=gr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Qe=gr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",85);case 84:Qe=He.t4.message;case 85:He.next=88;break;case 87:Qe=He.t4 instanceof TypeError&&He.t4.name==="TypeError"?gr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:He.t4.message;case 88:Ee=!1,Qe&&console.error("An error occurred in request permission, ".concat(Qe));case 90:Qt&&Qt.getTracks().forEach(function(qt){qt.stop()}),ve.set(Vs.AUDIO,Ee);case 92:return He.abrupt("return",ve);case 93:case"end":return He.stop()}},ce,null,[[5,11],[35,41],[65,71]])})),function(ce){return ne.apply(this,arguments)})},{key:"isInt",value:function(ce){return typeof ce=="number"&&ce%1==0}},{key:"getNetworkStats",value:(le=(0,d.A)(u().mark(function ce(){var _e,ve,J,X,he,je,Ie=arguments;return u().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return ve=(_e=Ie.length>0&&Ie[0]!==void 0?Ie[0]:{}).timeoutDuration,J=_e.baseUrl,X=J===void 0?"api.videosdk.live":J,ve&&this.isInt(ve)||(ve=6e4),he=new Promise(function(ut,et){setTimeout(function(){et("Not able to get NetworkStats due to timeout")},ve)}),je=new Promise(function(ut,et){if(navigator.onLine){var Qt=new vi({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(X,"/test-upload-speed"),downloadApiUrl:"https://".concat(X,"/test-download-speed")});Qt.isRunning?(Qt.onFinish=function(Fe){ut({downloadSpeed:parseFloat(Number(Fe.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Fe.getUploadBandwidth()/1048576).toFixed(2))})},Qt.onError=function(Fe){et("Not able to get NetworkStats")}):et("Not able to get NetworkStats")}else et("Not able to get NetworkStats due to no Network")}),xt.abrupt("return",Promise.race([je,he]));case 5:case"end":return xt.stop()}},ce,this)})),function(){return le.apply(this,arguments)})},{key:"checkConnection",value:(Z=(0,d.A)(u().mark(function ce(){var _e,ve,J,X,he,je,Ie=arguments;return u().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return ve=(_e=Ie.length>0&&Ie[0]!==void 0?Ie[0]:{}).timeoutDuration,J=_e.baseUrl,X=J===void 0?"api.videosdk.live":J,ve&&this.isInt(ve)||(ve=6e4),he=new Promise(function(ut,et){setTimeout(function(){et("TimeoutError: NetworkStats timeout")},ve)}),je=new Promise(function(ut,et){navigator.onLine?fetch("https://".concat(X,"/ping")).then(function(Qt){Qt.text().then(function(Fe){Fe=="pong"?ut("Connection established"):et("ConnectionError: Server unreachable")})}).catch(function(Qt){et("ConnectionError: Server unreachable")}):et("NetworkError: Offline")}),xt.abrupt("return",Promise.race([je,he]));case 5:case"end":return xt.stop()}},ce,this)})),function(){return Z.apply(this,arguments)})},{key:"analytics",value:function(ce){var _e,ve,J;!ce&&navigator&&navigator.userAgent&&(ve=navigator.userAgent,delete(J=f().parse(ve)).engine);try{var X;(X=ce)!==null&&X!==void 0&&X.browserUserAgent||(ve=navigator.userAgent,delete(J=f().parse(ve)).engine)}catch{}ce&&ce.rawUserAgent&&(ve=ce.rawUserAgent,delete(J=f().parse(ve)).engine),ce||(ce={});var he={};he.sdkType=ce.sdkType||"javascript",he.sdkVersion=ce.sdkVersion||"0.2.9",he.platform=ce.platform||((_e=J)===null||_e===void 0||(_e=_e.platform)===null||_e===void 0?void 0:_e.type)||"",ce.browserUserAgent=="null"?he.browserUserAgent=void 0:he.browserUserAgent=J,ce.deviceUserAgent&&(he.deviceUserAgent=ce.deviceUserAgent),this._deviceInfo=he}},{key:"initMeeting",value:function(ce){var _e,ve=ce.meetingId,J=ce.customCameraVideoTrack,X=J===void 0?void 0:J,he=ce.customMicrophoneAudioTrack,je=he===void 0?void 0:he,Ie=ce.autoConsume,xt=Ie===void 0||Ie,ut=ce.preferredProtocol,et=ce.mode,Qt=ce.multiStream,Fe=Qt===void 0||Qt,Ee=ce.participantId,Qe=ce.name,He=ce.micEnabled,qt=ce.webcamEnabled,vr=ce.maxResolution,At=ce.metaData,Hr=ce.chatEnabled,Cn=ce.useSpartialLayerAnalytics,tn=ce.signalingBaseUrl,Is=ce.defaultCamera,cn=ce.debugMode,Ns=cn===void 0||cn;if(!ve)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var uc=Ee?Ee.toString():N()({length:8}).toLowerCase(),Nl=Qe||N()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof ut!="string"&&(ut="UDP_OVER_TCP"),(_e=ut)===null||_e===void 0?void 0:_e.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":ut=ut.toUpperCase();break;default:ut="UDP_OVER_TCP"}if(et||(et=De.nI.SEND_AND_RECV),et!==De.nI.SEND_AND_RECV&&et!==De.nI.SIGNALLING_ONLY&&et!==De.nI.RECV_ONLY&&et!==De.nI.VIEWER&&et!==De.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(De.nI.SEND_AND_RECV," or ").concat(De.nI.SIGNALLING_ONLY," or ").concat(De.nI.RECV_ONLY," "));if(At!=null&&(0,l.A)(At)!="object")throw new Error('"metaData" can only be object.');var cp=this._deviceInfo.sdkType==="react-native",_f=cp?Is?Is==="front"?1:0:X?X.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:cp?1:0:0,lp=new Gr.default({roomId:ve,peerId:uc,secret:this.apiKey,device:"unknown",displayName:Nl,mode:et,useSimulcast:Fe,produce:!0,consume:!0,datachannel:Hr!==!1,micEnabled:He!==!1,webcamEnabled:qt!==!1,maxResolution:vr||"hd",useSpartialLayerAnalytics:Cn,_deviceInfo:this._deviceInfo,customCameraVideoTrack:X,customMicrophoneAudioTrack:je,autoConsume:xt,preferredProtocol:ut,signalingBaseUrl:tn,metaData:At,defaultCameraIndex:_f,debugMode:Ns,keyProvider:this.keyProvider});Mt.roomClient=lp;var Sf=new Me({id:uc,displayName:Nl,local:!0,mode:et,metaData:At});return new ur(ve,Sf,lp)}},{key:"createCameraVideoTrack",value:(W=(0,d.A)(u().mark(function ce(_e){var ve,J,X,he,je,Ie,xt,ut,et,Qt,Fe,Ee,Qe,He,qt,vr;return u().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(ve=_e.cameraId,J=ve===void 0?void 0:ve,X=_e.encoderConfig,he=X===void 0?void 0:X,je=_e.facingMode,Ie=je===void 0?void 0:je,xt=_e.optimizationMode,ut=xt===void 0?void 0:xt,et=_e.multiStream,Qt=et===void 0||et,!J){At.next=6;break}return At.next=4,this.getCameras();case 4:(Fe=At.sent)&&Fe.some(function(Hr){return Hr.deviceId})&&(Fe.some(function(Hr){return Hr.deviceId===J})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 6:return At.prev=6,Ee=he?Zo.$.videoProfiles[he]:Zo.$.videoProfiles.h360p_w640p,Qe={video:{deviceId:J||void 0,facingMode:Ie||void 0,width:Ee.width,height:Ee.height,frameRate:Ee.frameRate}},At.next=11,(0,dd.lp)(Qe);case 11:return He=At.sent,ut&&(He.contentHint=ut),He.encoderConfig=he||"h360p_w640p",He.contentHint=ut||"",He.multiStream=Qt,He.cameraId=J,At.abrupt("return",He);case 20:if(At.prev=20,At.t0=At.catch(6),At.t0.name!=="SecurityError"){At.next=26;break}qt=gr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,At.next=46;break;case 26:if(At.t0.name!=="DOMException"){At.next=30;break}qt=gr.q.ERROR_RN_CAMERA_NOT_FOUND.message,At.next=46;break;case 30:if(!(At.t0 instanceof DOMException)){At.next=45;break}At.t1=At.t0.name,At.next=At.t1==="NotAllowedError"?34:At.t1==="NotReadableError"?36:At.t1==="NotFoundError"?38:41;break;case 34:return qt=ci(At.t0,"video"),At.abrupt("break",43);case 36:return qt=zs(At.t0,"video"),At.abrupt("break",43);case 38:return qt=gr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(qt=gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),At.abrupt("break",43);case 41:return qt=At.t0.message,At.abrupt("break",43);case 43:At.next=46;break;case 45:At.t0.message=="getUserMedia is not implemented in this browser"?(vr=gr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,qt=vr.message):qt=At.t0.message;case 46:console.error("An error occurred in creating video track, ".concat(qt));case 47:case"end":return At.stop()}},ce,this,[[6,20]])})),function(ce){return W.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(U=(0,d.A)(u().mark(function ce(_e){var ve,J,X,he,je,Ie,xt,ut,et,Qt,Fe;return u().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return ve=_e.encoderConfig,J=ve===void 0?void 0:ve,X=_e.optimizationMode,he=X===void 0?void 0:X,je=_e.withAudio,Ie=je===void 0?"enable":je,xt=_e.multiStream,ut=xt!==void 0&&xt,et=J?Zo.$.screenShareProfiles[J]:Zo.$.screenShareProfiles.h720p_15fps,Qt={audio:Ie==="enable",video:{width:et.resolution.width,height:et.resolution.height,frameRate:et.frameRate}},Ee.next=5,(0,dd.Zu)(Qt);case 5:return Fe=Ee.sent,he&&(Fe.contentHint=he),Fe.multiStream=ut,Ee.abrupt("return",Fe);case 9:case"end":return Ee.stop()}},ce)})),function(ce){return U.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(F=(0,d.A)(u().mark(function ce(_e){var ve,J,X,he,je,Ie,xt,ut,et,Qt,Fe,Ee;return u().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(ve=_e.noiseConfig,J=ve===void 0?void 0:ve,X=_e.encoderConfig,he=X===void 0?void 0:X,je=_e.microphoneId,!(Ie=je===void 0?void 0:je)){Qe.next=6;break}return Qe.next=4,this.getMicrophones();case 4:(xt=Qe.sent)&&xt.some(function(He){return He.deviceId})&&(xt.some(function(He){return He.deviceId===Ie})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 6:return Qe.prev=6,ut=he?Zo.$.audioProfiles[he]:Zo.$.audioProfiles.speech_standard,et={audio:{deviceId:Ie,sampleRate:ut.sampleRate,echoCancellation:J?J&&J.acousticEchoCancellation:ut.echoCancellation,autoGainControl:J?J&&J.autoGainControl:ut.autoGainControl,noiseSuppression:J?J&&J.noiseSuppression:ut.noiseSuppression,channelCount:ut.channelCount}},Qe.next=11,(0,dd.lp)(et);case 11:return(Qt=Qe.sent).encoderConfig=he||"speech_standard",Qt.microphoneId=Ie,Qe.abrupt("return",Qt);case 17:if(Qe.prev=17,Qe.t0=Qe.catch(6),Qe.t0.name!=="SecurityError"){Qe.next=23;break}Fe=gr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,Qe.next=43;break;case 23:if(Qe.t0.name!=="DOMException"){Qe.next=27;break}Fe=gr.q.ERROR_RN_MIC_NOT_FOUND.message,Qe.next=43;break;case 27:if(!(Qe.t0 instanceof DOMException)){Qe.next=42;break}Qe.t1=Qe.t0.name,Qe.next=Qe.t1==="NotAllowedError"?31:Qe.t1==="NotReadableError"?33:Qe.t1==="NotFoundError"?35:38;break;case 31:return Fe=ci(Qe.t0,"audio"),Qe.abrupt("break",40);case 33:return Fe=zs(Qe.t0,"audio"),Qe.abrupt("break",40);case 35:return Fe=gr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Fe=gr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Qe.abrupt("break",40);case 38:return Fe=Qe.t0.message,Qe.abrupt("break",40);case 40:Qe.next=43;break;case 42:Qe.t0.message=="getUserMedia is not implemented in this browser"?(Ee=gr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,Fe=Ee.message):Fe=Qe.t0.message;case 43:console.error("An error occurred in creating audio track, ".concat(Fe));case 44:case"end":return Qe.stop()}},ce,this,[[6,17]])})),function(ce){return F.apply(this,arguments)})}]);var F,U,W,Z,le,ne,me,ye,be,ke,Ae}();function ci(F,U){return(F.message==="Permission denied"||F.message==="Permission dismissed"?U==="video"?gr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:gr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:F.message.includes("The request is not allowed by the user agent")?U==="video"?gr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:gr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:F.message==="Permission denied by system"?U==="video"?gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:gr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:U==="video"?gr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:gr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function zs(F,U){return(F.message==="Device in use"?U==="video"?gr.q.ERROR_CAMERA_IN_USE:gr.q.ERROR_MICROPHONE_IN_USE:U==="video"?gr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:gr.q.ERROR_MICROPHONE_IN_USE).message}(0,v.A)(Ps,"devices",[]),(0,v.A)(Ps,"eventEmitter",new dn),(0,v.A)(Ps,"Constants",{errors:gr.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:cr,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:$u.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:De.nI,permission:Vs});var ji=Ps})(),c})())})(M6);var Il=M6.exports;function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kg.apply(null,arguments)}var Or="videosdk-live-react-sdk",st={"participant-joined":Or+"-participant-joined","participant-left":Or+"-participant-left","speaker-changed":Or+"-speaker-changed","presenter-changed":Or+"-presenter-changed","main-participant-changed":Or+"-main-participant-changed","entry-requested":Or+"-entry-requested","entry-responded":Or+"-entry-responded","recording-started":Or+"-recording-started","recording-stopped":Or+"-recording-stopped","chat-message":Or+"-chat-message","meeting-joined":Or+"-meeting-joined","meeting-left":Or+"-meeting-left","live-stream-started":Or+"-live-stream-started","live-stream-stopped":Or+"-live-stream-stopped","video-state-changed":Or+"-video-state-changed","video-seeked":Or+"-video-seeked","webcam-requested":Or+"-webcam-requested","mic-requested":Or+"-mic-requested","pin-state-changed":Or+"-pin-state-changed","connection-open":Or+"-connection-open","connection-close":Or+"-connection-close","switch-meeting":Or+"-switch-meeting",error:Or+"-error","hls-started":Or+"-hls-started","hls-stopped":Or+"-hls-stopped","hls-state-changed":Or+"-hls-state-changed","recording-state-changed":Or+"-recording-state-changed","livestream-state-changed":Or+"-livestream-state-changed","meeting-state-changed":Or+"-meeting-state-changed","participant-mode-changed":Or+"-participant-mode-changed","transcription-state-changed":Or+"-transcription-state-changed","transcription-text":Or+"-transcription-text","character-joined":Or+"-character-joined","character-left":Or+"-character-left","whiteboard-started":Or+"-whiteboard-started","whiteboard-stopped":Or+"-whiteboard-stopped","paused-all-streams":Or+"-paused-all-streams","resumed-all-streams":Or+"-resumed-all-streams","media-relay-started":Or+"-media-relay-started","media-relay-stopped":Or+"-media-relay-stopped","media-relay-error":Or+"-media-relay-error","media-relay-request-response":Or+"-media-relay-request-response","media-relay-request-received":Or+"-media-relay-request-received"},tt=new cK;tt.setMaxListeners(9999);var L6=A.createContext(),F6=function(t){var r=t===void 0?{}:t,n=r.onParticipantJoined,s=n===void 0?function(){}:n,i=r.onParticipantLeft,c=i===void 0?function(){}:i,l=r.onSpeakerChanged,d=l===void 0?function(){}:l,o=r.onPresenterChanged,p=o===void 0?function(){}:o,v=r.onMainParticipantChanged,m=v===void 0?function(){}:v,u=r.onEntryRequested,b=u===void 0?function(){}:u,f=r.onEntryResponded,w=f===void 0?function(){}:f,g=r.onPausedAllStreams,y=g===void 0?function(){}:g,_=r.onResumedAllStreams,x=_===void 0?function(){}:_,E=r.onRecordingStarted,j=E===void 0?function(){}:E,R=r.onRecordingStopped,C=R===void 0?function(){}:R,T=r.onChatMessage,h=T===void 0?function(){}:T,S=r.onMeetingJoined,k=S===void 0?function(){}:S,P=r.onMeetingLeft,N=P===void 0?function(){}:P,O=r.onLiveStreamStarted,D=O===void 0?function(){}:O,L=r.onLiveStreamStopped,M=L===void 0?function(){}:L,I=r.onVideoStateChanged,G=I===void 0?function(){}:I,de=r.onVideoSeeked,ee=de===void 0?function(){}:de,Q=r.onWebcamRequested,ae=Q===void 0?function(){}:Q,xe=r.onMicRequested,Se=xe===void 0?function(){}:xe,ie=r.onPinStateChanged,We=ie===void 0?function(){}:ie,Oe=r.onConnectionOpen,se=Oe===void 0?function(){}:Oe,ue=r.onConnetionClose,Ce=ue===void 0?function(){}:ue,$e=r.onSwitchMeeting,Wt=$e===void 0?function(){}:$e,er=r.onError,wt=er===void 0?function(){}:er,Er=r.onHlsStarted,yr=Er===void 0?function(){}:Er,Ot=r.onHlsStopped,nn=Ot===void 0?function(){}:Ot,Dt=r.onHlsStateChanged,Xt=Dt===void 0?function(){}:Dt,Gr=r.onRecordingStateChanged,dn=Gr===void 0?function(){}:Gr,Mr=r.onLivestreamStateChanged,Yr=Mr===void 0?function(){}:Mr,un=r.onMeetingStateChanged,Mt=un===void 0?function(){}:un,pn=r.onParticipantModeChanged,sn=pn===void 0?function(){}:pn,zr=r.onCharacterJoined,Lr=zr===void 0?function(){}:zr,_n=r.onCharacterLeft,Xr=_n===void 0?function(){}:_n,Pn=r.onMediaRelayStarted,Sn=Pn===void 0?function(){}:Pn,In=r.onMediaRelayStopped,Nn=In===void 0?function(){}:In,zt=r.onMediaRelayError,Mn=zt===void 0?function(){}:zt,ns=r.onMediaRelayRequestResponse,hn=ns===void 0?function(){}:ns,or=r.onMediaRelayRequestReceived,Ye=or===void 0?function(){}:or;return A.useEffect(function(){return tt.on(st["participant-joined"],s),tt.on(st["participant-left"],c),tt.on(st["speaker-changed"],d),tt.on(st["presenter-changed"],p),tt.on(st["main-participant-changed"],m),tt.on(st["entry-requested"],b),tt.on(st["entry-responded"],w),tt.on(st["paused-all-streams"],y),tt.on(st["resumed-all-streams"],x),tt.on(st["recording-started"],j),tt.on(st["recording-stopped"],C),tt.on(st["chat-message"],h),tt.on(st["meeting-joined"],k),tt.on(st["meeting-left"],N),tt.on(st["live-stream-started"],D),tt.on(st["live-stream-stopped"],M),tt.on(st["video-state-changed"],G),tt.on(st["video-seeked"],ee),tt.on(st["webcam-requested"],ae),tt.on(st["mic-requested"],Se),tt.on(st["pin-state-changed"],We),tt.on(st["connection-open"],se),tt.on(st["connection-close"],Ce),tt.on(st["switch-meeting"],Wt),tt.on(st.error,wt),tt.on(st["hls-started"],yr),tt.on(st["hls-stopped"],nn),tt.on(st["hls-state-changed"],Xt),tt.on(st["recording-state-changed"],dn),tt.on(st["livestream-state-changed"],Yr),tt.on(st["meeting-state-changed"],Mt),tt.on(st["participant-mode-changed"],sn),tt.on(st["character-joined"],Lr),tt.on(st["character-left"],Xr),tt.on(st["media-relay-started"],Sn),tt.on(st["media-relay-stopped"],Nn),tt.on(st["media-relay-error"],Mn),tt.on(st["media-relay-request-response"],hn),tt.on(st["media-relay-request-received"],Ye),function(){tt.off(st["meeting-state-changed"],Mt),tt.off(st["participant-joined"],s),tt.off(st["participant-left"],c),tt.off(st["speaker-changed"],d),tt.off(st["presenter-changed"],p),tt.off(st["main-participant-changed"],m),tt.off(st["entry-requested"],b),tt.off(st["entry-responded"],w),tt.off(st["paused-all-streams"],y),tt.off(st["resumed-all-streams"],x),tt.off(st["recording-started"],j),tt.off(st["recording-stopped"],C),tt.off(st["chat-message"],h),tt.off(st["meeting-joined"],k),tt.off(st["meeting-left"],N),tt.off(st["live-stream-started"],D),tt.off(st["live-stream-stopped"],M),tt.off(st["video-state-changed"],G),tt.off(st["video-seeked"],ee),tt.off(st["webcam-requested"],ae),tt.off(st["mic-requested"],Se),tt.off(st["pin-state-changed"],We),tt.off(st["connection-open"],se),tt.off(st["connection-close"],Ce),tt.off(st["switch-meeting"],Wt),tt.off(st.error,wt),tt.off(st["hls-started"],yr),tt.off(st["hls-stopped"],nn),tt.off(st["hls-state-changed"],Xt),tt.off(st["recording-state-changed"],dn),tt.off(st["livestream-state-changed"],Yr),tt.off(st["participant-mode-changed"],sn),tt.off(st["character-joined"],Lr),tt.off(st["character-left"],Xr),tt.off(st["media-relay-started"],Sn),tt.off(st["media-relay-stopped"],Nn),tt.off(st["media-relay-error"],Mn),tt.off(st["media-relay-request-response"],hn),tt.off(st["media-relay-request-received"],Ye)}},[]),A.useContext(L6)},lK="0.3.11",dK=function(t){var r=t.children,n=t.config,s=t.token,i=t.joinWithoutUserInteraction,c=t.reinitialiseMeetingOnConfigChange,l=t.deviceInfo,d=t.keyProvider,o=A.useState(null),p=o[0],v=o[1],m=A.useState(null),u=m[0],b=m[1],f=A.useState(null),w=f[0],g=f[1],y=A.useState(null),_=y[0],x=y[1],E=A.useState(null),j=E[0],R=E[1],C=A.useState(!1),T=C[0],h=C[1],S=A.useState(!1),k=S[0],P=S[1],N=A.useState(!1),O=N[0],D=N[1],L=A.useState(!1),M=L[0],I=L[1],G=A.useState([]),de=G[0],ee=G[1],Q=A.useState(new Map),ae=Q[0],xe=Q[1],Se=A.useState(new Map),ie=Se[0],We=Se[1],Oe=A.useState(new Map),se=Oe[0],ue=Oe[1],Ce=A.useState(!1),$e=Ce[0],Wt=Ce[1],er=A.useState(new Map),wt=er[0],Er=er[1],yr=A.useState(!1),Ot=yr[0],nn=yr[1],Dt=A.useState(!1),Xt=Dt[0],Gr=Dt[1],dn=A.useState("RECORDING_STOPPED"),Mr=dn[0],Yr=dn[1],un=A.useState("LIVESTREAM_STOPPED"),Mt=un[0],pn=un[1],sn=A.useState("HLS_STOPPED"),zr=sn[0],Lr=sn[1],_n=A.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Xr=_n[0],Pn=_n[1],Sn=A.useState("TRANSCRIPTION_STOPPED"),In=Sn[0],Nn=Sn[1],zt=A.useRef(),Mn=A.useRef(),ns=A.useRef(),hn=A.useRef(),or=A.useRef(),Ye=A.useRef(d),Me=A.useRef(n),ot=A.useRef(s),Le=A.useRef(!1),lt=A.useRef(),cr=A.useMemo(function(){return c},[]);A.useEffect(function(){zt.current=p},[p]),A.useEffect(function(){Mn.current=T},[T]),A.useEffect(function(){ns.current=k},[k]),A.useEffect(function(){hn.current=O},[O]),A.useEffect(function(){or.current=M},[M]),A.useEffect(function(){Me.current=n},[n]),A.useEffect(function(){ot.current=s},[s]),A.useEffect(function(){lt.current=Xt},[Xt]);var De=function(){v(null),b(null),g(null),x(null),R(null),h(!1),P(!1),D(!1),I(!1),ee([]),Wt(!1),xe(new Map),We(new Map),ue(new Map),Er(new Map),nn(!1),Gr(!1),Yr("RECORDING_STOPPED"),pn("LIVESTREAM_STOPPED"),Lr("HLS_STOPPED"),Nn("TRANSCRIPTION_STOPPED"),Pn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Zt=function(te){xe(function(at){at.set(te.id,te);var ur=new Map(at);return ur}),tt.emit(st["participant-joined"],te)},Vt=function(te){xe(function(at){at.delete(te.id);var ur=new Map(at);return ur}),tt.emit(st["participant-left"],te)},br=function(te){var at,ur;R(te),D(te===(zt==null||(at=zt.current)===null||at===void 0||(ur=at.localParticipant)===null||ur===void 0?void 0:ur.id)),tt.emit(st["presenter-changed"],te)},hr=function(te){g(te),tt.emit(st["main-participant-changed"],te)},Pr=function(te){x(te),tt.emit(st["speaker-changed"],te)},Xe=function(te){ee(function(at){return[].concat(at,[te])}),tt.emit(st["chat-message"],te)},Kt=function(te){tt.emit(st["entry-requested"],te)},Tt=function(te,at){tt.emit(st["entry-responded"],te,at)},Ht=function(){I(!0),tt.emit(st["recording-started"])},Fr=function(){I(!1),tt.emit(st["recording-stopped"])},Nr=function(te){te.track.readyState==="live"&&(te.kind==="video"?P(!0):te.kind==="audio"&&h(!0))},$r=function(te){te.kind==="video"?P(!1):te.kind==="audio"&&h(!1)},Sr=function(te){Wt(!0),tt.emit(st["live-stream-started"],te)},wr=function(){Wt(!1),tt.emit(st["live-stream-stopped"])},Jr=function(te){Gr(!0),tt.emit(st["hls-started"],te)},Jn=function(){Gr(!1),tt.emit(st["hls-stopped"])},ss=function(te){tt.emit(st["video-state-changed"],te)},Gs=function(te){tt.emit(st["video-seeked"],te)},Ys=function(te){tt.emit(st["webcam-requested"],te)},mi=function(te){tt.emit(st["mic-requested"],te)},Ci=function(te){te.switchRoomId?(ee(function(at){return[].concat(at,te.messages)}),tt.emit(st["meeting-joined"],te)):(Le.current=!0,ee(function(at){return[].concat(at,te.messages)}),tt.emit(st["meeting-joined"],te),nn(!0))},gi=function(){tt.emit(st["meeting-left"]);var te=zt.current;if(te){var at;typeof(te==null?void 0:te.off)=="function"&&(te.off("meeting-state-changed",Cr),te.off("participant-joined",Zt),te.off("participant-left",Vt),te.off("presenter-changed",br),te.off("main-participant-changed",hr),te.off("speaker-changed",Pr),te.off("entry-requested",Kt),te.off("entry-responded",Tt),te.off("chat-message",Xe),te.off("recording-started",Ht),te.off("recording-stopped",Fr),te.off("meeting-joined",Ci),te.off("meeting-left",gi),te.off("livestream-started",Sr),te.off("livestream-stopped",wr),te.off("video-state-changed",ss),te.off("video-seeked",Gs),te.off("webcam-requested",Ys),te.off("mic-requested",mi),te.off("pin-state-changed",is),te.off("paused-all-streams",as),te.off("resumed-all-streams",zi),te.off("connection-open",kt),te.off("connection-close",ir),te.off("switch-meeting",Gt),te.off("error",Rn),te.off("hls-started",Jr),te.off("hls-stopped",Jn),te.off("recording-state-changed",dr),te.off("livestream-state-changed",xr),te.off("hls-state-changed",fn),te.off("participant-mode-changed",xs),te.off("whiteboard-stopped",An),te.off("whiteboard-started",Cs),te.off("transcription-state-changed",Rr),te.off("character-joined",Ln),te.off("character-left",Js)),typeof(te==null||(at=te.localParticipant)===null||at===void 0?void 0:at.off)=="function"&&(te.localParticipant.off("stream-enabled",Nr),te.localParticipant.off("stream-disabled",$r)),De()}},is=function(te){var at=te.participantId,ur=te.state,Qn=te.pinnedBy;ue(function(Fn){!ur.cam&&!ur.share?Fn.delete(at):Fn.set(at,ur);var gr=new Map(Fn);return gr}),tt.emit(st["pin-state-changed"],{participantId:at,state:ur,pinnedBy:Qn})},as=function(te){var at=te.kind;tt.emit(st["paused-all-streams"],{kind:at})},zi=function(te){var at=te.kind;tt.emit(st["resumed-all-streams"],{kind:at})},kt=function(te){Er(function(at){at.set(te.id,te);var ur=new Map(at);return ur}),tt.emit(st["connection-open"],te)},ir=function(te){Er(function(at){at.delete(te);var ur=new Map(at);return ur}),tt.emit(st["connection-close"],te)},Gt=function(te){tt.emit(st["switch-meeting"],te)},Rn=function(te){tt.emit(st.error,te)},dr=function(te){Yr(te==null?void 0:te.status),tt.emit(st["recording-state-changed"],te)},xr=function(te){pn(te==null?void 0:te.status),tt.emit(st["livestream-state-changed"],te)},fn=function(te){Lr(te==null?void 0:te.status),(te==null?void 0:te.status)=="HLS_PLAYABLE"?Pn({downstreamUrl:te==null?void 0:te.downstreamUrl,playbackHlsUrl:te==null?void 0:te.playbackHlsUrl,livestreamUrl:te==null?void 0:te.livestreamUrl}):(te==null?void 0:te.status)=="HLS_STOPPED"&&Pn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),tt.emit(st["hls-state-changed"],te)},Cr=function(te){tt.emit(st["meeting-state-changed"],te)},Rr=function(te){Nn(te==null?void 0:te.status),tt.emit(st["transcription-state-changed"],te)},an=function(te){tt.emit(st["transcription-text"],te)},Cs=function(te){tt.emit(st["whiteboard-started"],te)},An=function(te){tt.emit(st["whiteboard-stopped"],te)},Ln=function(te){We(function(at){at.set(te.id,te);var ur=new Map(at);return ur}),tt.emit(st["character-joined"],te)},Js=function(te){We(function(at){at.delete(te.id);var ur=new Map(at);return ur}),tt.emit(st["character-left"],te)},xs=function(te){var at,ur;xe(function(Qn){var Fn=Qn.get(te.participantId);Fn.mode=te.mode,Qn.set(Fn.id,Fn);var gr=new Map(Qn);return gr}),te.participantId===(zt==null||(at=zt.current)===null||at===void 0||(ur=at.localParticipant)===null||ur===void 0?void 0:ur.id)&&b(function(Qn){return Qn.mode=te.mode,Qn}),tt.emit(st["participant-mode-changed"],te)},Hi=function(te){tt.emit(st["media-relay-started"],te)},Qs=function(te){tt.emit(st["media-relay-stopped"],te)},ba=function(te){tt.emit(st["media-relay-error"],te)},ii=function(te){tt.emit(st["media-relay-request-response"],te)},Va=function(te){tt.emit(st["media-relay-request-received"],te)},co=function(){var te=Il.VideoSDK&&Il.VideoSDK.initMeeting(Me.current);v(te);var at=te.localParticipant,ur=te.participants,Qn=te.characters;ur.set(at.id,at),xe(ur),We(Qn),b(at),te.on("meeting-state-changed",Cr),te.on("participant-joined",Zt),te.on("participant-left",Vt),te.on("presenter-changed",br),te.on("main-participant-changed",hr),te.on("speaker-changed",Pr),te.on("entry-requested",Kt),te.on("entry-responded",Tt),te.on("chat-message",Xe),te.on("recording-started",Ht),te.on("recording-stopped",Fr),te.on("meeting-joined",Ci),te.on("meeting-left",gi),te.on("livestream-started",Sr),te.on("livestream-stopped",wr),te.on("video-state-changed",ss),te.on("video-seeked",Gs),te.on("webcam-requested",Ys),te.on("mic-requested",mi),te.on("pin-state-changed",is),te.on("paused-all-streams",as),te.on("resumed-all-streams",zi),te.on("connection-open",kt),te.on("connection-close",ir),te.on("switch-meeting",Gt),te.on("error",Rn),te.on("hls-started",Jr),te.on("hls-stopped",Jn),te.on("recording-state-changed",dr),te.on("livestream-state-changed",xr),te.on("hls-state-changed",fn),te.on("participant-mode-changed",xs),te.on("transcription-state-changed",Rr),te.on("transcription-text",an),te.on("whiteboard-started",Cs),te.on("whiteboard-stopped",An),te.on("character-joined",Ln),te.on("character-left",Js),te.on("media-relay-started",Hi),te.on("media-relay-stopped",Qs),te.on("media-relay-error",ba),te.on("media-relay-request-response",ii),te.on("media-relay-request-received",Va),te.localParticipant.on("stream-enabled",Nr),te.localParticipant.on("stream-disabled",$r),te.join()},Fo=function(){var te=zt.current;te&&te.leave()},Bo=function(){var te=zt.current;te&&te.end()},qi=function(te){var at=zt.current;at&&at.pauseAllStreams(te)},Uo=function(te){var at=zt.current;at&&at.resumeAllStreams(te)},tl=function(te,at,ur,Qn){var Fn=zt.current;Fn&&Fn.startRecording(te,at,ur,Qn)},rl=function(){var te=zt.current;if(te){var at=or.current;at&&te.stopRecording()}},Vo=function(te){te===void 0&&(te=void 0);var at=zt.current;at&&at.unmuteMic(te)},$o=function(){var te=zt.current;te&&te.muteMic()},nl=function(te){te===void 0&&(te=void 0);var at=Mn.current;at?$o():Vo(te)},Wo=function(){var te=zt.current;te&&te.disableWebcam()},lr=function(te){te===void 0&&(te=void 0);var at=zt.current;at&&at.enableWebcam(te)},zo=function(te){te===void 0&&(te=void 0);var at=ns.current;at?Wo():lr(te)},Ho=function(te){var at=te.meetingId,ur=te.token,Qn=zt.current;Qn&&Qn.switchTo({meetingId:at,token:ur})},ta=function(){var te=zt.current;te&&te.disableScreenShare()},mr=function(te){te===void 0&&(te=void 0);var at=zt.current;at&&at.enableScreenShare(te)},sl=function(te){te===void 0&&(te=void 0);var at=hn.current;at?ta():mr(te)},qo=function(te){var at=zt.current;at&&at.changeMode(te)},il=function(te){var at=zt.current;at&&at.sendChatMessage(te)},al=function(te,at){var ur=zt.current;ur&&ur.respondEntry(te,at)},ol=function(){try{var te=zt.current;return Promise.resolve(function(){if(te)return Promise.resolve(te.getMics())}())}catch(at){return Promise.reject(at)}},Us=function(){try{var te=zt.current;return Promise.resolve(function(){if(te)return Promise.resolve(te.getWebcams())}())}catch(at){return Promise.reject(at)}},cl=function(te){var at=zt.current;at&&at.changeWebcam(te)},Ko=function(te){var at=zt.current;at&&at.replaceWebcamStream(te)},Ti=function(te){var at=zt.current;at&&at.changeMic(te)},lo=function(te){var at=te.link,ur=zt.current;ur&&ur.startVideo({link:at})},ra=function(){var te=zt.current;te&&te.stopVideo()},Go=function(){var te=zt.current;te&&te.resumeVideo()},Yo=function(te){var at=te.currentTime,ur=zt.current;ur&&ur.pauseVideo({currentTime:at})},ll=function(){var te=zt.current;te&&te.enableAdaptiveSubscription()},Jo=function(){var te=zt.current;te&&te.disableAdaptiveSubscription()},uo=function(te){var at=te.destinationMeetingId,ur=te.token,Qn=te.kinds,Fn=zt.current;Fn&&Fn.requestMediaRelay({destinationMeetingId:at,token:ur,kinds:Qn})},dl=function(te){var at=zt.current;at&&at.stopMediaRelay(te)},ul=function(te){var at=te.currentTime,ur=zt.current;ur&&ur.seekVideo({currentTime:at})},po=function(te,at){var ur=zt.current;ur&&ur.startLivestream(te,at)},na=function(){var te=zt.current;te&&te.stopLivestream()},ho=function(te){var at=te.meetingId,ur=te.payload;try{var Qn=zt.current,Fn=function(){if(Qn)return Promise.resolve(Qn.connectTo({meetingId:at,payload:ur})).then(function(){})}();return Promise.resolve(Fn&&Fn.then?Fn.then(function(){}):void 0)}catch(gr){return Promise.reject(gr)}},Qo=function(te,at){var ur=zt.current;ur&&ur.startHls(te,at)},Xo=function(){var te=zt.current;te&&te.stopHls()},$a=function(){Il.VideoSDK.config(ot.current),Ye.current&&Il.VideoSDK.setKeyProvider(Ye.current),l?Il.VideoSDK.analytics(l):Il.VideoSDK.analytics({sdkType:"react-web",sdkVersion:lK}),i&&co()};return A.useEffect(function(){$a()},[]),A.useEffect(function(){cr&&Le.current&&(Fo(),$a(),!i&&co())},[n.meetingId,s,cr]),pt.createElement(L6.Provider,{value:{meetingId:p==null?void 0:p.id,meeting:p,baseUrl:p==null?void 0:p.baseUrl,localParticipant:u,mainParticipant:w,activeSpeakerId:_,participants:ae,characters:ie,presenterId:j,localMicOn:T,localWebcamOn:k,localScreenShareOn:O,messages:de,isRecording:M,isLiveStreaming:$e,pinnedParticipants:se,connections:wt,isHls:Xt,recordingState:Mr,livestreamState:Mt,hlsState:zr,hlsUrls:Xr,transcriptionState:In,isMeetingJoined:Ot,selectedCameraDevice:p==null?void 0:p.selectedCameraDevice,selectedMicrophoneDevice:p==null?void 0:p.selectedMicrophoneDevice,join:co,leave:Fo,end:Bo,pauseAllStreams:qi,resumeAllStreams:Uo,startRecording:tl,stopRecording:rl,sendChatMessage:il,respondEntry:al,muteMic:$o,unmuteMic:Vo,toggleMic:nl,disableWebcam:Wo,enableWebcam:lr,toggleWebcam:zo,disableScreenShare:ta,enableScreenShare:mr,toggleScreenShare:sl,switchTo:Ho,getMics:ol,getWebcams:Us,changeWebcam:cl,replaceWebcamStream:Ko,changeMic:Ti,changeMode:qo,startVideo:lo,stopVideo:ra,resumeVideo:Go,pauseVideo:Yo,seekVideo:ul,startLivestream:po,stopLivestream:na,connectTo:ho,startHls:Qo,stopHls:Xo,enableAdaptiveSubscription:ll,disableAdaptiveSubscription:Jo,requestMediaRelay:uo,stopMediaRelay:dl}},r)},uK=function(t,r){var n={},s=n.onStreamEnabled,i=s===void 0?function(){}:s,c=n.onStreamDisabled,l=c===void 0?function(){}:c,d=n.onMediaStatusChanged,o=d===void 0?function(){}:d,p=n.onVideoQualityChanged,v=p===void 0?function(){}:p,m=n.onStreamPaused,u=m===void 0?function(){}:m,b=n.onStreamResumed,f=b===void 0?function(){}:b,w=n.onProducerAdded,g=w===void 0?function(){}:w,y=n.onProducerRemoved,_=y===void 0?function(){}:y,x=n.onConsumerAdded,E=x===void 0?function(){}:x,j=n.onConsumerRemoved,R=j===void 0?function(){}:j,C=A.useState(null),T=C[0],h=C[1],S=A.useState(null),k=S[0],P=S[1],N=A.useState(null),O=N[0],D=N[1],L=A.useState(null),M=L[0],I=L[1],G=F6(),de=A.useMemo(function(){var or,Ye=G==null?void 0:G.participants,Me=G==null?void 0:G.localParticipant,ot=G==null?void 0:G.activeSpeakerId,Le=G==null?void 0:G.mainParticipant,lt=(G==null||(or=G.pinnedParticipants)===null||or===void 0?void 0:or.get(t))||{cam:!1,share:!1};return{participants:Ye,localParticipant:Me,activeSpeakerId:ot,mainParticipant:Le,pinState:lt}},[G]),ee=de.participants,Q=de.localParticipant,ae=de.activeSpeakerId,xe=de.mainParticipant,Se=de.pinState,ie=ee==null?void 0:ee.get(t),We=A.useState(ie==null?void 0:ie.webcamOn),Oe=We[0],se=We[1],ue=A.useState(ie==null?void 0:ie.micOn),Ce=ue[0],$e=ue[1],Wt=A.useState(ie==null?void 0:ie.mode),er=Wt[0],wt=Wt[1],Er=function(Ye){if(Ye.track.readyState==="live")switch(Ye.kind){case"video":T!=null&&h(null),h(Ye);break;case"audio":k!=null&&P(null),P(Ye);break;case"share":O!=null&&D(null),D(Ye);break;case"shareAudio":M!=null&&I(null),I(Ye);break}},yr=function(Ye){switch(Ye.kind){case"video":h(null);break;case"audio":P(null);break;case"share":D(null);break;case"shareAudio":I(null);break}},Ot=function(Ye){Er(Ye),i(Ye)},nn=function(Ye){t===Ye.participantId&&wt(Ye.mode)},Dt=function(Ye){yr(Ye),l(Ye)},Xt=function(Ye){var Me=Ye.peerId,ot=Ye.prevQuality,Le=Ye.currentQuality;v({peerId:Me,prevQuality:ot,currentQuality:Le})},Gr=function(Ye){var Me=Ye.kind,ot=Ye.peerId,Le=Ye.newStatus;Me=="audio"?$e(Le):Me=="video"&&se(Le),o({kind:Me,peerId:ot,newStatus:Le})},dn=function(Ye){ie==null||ie.setQuality(Ye)},Mr=function(Ye,Me){ie==null||ie.setViewPort(Ye,Me)},Yr=function(Ye){ie==null||ie.setScreenShareQuality(Ye)},un=function(){ie==null||ie.enableMic()},Mt=function(){ie==null||ie.disableMic()},pn=function(){ie==null||ie.enableWebcam()},sn=function(){ie==null||ie.disableWebcam()},zr=function(Ye){ie==null||ie.pin(Ye)},Lr=function(Ye){ie==null||ie.unpin(Ye)},_n=function(){ie==null||ie.remove()},Xr=function(Ye){var Me=Ye===void 0?{}:Ye,ot=Me.height,Le=Me.width;return Promise.resolve(ie==null?void 0:ie.captureImage({height:ot,width:Le}))},Pn=function(){return Promise.resolve(ie==null?void 0:ie.getAudioStats())},Sn=function(){return Promise.resolve(ie==null?void 0:ie.getVideoStats())},In=function(){return Promise.resolve(ie==null?void 0:ie.getShareStats())},Nn=function(){return Promise.resolve(ie==null?void 0:ie.getShareAudioStats())},zt=function(){ie==null||ie.consumeWebcamStreams()},Mn=function(){ie==null||ie.consumeMicStreams()},ns=function(){ie==null||ie.stopConsumingWebcamStreams()},hn=function(){ie==null||ie.stopConsumingMicStreams()};return A.useEffect(function(){var or=ie==null?void 0:ie.streams;return or&&or.forEach(function(Ye){Er(Ye)}),ie!=null&&ie.micOn&&$e(Ce),ie!=null&&ie.webcamOn&&se(Oe),ie==null||ie.on("stream-enabled",Ot),ie==null||ie.on("stream-disabled",Dt),ie==null||ie.on("stream-paused",function(Ye){u(Ye)}),ie==null||ie.on("stream-resumed",function(Ye){f(Ye)}),ie==null||ie.on("media-status-changed",Gr),ie==null||ie.on("video-quality-changed",Xt),ie==null||ie.on("producer-added",function(Ye){g(Ye)}),ie==null||ie.on("producer-removed",function(Ye){_(Ye)}),ie==null||ie.on("consumer-added",function(Ye){E(Ye)}),ie==null||ie.on("consumer-removed",function(Ye){R(Ye)}),tt.on(st["participant-mode-changed"],nn),function(){ie==null||ie.off("stream-enabled",Ot),ie==null||ie.off("stream-disabled",Dt),ie==null||ie.off("media-status-changed",Gr),ie==null||ie.off("video-quality-changed",Xt),tt.off(st["participant-mode-changed"],nn)}},[ie]),{displayName:ie==null?void 0:ie.displayName,participant:ie,webcamStream:T,micStream:k,screenShareStream:O,screenShareAudioStream:M,webcamOn:Oe||!!T,micOn:Ce||!!k,mode:er,metaData:ie==null?void 0:ie.metaData,screenShareOn:!!O,isLocal:(Q==null?void 0:Q.id)===t,isActiveSpeaker:ae===t,isMainParticipant:(xe==null?void 0:xe.id)===t,pinState:Se,consumeMicStreams:Mn,consumeWebcamStreams:zt,stopConsumingMicStreams:hn,stopConsumingWebcamStreams:ns,setQuality:dn,setScreenShareQuality:Yr,setViewPort:Mr,enableMic:un,disableMic:Mt,enableWebcam:pn,disableWebcam:sn,captureImage:Xr,pin:zr,unpin:Lr,remove:_n,getAudioStats:Pn,getVideoStats:Sn,getShareStats:In,getShareAudioStats:Nn}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Il.VideoSDK.Constants;A.forwardRef(function(e,t){var r=e.participantId,n=e.type,s=n===void 0?"video":n,i=e.containerStyle,c=i===void 0?{}:i,l=e.className,d=l===void 0?"":l,o=e.classNameVideo,p=o===void 0?"":o,v=e.videoStyle,m=v===void 0?{}:v,u=uK(r),b=u.webcamOn,f=u.webcamStream,w=u.isLocal,g=u.screenShareStream,y=u.screenShareOn,_=A.useRef(null);return A.useEffect(function(){var x=s==="share"?g:f,E=s==="share"?y:b;if(_.current)if(E&&x){var j=new MediaStream;j.addTrack(x.track),_.current.srcObject=j,_.current.setAttribute("playsinline",""),_.current.setAttribute("x5-playsinline",""),_.current.setAttribute("webkit-playsinline",""),_.current.play().catch(function(R){return console.error("videoRef.current.play() failed",R)})}else _.current.srcObject=null},[s].concat(s==="share"?[y,g]:s==="video"?[b,f]:[])),pt.createElement("div",{ref:t,className:"video-container participant-video-"+r+" "+(d||""),style:kg({objectFit:s==="share"?"contain":"none",height:"100%"},c)},pt.createElement("video",{width:"100%",height:"100%",ref:_,autoPlay:!0,className:p,style:w&&s!=="share"?kg({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},m):m}))});function pK({participantId:e}){return a.jsxs("div",{children:["Participant: ",e]})}function hK(){const[e,t]=A.useState(null),{join:r,participants:n}=F6({onMeetingJoined:()=>{t("JOINED")}}),s=()=>{t("JOINING"),r()};return a.jsx("div",{className:"container",children:e&&e=="JOINED"?a.jsx("div",{children:[...n.keys()].map(i=>a.jsx(pK,{participantId:i},i))}):e&&e=="JOINING"?a.jsx("p",{children:"Joining the meeting..."}):a.jsx("button",{onClick:s,children:"Join the meeting"})})}const fK=({meetingId:e,token:t,name:r})=>a.jsx(dK,{config:{meetingId:e,micEnabled:!0,webcamEnabled:!0,name:r,debugMode:!1},token:t,children:a.jsx(hK,{})}),mK=()=>{const[e,t]=A.useState(""),[r,n]=A.useState("");return A.useEffect(()=>{(async()=>{try{const i=await Ft.post("undefined/api/chat/get-token");t(i.data.roomId),n(i.data.token)}catch(i){console.error("Error getting meeting token",i)}})()},[]),e&&r?a.jsx(fK,{meetingId:e,token:r,name:"Dr. Vasu"}):a.jsx("div",{className:"text-center mt-10 text-xl",children:" Starting Video Call..."})},gK=Gg("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Vb=A.forwardRef(({className:e,variant:t,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:Vr(gK({variant:t}),e),...r}));Vb.displayName="Alert";const vK=A.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:Vr("mb-1 font-medium leading-none tracking-tight",e),...t}));vK.displayName="AlertTitle";const $b=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Vr("text-sm [&_p]:leading-relaxed",e),...t}));$b.displayName="AlertDescription";function yK(){const[e,t]=A.useState(null),[r,n]=A.useState(!1),[s,i]=A.useState(null),[c,l]=A.useState("IDLE"),[d,o]=A.useState(null),[p,v]=A.useState(null),m=A.useRef(null),u="undefined/api",b="report-analyzer-state",f="report-analyzer-last",w=x=>{var j;const E=(j=x.target.files)==null?void 0:j[0];E&&t(E)},g=()=>{m.current&&(window.clearInterval(m.current),m.current=null)};A.useEffect(()=>{try{const x=localStorage.getItem(b);if(x){const j=JSON.parse(x);j!=null&&j.reportId&&(i(j.reportId),l(j.status==="PROCESSING"?"PROCESSING":"IDLE"),y(j.reportId))}const E=localStorage.getItem(f);if(E){const j=JSON.parse(E);j&&j.id&&(o(j),l(j.status||"COMPLETED"))}}catch{}return()=>g()},[]);const y=x=>{g(),m.current=window.setInterval(async()=>{var E;try{const j=await Ft.get(`${u}/report/${x}`,{withCredentials:!0});if((E=j.data)!=null&&E.success){const R=j.data.data;R.status==="COMPLETED"?(l("COMPLETED"),o(R),g(),n(!1),$t.success("Report analyzed successfully")):R.status==="FAILED"?(l("FAILED"),v(R.error||"Analysis failed"),g(),n(!1),$t.error(R.error||"Report analysis failed")):l("PROCESSING")}}catch{}},2e3)},_=async()=>{var x,E,j,R,C,T;if(e){v(null),o(null),n(!0),l("PROCESSING");try{const h=new FormData;h.append("report",e);const S=await Ft.post(`${u}/report`,h,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if((x=S.data)!=null&&x.success&&((j=(E=S.data)==null?void 0:E.data)!=null&&j.reportId)){const k=S.data.data.reportId;i(k),y(k),$t.message("Report uploaded",{description:"Analyzing in background..."})}else throw new Error(((R=S.data)==null?void 0:R.message)||"Upload failed")}catch(h){n(!1),l("FAILED");const S=((T=(C=h==null?void 0:h.response)==null?void 0:C.data)==null?void 0:T.message)||(h==null?void 0:h.message)||"Upload failed";v(S),$t.error(S)}}};return a.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Analyze Report"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload your medical reports for AI-powered analysis and insights."})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(xn,{className:"flex items-center gap-2",children:[a.jsx(Ia,{className:"h-5 w-5"}),"Upload Medical Report"]}),a.jsx(Vn,{children:"Upload your medical reports in PDF, JPG, or PNG format for analysis."})]}),a.jsxs(jt,{className:"space-y-4",children:[a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[a.jsx(S3,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e?e.name:"Choose file or drag and drop"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"PDF, JPG, PNG up to 10MB"})]}),a.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:w,className:"hidden",id:"file-upload"}),a.jsx(tr,{variant:"outline",onClick:()=>{var x;return(x=document.getElementById("file-upload"))==null?void 0:x.click()},className:"mt-4",children:"Select File"})]}),e&&a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ia,{className:"h-8 w-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]}),a.jsx(tr,{variant:"outline",size:"sm",onClick:()=>t(null),children:"Remove"})]}),a.jsxs(Vb,{children:[a.jsx(Fy,{className:"h-4 w-4"}),a.jsx($b,{children:"Your uploaded reports will be analyzed using AI to provide insights about your health condition. All data is processed securely and confidentially."})]}),a.jsx(tr,{onClick:_,disabled:!e||r,className:"w-full",children:r?"Analyzing...":"Analyze Report"})]})]}),a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(xn,{children:"Analysis Result"}),a.jsxs(Vn,{children:[c==="IDLE"&&"Upload a report to see results here.",c==="PROCESSING"&&"We are analyzing your report. This may take a moment.",c==="COMPLETED"&&"Your report has been analyzed.",c==="FAILED"&&"We couldn't analyze your report."]})]}),a.jsxs(jt,{children:[c==="PROCESSING"&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Analyzing... Please wait."}),c==="FAILED"&&a.jsxs(Vb,{className:"mb-4",children:[a.jsx(Fy,{className:"h-4 w-4"}),a.jsx($b,{children:p||"Something went wrong while analyzing your report."})]}),c==="COMPLETED"&&d&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Filename"}),a.jsx("div",{className:"font-medium",children:d.filename})]}),d.summary&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Summary"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.summary})]}),Array.isArray(d.abnormalValues)&&d.abnormalValues.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Abnormal Values"}),a.jsx("div",{className:"space-y-3",children:d.abnormalValues.map((x,E)=>{const j=x.test_name||x.testName||x.parameter||`Result ${E+1}`,R=x.value??x.measured_value??x.measuredValue,C=x.unit||x.units||"",T=x.normal_range||x.normalRange||x.reference||"",h=x.issue||x.reason||x.flag||"";return{name:j,value:R,unit:C,normal:T,issue:h}}).map((x,E)=>a.jsx("div",{className:"rounded-lg border border-red-500/20 bg-red-500/5 p-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:x.name}),x.normal&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Normal: ",x.normal]})]}),a.jsxs("div",{className:"shrink-0 text-right",children:[a.jsxs("div",{className:"text-red-600 font-semibold",children:[x.value!==void 0?x.value:""," ",x.unit]}),x.issue&&a.jsx(Ur,{variant:"secondary",className:"mt-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",children:x.issue})]})]})},`${x.name}-${E}`))})]}),Array.isArray(d.possibleConditions)&&d.possibleConditions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Possible Conditions"}),a.jsx("ul",{className:"list-disc pl-6 space-y-1",children:d.possibleConditions.map((x,E)=>a.jsx("li",{children:typeof x=="string"?x:(x==null?void 0:x.condition)||JSON.stringify(x)},E))})]}),d.recommendation&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Recommendation"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.recommendation})]}),d.disclaimer&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Disclaimer"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 whitespace-pre-wrap",children:d.disclaimer})]})]}),c==="IDLE"&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reports analyzed yet. Upload your first report to get started."})]})]})]})]})}function bK(){const[e,t]=A.useState([]),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,l]=A.useState(""),[d,o]=A.useState("all"),p=Bs(_=>_.user),v="undefined/api";A.useEffect(()=>{(p==null?void 0:p.role)==="PATIENT"&&m()},[p]),A.useEffect(()=>{u()},[e,c,d]);const m=async()=>{var _;try{i(!0);const x=await Ft.get(`${v}/patient/all-appointments`,{withCredentials:!0});x.data.success&&t(x.data.data)}catch(x){console.error("Error fetching appointment history:",x),Ft.isAxiosError(x)&&x.response?$t.error(((_=x.response.data)==null?void 0:_.message)||"Failed to fetch appointment history"):$t.error("Failed to fetch appointment history")}finally{i(!1)}},u=()=>{let _=[...e];c&&(_=_.filter(x=>x.doctor.name.toLowerCase().includes(c.toLowerCase())||x.doctor.specialty.toLowerCase().includes(c.toLowerCase()))),d!=="all"&&(_=_.filter(x=>x.status===d)),_.sort((x,E)=>new Date(E.createdAt).getTime()-new Date(x.createdAt).getTime()),n(_)},b=_=>{const x="backdrop-blur-sm rounded-full px-2.5 py-1 border shadow-sm text-xs font-medium",E={PENDING:{label:"Pending",cls:"bg-gradient-to-r from-amber-400/15 to-yellow-500/15 text-amber-700 dark:text-amber-200 border-amber-400/30"},CONFIRMED:{label:"Confirmed",cls:"bg-gradient-to-r from-emerald-400/15 to-teal-500/15 text-emerald-700 dark:text-emerald-200 border-emerald-400/30"},COMPLETED:{label:"Completed",cls:"bg-gradient-to-r from-sky-400/15 to-indigo-500/15 text-sky-700 dark:text-sky-200 border-sky-400/30"},CANCELLED:{label:"Cancelled",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"},REJECTED:{label:"Rejected",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"}},j=E[_]||E.PENDING;return a.jsx(Ur,{variant:"outline",className:`${x} ${j.cls}`,children:j.label})},f=_=>new Date(_).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),w=_=>new Date(`2000-01-01T${_}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),y={total:e.length,pending:e.filter(x=>x.status==="PENDING").length,confirmed:e.filter(x=>x.status==="CONFIRMED").length,completed:e.filter(x=>x.status==="COMPLETED").length,cancelled:e.filter(x=>x.status==="CANCELLED").length,rejected:e.filter(x=>x.status==="REJECTED").length};return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointment History"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View your past and upcoming appointments"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8",children:[a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.total}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.pending}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Request Sent"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.confirmed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confirmed"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.completed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.cancelled}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cancelled"})]})})}),a.jsx(Nt,{children:a.jsx(jt,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.rejected}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected"})]})})})]}),a.jsx(Nt,{className:"mb-6",children:a.jsx(jt,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(cs,{placeholder:"Search by doctor name or specialty...",value:c,onChange:_=>l(_.target.value),className:"pl-10"})]})}),a.jsxs(Ja,{value:d,onValueChange:o,children:[a.jsx(Na,{className:"w-full md:w-48",children:a.jsx(Qa,{placeholder:"Filter by status"})}),a.jsxs(Aa,{children:[a.jsx(qr,{value:"all",children:"All Statuses"}),a.jsx(qr,{value:"PENDING",children:"Request Sent"}),a.jsx(qr,{value:"CONFIRMED",children:"Confirmed"}),a.jsx(qr,{value:"COMPLETED",children:"Completed"}),a.jsx(qr,{value:"CANCELLED",children:"Cancelled"}),a.jsx(qr,{value:"REJECTED",children:"Rejected"})]})]})]})})}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsx(Nt,{children:a.jsxs(jt,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(hs,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:e.length===0?"You don't have any appointments yet.":"No appointments match your current filters."})]})}):r.map(_=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow",children:a.jsxs(jt,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:a.jsx(No,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:_.doctor.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:_.doctor.specialty})]})]}),a.jsxs("div",{className:"text-right",children:[b(_.status),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",f(_.createdAt)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f(_.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w(_.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ma,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.doctor.clinicLocation})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ia,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.appointmentType})]})]}),_.notes&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Notes:"})," ",_.notes]})}),_.consultationFee&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Consultation Fee:"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["",_.consultationFee]})]}),_.prescriptionId&&a.jsx("div",{className:"mt-4",children:a.jsx(tr,{variant:"secondary",onClick:()=>window.open(`${v}/patient/prescription-pdf/${_.prescriptionId}`,"_blank"),children:"View Prescription"})})]})})},_.id))})]})}function wK(){const[e,t]=A.useState(""),n=[{id:1,name:"City Pharmacy",address:"123 Main Street, Downtown",distance:"0.5 km",rating:4.5,phone:"(555) 123-4567",hours:"8:00 AM - 10:00 PM",isOpen:!0,services:["Prescription","OTC","Delivery"]},{id:2,name:"Health Plus Pharmacy",address:"456 Oak Avenue, Midtown",distance:"1.2 km",rating:4.2,phone:"(555) 234-5678",hours:"7:00 AM - 11:00 PM",isOpen:!0,services:["Prescription","OTC","Vaccination","Delivery"]},{id:3,name:"24/7 Medical Store",address:"789 Pine Street, Uptown",distance:"2.1 km",rating:4,phone:"(555) 345-6789",hours:"24/7",isOpen:!0,services:["Prescription","OTC","Emergency"]},{id:4,name:"Family Pharmacy",address:"321 Elm Street, Suburbs",distance:"3.5 km",rating:4.7,phone:"(555) 456-7890",hours:"9:00 AM - 9:00 PM",isOpen:!1,services:["Prescription","OTC","Consultation","Delivery"]}].filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.address.toLowerCase().includes(e.toLowerCase()));return a.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Pharmacy Near Me"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Find nearby pharmacies and medical stores for your prescription needs."})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(cs,{placeholder:"Search pharmacies by name or location...",value:e,onChange:s=>t(s.target.value),className:"pl-10"})]})}),a.jsx("div",{className:"grid gap-6",children:n.length===0?a.jsx(Nt,{children:a.jsxs(jt,{className:"text-center py-12",children:[a.jsx(Ma,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No pharmacies found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})}):n.map(s=>a.jsxs(Nt,{className:"hover:shadow-md transition-shadow",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx(xn,{className:"text-xl",children:s.name}),a.jsxs(Vn,{className:"flex items-center gap-2 mt-1",children:[a.jsx(Ma,{className:"h-4 w-4"}),s.address]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ur,{variant:s.isOpen?"default":"secondary",children:s.isOpen?"Open":"Closed"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Hw,{className:"h-4 w-4 text-yellow-500 fill-current"}),a.jsx("span",{className:"text-sm font-medium",children:s.rating})]})]})]})}),a.jsxs(jt,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rC,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.phone})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.hours})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(b3,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.distance})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.services.map((i,c)=>a.jsx(Ur,{variant:"outline",className:"text-xs",children:i},c))}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(tr,{variant:"outline",size:"sm",children:"Call"}),a.jsx(tr,{variant:"outline",size:"sm",children:"Directions"}),a.jsx(tr,{size:"sm",children:"View Details"})]})]})]},s.id))})]})}function xK(){return a.jsxs(Hk,{children:[a.jsx(Tr,{path:"/",element:a.jsx(m2,{children:a.jsx(L$,{})})}),a.jsx(Tr,{path:"/about",element:a.jsx(m2,{children:a.jsx(F$,{})})}),a.jsx(Tr,{path:"/auth/*",element:a.jsx(Xq,{})}),a.jsxs(Tr,{path:"/dashboard/*",element:a.jsx(Hs,{}),children:[a.jsx(Tr,{path:"patient",element:a.jsx(Zq,{})}),a.jsx(Tr,{path:"doctor",element:a.jsx(eK,{})})]}),a.jsx(Tr,{path:"/appointments",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(fH,{})})}),a.jsx(Tr,{path:"/doctor/appointments",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(mH,{})})}),a.jsx(Tr,{path:"/doctor/appointment-history",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(gH,{})})}),a.jsx(Tr,{path:"/prescriptions",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(vH,{})})}),a.jsx(Tr,{path:"/notifications",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(cE,{})})}),a.jsx(Tr,{path:"/pending-requests",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(yH,{})})}),a.jsx(Tr,{path:"/profile",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(hH,{})})}),a.jsx(Tr,{path:"/doctors",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(dH,{})})}),a.jsx(Tr,{path:"/doctors/:id",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(uH,{})})}),a.jsx(Tr,{path:"/book-appointment/:id",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(pH,{})})}),a.jsx(Tr,{path:"/chat",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(Qq,{})})}),a.jsx(Tr,{path:"/upload-report",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(yK,{})})}),a.jsx(Tr,{path:"/appointment-history",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(bK,{})})}),a.jsx(Tr,{path:"/pharmacy",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(wK,{})})}),a.jsx(Tr,{path:"/notifications",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(cE,{})})}),a.jsx(Tr,{path:"/admin",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(QH,{})})}),a.jsx(Tr,{path:"/start-call",element:a.jsx(Hs,{}),children:a.jsx(Tr,{index:!0,element:a.jsx(mK,{})})}),a.jsx(Tr,{path:"*",element:a.jsx("div",{children:"404 - Page Not Found"})})]})}function _K(){return a.jsx(dI,{children:a.jsx(vI,{children:a.jsx(yI,{children:a.jsx(xK,{})})})})}B0.createRoot(document.getElementById("root")).render(a.jsxs(pt.StrictMode,{children:[a.jsx(D$,{richColors:!0,position:"bottom-right"}),a.jsx(_K,{})]}));
